import{r as qI,g as GI,a as hC}from"./react-vendor-Bzgz95E1.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();var Dy={exports:{}},ju={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uT;function fC(){if(uT)return ju;uT=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,a,l){var u=null;if(l!==void 0&&(u=""+l),a.key!==void 0&&(u=""+a.key),"key"in a){l={};for(var h in a)h!=="key"&&(l[h]=a[h])}else l=a;return a=l.ref,{$$typeof:n,type:r,key:u,ref:a!==void 0?a:null,props:l}}return ju.Fragment=e,ju.jsx=t,ju.jsxs=t,ju}var dT;function mC(){return dT||(dT=1,Dy.exports=fC()),Dy.exports}var p=mC(),se=qI();const Gm=GI(se);var Py={exports:{}},Lu={},Oy={exports:{}},Vy={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hT;function gC(){return hT||(hT=1,(function(n){function e(K,le){var ve=K.length;K.push(le);e:for(;0<ve;){var Le=ve-1>>>1,Ge=K[Le];if(0<a(Ge,le))K[Le]=le,K[ve]=Ge,ve=Le;else break e}}function t(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var le=K[0],ve=K.pop();if(ve!==le){K[0]=ve;e:for(var Le=0,Ge=K.length,ue=Ge>>>1;Le<ue;){var Re=2*(Le+1)-1,Se=K[Re],st=Re+1,rn=K[st];if(0>a(Se,ve))st<Ge&&0>a(rn,Se)?(K[Le]=rn,K[st]=ve,Le=st):(K[Le]=Se,K[Re]=ve,Le=Re);else if(st<Ge&&0>a(rn,ve))K[Le]=rn,K[st]=ve,Le=st;else break e}}return le}function a(K,le){var ve=K.sortIndex-le.sortIndex;return ve!==0?ve:K.id-le.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var u=Date,h=u.now();n.unstable_now=function(){return u.now()-h}}var m=[],y=[],v=1,x=null,T=3,R=!1,V=!1,U=!1,M=!1,W=typeof setTimeout=="function"?setTimeout:null,Y=typeof clearTimeout=="function"?clearTimeout:null,X=typeof setImmediate<"u"?setImmediate:null;function oe(K){for(var le=t(y);le!==null;){if(le.callback===null)r(y);else if(le.startTime<=K)r(y),le.sortIndex=le.expirationTime,e(m,le);else break;le=t(y)}}function ye(K){if(U=!1,oe(K),!V)if(t(m)!==null)V=!0,he||(he=!0,L());else{var le=t(y);le!==null&&wt(ye,le.startTime-K)}}var he=!1,C=-1,A=5,S=-1;function k(){return M?!0:!(n.unstable_now()-S<A)}function P(){if(M=!1,he){var K=n.unstable_now();S=K;var le=!0;try{e:{V=!1,U&&(U=!1,Y(C),C=-1),R=!0;var ve=T;try{t:{for(oe(K),x=t(m);x!==null&&!(x.expirationTime>K&&k());){var Le=x.callback;if(typeof Le=="function"){x.callback=null,T=x.priorityLevel;var Ge=Le(x.expirationTime<=K);if(K=n.unstable_now(),typeof Ge=="function"){x.callback=Ge,oe(K),le=!0;break t}x===t(m)&&r(m),oe(K)}else r(m);x=t(m)}if(x!==null)le=!0;else{var ue=t(y);ue!==null&&wt(ye,ue.startTime-K),le=!1}}break e}finally{x=null,T=ve,R=!1}le=void 0}}finally{le?L():he=!1}}}var L;if(typeof X=="function")L=function(){X(P)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,tt=N.port2;N.port1.onmessage=P,L=function(){tt.postMessage(null)}}else L=function(){W(P,0)};function wt(K,le){C=W(function(){K(n.unstable_now())},le)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(K){K.callback=null},n.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<K?Math.floor(1e3/K):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_next=function(K){switch(T){case 1:case 2:case 3:var le=3;break;default:le=T}var ve=T;T=le;try{return K()}finally{T=ve}},n.unstable_requestPaint=function(){M=!0},n.unstable_runWithPriority=function(K,le){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var ve=T;T=K;try{return le()}finally{T=ve}},n.unstable_scheduleCallback=function(K,le,ve){var Le=n.unstable_now();switch(typeof ve=="object"&&ve!==null?(ve=ve.delay,ve=typeof ve=="number"&&0<ve?Le+ve:Le):ve=Le,K){case 1:var Ge=-1;break;case 2:Ge=250;break;case 5:Ge=1073741823;break;case 4:Ge=1e4;break;default:Ge=5e3}return Ge=ve+Ge,K={id:v++,callback:le,priorityLevel:K,startTime:ve,expirationTime:Ge,sortIndex:-1},ve>Le?(K.sortIndex=ve,e(y,K),t(m)===null&&K===t(y)&&(U?(Y(C),C=-1):U=!0,wt(ye,ve-Le))):(K.sortIndex=Ge,e(m,K),V||R||(V=!0,he||(he=!0,L()))),K},n.unstable_shouldYield=k,n.unstable_wrapCallback=function(K){var le=T;return function(){var ve=T;T=le;try{return K.apply(this,arguments)}finally{T=ve}}}})(Vy)),Vy}var fT;function pC(){return fT||(fT=1,Oy.exports=gC()),Oy.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mT;function yC(){if(mT)return Lu;mT=1;var n=pC(),e=qI(),t=hC();function r(s){var i="https://react.dev/errors/"+s;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+s+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function l(s){var i=s,o=s;if(s.alternate)for(;i.return;)i=i.return;else{s=i;do i=s,(i.flags&4098)!==0&&(o=i.return),s=i.return;while(s)}return i.tag===3?o:null}function u(s){if(s.tag===13){var i=s.memoizedState;if(i===null&&(s=s.alternate,s!==null&&(i=s.memoizedState)),i!==null)return i.dehydrated}return null}function h(s){if(s.tag===31){var i=s.memoizedState;if(i===null&&(s=s.alternate,s!==null&&(i=s.memoizedState)),i!==null)return i.dehydrated}return null}function m(s){if(l(s)!==s)throw Error(r(188))}function y(s){var i=s.alternate;if(!i){if(i=l(s),i===null)throw Error(r(188));return i!==s?null:s}for(var o=s,c=i;;){var f=o.return;if(f===null)break;var g=f.alternate;if(g===null){if(c=f.return,c!==null){o=c;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===o)return m(f),s;if(g===c)return m(f),i;g=g.sibling}throw Error(r(188))}if(o.return!==c.return)o=f,c=g;else{for(var b=!1,E=f.child;E;){if(E===o){b=!0,o=f,c=g;break}if(E===c){b=!0,c=f,o=g;break}E=E.sibling}if(!b){for(E=g.child;E;){if(E===o){b=!0,o=g,c=f;break}if(E===c){b=!0,c=g,o=f;break}E=E.sibling}if(!b)throw Error(r(189))}}if(o.alternate!==c)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?s:i}function v(s){var i=s.tag;if(i===5||i===26||i===27||i===6)return s;for(s=s.child;s!==null;){if(i=v(s),i!==null)return i;s=s.sibling}return null}var x=Object.assign,T=Symbol.for("react.element"),R=Symbol.for("react.transitional.element"),V=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),W=Symbol.for("react.profiler"),Y=Symbol.for("react.consumer"),X=Symbol.for("react.context"),oe=Symbol.for("react.forward_ref"),ye=Symbol.for("react.suspense"),he=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),k=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function L(s){return s===null||typeof s!="object"?null:(s=P&&s[P]||s["@@iterator"],typeof s=="function"?s:null)}var N=Symbol.for("react.client.reference");function tt(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===N?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case U:return"Fragment";case W:return"Profiler";case M:return"StrictMode";case ye:return"Suspense";case he:return"SuspenseList";case S:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case V:return"Portal";case X:return s.displayName||"Context";case Y:return(s._context.displayName||"Context")+".Consumer";case oe:var i=s.render;return s=s.displayName,s||(s=i.displayName||i.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case C:return i=s.displayName||null,i!==null?i:tt(s.type)||"Memo";case A:i=s._payload,s=s._init;try{return tt(s(i))}catch{}}return null}var wt=Array.isArray,K=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ve={pending:!1,data:null,method:null,action:null},Le=[],Ge=-1;function ue(s){return{current:s}}function Re(s){0>Ge||(s.current=Le[Ge],Le[Ge]=null,Ge--)}function Se(s,i){Ge++,Le[Ge]=s.current,s.current=i}var st=ue(null),rn=ue(null),ir=ue(null),di=ue(null);function hi(s,i){switch(Se(ir,i),Se(rn,s),Se(st,null),i.nodeType){case 9:case 11:s=(s=i.documentElement)&&(s=s.namespaceURI)?P0(s):0;break;default:if(s=i.tagName,i=i.namespaceURI)i=P0(i),s=O0(i,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}Re(st),Se(st,s)}function As(){Re(st),Re(rn),Re(ir)}function Dc(s){s.memoizedState!==null&&Se(di,s);var i=st.current,o=O0(i,s.type);i!==o&&(Se(rn,s),Se(st,o))}function Uo(s){rn.current===s&&(Re(st),Re(rn)),di.current===s&&(Re(di),Pu._currentValue=ve)}var zo,Bo;function Br(s){if(zo===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);zo=i&&i[1]||"",Bo=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+zo+s+Bo}var Pc=!1;function Aa(s,i){if(!s||Pc)return"";Pc=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(i){var ee=function(){throw Error()};if(Object.defineProperty(ee.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ee,[])}catch($){var G=$}Reflect.construct(s,[],ee)}else{try{ee.call()}catch($){G=$}s.call(ee.prototype)}}else{try{throw Error()}catch($){G=$}(ee=s())&&typeof ee.catch=="function"&&ee.catch(function(){})}}catch($){if($&&G&&typeof $.stack=="string")return[$.stack,G.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=c.DetermineComponentFrameRoot(),b=g[0],E=g[1];if(b&&E){var D=b.split(`
`),q=E.split(`
`);for(f=c=0;c<D.length&&!D[c].includes("DetermineComponentFrameRoot");)c++;for(;f<q.length&&!q[f].includes("DetermineComponentFrameRoot");)f++;if(c===D.length||f===q.length)for(c=D.length-1,f=q.length-1;1<=c&&0<=f&&D[c]!==q[f];)f--;for(;1<=c&&0<=f;c--,f--)if(D[c]!==q[f]){if(c!==1||f!==1)do if(c--,f--,0>f||D[c]!==q[f]){var J=`
`+D[c].replace(" at new "," at ");return s.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",s.displayName)),J}while(1<=c&&0<=f);break}}}finally{Pc=!1,Error.prepareStackTrace=o}return(o=s?s.displayName||s.name:"")?Br(o):""}function Oc(s,i){switch(s.tag){case 26:case 27:case 5:return Br(s.type);case 16:return Br("Lazy");case 13:return s.child!==i&&i!==null?Br("Suspense Fallback"):Br("Suspense");case 19:return Br("SuspenseList");case 0:case 15:return Aa(s.type,!1);case 11:return Aa(s.type.render,!1);case 1:return Aa(s.type,!0);case 31:return Br("Activity");default:return""}}function Vc(s){try{var i="",o=null;do i+=Oc(s,o),o=s,s=s.return;while(s);return i}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Vt=Object.prototype.hasOwnProperty,Qt=n.unstable_scheduleCallback,fi=n.unstable_cancelCallback,Og=n.unstable_shouldYield,fh=n.unstable_requestPaint,wn=n.unstable_now,Sa=n.unstable_getCurrentPriorityLevel,Mc=n.unstable_ImmediatePriority,jc=n.unstable_UserBlockingPriority,mi=n.unstable_NormalPriority,Vg=n.unstable_LowPriority,mh=n.unstable_IdlePriority,gh=n.log,ph=n.unstable_setDisableYieldValue,Er=null,sn=null;function ar(s){if(typeof gh=="function"&&ph(s),sn&&typeof sn.setStrictMode=="function")try{sn.setStrictMode(Er,s)}catch{}}var Rt=Math.clz32?Math.clz32:_h,yh=Math.log,Fo=Math.LN2;function _h(s){return s>>>=0,s===0?32:31-(yh(s)/Fo|0)|0}var Fr=256,Ra=262144,Mt=4194304;function qr(s){var i=s&42;if(i!==0)return i;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Gr(s,i,o){var c=s.pendingLanes;if(c===0)return 0;var f=0,g=s.suspendedLanes,b=s.pingedLanes;s=s.warmLanes;var E=c&134217727;return E!==0?(c=E&~g,c!==0?f=qr(c):(b&=E,b!==0?f=qr(b):o||(o=E&~s,o!==0&&(f=qr(o))))):(E=c&~g,E!==0?f=qr(E):b!==0?f=qr(b):o||(o=c&~s,o!==0&&(f=qr(o)))),f===0?0:i!==0&&i!==f&&(i&g)===0&&(g=f&-f,o=i&-i,g>=o||g===32&&(o&4194048)!==0)?i:f}function Ir(s,i){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&i)===0}function Mg(s,i){switch(s){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vh(){var s=Mt;return Mt<<=1,(Mt&62914560)===0&&(Mt=4194304),s}function Hr(s){for(var i=[],o=0;31>o;o++)i.push(s);return i}function Na(s,i){s.pendingLanes|=i,i!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function jg(s,i,o,c,f,g){var b=s.pendingLanes;s.pendingLanes=o,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=o,s.entangledLanes&=o,s.errorRecoveryDisabledLanes&=o,s.shellSuspendCounter=0;var E=s.entanglements,D=s.expirationTimes,q=s.hiddenUpdates;for(o=b&~o;0<o;){var J=31-Rt(o),ee=1<<J;E[J]=0,D[J]=-1;var G=q[J];if(G!==null)for(q[J]=null,J=0;J<G.length;J++){var $=G[J];$!==null&&($.lane&=-536870913)}o&=~ee}c!==0&&ka(s,c,0),g!==0&&f===0&&s.tag!==0&&(s.suspendedLanes|=g&~(b&~i))}function ka(s,i,o){s.pendingLanes|=i,s.suspendedLanes&=~i;var c=31-Rt(i);s.entangledLanes|=i,s.entanglements[c]=s.entanglements[c]|1073741824|o&261930}function Lc(s,i){var o=s.entangledLanes|=i;for(s=s.entanglements;o;){var c=31-Rt(o),f=1<<c;f&i|s[c]&i&&(s[c]|=i),o&=~f}}function Uc(s,i){var o=i&-i;return o=(o&42)!==0?1:Ca(o),(o&(s.suspendedLanes|i))!==0?0:o}function Ca(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Ss(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function bh(){var s=le.p;return s!==0?s:(s=window.event,s===void 0?32:rT(s.type))}function Ar(s,i){var o=le.p;try{return le.p=s,i()}finally{le.p=o}}var Sr=Math.random().toString(36).slice(2),jt="__reactFiber$"+Sr,Xt="__reactProps$"+Sr,Kr="__reactContainer$"+Sr,qo="__reactEvents$"+Sr,Lg="__reactListeners$"+Sr,xh="__reactHandles$"+Sr,wh="__reactResources$"+Sr,Qr="__reactMarker$"+Sr;function Go(s){delete s[jt],delete s[Xt],delete s[qo],delete s[Lg],delete s[xh]}function $r(s){var i=s[jt];if(i)return i;for(var o=s.parentNode;o;){if(i=o[Kr]||o[jt]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(s=B0(s);s!==null;){if(o=s[jt])return o;s=B0(s)}return i}s=o,o=s.parentNode}return null}function or(s){if(s=s[jt]||s[Kr]){var i=s.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return s}return null}function Fn(s){var i=s.tag;if(i===5||i===26||i===27||i===6)return s.stateNode;throw Error(r(33))}function Yr(s){var i=s[wh];return i||(i=s[wh]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Lt(s){s[Qr]=!0}var zc=new Set,Bc={};function Wr(s,i){Xr(s,i),Xr(s+"Capture",i)}function Xr(s,i){for(Bc[s]=i,s=0;s<i.length;s++)zc.add(i[s])}var Fc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),qc={},Gc={};function Th(s){return Vt.call(Gc,s)?!0:Vt.call(qc,s)?!1:Fc.test(s)?Gc[s]=!0:(qc[s]=!0,!1)}function Ho(s,i,o){if(Th(i))if(o===null)s.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":s.removeAttribute(i);return;case"boolean":var c=i.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){s.removeAttribute(i);return}}s.setAttribute(i,""+o)}}function qn(s,i,o){if(o===null)s.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(i);return}s.setAttribute(i,""+o)}}function Ut(s,i,o,c){if(c===null)s.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(o);return}s.setAttributeNS(i,o,""+c)}}function Jt(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function gi(s){var i=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Hc(s,i,o){var c=Object.getOwnPropertyDescriptor(s.constructor.prototype,i);if(!s.hasOwnProperty(i)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var f=c.get,g=c.set;return Object.defineProperty(s,i,{configurable:!0,get:function(){return f.call(this)},set:function(b){o=""+b,g.call(this,b)}}),Object.defineProperty(s,i,{enumerable:c.enumerable}),{getValue:function(){return o},setValue:function(b){o=""+b},stopTracking:function(){s._valueTracker=null,delete s[i]}}}}function Ke(s){if(!s._valueTracker){var i=gi(s)?"checked":"value";s._valueTracker=Hc(s,i,""+s[i])}}function Da(s){if(!s)return!1;var i=s._valueTracker;if(!i)return!0;var o=i.getValue(),c="";return s&&(c=gi(s)?s.checked?"true":"false":s.value),s=c,s!==o?(i.setValue(s),!0):!1}function Jr(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Pa=/[\n"\\]/g;function Cn(s){return s.replace(Pa,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Ko(s,i,o,c,f,g,b,E){s.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?s.type=b:s.removeAttribute("type"),i!=null?b==="number"?(i===0&&s.value===""||s.value!=i)&&(s.value=""+Jt(i)):s.value!==""+Jt(i)&&(s.value=""+Jt(i)):b!=="submit"&&b!=="reset"||s.removeAttribute("value"),i!=null?Kc(s,b,Jt(i)):o!=null?Kc(s,b,Jt(o)):c!=null&&s.removeAttribute("value"),f==null&&g!=null&&(s.defaultChecked=!!g),f!=null&&(s.checked=f&&typeof f!="function"&&typeof f!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?s.name=""+Jt(E):s.removeAttribute("name")}function Eh(s,i,o,c,f,g,b,E){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(s.type=g),i!=null||o!=null){if(!(g!=="submit"&&g!=="reset"||i!=null)){Ke(s);return}o=o!=null?""+Jt(o):"",i=i!=null?""+Jt(i):o,E||i===s.value||(s.value=i),s.defaultValue=i}c=c??f,c=typeof c!="function"&&typeof c!="symbol"&&!!c,s.checked=E?s.checked:!!c,s.defaultChecked=!!c,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(s.name=b),Ke(s)}function Kc(s,i,o){i==="number"&&Jr(s.ownerDocument)===s||s.defaultValue===""+o||(s.defaultValue=""+o)}function pi(s,i,o,c){if(s=s.options,i){i={};for(var f=0;f<o.length;f++)i["$"+o[f]]=!0;for(o=0;o<s.length;o++)f=i.hasOwnProperty("$"+s[o].value),s[o].selected!==f&&(s[o].selected=f),f&&c&&(s[o].defaultSelected=!0)}else{for(o=""+Jt(o),i=null,f=0;f<s.length;f++){if(s[f].value===o){s[f].selected=!0,c&&(s[f].defaultSelected=!0);return}i!==null||s[f].disabled||(i=s[f])}i!==null&&(i.selected=!0)}}function Ih(s,i,o){if(i!=null&&(i=""+Jt(i),i!==s.value&&(s.value=i),o==null)){s.defaultValue!==i&&(s.defaultValue=i);return}s.defaultValue=o!=null?""+Jt(o):""}function yi(s,i,o,c){if(i==null){if(c!=null){if(o!=null)throw Error(r(92));if(wt(c)){if(1<c.length)throw Error(r(93));c=c[0]}o=c}o==null&&(o=""),i=o}o=Jt(i),s.defaultValue=o,c=s.textContent,c===o&&c!==""&&c!==null&&(s.value=c),Ke(s)}function Dn(s,i){if(i){var o=s.firstChild;if(o&&o===s.lastChild&&o.nodeType===3){o.nodeValue=i;return}}s.textContent=i}var Ah=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Qc(s,i,o){var c=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?c?s.setProperty(i,""):i==="float"?s.cssFloat="":s[i]="":c?s.setProperty(i,o):typeof o!="number"||o===0||Ah.has(i)?i==="float"?s.cssFloat=o:s[i]=(""+o).trim():s[i]=o+"px"}function $c(s,i,o){if(i!=null&&typeof i!="object")throw Error(r(62));if(s=s.style,o!=null){for(var c in o)!o.hasOwnProperty(c)||i!=null&&i.hasOwnProperty(c)||(c.indexOf("--")===0?s.setProperty(c,""):c==="float"?s.cssFloat="":s[c]="");for(var f in i)c=i[f],i.hasOwnProperty(f)&&o[f]!==c&&Qc(s,f,c)}else for(var g in i)i.hasOwnProperty(g)&&Qc(s,g,i[g])}function Qo(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Sh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),_i=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function $o(s){return _i.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Rr(){}var Yc=null;function lr(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var vi=null,Zr=null;function Oa(s){var i=or(s);if(i&&(s=i.stateNode)){var o=s[Xt]||null;e:switch(s=i.stateNode,i.type){case"input":if(Ko(s,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=s;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Cn(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var c=o[i];if(c!==s&&c.form===s.form){var f=c[Xt]||null;if(!f)throw Error(r(90));Ko(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<o.length;i++)c=o[i],c.form===s.form&&Da(c)}break e;case"textarea":Ih(s,o.value,o.defaultValue);break e;case"select":i=o.value,i!=null&&pi(s,!!o.multiple,i,!1)}}}var Yo=!1;function bi(s,i,o){if(Yo)return s(i,o);Yo=!0;try{var c=s(i);return c}finally{if(Yo=!1,(vi!==null||Zr!==null)&&(xf(),vi&&(i=vi,s=Zr,Zr=vi=null,Oa(i),s)))for(i=0;i<s.length;i++)Oa(s[i])}}function Nr(s,i){var o=s.stateNode;if(o===null)return null;var c=o[Xt]||null;if(c===null)return null;o=c[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(s=s.type,c=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!c;break e;default:s=!1}if(s)return null;if(o&&typeof o!="function")throw Error(r(231,i,typeof o));return o}var cr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Va=!1;if(cr)try{var Xe={};Object.defineProperty(Xe,"passive",{get:function(){Va=!0}}),window.addEventListener("test",Xe,Xe),window.removeEventListener("test",Xe,Xe)}catch{Va=!1}var es=null,Wc=null,Ma=null;function Xc(){if(Ma)return Ma;var s,i=Wc,o=i.length,c,f="value"in es?es.value:es.textContent,g=f.length;for(s=0;s<o&&i[s]===f[s];s++);var b=o-s;for(c=1;c<=b&&i[o-c]===f[g-c];c++);return Ma=f.slice(s,1<c?1-c:void 0)}function ja(s){var i=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&i===13&&(s=13)):s=i,s===10&&(s=13),32<=s||s===13?s:0}function Rs(){return!0}function kr(){return!1}function an(s){function i(o,c,f,g,b){this._reactName=o,this._targetInst=f,this.type=c,this.nativeEvent=g,this.target=b,this.currentTarget=null;for(var E in s)s.hasOwnProperty(E)&&(o=s[E],this[E]=o?o(g):g[E]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Rs:kr,this.isPropagationStopped=kr,this}return x(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Rs)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Rs)},persist:function(){},isPersistent:Rs}),i}var Ns={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ts=an(Ns),xi=x({},Ns,{view:0,detail:0}),Jc=an(xi),wi,Wo,ns,Xo=x({},xi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ti,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==ns&&(ns&&s.type==="mousemove"?(wi=s.screenX-ns.screenX,Wo=s.screenY-ns.screenY):Wo=wi=0,ns=s),wi)},movementY:function(s){return"movementY"in s?s.movementY:Wo}}),Zc=an(Xo),La=x({},Xo,{dataTransfer:0}),Rh=an(La),Nh=x({},xi,{relatedTarget:0}),Ua=an(Nh),eu=x({},Ns,{animationName:0,elapsedTime:0,pseudoElement:0}),kh=an(eu),Jo=x({},Ns,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Ch=an(Jo),Dh=x({},Ns,{data:0}),rs=an(Dh),Ph={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Oh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Vh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Mh(s){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(s):(s=Vh[s])?!!i[s]:!1}function Ti(){return Mh}var Tn=x({},xi,{key:function(s){if(s.key){var i=Ph[s.key]||s.key;if(i!=="Unidentified")return i}return s.type==="keypress"?(s=ja(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Oh[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ti,charCode:function(s){return s.type==="keypress"?ja(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?ja(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),jh=an(Tn),Lh=x({},Xo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ks=an(Lh),d=x({},xi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ti}),_=an(d),w=x({},Ns,{propertyName:0,elapsedTime:0,pseudoElement:0}),I=an(w),B=x({},Xo,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Q=an(B),ie=x({},Ns,{newState:0,oldState:0}),Te=an(ie),Nt=[9,13,27,32],Fe=cr&&"CompositionEvent"in window,ft=null;cr&&"documentMode"in document&&(ft=document.documentMode);var ur=cr&&"TextEvent"in window&&!ft,ss=cr&&(!Fe||ft&&8<ft&&11>=ft),Cr=" ",Dr=!1;function za(s,i){switch(s){case"keyup":return Nt.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zo(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var el=!1;function MN(s,i){switch(s){case"compositionend":return Zo(i);case"keypress":return i.which!==32?null:(Dr=!0,Cr);case"textInput":return s=i.data,s===Cr&&Dr?null:s;default:return null}}function jN(s,i){if(el)return s==="compositionend"||!Fe&&za(s,i)?(s=Xc(),Ma=Wc=es=null,el=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return ss&&i.locale!=="ko"?null:i.data;default:return null}}var LN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gb(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i==="input"?!!LN[s.type]:i==="textarea"}function Hb(s,i,o,c){vi?Zr?Zr.push(c):Zr=[c]:vi=c,i=Rf(i,"onChange"),0<i.length&&(o=new ts("onChange","change",null,o,c),s.push({event:o,listeners:i}))}var tu=null,nu=null;function UN(s){S0(s,0)}function Uh(s){var i=Fn(s);if(Da(i))return s}function Kb(s,i){if(s==="change")return i}var Qb=!1;if(cr){var Ug;if(cr){var zg="oninput"in document;if(!zg){var $b=document.createElement("div");$b.setAttribute("oninput","return;"),zg=typeof $b.oninput=="function"}Ug=zg}else Ug=!1;Qb=Ug&&(!document.documentMode||9<document.documentMode)}function Yb(){tu&&(tu.detachEvent("onpropertychange",Wb),nu=tu=null)}function Wb(s){if(s.propertyName==="value"&&Uh(nu)){var i=[];Hb(i,nu,s,lr(s)),bi(UN,i)}}function zN(s,i,o){s==="focusin"?(Yb(),tu=i,nu=o,tu.attachEvent("onpropertychange",Wb)):s==="focusout"&&Yb()}function BN(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Uh(nu)}function FN(s,i){if(s==="click")return Uh(i)}function qN(s,i){if(s==="input"||s==="change")return Uh(i)}function GN(s,i){return s===i&&(s!==0||1/s===1/i)||s!==s&&i!==i}var Gn=typeof Object.is=="function"?Object.is:GN;function ru(s,i){if(Gn(s,i))return!0;if(typeof s!="object"||s===null||typeof i!="object"||i===null)return!1;var o=Object.keys(s),c=Object.keys(i);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var f=o[c];if(!Vt.call(i,f)||!Gn(s[f],i[f]))return!1}return!0}function Xb(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Jb(s,i){var o=Xb(s);s=0;for(var c;o;){if(o.nodeType===3){if(c=s+o.textContent.length,s<=i&&c>=i)return{node:o,offset:i-s};s=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Xb(o)}}function Zb(s,i){return s&&i?s===i?!0:s&&s.nodeType===3?!1:i&&i.nodeType===3?Zb(s,i.parentNode):"contains"in s?s.contains(i):s.compareDocumentPosition?!!(s.compareDocumentPosition(i)&16):!1:!1}function ex(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var i=Jr(s.document);i instanceof s.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)s=i.contentWindow;else break;i=Jr(s.document)}return i}function Bg(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i&&(i==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||i==="textarea"||s.contentEditable==="true")}var HN=cr&&"documentMode"in document&&11>=document.documentMode,tl=null,Fg=null,su=null,qg=!1;function tx(s,i,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;qg||tl==null||tl!==Jr(c)||(c=tl,"selectionStart"in c&&Bg(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),su&&ru(su,c)||(su=c,c=Rf(Fg,"onSelect"),0<c.length&&(i=new ts("onSelect","select",null,i,o),s.push({event:i,listeners:c}),i.target=tl)))}function Ba(s,i){var o={};return o[s.toLowerCase()]=i.toLowerCase(),o["Webkit"+s]="webkit"+i,o["Moz"+s]="moz"+i,o}var nl={animationend:Ba("Animation","AnimationEnd"),animationiteration:Ba("Animation","AnimationIteration"),animationstart:Ba("Animation","AnimationStart"),transitionrun:Ba("Transition","TransitionRun"),transitionstart:Ba("Transition","TransitionStart"),transitioncancel:Ba("Transition","TransitionCancel"),transitionend:Ba("Transition","TransitionEnd")},Gg={},nx={};cr&&(nx=document.createElement("div").style,"AnimationEvent"in window||(delete nl.animationend.animation,delete nl.animationiteration.animation,delete nl.animationstart.animation),"TransitionEvent"in window||delete nl.transitionend.transition);function Fa(s){if(Gg[s])return Gg[s];if(!nl[s])return s;var i=nl[s],o;for(o in i)if(i.hasOwnProperty(o)&&o in nx)return Gg[s]=i[o];return s}var rx=Fa("animationend"),sx=Fa("animationiteration"),ix=Fa("animationstart"),KN=Fa("transitionrun"),QN=Fa("transitionstart"),$N=Fa("transitioncancel"),ax=Fa("transitionend"),ox=new Map,Hg="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Hg.push("scrollEnd");function Pr(s,i){ox.set(s,i),Wr(i,[s])}var zh=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},dr=[],rl=0,Kg=0;function Bh(){for(var s=rl,i=Kg=rl=0;i<s;){var o=dr[i];dr[i++]=null;var c=dr[i];dr[i++]=null;var f=dr[i];dr[i++]=null;var g=dr[i];if(dr[i++]=null,c!==null&&f!==null){var b=c.pending;b===null?f.next=f:(f.next=b.next,b.next=f),c.pending=f}g!==0&&lx(o,f,g)}}function Fh(s,i,o,c){dr[rl++]=s,dr[rl++]=i,dr[rl++]=o,dr[rl++]=c,Kg|=c,s.lanes|=c,s=s.alternate,s!==null&&(s.lanes|=c)}function Qg(s,i,o,c){return Fh(s,i,o,c),qh(s)}function qa(s,i){return Fh(s,null,null,i),qh(s)}function lx(s,i,o){s.lanes|=o;var c=s.alternate;c!==null&&(c.lanes|=o);for(var f=!1,g=s.return;g!==null;)g.childLanes|=o,c=g.alternate,c!==null&&(c.childLanes|=o),g.tag===22&&(s=g.stateNode,s===null||s._visibility&1||(f=!0)),s=g,g=g.return;return s.tag===3?(g=s.stateNode,f&&i!==null&&(f=31-Rt(o),s=g.hiddenUpdates,c=s[f],c===null?s[f]=[i]:c.push(i),i.lane=o|536870912),g):null}function qh(s){if(50<Au)throw Au=0,ny=null,Error(r(185));for(var i=s.return;i!==null;)s=i,i=s.return;return s.tag===3?s.stateNode:null}var sl={};function YN(s,i,o,c){this.tag=s,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hn(s,i,o,c){return new YN(s,i,o,c)}function $g(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Cs(s,i){var o=s.alternate;return o===null?(o=Hn(s.tag,i,s.key,s.mode),o.elementType=s.elementType,o.type=s.type,o.stateNode=s.stateNode,o.alternate=s,s.alternate=o):(o.pendingProps=i,o.type=s.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=s.flags&65011712,o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,i=s.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=s.sibling,o.index=s.index,o.ref=s.ref,o.refCleanup=s.refCleanup,o}function cx(s,i){s.flags&=65011714;var o=s.alternate;return o===null?(s.childLanes=0,s.lanes=i,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,i=o.dependencies,s.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),s}function Gh(s,i,o,c,f,g){var b=0;if(c=s,typeof s=="function")$g(s)&&(b=1);else if(typeof s=="string")b=eC(s,o,st.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case S:return s=Hn(31,o,i,f),s.elementType=S,s.lanes=g,s;case U:return Ga(o.children,f,g,i);case M:b=8,f|=24;break;case W:return s=Hn(12,o,i,f|2),s.elementType=W,s.lanes=g,s;case ye:return s=Hn(13,o,i,f),s.elementType=ye,s.lanes=g,s;case he:return s=Hn(19,o,i,f),s.elementType=he,s.lanes=g,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case X:b=10;break e;case Y:b=9;break e;case oe:b=11;break e;case C:b=14;break e;case A:b=16,c=null;break e}b=29,o=Error(r(130,s===null?"null":typeof s,"")),c=null}return i=Hn(b,o,i,f),i.elementType=s,i.type=c,i.lanes=g,i}function Ga(s,i,o,c){return s=Hn(7,s,c,i),s.lanes=o,s}function Yg(s,i,o){return s=Hn(6,s,null,i),s.lanes=o,s}function ux(s){var i=Hn(18,null,null,0);return i.stateNode=s,i}function Wg(s,i,o){return i=Hn(4,s.children!==null?s.children:[],s.key,i),i.lanes=o,i.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},i}var dx=new WeakMap;function hr(s,i){if(typeof s=="object"&&s!==null){var o=dx.get(s);return o!==void 0?o:(i={value:s,source:i,stack:Vc(i)},dx.set(s,i),i)}return{value:s,source:i,stack:Vc(i)}}var il=[],al=0,Hh=null,iu=0,fr=[],mr=0,Ei=null,is=1,as="";function Ds(s,i){il[al++]=iu,il[al++]=Hh,Hh=s,iu=i}function hx(s,i,o){fr[mr++]=is,fr[mr++]=as,fr[mr++]=Ei,Ei=s;var c=is;s=as;var f=32-Rt(c)-1;c&=~(1<<f),o+=1;var g=32-Rt(i)+f;if(30<g){var b=f-f%5;g=(c&(1<<b)-1).toString(32),c>>=b,f-=b,is=1<<32-Rt(i)+f|o<<f|c,as=g+s}else is=1<<g|o<<f|c,as=s}function Xg(s){s.return!==null&&(Ds(s,1),hx(s,1,0))}function Jg(s){for(;s===Hh;)Hh=il[--al],il[al]=null,iu=il[--al],il[al]=null;for(;s===Ei;)Ei=fr[--mr],fr[mr]=null,as=fr[--mr],fr[mr]=null,is=fr[--mr],fr[mr]=null}function fx(s,i){fr[mr++]=is,fr[mr++]=as,fr[mr++]=Ei,is=i.id,as=i.overflow,Ei=s}var on=null,ot=null,Me=!1,Ii=null,gr=!1,Zg=Error(r(519));function Ai(s){var i=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw au(hr(i,s)),Zg}function mx(s){var i=s.stateNode,o=s.type,c=s.memoizedProps;switch(i[jt]=s,i[Xt]=c,o){case"dialog":ke("cancel",i),ke("close",i);break;case"iframe":case"object":case"embed":ke("load",i);break;case"video":case"audio":for(o=0;o<Ru.length;o++)ke(Ru[o],i);break;case"source":ke("error",i);break;case"img":case"image":case"link":ke("error",i),ke("load",i);break;case"details":ke("toggle",i);break;case"input":ke("invalid",i),Eh(i,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":ke("invalid",i);break;case"textarea":ke("invalid",i),yi(i,c.value,c.defaultValue,c.children)}o=c.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||c.suppressHydrationWarning===!0||C0(i.textContent,o)?(c.popover!=null&&(ke("beforetoggle",i),ke("toggle",i)),c.onScroll!=null&&ke("scroll",i),c.onScrollEnd!=null&&ke("scrollend",i),c.onClick!=null&&(i.onclick=Rr),i=!0):i=!1,i||Ai(s,!0)}function gx(s){for(on=s.return;on;)switch(on.tag){case 5:case 31:case 13:gr=!1;return;case 27:case 3:gr=!0;return;default:on=on.return}}function ol(s){if(s!==on)return!1;if(!Me)return gx(s),Me=!0,!1;var i=s.tag,o;if((o=i!==3&&i!==27)&&((o=i===5)&&(o=s.type,o=!(o!=="form"&&o!=="button")||yy(s.type,s.memoizedProps)),o=!o),o&&ot&&Ai(s),gx(s),i===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));ot=z0(s)}else if(i===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));ot=z0(s)}else i===27?(i=ot,zi(s.type)?(s=wy,wy=null,ot=s):ot=i):ot=on?yr(s.stateNode.nextSibling):null;return!0}function Ha(){ot=on=null,Me=!1}function ep(){var s=Ii;return s!==null&&(Mn===null?Mn=s:Mn.push.apply(Mn,s),Ii=null),s}function au(s){Ii===null?Ii=[s]:Ii.push(s)}var tp=ue(null),Ka=null,Ps=null;function Si(s,i,o){Se(tp,i._currentValue),i._currentValue=o}function Os(s){s._currentValue=tp.current,Re(tp)}function np(s,i,o){for(;s!==null;){var c=s.alternate;if((s.childLanes&i)!==i?(s.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),s===o)break;s=s.return}}function rp(s,i,o,c){var f=s.child;for(f!==null&&(f.return=s);f!==null;){var g=f.dependencies;if(g!==null){var b=f.child;g=g.firstContext;e:for(;g!==null;){var E=g;g=f;for(var D=0;D<i.length;D++)if(E.context===i[D]){g.lanes|=o,E=g.alternate,E!==null&&(E.lanes|=o),np(g.return,o,s),c||(b=null);break e}g=E.next}}else if(f.tag===18){if(b=f.return,b===null)throw Error(r(341));b.lanes|=o,g=b.alternate,g!==null&&(g.lanes|=o),np(b,o,s),b=null}else b=f.child;if(b!==null)b.return=f;else for(b=f;b!==null;){if(b===s){b=null;break}if(f=b.sibling,f!==null){f.return=b.return,b=f;break}b=b.return}f=b}}function ll(s,i,o,c){s=null;for(var f=i,g=!1;f!==null;){if(!g){if((f.flags&524288)!==0)g=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var b=f.alternate;if(b===null)throw Error(r(387));if(b=b.memoizedProps,b!==null){var E=f.type;Gn(f.pendingProps.value,b.value)||(s!==null?s.push(E):s=[E])}}else if(f===di.current){if(b=f.alternate,b===null)throw Error(r(387));b.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(s!==null?s.push(Pu):s=[Pu])}f=f.return}s!==null&&rp(i,s,o,c),i.flags|=262144}function Kh(s){for(s=s.firstContext;s!==null;){if(!Gn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Qa(s){Ka=s,Ps=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function ln(s){return px(Ka,s)}function Qh(s,i){return Ka===null&&Qa(s),px(s,i)}function px(s,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},Ps===null){if(s===null)throw Error(r(308));Ps=i,s.dependencies={lanes:0,firstContext:i},s.flags|=524288}else Ps=Ps.next=i;return o}var WN=typeof AbortController<"u"?AbortController:function(){var s=[],i=this.signal={aborted:!1,addEventListener:function(o,c){s.push(c)}};this.abort=function(){i.aborted=!0,s.forEach(function(o){return o()})}},XN=n.unstable_scheduleCallback,JN=n.unstable_NormalPriority,zt={$$typeof:X,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function sp(){return{controller:new WN,data:new Map,refCount:0}}function ou(s){s.refCount--,s.refCount===0&&XN(JN,function(){s.controller.abort()})}var lu=null,ip=0,cl=0,ul=null;function ZN(s,i){if(lu===null){var o=lu=[];ip=0,cl=ly(),ul={status:"pending",value:void 0,then:function(c){o.push(c)}}}return ip++,i.then(yx,yx),i}function yx(){if(--ip===0&&lu!==null){ul!==null&&(ul.status="fulfilled");var s=lu;lu=null,cl=0,ul=null;for(var i=0;i<s.length;i++)(0,s[i])()}}function ek(s,i){var o=[],c={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return s.then(function(){c.status="fulfilled",c.value=i;for(var f=0;f<o.length;f++)(0,o[f])(i)},function(f){for(c.status="rejected",c.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),c}var _x=K.S;K.S=function(s,i){t0=wn(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&ZN(s,i),_x!==null&&_x(s,i)};var $a=ue(null);function ap(){var s=$a.current;return s!==null?s:nt.pooledCache}function $h(s,i){i===null?Se($a,$a.current):Se($a,i.pool)}function vx(){var s=ap();return s===null?null:{parent:zt._currentValue,pool:s}}var dl=Error(r(460)),op=Error(r(474)),Yh=Error(r(542)),Wh={then:function(){}};function bx(s){return s=s.status,s==="fulfilled"||s==="rejected"}function xx(s,i,o){switch(o=s[o],o===void 0?s.push(i):o!==i&&(i.then(Rr,Rr),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw s=i.reason,Tx(s),s;default:if(typeof i.status=="string")i.then(Rr,Rr);else{if(s=nt,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=i,s.status="pending",s.then(function(c){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=c}},function(c){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=c}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw s=i.reason,Tx(s),s}throw Wa=i,dl}}function Ya(s){try{var i=s._init;return i(s._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(Wa=o,dl):o}}var Wa=null;function wx(){if(Wa===null)throw Error(r(459));var s=Wa;return Wa=null,s}function Tx(s){if(s===dl||s===Yh)throw Error(r(483))}var hl=null,cu=0;function Xh(s){var i=cu;return cu+=1,hl===null&&(hl=[]),xx(hl,s,i)}function uu(s,i){i=i.props.ref,s.ref=i!==void 0?i:null}function Jh(s,i){throw i.$$typeof===T?Error(r(525)):(s=Object.prototype.toString.call(i),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":s)))}function Ex(s){function i(j,O){if(s){var F=j.deletions;F===null?(j.deletions=[O],j.flags|=16):F.push(O)}}function o(j,O){if(!s)return null;for(;O!==null;)i(j,O),O=O.sibling;return null}function c(j){for(var O=new Map;j!==null;)j.key!==null?O.set(j.key,j):O.set(j.index,j),j=j.sibling;return O}function f(j,O){return j=Cs(j,O),j.index=0,j.sibling=null,j}function g(j,O,F){return j.index=F,s?(F=j.alternate,F!==null?(F=F.index,F<O?(j.flags|=67108866,O):F):(j.flags|=67108866,O)):(j.flags|=1048576,O)}function b(j){return s&&j.alternate===null&&(j.flags|=67108866),j}function E(j,O,F,Z){return O===null||O.tag!==6?(O=Yg(F,j.mode,Z),O.return=j,O):(O=f(O,F),O.return=j,O)}function D(j,O,F,Z){var be=F.type;return be===U?J(j,O,F.props.children,Z,F.key):O!==null&&(O.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===A&&Ya(be)===O.type)?(O=f(O,F.props),uu(O,F),O.return=j,O):(O=Gh(F.type,F.key,F.props,null,j.mode,Z),uu(O,F),O.return=j,O)}function q(j,O,F,Z){return O===null||O.tag!==4||O.stateNode.containerInfo!==F.containerInfo||O.stateNode.implementation!==F.implementation?(O=Wg(F,j.mode,Z),O.return=j,O):(O=f(O,F.children||[]),O.return=j,O)}function J(j,O,F,Z,be){return O===null||O.tag!==7?(O=Ga(F,j.mode,Z,be),O.return=j,O):(O=f(O,F),O.return=j,O)}function ee(j,O,F){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=Yg(""+O,j.mode,F),O.return=j,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case R:return F=Gh(O.type,O.key,O.props,null,j.mode,F),uu(F,O),F.return=j,F;case V:return O=Wg(O,j.mode,F),O.return=j,O;case A:return O=Ya(O),ee(j,O,F)}if(wt(O)||L(O))return O=Ga(O,j.mode,F,null),O.return=j,O;if(typeof O.then=="function")return ee(j,Xh(O),F);if(O.$$typeof===X)return ee(j,Qh(j,O),F);Jh(j,O)}return null}function G(j,O,F,Z){var be=O!==null?O.key:null;if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return be!==null?null:E(j,O,""+F,Z);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case R:return F.key===be?D(j,O,F,Z):null;case V:return F.key===be?q(j,O,F,Z):null;case A:return F=Ya(F),G(j,O,F,Z)}if(wt(F)||L(F))return be!==null?null:J(j,O,F,Z,null);if(typeof F.then=="function")return G(j,O,Xh(F),Z);if(F.$$typeof===X)return G(j,O,Qh(j,F),Z);Jh(j,F)}return null}function $(j,O,F,Z,be){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return j=j.get(F)||null,E(O,j,""+Z,be);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case R:return j=j.get(Z.key===null?F:Z.key)||null,D(O,j,Z,be);case V:return j=j.get(Z.key===null?F:Z.key)||null,q(O,j,Z,be);case A:return Z=Ya(Z),$(j,O,F,Z,be)}if(wt(Z)||L(Z))return j=j.get(F)||null,J(O,j,Z,be,null);if(typeof Z.then=="function")return $(j,O,F,Xh(Z),be);if(Z.$$typeof===X)return $(j,O,F,Qh(O,Z),be);Jh(O,Z)}return null}function fe(j,O,F,Z){for(var be=null,Ue=null,ge=O,Ae=O=0,Oe=null;ge!==null&&Ae<F.length;Ae++){ge.index>Ae?(Oe=ge,ge=null):Oe=ge.sibling;var ze=G(j,ge,F[Ae],Z);if(ze===null){ge===null&&(ge=Oe);break}s&&ge&&ze.alternate===null&&i(j,ge),O=g(ze,O,Ae),Ue===null?be=ze:Ue.sibling=ze,Ue=ze,ge=Oe}if(Ae===F.length)return o(j,ge),Me&&Ds(j,Ae),be;if(ge===null){for(;Ae<F.length;Ae++)ge=ee(j,F[Ae],Z),ge!==null&&(O=g(ge,O,Ae),Ue===null?be=ge:Ue.sibling=ge,Ue=ge);return Me&&Ds(j,Ae),be}for(ge=c(ge);Ae<F.length;Ae++)Oe=$(ge,j,Ae,F[Ae],Z),Oe!==null&&(s&&Oe.alternate!==null&&ge.delete(Oe.key===null?Ae:Oe.key),O=g(Oe,O,Ae),Ue===null?be=Oe:Ue.sibling=Oe,Ue=Oe);return s&&ge.forEach(function(Hi){return i(j,Hi)}),Me&&Ds(j,Ae),be}function xe(j,O,F,Z){if(F==null)throw Error(r(151));for(var be=null,Ue=null,ge=O,Ae=O=0,Oe=null,ze=F.next();ge!==null&&!ze.done;Ae++,ze=F.next()){ge.index>Ae?(Oe=ge,ge=null):Oe=ge.sibling;var Hi=G(j,ge,ze.value,Z);if(Hi===null){ge===null&&(ge=Oe);break}s&&ge&&Hi.alternate===null&&i(j,ge),O=g(Hi,O,Ae),Ue===null?be=Hi:Ue.sibling=Hi,Ue=Hi,ge=Oe}if(ze.done)return o(j,ge),Me&&Ds(j,Ae),be;if(ge===null){for(;!ze.done;Ae++,ze=F.next())ze=ee(j,ze.value,Z),ze!==null&&(O=g(ze,O,Ae),Ue===null?be=ze:Ue.sibling=ze,Ue=ze);return Me&&Ds(j,Ae),be}for(ge=c(ge);!ze.done;Ae++,ze=F.next())ze=$(ge,j,Ae,ze.value,Z),ze!==null&&(s&&ze.alternate!==null&&ge.delete(ze.key===null?Ae:ze.key),O=g(ze,O,Ae),Ue===null?be=ze:Ue.sibling=ze,Ue=ze);return s&&ge.forEach(function(dC){return i(j,dC)}),Me&&Ds(j,Ae),be}function et(j,O,F,Z){if(typeof F=="object"&&F!==null&&F.type===U&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case R:e:{for(var be=F.key;O!==null;){if(O.key===be){if(be=F.type,be===U){if(O.tag===7){o(j,O.sibling),Z=f(O,F.props.children),Z.return=j,j=Z;break e}}else if(O.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===A&&Ya(be)===O.type){o(j,O.sibling),Z=f(O,F.props),uu(Z,F),Z.return=j,j=Z;break e}o(j,O);break}else i(j,O);O=O.sibling}F.type===U?(Z=Ga(F.props.children,j.mode,Z,F.key),Z.return=j,j=Z):(Z=Gh(F.type,F.key,F.props,null,j.mode,Z),uu(Z,F),Z.return=j,j=Z)}return b(j);case V:e:{for(be=F.key;O!==null;){if(O.key===be)if(O.tag===4&&O.stateNode.containerInfo===F.containerInfo&&O.stateNode.implementation===F.implementation){o(j,O.sibling),Z=f(O,F.children||[]),Z.return=j,j=Z;break e}else{o(j,O);break}else i(j,O);O=O.sibling}Z=Wg(F,j.mode,Z),Z.return=j,j=Z}return b(j);case A:return F=Ya(F),et(j,O,F,Z)}if(wt(F))return fe(j,O,F,Z);if(L(F)){if(be=L(F),typeof be!="function")throw Error(r(150));return F=be.call(F),xe(j,O,F,Z)}if(typeof F.then=="function")return et(j,O,Xh(F),Z);if(F.$$typeof===X)return et(j,O,Qh(j,F),Z);Jh(j,F)}return typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint"?(F=""+F,O!==null&&O.tag===6?(o(j,O.sibling),Z=f(O,F),Z.return=j,j=Z):(o(j,O),Z=Yg(F,j.mode,Z),Z.return=j,j=Z),b(j)):o(j,O)}return function(j,O,F,Z){try{cu=0;var be=et(j,O,F,Z);return hl=null,be}catch(ge){if(ge===dl||ge===Yh)throw ge;var Ue=Hn(29,ge,null,j.mode);return Ue.lanes=Z,Ue.return=j,Ue}finally{}}}var Xa=Ex(!0),Ix=Ex(!1),Ri=!1;function lp(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function cp(s,i){s=s.updateQueue,i.updateQueue===s&&(i.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Ni(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function ki(s,i,o){var c=s.updateQueue;if(c===null)return null;if(c=c.shared,(qe&2)!==0){var f=c.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),c.pending=i,i=qh(s),lx(s,null,o),i}return Fh(s,c,i,o),qh(s)}function du(s,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194048)!==0)){var c=i.lanes;c&=s.pendingLanes,o|=c,i.lanes=o,Lc(s,o)}}function up(s,i){var o=s.updateQueue,c=s.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var f=null,g=null;if(o=o.firstBaseUpdate,o!==null){do{var b={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};g===null?f=g=b:g=g.next=b,o=o.next}while(o!==null);g===null?f=g=i:g=g.next=i}else f=g=i;o={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:c.shared,callbacks:c.callbacks},s.updateQueue=o;return}s=o.lastBaseUpdate,s===null?o.firstBaseUpdate=i:s.next=i,o.lastBaseUpdate=i}var dp=!1;function hu(){if(dp){var s=ul;if(s!==null)throw s}}function fu(s,i,o,c){dp=!1;var f=s.updateQueue;Ri=!1;var g=f.firstBaseUpdate,b=f.lastBaseUpdate,E=f.shared.pending;if(E!==null){f.shared.pending=null;var D=E,q=D.next;D.next=null,b===null?g=q:b.next=q,b=D;var J=s.alternate;J!==null&&(J=J.updateQueue,E=J.lastBaseUpdate,E!==b&&(E===null?J.firstBaseUpdate=q:E.next=q,J.lastBaseUpdate=D))}if(g!==null){var ee=f.baseState;b=0,J=q=D=null,E=g;do{var G=E.lane&-536870913,$=G!==E.lane;if($?(Pe&G)===G:(c&G)===G){G!==0&&G===cl&&(dp=!0),J!==null&&(J=J.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var fe=s,xe=E;G=i;var et=o;switch(xe.tag){case 1:if(fe=xe.payload,typeof fe=="function"){ee=fe.call(et,ee,G);break e}ee=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=xe.payload,G=typeof fe=="function"?fe.call(et,ee,G):fe,G==null)break e;ee=x({},ee,G);break e;case 2:Ri=!0}}G=E.callback,G!==null&&(s.flags|=64,$&&(s.flags|=8192),$=f.callbacks,$===null?f.callbacks=[G]:$.push(G))}else $={lane:G,tag:E.tag,payload:E.payload,callback:E.callback,next:null},J===null?(q=J=$,D=ee):J=J.next=$,b|=G;if(E=E.next,E===null){if(E=f.shared.pending,E===null)break;$=E,E=$.next,$.next=null,f.lastBaseUpdate=$,f.shared.pending=null}}while(!0);J===null&&(D=ee),f.baseState=D,f.firstBaseUpdate=q,f.lastBaseUpdate=J,g===null&&(f.shared.lanes=0),Vi|=b,s.lanes=b,s.memoizedState=ee}}function Ax(s,i){if(typeof s!="function")throw Error(r(191,s));s.call(i)}function Sx(s,i){var o=s.callbacks;if(o!==null)for(s.callbacks=null,s=0;s<o.length;s++)Ax(o[s],i)}var fl=ue(null),Zh=ue(0);function Rx(s,i){s=qs,Se(Zh,s),Se(fl,i),qs=s|i.baseLanes}function hp(){Se(Zh,qs),Se(fl,fl.current)}function fp(){qs=Zh.current,Re(fl),Re(Zh)}var Kn=ue(null),pr=null;function Ci(s){var i=s.alternate;Se(kt,kt.current&1),Se(Kn,s),pr===null&&(i===null||fl.current!==null||i.memoizedState!==null)&&(pr=s)}function mp(s){Se(kt,kt.current),Se(Kn,s),pr===null&&(pr=s)}function Nx(s){s.tag===22?(Se(kt,kt.current),Se(Kn,s),pr===null&&(pr=s)):Di()}function Di(){Se(kt,kt.current),Se(Kn,Kn.current)}function Qn(s){Re(Kn),pr===s&&(pr=null),Re(kt)}var kt=ue(0);function ef(s){for(var i=s;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||by(o)||xy(o)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Vs=0,Ee=null,Je=null,Bt=null,tf=!1,ml=!1,Ja=!1,nf=0,mu=0,gl=null,tk=0;function Tt(){throw Error(r(321))}function gp(s,i){if(i===null)return!1;for(var o=0;o<i.length&&o<s.length;o++)if(!Gn(s[o],i[o]))return!1;return!0}function pp(s,i,o,c,f,g){return Vs=g,Ee=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,K.H=s===null||s.memoizedState===null?hw:Cp,Ja=!1,g=o(c,f),Ja=!1,ml&&(g=Cx(i,o,c,f)),kx(s),g}function kx(s){K.H=yu;var i=Je!==null&&Je.next!==null;if(Vs=0,Bt=Je=Ee=null,tf=!1,mu=0,gl=null,i)throw Error(r(300));s===null||Ft||(s=s.dependencies,s!==null&&Kh(s)&&(Ft=!0))}function Cx(s,i,o,c){Ee=s;var f=0;do{if(ml&&(gl=null),mu=0,ml=!1,25<=f)throw Error(r(301));if(f+=1,Bt=Je=null,s.updateQueue!=null){var g=s.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}K.H=fw,g=i(o,c)}while(ml);return g}function nk(){var s=K.H,i=s.useState()[0];return i=typeof i.then=="function"?gu(i):i,s=s.useState()[0],(Je!==null?Je.memoizedState:null)!==s&&(Ee.flags|=1024),i}function yp(){var s=nf!==0;return nf=0,s}function _p(s,i,o){i.updateQueue=s.updateQueue,i.flags&=-2053,s.lanes&=~o}function vp(s){if(tf){for(s=s.memoizedState;s!==null;){var i=s.queue;i!==null&&(i.pending=null),s=s.next}tf=!1}Vs=0,Bt=Je=Ee=null,ml=!1,mu=nf=0,gl=null}function En(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bt===null?Ee.memoizedState=Bt=s:Bt=Bt.next=s,Bt}function Ct(){if(Je===null){var s=Ee.alternate;s=s!==null?s.memoizedState:null}else s=Je.next;var i=Bt===null?Ee.memoizedState:Bt.next;if(i!==null)Bt=i,Je=s;else{if(s===null)throw Ee.alternate===null?Error(r(467)):Error(r(310));Je=s,s={memoizedState:Je.memoizedState,baseState:Je.baseState,baseQueue:Je.baseQueue,queue:Je.queue,next:null},Bt===null?Ee.memoizedState=Bt=s:Bt=Bt.next=s}return Bt}function rf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function gu(s){var i=mu;return mu+=1,gl===null&&(gl=[]),s=xx(gl,s,i),i=Ee,(Bt===null?i.memoizedState:Bt.next)===null&&(i=i.alternate,K.H=i===null||i.memoizedState===null?hw:Cp),s}function sf(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return gu(s);if(s.$$typeof===X)return ln(s)}throw Error(r(438,String(s)))}function bp(s){var i=null,o=Ee.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var c=Ee.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(i={data:c.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=rf(),Ee.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(s),c=0;c<s;c++)o[c]=k;return i.index++,o}function Ms(s,i){return typeof i=="function"?i(s):i}function af(s){var i=Ct();return xp(i,Je,s)}function xp(s,i,o){var c=s.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=o;var f=s.baseQueue,g=c.pending;if(g!==null){if(f!==null){var b=f.next;f.next=g.next,g.next=b}i.baseQueue=f=g,c.pending=null}if(g=s.baseState,f===null)s.memoizedState=g;else{i=f.next;var E=b=null,D=null,q=i,J=!1;do{var ee=q.lane&-536870913;if(ee!==q.lane?(Pe&ee)===ee:(Vs&ee)===ee){var G=q.revertLane;if(G===0)D!==null&&(D=D.next={lane:0,revertLane:0,gesture:null,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),ee===cl&&(J=!0);else if((Vs&G)===G){q=q.next,G===cl&&(J=!0);continue}else ee={lane:0,revertLane:q.revertLane,gesture:null,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},D===null?(E=D=ee,b=g):D=D.next=ee,Ee.lanes|=G,Vi|=G;ee=q.action,Ja&&o(g,ee),g=q.hasEagerState?q.eagerState:o(g,ee)}else G={lane:ee,revertLane:q.revertLane,gesture:q.gesture,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},D===null?(E=D=G,b=g):D=D.next=G,Ee.lanes|=ee,Vi|=ee;q=q.next}while(q!==null&&q!==i);if(D===null?b=g:D.next=E,!Gn(g,s.memoizedState)&&(Ft=!0,J&&(o=ul,o!==null)))throw o;s.memoizedState=g,s.baseState=b,s.baseQueue=D,c.lastRenderedState=g}return f===null&&(c.lanes=0),[s.memoizedState,c.dispatch]}function wp(s){var i=Ct(),o=i.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=s;var c=o.dispatch,f=o.pending,g=i.memoizedState;if(f!==null){o.pending=null;var b=f=f.next;do g=s(g,b.action),b=b.next;while(b!==f);Gn(g,i.memoizedState)||(Ft=!0),i.memoizedState=g,i.baseQueue===null&&(i.baseState=g),o.lastRenderedState=g}return[g,c]}function Dx(s,i,o){var c=Ee,f=Ct(),g=Me;if(g){if(o===void 0)throw Error(r(407));o=o()}else o=i();var b=!Gn((Je||f).memoizedState,o);if(b&&(f.memoizedState=o,Ft=!0),f=f.queue,Ip(Vx.bind(null,c,f,s),[s]),f.getSnapshot!==i||b||Bt!==null&&Bt.memoizedState.tag&1){if(c.flags|=2048,pl(9,{destroy:void 0},Ox.bind(null,c,f,o,i),null),nt===null)throw Error(r(349));g||(Vs&127)!==0||Px(c,i,o)}return o}function Px(s,i,o){s.flags|=16384,s={getSnapshot:i,value:o},i=Ee.updateQueue,i===null?(i=rf(),Ee.updateQueue=i,i.stores=[s]):(o=i.stores,o===null?i.stores=[s]:o.push(s))}function Ox(s,i,o,c){i.value=o,i.getSnapshot=c,Mx(i)&&jx(s)}function Vx(s,i,o){return o(function(){Mx(i)&&jx(s)})}function Mx(s){var i=s.getSnapshot;s=s.value;try{var o=i();return!Gn(s,o)}catch{return!0}}function jx(s){var i=qa(s,2);i!==null&&jn(i,s,2)}function Tp(s){var i=En();if(typeof s=="function"){var o=s;if(s=o(),Ja){ar(!0);try{o()}finally{ar(!1)}}}return i.memoizedState=i.baseState=s,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ms,lastRenderedState:s},i}function Lx(s,i,o,c){return s.baseState=o,xp(s,Je,typeof c=="function"?c:Ms)}function rk(s,i,o,c,f){if(cf(s))throw Error(r(485));if(s=i.action,s!==null){var g={payload:f,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){g.listeners.push(b)}};K.T!==null?o(!0):g.isTransition=!1,c(g),o=i.pending,o===null?(g.next=i.pending=g,Ux(i,g)):(g.next=o.next,i.pending=o.next=g)}}function Ux(s,i){var o=i.action,c=i.payload,f=s.state;if(i.isTransition){var g=K.T,b={};K.T=b;try{var E=o(f,c),D=K.S;D!==null&&D(b,E),zx(s,i,E)}catch(q){Ep(s,i,q)}finally{g!==null&&b.types!==null&&(g.types=b.types),K.T=g}}else try{g=o(f,c),zx(s,i,g)}catch(q){Ep(s,i,q)}}function zx(s,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(c){Bx(s,i,c)},function(c){return Ep(s,i,c)}):Bx(s,i,o)}function Bx(s,i,o){i.status="fulfilled",i.value=o,Fx(i),s.state=o,i=s.pending,i!==null&&(o=i.next,o===i?s.pending=null:(o=o.next,i.next=o,Ux(s,o)))}function Ep(s,i,o){var c=s.pending;if(s.pending=null,c!==null){c=c.next;do i.status="rejected",i.reason=o,Fx(i),i=i.next;while(i!==c)}s.action=null}function Fx(s){s=s.listeners;for(var i=0;i<s.length;i++)(0,s[i])()}function qx(s,i){return i}function Gx(s,i){if(Me){var o=nt.formState;if(o!==null){e:{var c=Ee;if(Me){if(ot){t:{for(var f=ot,g=gr;f.nodeType!==8;){if(!g){f=null;break t}if(f=yr(f.nextSibling),f===null){f=null;break t}}g=f.data,f=g==="F!"||g==="F"?f:null}if(f){ot=yr(f.nextSibling),c=f.data==="F!";break e}}Ai(c)}c=!1}c&&(i=o[0])}}return o=En(),o.memoizedState=o.baseState=i,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qx,lastRenderedState:i},o.queue=c,o=cw.bind(null,Ee,c),c.dispatch=o,c=Tp(!1),g=kp.bind(null,Ee,!1,c.queue),c=En(),f={state:i,dispatch:null,action:s,pending:null},c.queue=f,o=rk.bind(null,Ee,f,g,o),f.dispatch=o,c.memoizedState=s,[i,o,!1]}function Hx(s){var i=Ct();return Kx(i,Je,s)}function Kx(s,i,o){if(i=xp(s,i,qx)[0],s=af(Ms)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var c=gu(i)}catch(b){throw b===dl?Yh:b}else c=i;i=Ct();var f=i.queue,g=f.dispatch;return o!==i.memoizedState&&(Ee.flags|=2048,pl(9,{destroy:void 0},sk.bind(null,f,o),null)),[c,g,s]}function sk(s,i){s.action=i}function Qx(s){var i=Ct(),o=Je;if(o!==null)return Kx(i,o,s);Ct(),i=i.memoizedState,o=Ct();var c=o.queue.dispatch;return o.memoizedState=s,[i,c,!1]}function pl(s,i,o,c){return s={tag:s,create:o,deps:c,inst:i,next:null},i=Ee.updateQueue,i===null&&(i=rf(),Ee.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=s.next=s:(c=o.next,o.next=s,s.next=c,i.lastEffect=s),s}function $x(){return Ct().memoizedState}function of(s,i,o,c){var f=En();Ee.flags|=s,f.memoizedState=pl(1|i,{destroy:void 0},o,c===void 0?null:c)}function lf(s,i,o,c){var f=Ct();c=c===void 0?null:c;var g=f.memoizedState.inst;Je!==null&&c!==null&&gp(c,Je.memoizedState.deps)?f.memoizedState=pl(i,g,o,c):(Ee.flags|=s,f.memoizedState=pl(1|i,g,o,c))}function Yx(s,i){of(8390656,8,s,i)}function Ip(s,i){lf(2048,8,s,i)}function ik(s){Ee.flags|=4;var i=Ee.updateQueue;if(i===null)i=rf(),Ee.updateQueue=i,i.events=[s];else{var o=i.events;o===null?i.events=[s]:o.push(s)}}function Wx(s){var i=Ct().memoizedState;return ik({ref:i,nextImpl:s}),function(){if((qe&2)!==0)throw Error(r(440));return i.impl.apply(void 0,arguments)}}function Xx(s,i){return lf(4,2,s,i)}function Jx(s,i){return lf(4,4,s,i)}function Zx(s,i){if(typeof i=="function"){s=s();var o=i(s);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return s=s(),i.current=s,function(){i.current=null}}function ew(s,i,o){o=o!=null?o.concat([s]):null,lf(4,4,Zx.bind(null,i,s),o)}function Ap(){}function tw(s,i){var o=Ct();i=i===void 0?null:i;var c=o.memoizedState;return i!==null&&gp(i,c[1])?c[0]:(o.memoizedState=[s,i],s)}function nw(s,i){var o=Ct();i=i===void 0?null:i;var c=o.memoizedState;if(i!==null&&gp(i,c[1]))return c[0];if(c=s(),Ja){ar(!0);try{s()}finally{ar(!1)}}return o.memoizedState=[c,i],c}function Sp(s,i,o){return o===void 0||(Vs&1073741824)!==0&&(Pe&261930)===0?s.memoizedState=i:(s.memoizedState=o,s=r0(),Ee.lanes|=s,Vi|=s,o)}function rw(s,i,o,c){return Gn(o,i)?o:fl.current!==null?(s=Sp(s,o,c),Gn(s,i)||(Ft=!0),s):(Vs&42)===0||(Vs&1073741824)!==0&&(Pe&261930)===0?(Ft=!0,s.memoizedState=o):(s=r0(),Ee.lanes|=s,Vi|=s,i)}function sw(s,i,o,c,f){var g=le.p;le.p=g!==0&&8>g?g:8;var b=K.T,E={};K.T=E,kp(s,!1,i,o);try{var D=f(),q=K.S;if(q!==null&&q(E,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var J=ek(D,c);pu(s,i,J,Wn(s))}else pu(s,i,c,Wn(s))}catch(ee){pu(s,i,{then:function(){},status:"rejected",reason:ee},Wn())}finally{le.p=g,b!==null&&E.types!==null&&(b.types=E.types),K.T=b}}function ak(){}function Rp(s,i,o,c){if(s.tag!==5)throw Error(r(476));var f=iw(s).queue;sw(s,f,i,ve,o===null?ak:function(){return aw(s),o(c)})}function iw(s){var i=s.memoizedState;if(i!==null)return i;i={memoizedState:ve,baseState:ve,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ms,lastRenderedState:ve},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ms,lastRenderedState:o},next:null},s.memoizedState=i,s=s.alternate,s!==null&&(s.memoizedState=i),i}function aw(s){var i=iw(s);i.next===null&&(i=s.alternate.memoizedState),pu(s,i.next.queue,{},Wn())}function Np(){return ln(Pu)}function ow(){return Ct().memoizedState}function lw(){return Ct().memoizedState}function ok(s){for(var i=s.return;i!==null;){switch(i.tag){case 24:case 3:var o=Wn();s=Ni(o);var c=ki(i,s,o);c!==null&&(jn(c,i,o),du(c,i,o)),i={cache:sp()},s.payload=i;return}i=i.return}}function lk(s,i,o){var c=Wn();o={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},cf(s)?uw(i,o):(o=Qg(s,i,o,c),o!==null&&(jn(o,s,c),dw(o,i,c)))}function cw(s,i,o){var c=Wn();pu(s,i,o,c)}function pu(s,i,o,c){var f={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(cf(s))uw(i,f);else{var g=s.alternate;if(s.lanes===0&&(g===null||g.lanes===0)&&(g=i.lastRenderedReducer,g!==null))try{var b=i.lastRenderedState,E=g(b,o);if(f.hasEagerState=!0,f.eagerState=E,Gn(E,b))return Fh(s,i,f,0),nt===null&&Bh(),!1}catch{}finally{}if(o=Qg(s,i,f,c),o!==null)return jn(o,s,c),dw(o,i,c),!0}return!1}function kp(s,i,o,c){if(c={lane:2,revertLane:ly(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},cf(s)){if(i)throw Error(r(479))}else i=Qg(s,o,c,2),i!==null&&jn(i,s,2)}function cf(s){var i=s.alternate;return s===Ee||i!==null&&i===Ee}function uw(s,i){ml=tf=!0;var o=s.pending;o===null?i.next=i:(i.next=o.next,o.next=i),s.pending=i}function dw(s,i,o){if((o&4194048)!==0){var c=i.lanes;c&=s.pendingLanes,o|=c,i.lanes=o,Lc(s,o)}}var yu={readContext:ln,use:sf,useCallback:Tt,useContext:Tt,useEffect:Tt,useImperativeHandle:Tt,useLayoutEffect:Tt,useInsertionEffect:Tt,useMemo:Tt,useReducer:Tt,useRef:Tt,useState:Tt,useDebugValue:Tt,useDeferredValue:Tt,useTransition:Tt,useSyncExternalStore:Tt,useId:Tt,useHostTransitionStatus:Tt,useFormState:Tt,useActionState:Tt,useOptimistic:Tt,useMemoCache:Tt,useCacheRefresh:Tt};yu.useEffectEvent=Tt;var hw={readContext:ln,use:sf,useCallback:function(s,i){return En().memoizedState=[s,i===void 0?null:i],s},useContext:ln,useEffect:Yx,useImperativeHandle:function(s,i,o){o=o!=null?o.concat([s]):null,of(4194308,4,Zx.bind(null,i,s),o)},useLayoutEffect:function(s,i){return of(4194308,4,s,i)},useInsertionEffect:function(s,i){of(4,2,s,i)},useMemo:function(s,i){var o=En();i=i===void 0?null:i;var c=s();if(Ja){ar(!0);try{s()}finally{ar(!1)}}return o.memoizedState=[c,i],c},useReducer:function(s,i,o){var c=En();if(o!==void 0){var f=o(i);if(Ja){ar(!0);try{o(i)}finally{ar(!1)}}}else f=i;return c.memoizedState=c.baseState=f,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:f},c.queue=s,s=s.dispatch=lk.bind(null,Ee,s),[c.memoizedState,s]},useRef:function(s){var i=En();return s={current:s},i.memoizedState=s},useState:function(s){s=Tp(s);var i=s.queue,o=cw.bind(null,Ee,i);return i.dispatch=o,[s.memoizedState,o]},useDebugValue:Ap,useDeferredValue:function(s,i){var o=En();return Sp(o,s,i)},useTransition:function(){var s=Tp(!1);return s=sw.bind(null,Ee,s.queue,!0,!1),En().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,i,o){var c=Ee,f=En();if(Me){if(o===void 0)throw Error(r(407));o=o()}else{if(o=i(),nt===null)throw Error(r(349));(Pe&127)!==0||Px(c,i,o)}f.memoizedState=o;var g={value:o,getSnapshot:i};return f.queue=g,Yx(Vx.bind(null,c,g,s),[s]),c.flags|=2048,pl(9,{destroy:void 0},Ox.bind(null,c,g,o,i),null),o},useId:function(){var s=En(),i=nt.identifierPrefix;if(Me){var o=as,c=is;o=(c&~(1<<32-Rt(c)-1)).toString(32)+o,i="_"+i+"R_"+o,o=nf++,0<o&&(i+="H"+o.toString(32)),i+="_"}else o=tk++,i="_"+i+"r_"+o.toString(32)+"_";return s.memoizedState=i},useHostTransitionStatus:Np,useFormState:Gx,useActionState:Gx,useOptimistic:function(s){var i=En();i.memoizedState=i.baseState=s;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=kp.bind(null,Ee,!0,o),o.dispatch=i,[s,i]},useMemoCache:bp,useCacheRefresh:function(){return En().memoizedState=ok.bind(null,Ee)},useEffectEvent:function(s){var i=En(),o={impl:s};return i.memoizedState=o,function(){if((qe&2)!==0)throw Error(r(440));return o.impl.apply(void 0,arguments)}}},Cp={readContext:ln,use:sf,useCallback:tw,useContext:ln,useEffect:Ip,useImperativeHandle:ew,useInsertionEffect:Xx,useLayoutEffect:Jx,useMemo:nw,useReducer:af,useRef:$x,useState:function(){return af(Ms)},useDebugValue:Ap,useDeferredValue:function(s,i){var o=Ct();return rw(o,Je.memoizedState,s,i)},useTransition:function(){var s=af(Ms)[0],i=Ct().memoizedState;return[typeof s=="boolean"?s:gu(s),i]},useSyncExternalStore:Dx,useId:ow,useHostTransitionStatus:Np,useFormState:Hx,useActionState:Hx,useOptimistic:function(s,i){var o=Ct();return Lx(o,Je,s,i)},useMemoCache:bp,useCacheRefresh:lw};Cp.useEffectEvent=Wx;var fw={readContext:ln,use:sf,useCallback:tw,useContext:ln,useEffect:Ip,useImperativeHandle:ew,useInsertionEffect:Xx,useLayoutEffect:Jx,useMemo:nw,useReducer:wp,useRef:$x,useState:function(){return wp(Ms)},useDebugValue:Ap,useDeferredValue:function(s,i){var o=Ct();return Je===null?Sp(o,s,i):rw(o,Je.memoizedState,s,i)},useTransition:function(){var s=wp(Ms)[0],i=Ct().memoizedState;return[typeof s=="boolean"?s:gu(s),i]},useSyncExternalStore:Dx,useId:ow,useHostTransitionStatus:Np,useFormState:Qx,useActionState:Qx,useOptimistic:function(s,i){var o=Ct();return Je!==null?Lx(o,Je,s,i):(o.baseState=s,[s,o.queue.dispatch])},useMemoCache:bp,useCacheRefresh:lw};fw.useEffectEvent=Wx;function Dp(s,i,o,c){i=s.memoizedState,o=o(c,i),o=o==null?i:x({},i,o),s.memoizedState=o,s.lanes===0&&(s.updateQueue.baseState=o)}var Pp={enqueueSetState:function(s,i,o){s=s._reactInternals;var c=Wn(),f=Ni(c);f.payload=i,o!=null&&(f.callback=o),i=ki(s,f,c),i!==null&&(jn(i,s,c),du(i,s,c))},enqueueReplaceState:function(s,i,o){s=s._reactInternals;var c=Wn(),f=Ni(c);f.tag=1,f.payload=i,o!=null&&(f.callback=o),i=ki(s,f,c),i!==null&&(jn(i,s,c),du(i,s,c))},enqueueForceUpdate:function(s,i){s=s._reactInternals;var o=Wn(),c=Ni(o);c.tag=2,i!=null&&(c.callback=i),i=ki(s,c,o),i!==null&&(jn(i,s,o),du(i,s,o))}};function mw(s,i,o,c,f,g,b){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(c,g,b):i.prototype&&i.prototype.isPureReactComponent?!ru(o,c)||!ru(f,g):!0}function gw(s,i,o,c){s=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,c),i.state!==s&&Pp.enqueueReplaceState(i,i.state,null)}function Za(s,i){var o=i;if("ref"in i){o={};for(var c in i)c!=="ref"&&(o[c]=i[c])}if(s=s.defaultProps){o===i&&(o=x({},o));for(var f in s)o[f]===void 0&&(o[f]=s[f])}return o}function pw(s){zh(s)}function yw(s){console.error(s)}function _w(s){zh(s)}function uf(s,i){try{var o=s.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(c){setTimeout(function(){throw c})}}function vw(s,i,o){try{var c=s.onCaughtError;c(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Op(s,i,o){return o=Ni(o),o.tag=3,o.payload={element:null},o.callback=function(){uf(s,i)},o}function bw(s){return s=Ni(s),s.tag=3,s}function xw(s,i,o,c){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var g=c.value;s.payload=function(){return f(g)},s.callback=function(){vw(i,o,c)}}var b=o.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(s.callback=function(){vw(i,o,c),typeof f!="function"&&(Mi===null?Mi=new Set([this]):Mi.add(this));var E=c.stack;this.componentDidCatch(c.value,{componentStack:E!==null?E:""})})}function ck(s,i,o,c,f){if(o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(i=o.alternate,i!==null&&ll(i,o,f,!0),o=Kn.current,o!==null){switch(o.tag){case 31:case 13:return pr===null?wf():o.alternate===null&&Et===0&&(Et=3),o.flags&=-257,o.flags|=65536,o.lanes=f,c===Wh?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([c]):i.add(c),iy(s,c,f)),!1;case 22:return o.flags|=65536,c===Wh?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([c])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([c]):o.add(c)),iy(s,c,f)),!1}throw Error(r(435,o.tag))}return iy(s,c,f),wf(),!1}if(Me)return i=Kn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,c!==Zg&&(s=Error(r(422),{cause:c}),au(hr(s,o)))):(c!==Zg&&(i=Error(r(423),{cause:c}),au(hr(i,o))),s=s.current.alternate,s.flags|=65536,f&=-f,s.lanes|=f,c=hr(c,o),f=Op(s.stateNode,c,f),up(s,f),Et!==4&&(Et=2)),!1;var g=Error(r(520),{cause:c});if(g=hr(g,o),Iu===null?Iu=[g]:Iu.push(g),Et!==4&&(Et=2),i===null)return!0;c=hr(c,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,s=f&-f,o.lanes|=s,s=Op(o.stateNode,c,s),up(o,s),!1;case 1:if(i=o.type,g=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Mi===null||!Mi.has(g))))return o.flags|=65536,f&=-f,o.lanes|=f,f=bw(f),xw(f,s,o,c),up(o,f),!1}o=o.return}while(o!==null);return!1}var Vp=Error(r(461)),Ft=!1;function cn(s,i,o,c){i.child=s===null?Ix(i,null,o,c):Xa(i,s.child,o,c)}function ww(s,i,o,c,f){o=o.render;var g=i.ref;if("ref"in c){var b={};for(var E in c)E!=="ref"&&(b[E]=c[E])}else b=c;return Qa(i),c=pp(s,i,o,b,g,f),E=yp(),s!==null&&!Ft?(_p(s,i,f),js(s,i,f)):(Me&&E&&Xg(i),i.flags|=1,cn(s,i,c,f),i.child)}function Tw(s,i,o,c,f){if(s===null){var g=o.type;return typeof g=="function"&&!$g(g)&&g.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=g,Ew(s,i,g,c,f)):(s=Gh(o.type,null,c,i,i.mode,f),s.ref=i.ref,s.return=i,i.child=s)}if(g=s.child,!qp(s,f)){var b=g.memoizedProps;if(o=o.compare,o=o!==null?o:ru,o(b,c)&&s.ref===i.ref)return js(s,i,f)}return i.flags|=1,s=Cs(g,c),s.ref=i.ref,s.return=i,i.child=s}function Ew(s,i,o,c,f){if(s!==null){var g=s.memoizedProps;if(ru(g,c)&&s.ref===i.ref)if(Ft=!1,i.pendingProps=c=g,qp(s,f))(s.flags&131072)!==0&&(Ft=!0);else return i.lanes=s.lanes,js(s,i,f)}return Mp(s,i,o,c,f)}function Iw(s,i,o,c){var f=c.children,g=s!==null?s.memoizedState:null;if(s===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((i.flags&128)!==0){if(g=g!==null?g.baseLanes|o:o,s!==null){for(c=i.child=s.child,f=0;c!==null;)f=f|c.lanes|c.childLanes,c=c.sibling;c=f&~g}else c=0,i.child=null;return Aw(s,i,g,o,c)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},s!==null&&$h(i,g!==null?g.cachePool:null),g!==null?Rx(i,g):hp(),Nx(i);else return c=i.lanes=536870912,Aw(s,i,g!==null?g.baseLanes|o:o,o,c)}else g!==null?($h(i,g.cachePool),Rx(i,g),Di(),i.memoizedState=null):(s!==null&&$h(i,null),hp(),Di());return cn(s,i,f,o),i.child}function _u(s,i){return s!==null&&s.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Aw(s,i,o,c,f){var g=ap();return g=g===null?null:{parent:zt._currentValue,pool:g},i.memoizedState={baseLanes:o,cachePool:g},s!==null&&$h(i,null),hp(),Nx(i),s!==null&&ll(s,i,c,!0),i.childLanes=f,null}function df(s,i){return i=ff({mode:i.mode,children:i.children},s.mode),i.ref=s.ref,s.child=i,i.return=s,i}function Sw(s,i,o){return Xa(i,s.child,null,o),s=df(i,i.pendingProps),s.flags|=2,Qn(i),i.memoizedState=null,s}function uk(s,i,o){var c=i.pendingProps,f=(i.flags&128)!==0;if(i.flags&=-129,s===null){if(Me){if(c.mode==="hidden")return s=df(i,c),i.lanes=536870912,_u(null,s);if(mp(i),(s=ot)?(s=U0(s,gr),s=s!==null&&s.data==="&"?s:null,s!==null&&(i.memoizedState={dehydrated:s,treeContext:Ei!==null?{id:is,overflow:as}:null,retryLane:536870912,hydrationErrors:null},o=ux(s),o.return=i,i.child=o,on=i,ot=null)):s=null,s===null)throw Ai(i);return i.lanes=536870912,null}return df(i,c)}var g=s.memoizedState;if(g!==null){var b=g.dehydrated;if(mp(i),f)if(i.flags&256)i.flags&=-257,i=Sw(s,i,o);else if(i.memoizedState!==null)i.child=s.child,i.flags|=128,i=null;else throw Error(r(558));else if(Ft||ll(s,i,o,!1),f=(o&s.childLanes)!==0,Ft||f){if(c=nt,c!==null&&(b=Uc(c,o),b!==0&&b!==g.retryLane))throw g.retryLane=b,qa(s,b),jn(c,s,b),Vp;wf(),i=Sw(s,i,o)}else s=g.treeContext,ot=yr(b.nextSibling),on=i,Me=!0,Ii=null,gr=!1,s!==null&&fx(i,s),i=df(i,c),i.flags|=4096;return i}return s=Cs(s.child,{mode:c.mode,children:c.children}),s.ref=i.ref,i.child=s,s.return=i,s}function hf(s,i){var o=i.ref;if(o===null)s!==null&&s.ref!==null&&(i.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(s===null||s.ref!==o)&&(i.flags|=4194816)}}function Mp(s,i,o,c,f){return Qa(i),o=pp(s,i,o,c,void 0,f),c=yp(),s!==null&&!Ft?(_p(s,i,f),js(s,i,f)):(Me&&c&&Xg(i),i.flags|=1,cn(s,i,o,f),i.child)}function Rw(s,i,o,c,f,g){return Qa(i),i.updateQueue=null,o=Cx(i,c,o,f),kx(s),c=yp(),s!==null&&!Ft?(_p(s,i,g),js(s,i,g)):(Me&&c&&Xg(i),i.flags|=1,cn(s,i,o,g),i.child)}function Nw(s,i,o,c,f){if(Qa(i),i.stateNode===null){var g=sl,b=o.contextType;typeof b=="object"&&b!==null&&(g=ln(b)),g=new o(c,g),i.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Pp,i.stateNode=g,g._reactInternals=i,g=i.stateNode,g.props=c,g.state=i.memoizedState,g.refs={},lp(i),b=o.contextType,g.context=typeof b=="object"&&b!==null?ln(b):sl,g.state=i.memoizedState,b=o.getDerivedStateFromProps,typeof b=="function"&&(Dp(i,o,b,c),g.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(b=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),b!==g.state&&Pp.enqueueReplaceState(g,g.state,null),fu(i,c,g,f),hu(),g.state=i.memoizedState),typeof g.componentDidMount=="function"&&(i.flags|=4194308),c=!0}else if(s===null){g=i.stateNode;var E=i.memoizedProps,D=Za(o,E);g.props=D;var q=g.context,J=o.contextType;b=sl,typeof J=="object"&&J!==null&&(b=ln(J));var ee=o.getDerivedStateFromProps;J=typeof ee=="function"||typeof g.getSnapshotBeforeUpdate=="function",E=i.pendingProps!==E,J||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(E||q!==b)&&gw(i,g,c,b),Ri=!1;var G=i.memoizedState;g.state=G,fu(i,c,g,f),hu(),q=i.memoizedState,E||G!==q||Ri?(typeof ee=="function"&&(Dp(i,o,ee,c),q=i.memoizedState),(D=Ri||mw(i,o,D,c,G,q,b))?(J||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(i.flags|=4194308)):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=q),g.props=c,g.state=q,g.context=b,c=D):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{g=i.stateNode,cp(s,i),b=i.memoizedProps,J=Za(o,b),g.props=J,ee=i.pendingProps,G=g.context,q=o.contextType,D=sl,typeof q=="object"&&q!==null&&(D=ln(q)),E=o.getDerivedStateFromProps,(q=typeof E=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(b!==ee||G!==D)&&gw(i,g,c,D),Ri=!1,G=i.memoizedState,g.state=G,fu(i,c,g,f),hu();var $=i.memoizedState;b!==ee||G!==$||Ri||s!==null&&s.dependencies!==null&&Kh(s.dependencies)?(typeof E=="function"&&(Dp(i,o,E,c),$=i.memoizedState),(J=Ri||mw(i,o,J,c,G,$,D)||s!==null&&s.dependencies!==null&&Kh(s.dependencies))?(q||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(c,$,D),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(c,$,D)),typeof g.componentDidUpdate=="function"&&(i.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof g.componentDidUpdate!="function"||b===s.memoizedProps&&G===s.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||b===s.memoizedProps&&G===s.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=$),g.props=c,g.state=$,g.context=D,c=J):(typeof g.componentDidUpdate!="function"||b===s.memoizedProps&&G===s.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||b===s.memoizedProps&&G===s.memoizedState||(i.flags|=1024),c=!1)}return g=c,hf(s,i),c=(i.flags&128)!==0,g||c?(g=i.stateNode,o=c&&typeof o.getDerivedStateFromError!="function"?null:g.render(),i.flags|=1,s!==null&&c?(i.child=Xa(i,s.child,null,f),i.child=Xa(i,null,o,f)):cn(s,i,o,f),i.memoizedState=g.state,s=i.child):s=js(s,i,f),s}function kw(s,i,o,c){return Ha(),i.flags|=256,cn(s,i,o,c),i.child}var jp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Lp(s){return{baseLanes:s,cachePool:vx()}}function Up(s,i,o){return s=s!==null?s.childLanes&~o:0,i&&(s|=Yn),s}function Cw(s,i,o){var c=i.pendingProps,f=!1,g=(i.flags&128)!==0,b;if((b=g)||(b=s!==null&&s.memoizedState===null?!1:(kt.current&2)!==0),b&&(f=!0,i.flags&=-129),b=(i.flags&32)!==0,i.flags&=-33,s===null){if(Me){if(f?Ci(i):Di(),(s=ot)?(s=U0(s,gr),s=s!==null&&s.data!=="&"?s:null,s!==null&&(i.memoizedState={dehydrated:s,treeContext:Ei!==null?{id:is,overflow:as}:null,retryLane:536870912,hydrationErrors:null},o=ux(s),o.return=i,i.child=o,on=i,ot=null)):s=null,s===null)throw Ai(i);return xy(s)?i.lanes=32:i.lanes=536870912,null}var E=c.children;return c=c.fallback,f?(Di(),f=i.mode,E=ff({mode:"hidden",children:E},f),c=Ga(c,f,o,null),E.return=i,c.return=i,E.sibling=c,i.child=E,c=i.child,c.memoizedState=Lp(o),c.childLanes=Up(s,b,o),i.memoizedState=jp,_u(null,c)):(Ci(i),zp(i,E))}var D=s.memoizedState;if(D!==null&&(E=D.dehydrated,E!==null)){if(g)i.flags&256?(Ci(i),i.flags&=-257,i=Bp(s,i,o)):i.memoizedState!==null?(Di(),i.child=s.child,i.flags|=128,i=null):(Di(),E=c.fallback,f=i.mode,c=ff({mode:"visible",children:c.children},f),E=Ga(E,f,o,null),E.flags|=2,c.return=i,E.return=i,c.sibling=E,i.child=c,Xa(i,s.child,null,o),c=i.child,c.memoizedState=Lp(o),c.childLanes=Up(s,b,o),i.memoizedState=jp,i=_u(null,c));else if(Ci(i),xy(E)){if(b=E.nextSibling&&E.nextSibling.dataset,b)var q=b.dgst;b=q,c=Error(r(419)),c.stack="",c.digest=b,au({value:c,source:null,stack:null}),i=Bp(s,i,o)}else if(Ft||ll(s,i,o,!1),b=(o&s.childLanes)!==0,Ft||b){if(b=nt,b!==null&&(c=Uc(b,o),c!==0&&c!==D.retryLane))throw D.retryLane=c,qa(s,c),jn(b,s,c),Vp;by(E)||wf(),i=Bp(s,i,o)}else by(E)?(i.flags|=192,i.child=s.child,i=null):(s=D.treeContext,ot=yr(E.nextSibling),on=i,Me=!0,Ii=null,gr=!1,s!==null&&fx(i,s),i=zp(i,c.children),i.flags|=4096);return i}return f?(Di(),E=c.fallback,f=i.mode,D=s.child,q=D.sibling,c=Cs(D,{mode:"hidden",children:c.children}),c.subtreeFlags=D.subtreeFlags&65011712,q!==null?E=Cs(q,E):(E=Ga(E,f,o,null),E.flags|=2),E.return=i,c.return=i,c.sibling=E,i.child=c,_u(null,c),c=i.child,E=s.child.memoizedState,E===null?E=Lp(o):(f=E.cachePool,f!==null?(D=zt._currentValue,f=f.parent!==D?{parent:D,pool:D}:f):f=vx(),E={baseLanes:E.baseLanes|o,cachePool:f}),c.memoizedState=E,c.childLanes=Up(s,b,o),i.memoizedState=jp,_u(s.child,c)):(Ci(i),o=s.child,s=o.sibling,o=Cs(o,{mode:"visible",children:c.children}),o.return=i,o.sibling=null,s!==null&&(b=i.deletions,b===null?(i.deletions=[s],i.flags|=16):b.push(s)),i.child=o,i.memoizedState=null,o)}function zp(s,i){return i=ff({mode:"visible",children:i},s.mode),i.return=s,s.child=i}function ff(s,i){return s=Hn(22,s,null,i),s.lanes=0,s}function Bp(s,i,o){return Xa(i,s.child,null,o),s=zp(i,i.pendingProps.children),s.flags|=2,i.memoizedState=null,s}function Dw(s,i,o){s.lanes|=i;var c=s.alternate;c!==null&&(c.lanes|=i),np(s.return,i,o)}function Fp(s,i,o,c,f,g){var b=s.memoizedState;b===null?s.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:f,treeForkCount:g}:(b.isBackwards=i,b.rendering=null,b.renderingStartTime=0,b.last=c,b.tail=o,b.tailMode=f,b.treeForkCount=g)}function Pw(s,i,o){var c=i.pendingProps,f=c.revealOrder,g=c.tail;c=c.children;var b=kt.current,E=(b&2)!==0;if(E?(b=b&1|2,i.flags|=128):b&=1,Se(kt,b),cn(s,i,c,o),c=Me?iu:0,!E&&s!==null&&(s.flags&128)!==0)e:for(s=i.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Dw(s,o,i);else if(s.tag===19)Dw(s,o,i);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(f){case"forwards":for(o=i.child,f=null;o!==null;)s=o.alternate,s!==null&&ef(s)===null&&(f=o),o=o.sibling;o=f,o===null?(f=i.child,i.child=null):(f=o.sibling,o.sibling=null),Fp(i,!1,f,o,g,c);break;case"backwards":case"unstable_legacy-backwards":for(o=null,f=i.child,i.child=null;f!==null;){if(s=f.alternate,s!==null&&ef(s)===null){i.child=f;break}s=f.sibling,f.sibling=o,o=f,f=s}Fp(i,!0,o,null,g,c);break;case"together":Fp(i,!1,null,null,void 0,c);break;default:i.memoizedState=null}return i.child}function js(s,i,o){if(s!==null&&(i.dependencies=s.dependencies),Vi|=i.lanes,(o&i.childLanes)===0)if(s!==null){if(ll(s,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(s!==null&&i.child!==s.child)throw Error(r(153));if(i.child!==null){for(s=i.child,o=Cs(s,s.pendingProps),i.child=o,o.return=i;s.sibling!==null;)s=s.sibling,o=o.sibling=Cs(s,s.pendingProps),o.return=i;o.sibling=null}return i.child}function qp(s,i){return(s.lanes&i)!==0?!0:(s=s.dependencies,!!(s!==null&&Kh(s)))}function dk(s,i,o){switch(i.tag){case 3:hi(i,i.stateNode.containerInfo),Si(i,zt,s.memoizedState.cache),Ha();break;case 27:case 5:Dc(i);break;case 4:hi(i,i.stateNode.containerInfo);break;case 10:Si(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,mp(i),null;break;case 13:var c=i.memoizedState;if(c!==null)return c.dehydrated!==null?(Ci(i),i.flags|=128,null):(o&i.child.childLanes)!==0?Cw(s,i,o):(Ci(i),s=js(s,i,o),s!==null?s.sibling:null);Ci(i);break;case 19:var f=(s.flags&128)!==0;if(c=(o&i.childLanes)!==0,c||(ll(s,i,o,!1),c=(o&i.childLanes)!==0),f){if(c)return Pw(s,i,o);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Se(kt,kt.current),c)break;return null;case 22:return i.lanes=0,Iw(s,i,o,i.pendingProps);case 24:Si(i,zt,s.memoizedState.cache)}return js(s,i,o)}function Ow(s,i,o){if(s!==null)if(s.memoizedProps!==i.pendingProps)Ft=!0;else{if(!qp(s,o)&&(i.flags&128)===0)return Ft=!1,dk(s,i,o);Ft=(s.flags&131072)!==0}else Ft=!1,Me&&(i.flags&1048576)!==0&&hx(i,iu,i.index);switch(i.lanes=0,i.tag){case 16:e:{var c=i.pendingProps;if(s=Ya(i.elementType),i.type=s,typeof s=="function")$g(s)?(c=Za(s,c),i.tag=1,i=Nw(null,i,s,c,o)):(i.tag=0,i=Mp(null,i,s,c,o));else{if(s!=null){var f=s.$$typeof;if(f===oe){i.tag=11,i=ww(null,i,s,c,o);break e}else if(f===C){i.tag=14,i=Tw(null,i,s,c,o);break e}}throw i=tt(s)||s,Error(r(306,i,""))}}return i;case 0:return Mp(s,i,i.type,i.pendingProps,o);case 1:return c=i.type,f=Za(c,i.pendingProps),Nw(s,i,c,f,o);case 3:e:{if(hi(i,i.stateNode.containerInfo),s===null)throw Error(r(387));c=i.pendingProps;var g=i.memoizedState;f=g.element,cp(s,i),fu(i,c,null,o);var b=i.memoizedState;if(c=b.cache,Si(i,zt,c),c!==g.cache&&rp(i,[zt],o,!0),hu(),c=b.element,g.isDehydrated)if(g={element:c,isDehydrated:!1,cache:b.cache},i.updateQueue.baseState=g,i.memoizedState=g,i.flags&256){i=kw(s,i,c,o);break e}else if(c!==f){f=hr(Error(r(424)),i),au(f),i=kw(s,i,c,o);break e}else{switch(s=i.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(ot=yr(s.firstChild),on=i,Me=!0,Ii=null,gr=!0,o=Ix(i,null,c,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Ha(),c===f){i=js(s,i,o);break e}cn(s,i,c,o)}i=i.child}return i;case 26:return hf(s,i),s===null?(o=H0(i.type,null,i.pendingProps,null))?i.memoizedState=o:Me||(o=i.type,s=i.pendingProps,c=Nf(ir.current).createElement(o),c[jt]=i,c[Xt]=s,un(c,o,s),Lt(c),i.stateNode=c):i.memoizedState=H0(i.type,s.memoizedProps,i.pendingProps,s.memoizedState),null;case 27:return Dc(i),s===null&&Me&&(c=i.stateNode=F0(i.type,i.pendingProps,ir.current),on=i,gr=!0,f=ot,zi(i.type)?(wy=f,ot=yr(c.firstChild)):ot=f),cn(s,i,i.pendingProps.children,o),hf(s,i),s===null&&(i.flags|=4194304),i.child;case 5:return s===null&&Me&&((f=c=ot)&&(c=Bk(c,i.type,i.pendingProps,gr),c!==null?(i.stateNode=c,on=i,ot=yr(c.firstChild),gr=!1,f=!0):f=!1),f||Ai(i)),Dc(i),f=i.type,g=i.pendingProps,b=s!==null?s.memoizedProps:null,c=g.children,yy(f,g)?c=null:b!==null&&yy(f,b)&&(i.flags|=32),i.memoizedState!==null&&(f=pp(s,i,nk,null,null,o),Pu._currentValue=f),hf(s,i),cn(s,i,c,o),i.child;case 6:return s===null&&Me&&((s=o=ot)&&(o=Fk(o,i.pendingProps,gr),o!==null?(i.stateNode=o,on=i,ot=null,s=!0):s=!1),s||Ai(i)),null;case 13:return Cw(s,i,o);case 4:return hi(i,i.stateNode.containerInfo),c=i.pendingProps,s===null?i.child=Xa(i,null,c,o):cn(s,i,c,o),i.child;case 11:return ww(s,i,i.type,i.pendingProps,o);case 7:return cn(s,i,i.pendingProps,o),i.child;case 8:return cn(s,i,i.pendingProps.children,o),i.child;case 12:return cn(s,i,i.pendingProps.children,o),i.child;case 10:return c=i.pendingProps,Si(i,i.type,c.value),cn(s,i,c.children,o),i.child;case 9:return f=i.type._context,c=i.pendingProps.children,Qa(i),f=ln(f),c=c(f),i.flags|=1,cn(s,i,c,o),i.child;case 14:return Tw(s,i,i.type,i.pendingProps,o);case 15:return Ew(s,i,i.type,i.pendingProps,o);case 19:return Pw(s,i,o);case 31:return uk(s,i,o);case 22:return Iw(s,i,o,i.pendingProps);case 24:return Qa(i),c=ln(zt),s===null?(f=ap(),f===null&&(f=nt,g=sp(),f.pooledCache=g,g.refCount++,g!==null&&(f.pooledCacheLanes|=o),f=g),i.memoizedState={parent:c,cache:f},lp(i),Si(i,zt,f)):((s.lanes&o)!==0&&(cp(s,i),fu(i,null,null,o),hu()),f=s.memoizedState,g=i.memoizedState,f.parent!==c?(f={parent:c,cache:c},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),Si(i,zt,c)):(c=g.cache,Si(i,zt,c),c!==f.cache&&rp(i,[zt],o,!0))),cn(s,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function Ls(s){s.flags|=4}function Gp(s,i,o,c,f){if((i=(s.mode&32)!==0)&&(i=!1),i){if(s.flags|=16777216,(f&335544128)===f)if(s.stateNode.complete)s.flags|=8192;else if(o0())s.flags|=8192;else throw Wa=Wh,op}else s.flags&=-16777217}function Vw(s,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!W0(i))if(o0())s.flags|=8192;else throw Wa=Wh,op}function mf(s,i){i!==null&&(s.flags|=4),s.flags&16384&&(i=s.tag!==22?vh():536870912,s.lanes|=i,bl|=i)}function vu(s,i){if(!Me)switch(s.tailMode){case"hidden":i=s.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?s.tail=null:o.sibling=null;break;case"collapsed":o=s.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?i||s.tail===null?s.tail=null:s.tail.sibling=null:c.sibling=null}}function lt(s){var i=s.alternate!==null&&s.alternate.child===s.child,o=0,c=0;if(i)for(var f=s.child;f!==null;)o|=f.lanes|f.childLanes,c|=f.subtreeFlags&65011712,c|=f.flags&65011712,f.return=s,f=f.sibling;else for(f=s.child;f!==null;)o|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=s,f=f.sibling;return s.subtreeFlags|=c,s.childLanes=o,i}function hk(s,i,o){var c=i.pendingProps;switch(Jg(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lt(i),null;case 1:return lt(i),null;case 3:return o=i.stateNode,c=null,s!==null&&(c=s.memoizedState.cache),i.memoizedState.cache!==c&&(i.flags|=2048),Os(zt),As(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(s===null||s.child===null)&&(ol(i)?Ls(i):s===null||s.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,ep())),lt(i),null;case 26:var f=i.type,g=i.memoizedState;return s===null?(Ls(i),g!==null?(lt(i),Vw(i,g)):(lt(i),Gp(i,f,null,c,o))):g?g!==s.memoizedState?(Ls(i),lt(i),Vw(i,g)):(lt(i),i.flags&=-16777217):(s=s.memoizedProps,s!==c&&Ls(i),lt(i),Gp(i,f,s,c,o)),null;case 27:if(Uo(i),o=ir.current,f=i.type,s!==null&&i.stateNode!=null)s.memoizedProps!==c&&Ls(i);else{if(!c){if(i.stateNode===null)throw Error(r(166));return lt(i),null}s=st.current,ol(i)?mx(i):(s=F0(f,c,o),i.stateNode=s,Ls(i))}return lt(i),null;case 5:if(Uo(i),f=i.type,s!==null&&i.stateNode!=null)s.memoizedProps!==c&&Ls(i);else{if(!c){if(i.stateNode===null)throw Error(r(166));return lt(i),null}if(g=st.current,ol(i))mx(i);else{var b=Nf(ir.current);switch(g){case 1:g=b.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:g=b.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":g=b.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":g=b.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":g=b.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof c.is=="string"?b.createElement("select",{is:c.is}):b.createElement("select"),c.multiple?g.multiple=!0:c.size&&(g.size=c.size);break;default:g=typeof c.is=="string"?b.createElement(f,{is:c.is}):b.createElement(f)}}g[jt]=i,g[Xt]=c;e:for(b=i.child;b!==null;){if(b.tag===5||b.tag===6)g.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===i)break e;for(;b.sibling===null;){if(b.return===null||b.return===i)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}i.stateNode=g;e:switch(un(g,f,c),f){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&Ls(i)}}return lt(i),Gp(i,i.type,s===null?null:s.memoizedProps,i.pendingProps,o),null;case 6:if(s&&i.stateNode!=null)s.memoizedProps!==c&&Ls(i);else{if(typeof c!="string"&&i.stateNode===null)throw Error(r(166));if(s=ir.current,ol(i)){if(s=i.stateNode,o=i.memoizedProps,c=null,f=on,f!==null)switch(f.tag){case 27:case 5:c=f.memoizedProps}s[jt]=i,s=!!(s.nodeValue===o||c!==null&&c.suppressHydrationWarning===!0||C0(s.nodeValue,o)),s||Ai(i,!0)}else s=Nf(s).createTextNode(c),s[jt]=i,i.stateNode=s}return lt(i),null;case 31:if(o=i.memoizedState,s===null||s.memoizedState!==null){if(c=ol(i),o!==null){if(s===null){if(!c)throw Error(r(318));if(s=i.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(557));s[jt]=i}else Ha(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;lt(i),s=!1}else o=ep(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=o),s=!0;if(!s)return i.flags&256?(Qn(i),i):(Qn(i),null);if((i.flags&128)!==0)throw Error(r(558))}return lt(i),null;case 13:if(c=i.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(f=ol(i),c!==null&&c.dehydrated!==null){if(s===null){if(!f)throw Error(r(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[jt]=i}else Ha(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;lt(i),f=!1}else f=ep(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(Qn(i),i):(Qn(i),null)}return Qn(i),(i.flags&128)!==0?(i.lanes=o,i):(o=c!==null,s=s!==null&&s.memoizedState!==null,o&&(c=i.child,f=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(f=c.alternate.memoizedState.cachePool.pool),g=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(g=c.memoizedState.cachePool.pool),g!==f&&(c.flags|=2048)),o!==s&&o&&(i.child.flags|=8192),mf(i,i.updateQueue),lt(i),null);case 4:return As(),s===null&&hy(i.stateNode.containerInfo),lt(i),null;case 10:return Os(i.type),lt(i),null;case 19:if(Re(kt),c=i.memoizedState,c===null)return lt(i),null;if(f=(i.flags&128)!==0,g=c.rendering,g===null)if(f)vu(c,!1);else{if(Et!==0||s!==null&&(s.flags&128)!==0)for(s=i.child;s!==null;){if(g=ef(s),g!==null){for(i.flags|=128,vu(c,!1),s=g.updateQueue,i.updateQueue=s,mf(i,s),i.subtreeFlags=0,s=o,o=i.child;o!==null;)cx(o,s),o=o.sibling;return Se(kt,kt.current&1|2),Me&&Ds(i,c.treeForkCount),i.child}s=s.sibling}c.tail!==null&&wn()>vf&&(i.flags|=128,f=!0,vu(c,!1),i.lanes=4194304)}else{if(!f)if(s=ef(g),s!==null){if(i.flags|=128,f=!0,s=s.updateQueue,i.updateQueue=s,mf(i,s),vu(c,!0),c.tail===null&&c.tailMode==="hidden"&&!g.alternate&&!Me)return lt(i),null}else 2*wn()-c.renderingStartTime>vf&&o!==536870912&&(i.flags|=128,f=!0,vu(c,!1),i.lanes=4194304);c.isBackwards?(g.sibling=i.child,i.child=g):(s=c.last,s!==null?s.sibling=g:i.child=g,c.last=g)}return c.tail!==null?(s=c.tail,c.rendering=s,c.tail=s.sibling,c.renderingStartTime=wn(),s.sibling=null,o=kt.current,Se(kt,f?o&1|2:o&1),Me&&Ds(i,c.treeForkCount),s):(lt(i),null);case 22:case 23:return Qn(i),fp(),c=i.memoizedState!==null,s!==null?s.memoizedState!==null!==c&&(i.flags|=8192):c&&(i.flags|=8192),c?(o&536870912)!==0&&(i.flags&128)===0&&(lt(i),i.subtreeFlags&6&&(i.flags|=8192)):lt(i),o=i.updateQueue,o!==null&&mf(i,o.retryQueue),o=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),c=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),c!==o&&(i.flags|=2048),s!==null&&Re($a),null;case 24:return o=null,s!==null&&(o=s.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),Os(zt),lt(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function fk(s,i){switch(Jg(i),i.tag){case 1:return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 3:return Os(zt),As(),s=i.flags,(s&65536)!==0&&(s&128)===0?(i.flags=s&-65537|128,i):null;case 26:case 27:case 5:return Uo(i),null;case 31:if(i.memoizedState!==null){if(Qn(i),i.alternate===null)throw Error(r(340));Ha()}return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 13:if(Qn(i),s=i.memoizedState,s!==null&&s.dehydrated!==null){if(i.alternate===null)throw Error(r(340));Ha()}return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 19:return Re(kt),null;case 4:return As(),null;case 10:return Os(i.type),null;case 22:case 23:return Qn(i),fp(),s!==null&&Re($a),s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 24:return Os(zt),null;case 25:return null;default:return null}}function Mw(s,i){switch(Jg(i),i.tag){case 3:Os(zt),As();break;case 26:case 27:case 5:Uo(i);break;case 4:As();break;case 31:i.memoizedState!==null&&Qn(i);break;case 13:Qn(i);break;case 19:Re(kt);break;case 10:Os(i.type);break;case 22:case 23:Qn(i),fp(),s!==null&&Re($a);break;case 24:Os(zt)}}function bu(s,i){try{var o=i.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var f=c.next;o=f;do{if((o.tag&s)===s){c=void 0;var g=o.create,b=o.inst;c=g(),b.destroy=c}o=o.next}while(o!==f)}}catch(E){$e(i,i.return,E)}}function Pi(s,i,o){try{var c=i.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var g=f.next;c=g;do{if((c.tag&s)===s){var b=c.inst,E=b.destroy;if(E!==void 0){b.destroy=void 0,f=i;var D=o,q=E;try{q()}catch(J){$e(f,D,J)}}}c=c.next}while(c!==g)}}catch(J){$e(i,i.return,J)}}function jw(s){var i=s.updateQueue;if(i!==null){var o=s.stateNode;try{Sx(i,o)}catch(c){$e(s,s.return,c)}}}function Lw(s,i,o){o.props=Za(s.type,s.memoizedProps),o.state=s.memoizedState;try{o.componentWillUnmount()}catch(c){$e(s,i,c)}}function xu(s,i){try{var o=s.ref;if(o!==null){switch(s.tag){case 26:case 27:case 5:var c=s.stateNode;break;case 30:c=s.stateNode;break;default:c=s.stateNode}typeof o=="function"?s.refCleanup=o(c):o.current=c}}catch(f){$e(s,i,f)}}function os(s,i){var o=s.ref,c=s.refCleanup;if(o!==null)if(typeof c=="function")try{c()}catch(f){$e(s,i,f)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){$e(s,i,f)}else o.current=null}function Uw(s){var i=s.type,o=s.memoizedProps,c=s.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&c.focus();break e;case"img":o.src?c.src=o.src:o.srcSet&&(c.srcset=o.srcSet)}}catch(f){$e(s,s.return,f)}}function Hp(s,i,o){try{var c=s.stateNode;Vk(c,s.type,o,i),c[Xt]=i}catch(f){$e(s,s.return,f)}}function zw(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&zi(s.type)||s.tag===4}function Kp(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||zw(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&zi(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Qp(s,i,o){var c=s.tag;if(c===5||c===6)s=s.stateNode,i?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(s,i):(i=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,i.appendChild(s),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=Rr));else if(c!==4&&(c===27&&zi(s.type)&&(o=s.stateNode,i=null),s=s.child,s!==null))for(Qp(s,i,o),s=s.sibling;s!==null;)Qp(s,i,o),s=s.sibling}function gf(s,i,o){var c=s.tag;if(c===5||c===6)s=s.stateNode,i?o.insertBefore(s,i):o.appendChild(s);else if(c!==4&&(c===27&&zi(s.type)&&(o=s.stateNode),s=s.child,s!==null))for(gf(s,i,o),s=s.sibling;s!==null;)gf(s,i,o),s=s.sibling}function Bw(s){var i=s.stateNode,o=s.memoizedProps;try{for(var c=s.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);un(i,c,o),i[jt]=s,i[Xt]=o}catch(g){$e(s,s.return,g)}}var Us=!1,qt=!1,$p=!1,Fw=typeof WeakSet=="function"?WeakSet:Set,Zt=null;function mk(s,i){if(s=s.containerInfo,gy=Mf,s=ex(s),Bg(s)){if("selectionStart"in s)var o={start:s.selectionStart,end:s.selectionEnd};else e:{o=(o=s.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var f=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{o.nodeType,g.nodeType}catch{o=null;break e}var b=0,E=-1,D=-1,q=0,J=0,ee=s,G=null;t:for(;;){for(var $;ee!==o||f!==0&&ee.nodeType!==3||(E=b+f),ee!==g||c!==0&&ee.nodeType!==3||(D=b+c),ee.nodeType===3&&(b+=ee.nodeValue.length),($=ee.firstChild)!==null;)G=ee,ee=$;for(;;){if(ee===s)break t;if(G===o&&++q===f&&(E=b),G===g&&++J===c&&(D=b),($=ee.nextSibling)!==null)break;ee=G,G=ee.parentNode}ee=$}o=E===-1||D===-1?null:{start:E,end:D}}else o=null}o=o||{start:0,end:0}}else o=null;for(py={focusedElem:s,selectionRange:o},Mf=!1,Zt=i;Zt!==null;)if(i=Zt,s=i.child,(i.subtreeFlags&1028)!==0&&s!==null)s.return=i,Zt=s;else for(;Zt!==null;){switch(i=Zt,g=i.alternate,s=i.flags,i.tag){case 0:if((s&4)!==0&&(s=i.updateQueue,s=s!==null?s.events:null,s!==null))for(o=0;o<s.length;o++)f=s[o],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&g!==null){s=void 0,o=i,f=g.memoizedProps,g=g.memoizedState,c=o.stateNode;try{var fe=Za(o.type,f);s=c.getSnapshotBeforeUpdate(fe,g),c.__reactInternalSnapshotBeforeUpdate=s}catch(xe){$e(o,o.return,xe)}}break;case 3:if((s&1024)!==0){if(s=i.stateNode.containerInfo,o=s.nodeType,o===9)vy(s);else if(o===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":vy(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=i.sibling,s!==null){s.return=i.return,Zt=s;break}Zt=i.return}}function qw(s,i,o){var c=o.flags;switch(o.tag){case 0:case 11:case 15:Bs(s,o),c&4&&bu(5,o);break;case 1:if(Bs(s,o),c&4)if(s=o.stateNode,i===null)try{s.componentDidMount()}catch(b){$e(o,o.return,b)}else{var f=Za(o.type,i.memoizedProps);i=i.memoizedState;try{s.componentDidUpdate(f,i,s.__reactInternalSnapshotBeforeUpdate)}catch(b){$e(o,o.return,b)}}c&64&&jw(o),c&512&&xu(o,o.return);break;case 3:if(Bs(s,o),c&64&&(s=o.updateQueue,s!==null)){if(i=null,o.child!==null)switch(o.child.tag){case 27:case 5:i=o.child.stateNode;break;case 1:i=o.child.stateNode}try{Sx(s,i)}catch(b){$e(o,o.return,b)}}break;case 27:i===null&&c&4&&Bw(o);case 26:case 5:Bs(s,o),i===null&&c&4&&Uw(o),c&512&&xu(o,o.return);break;case 12:Bs(s,o);break;case 31:Bs(s,o),c&4&&Kw(s,o);break;case 13:Bs(s,o),c&4&&Qw(s,o),c&64&&(s=o.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(o=Tk.bind(null,o),qk(s,o))));break;case 22:if(c=o.memoizedState!==null||Us,!c){i=i!==null&&i.memoizedState!==null||qt,f=Us;var g=qt;Us=c,(qt=i)&&!g?Fs(s,o,(o.subtreeFlags&8772)!==0):Bs(s,o),Us=f,qt=g}break;case 30:break;default:Bs(s,o)}}function Gw(s){var i=s.alternate;i!==null&&(s.alternate=null,Gw(i)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(i=s.stateNode,i!==null&&Go(i)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var mt=null,Pn=!1;function zs(s,i,o){for(o=o.child;o!==null;)Hw(s,i,o),o=o.sibling}function Hw(s,i,o){if(sn&&typeof sn.onCommitFiberUnmount=="function")try{sn.onCommitFiberUnmount(Er,o)}catch{}switch(o.tag){case 26:qt||os(o,i),zs(s,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:qt||os(o,i);var c=mt,f=Pn;zi(o.type)&&(mt=o.stateNode,Pn=!1),zs(s,i,o),ku(o.stateNode),mt=c,Pn=f;break;case 5:qt||os(o,i);case 6:if(c=mt,f=Pn,mt=null,zs(s,i,o),mt=c,Pn=f,mt!==null)if(Pn)try{(mt.nodeType===9?mt.body:mt.nodeName==="HTML"?mt.ownerDocument.body:mt).removeChild(o.stateNode)}catch(g){$e(o,i,g)}else try{mt.removeChild(o.stateNode)}catch(g){$e(o,i,g)}break;case 18:mt!==null&&(Pn?(s=mt,j0(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,o.stateNode),Rl(s)):j0(mt,o.stateNode));break;case 4:c=mt,f=Pn,mt=o.stateNode.containerInfo,Pn=!0,zs(s,i,o),mt=c,Pn=f;break;case 0:case 11:case 14:case 15:Pi(2,o,i),qt||Pi(4,o,i),zs(s,i,o);break;case 1:qt||(os(o,i),c=o.stateNode,typeof c.componentWillUnmount=="function"&&Lw(o,i,c)),zs(s,i,o);break;case 21:zs(s,i,o);break;case 22:qt=(c=qt)||o.memoizedState!==null,zs(s,i,o),qt=c;break;default:zs(s,i,o)}}function Kw(s,i){if(i.memoizedState===null&&(s=i.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{Rl(s)}catch(o){$e(i,i.return,o)}}}function Qw(s,i){if(i.memoizedState===null&&(s=i.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Rl(s)}catch(o){$e(i,i.return,o)}}function gk(s){switch(s.tag){case 31:case 13:case 19:var i=s.stateNode;return i===null&&(i=s.stateNode=new Fw),i;case 22:return s=s.stateNode,i=s._retryCache,i===null&&(i=s._retryCache=new Fw),i;default:throw Error(r(435,s.tag))}}function pf(s,i){var o=gk(s);i.forEach(function(c){if(!o.has(c)){o.add(c);var f=Ek.bind(null,s,c);c.then(f,f)}})}function On(s,i){var o=i.deletions;if(o!==null)for(var c=0;c<o.length;c++){var f=o[c],g=s,b=i,E=b;e:for(;E!==null;){switch(E.tag){case 27:if(zi(E.type)){mt=E.stateNode,Pn=!1;break e}break;case 5:mt=E.stateNode,Pn=!1;break e;case 3:case 4:mt=E.stateNode.containerInfo,Pn=!0;break e}E=E.return}if(mt===null)throw Error(r(160));Hw(g,b,f),mt=null,Pn=!1,g=f.alternate,g!==null&&(g.return=null),f.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)$w(i,s),i=i.sibling}var Or=null;function $w(s,i){var o=s.alternate,c=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:On(i,s),Vn(s),c&4&&(Pi(3,s,s.return),bu(3,s),Pi(5,s,s.return));break;case 1:On(i,s),Vn(s),c&512&&(qt||o===null||os(o,o.return)),c&64&&Us&&(s=s.updateQueue,s!==null&&(c=s.callbacks,c!==null&&(o=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=o===null?c:o.concat(c))));break;case 26:var f=Or;if(On(i,s),Vn(s),c&512&&(qt||o===null||os(o,o.return)),c&4){var g=o!==null?o.memoizedState:null;if(c=s.memoizedState,o===null)if(c===null)if(s.stateNode===null){e:{c=s.type,o=s.memoizedProps,f=f.ownerDocument||f;t:switch(c){case"title":g=f.getElementsByTagName("title")[0],(!g||g[Qr]||g[jt]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=f.createElement(c),f.head.insertBefore(g,f.querySelector("head > title"))),un(g,c,o),g[jt]=s,Lt(g),c=g;break e;case"link":var b=$0("link","href",f).get(c+(o.href||""));if(b){for(var E=0;E<b.length;E++)if(g=b[E],g.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&g.getAttribute("rel")===(o.rel==null?null:o.rel)&&g.getAttribute("title")===(o.title==null?null:o.title)&&g.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){b.splice(E,1);break t}}g=f.createElement(c),un(g,c,o),f.head.appendChild(g);break;case"meta":if(b=$0("meta","content",f).get(c+(o.content||""))){for(E=0;E<b.length;E++)if(g=b[E],g.getAttribute("content")===(o.content==null?null:""+o.content)&&g.getAttribute("name")===(o.name==null?null:o.name)&&g.getAttribute("property")===(o.property==null?null:o.property)&&g.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&g.getAttribute("charset")===(o.charSet==null?null:o.charSet)){b.splice(E,1);break t}}g=f.createElement(c),un(g,c,o),f.head.appendChild(g);break;default:throw Error(r(468,c))}g[jt]=s,Lt(g),c=g}s.stateNode=c}else Y0(f,s.type,s.stateNode);else s.stateNode=Q0(f,c,s.memoizedProps);else g!==c?(g===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):g.count--,c===null?Y0(f,s.type,s.stateNode):Q0(f,c,s.memoizedProps)):c===null&&s.stateNode!==null&&Hp(s,s.memoizedProps,o.memoizedProps)}break;case 27:On(i,s),Vn(s),c&512&&(qt||o===null||os(o,o.return)),o!==null&&c&4&&Hp(s,s.memoizedProps,o.memoizedProps);break;case 5:if(On(i,s),Vn(s),c&512&&(qt||o===null||os(o,o.return)),s.flags&32){f=s.stateNode;try{Dn(f,"")}catch(fe){$e(s,s.return,fe)}}c&4&&s.stateNode!=null&&(f=s.memoizedProps,Hp(s,f,o!==null?o.memoizedProps:f)),c&1024&&($p=!0);break;case 6:if(On(i,s),Vn(s),c&4){if(s.stateNode===null)throw Error(r(162));c=s.memoizedProps,o=s.stateNode;try{o.nodeValue=c}catch(fe){$e(s,s.return,fe)}}break;case 3:if(Df=null,f=Or,Or=kf(i.containerInfo),On(i,s),Or=f,Vn(s),c&4&&o!==null&&o.memoizedState.isDehydrated)try{Rl(i.containerInfo)}catch(fe){$e(s,s.return,fe)}$p&&($p=!1,Yw(s));break;case 4:c=Or,Or=kf(s.stateNode.containerInfo),On(i,s),Vn(s),Or=c;break;case 12:On(i,s),Vn(s);break;case 31:On(i,s),Vn(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,pf(s,c)));break;case 13:On(i,s),Vn(s),s.child.flags&8192&&s.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(_f=wn()),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,pf(s,c)));break;case 22:f=s.memoizedState!==null;var D=o!==null&&o.memoizedState!==null,q=Us,J=qt;if(Us=q||f,qt=J||D,On(i,s),qt=J,Us=q,Vn(s),c&8192)e:for(i=s.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(o===null||D||Us||qt||eo(s)),o=null,i=s;;){if(i.tag===5||i.tag===26){if(o===null){D=o=i;try{if(g=D.stateNode,f)b=g.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{E=D.stateNode;var ee=D.memoizedProps.style,G=ee!=null&&ee.hasOwnProperty("display")?ee.display:null;E.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(fe){$e(D,D.return,fe)}}}else if(i.tag===6){if(o===null){D=i;try{D.stateNode.nodeValue=f?"":D.memoizedProps}catch(fe){$e(D,D.return,fe)}}}else if(i.tag===18){if(o===null){D=i;try{var $=D.stateNode;f?L0($,!0):L0(D.stateNode,!1)}catch(fe){$e(D,D.return,fe)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===s)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}c&4&&(c=s.updateQueue,c!==null&&(o=c.retryQueue,o!==null&&(c.retryQueue=null,pf(s,o))));break;case 19:On(i,s),Vn(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,pf(s,c)));break;case 30:break;case 21:break;default:On(i,s),Vn(s)}}function Vn(s){var i=s.flags;if(i&2){try{for(var o,c=s.return;c!==null;){if(zw(c)){o=c;break}c=c.return}if(o==null)throw Error(r(160));switch(o.tag){case 27:var f=o.stateNode,g=Kp(s);gf(s,g,f);break;case 5:var b=o.stateNode;o.flags&32&&(Dn(b,""),o.flags&=-33);var E=Kp(s);gf(s,E,b);break;case 3:case 4:var D=o.stateNode.containerInfo,q=Kp(s);Qp(s,q,D);break;default:throw Error(r(161))}}catch(J){$e(s,s.return,J)}s.flags&=-3}i&4096&&(s.flags&=-4097)}function Yw(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var i=s;Yw(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),s=s.sibling}}function Bs(s,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)qw(s,i.alternate,i),i=i.sibling}function eo(s){for(s=s.child;s!==null;){var i=s;switch(i.tag){case 0:case 11:case 14:case 15:Pi(4,i,i.return),eo(i);break;case 1:os(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&Lw(i,i.return,o),eo(i);break;case 27:ku(i.stateNode);case 26:case 5:os(i,i.return),eo(i);break;case 22:i.memoizedState===null&&eo(i);break;case 30:eo(i);break;default:eo(i)}s=s.sibling}}function Fs(s,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var c=i.alternate,f=s,g=i,b=g.flags;switch(g.tag){case 0:case 11:case 15:Fs(f,g,o),bu(4,g);break;case 1:if(Fs(f,g,o),c=g,f=c.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(q){$e(c,c.return,q)}if(c=g,f=c.updateQueue,f!==null){var E=c.stateNode;try{var D=f.shared.hiddenCallbacks;if(D!==null)for(f.shared.hiddenCallbacks=null,f=0;f<D.length;f++)Ax(D[f],E)}catch(q){$e(c,c.return,q)}}o&&b&64&&jw(g),xu(g,g.return);break;case 27:Bw(g);case 26:case 5:Fs(f,g,o),o&&c===null&&b&4&&Uw(g),xu(g,g.return);break;case 12:Fs(f,g,o);break;case 31:Fs(f,g,o),o&&b&4&&Kw(f,g);break;case 13:Fs(f,g,o),o&&b&4&&Qw(f,g);break;case 22:g.memoizedState===null&&Fs(f,g,o),xu(g,g.return);break;case 30:break;default:Fs(f,g,o)}i=i.sibling}}function Yp(s,i){var o=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),s=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(s=i.memoizedState.cachePool.pool),s!==o&&(s!=null&&s.refCount++,o!=null&&ou(o))}function Wp(s,i){s=null,i.alternate!==null&&(s=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==s&&(i.refCount++,s!=null&&ou(s))}function Vr(s,i,o,c){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Ww(s,i,o,c),i=i.sibling}function Ww(s,i,o,c){var f=i.flags;switch(i.tag){case 0:case 11:case 15:Vr(s,i,o,c),f&2048&&bu(9,i);break;case 1:Vr(s,i,o,c);break;case 3:Vr(s,i,o,c),f&2048&&(s=null,i.alternate!==null&&(s=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==s&&(i.refCount++,s!=null&&ou(s)));break;case 12:if(f&2048){Vr(s,i,o,c),s=i.stateNode;try{var g=i.memoizedProps,b=g.id,E=g.onPostCommit;typeof E=="function"&&E(b,i.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(D){$e(i,i.return,D)}}else Vr(s,i,o,c);break;case 31:Vr(s,i,o,c);break;case 13:Vr(s,i,o,c);break;case 23:break;case 22:g=i.stateNode,b=i.alternate,i.memoizedState!==null?g._visibility&2?Vr(s,i,o,c):wu(s,i):g._visibility&2?Vr(s,i,o,c):(g._visibility|=2,yl(s,i,o,c,(i.subtreeFlags&10256)!==0||!1)),f&2048&&Yp(b,i);break;case 24:Vr(s,i,o,c),f&2048&&Wp(i.alternate,i);break;default:Vr(s,i,o,c)}}function yl(s,i,o,c,f){for(f=f&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var g=s,b=i,E=o,D=c,q=b.flags;switch(b.tag){case 0:case 11:case 15:yl(g,b,E,D,f),bu(8,b);break;case 23:break;case 22:var J=b.stateNode;b.memoizedState!==null?J._visibility&2?yl(g,b,E,D,f):wu(g,b):(J._visibility|=2,yl(g,b,E,D,f)),f&&q&2048&&Yp(b.alternate,b);break;case 24:yl(g,b,E,D,f),f&&q&2048&&Wp(b.alternate,b);break;default:yl(g,b,E,D,f)}i=i.sibling}}function wu(s,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=s,c=i,f=c.flags;switch(c.tag){case 22:wu(o,c),f&2048&&Yp(c.alternate,c);break;case 24:wu(o,c),f&2048&&Wp(c.alternate,c);break;default:wu(o,c)}i=i.sibling}}var Tu=8192;function _l(s,i,o){if(s.subtreeFlags&Tu)for(s=s.child;s!==null;)Xw(s,i,o),s=s.sibling}function Xw(s,i,o){switch(s.tag){case 26:_l(s,i,o),s.flags&Tu&&s.memoizedState!==null&&tC(o,Or,s.memoizedState,s.memoizedProps);break;case 5:_l(s,i,o);break;case 3:case 4:var c=Or;Or=kf(s.stateNode.containerInfo),_l(s,i,o),Or=c;break;case 22:s.memoizedState===null&&(c=s.alternate,c!==null&&c.memoizedState!==null?(c=Tu,Tu=16777216,_l(s,i,o),Tu=c):_l(s,i,o));break;default:_l(s,i,o)}}function Jw(s){var i=s.alternate;if(i!==null&&(s=i.child,s!==null)){i.child=null;do i=s.sibling,s.sibling=null,s=i;while(s!==null)}}function Eu(s){var i=s.deletions;if((s.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var c=i[o];Zt=c,e0(c,s)}Jw(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Zw(s),s=s.sibling}function Zw(s){switch(s.tag){case 0:case 11:case 15:Eu(s),s.flags&2048&&Pi(9,s,s.return);break;case 3:Eu(s);break;case 12:Eu(s);break;case 22:var i=s.stateNode;s.memoizedState!==null&&i._visibility&2&&(s.return===null||s.return.tag!==13)?(i._visibility&=-3,yf(s)):Eu(s);break;default:Eu(s)}}function yf(s){var i=s.deletions;if((s.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var c=i[o];Zt=c,e0(c,s)}Jw(s)}for(s=s.child;s!==null;){switch(i=s,i.tag){case 0:case 11:case 15:Pi(8,i,i.return),yf(i);break;case 22:o=i.stateNode,o._visibility&2&&(o._visibility&=-3,yf(i));break;default:yf(i)}s=s.sibling}}function e0(s,i){for(;Zt!==null;){var o=Zt;switch(o.tag){case 0:case 11:case 15:Pi(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var c=o.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:ou(o.memoizedState.cache)}if(c=o.child,c!==null)c.return=o,Zt=c;else e:for(o=s;Zt!==null;){c=Zt;var f=c.sibling,g=c.return;if(Gw(c),c===o){Zt=null;break e}if(f!==null){f.return=g,Zt=f;break e}Zt=g}}}var pk={getCacheForType:function(s){var i=ln(zt),o=i.data.get(s);return o===void 0&&(o=s(),i.data.set(s,o)),o},cacheSignal:function(){return ln(zt).controller.signal}},yk=typeof WeakMap=="function"?WeakMap:Map,qe=0,nt=null,Ne=null,Pe=0,Qe=0,$n=null,Oi=!1,vl=!1,Xp=!1,qs=0,Et=0,Vi=0,to=0,Jp=0,Yn=0,bl=0,Iu=null,Mn=null,Zp=!1,_f=0,t0=0,vf=1/0,bf=null,Mi=null,$t=0,ji=null,xl=null,Gs=0,ey=0,ty=null,n0=null,Au=0,ny=null;function Wn(){return(qe&2)!==0&&Pe!==0?Pe&-Pe:K.T!==null?ly():bh()}function r0(){if(Yn===0)if((Pe&536870912)===0||Me){var s=Ra;Ra<<=1,(Ra&3932160)===0&&(Ra=262144),Yn=s}else Yn=536870912;return s=Kn.current,s!==null&&(s.flags|=32),Yn}function jn(s,i,o){(s===nt&&(Qe===2||Qe===9)||s.cancelPendingCommit!==null)&&(wl(s,0),Li(s,Pe,Yn,!1)),Na(s,o),((qe&2)===0||s!==nt)&&(s===nt&&((qe&2)===0&&(to|=o),Et===4&&Li(s,Pe,Yn,!1)),ls(s))}function s0(s,i,o){if((qe&6)!==0)throw Error(r(327));var c=!o&&(i&127)===0&&(i&s.expiredLanes)===0||Ir(s,i),f=c?bk(s,i):sy(s,i,!0),g=c;do{if(f===0){vl&&!c&&Li(s,i,0,!1);break}else{if(o=s.current.alternate,g&&!_k(o)){f=sy(s,i,!1),g=!1;continue}if(f===2){if(g=i,s.errorRecoveryDisabledLanes&g)var b=0;else b=s.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){i=b;e:{var E=s;f=Iu;var D=E.current.memoizedState.isDehydrated;if(D&&(wl(E,b).flags|=256),b=sy(E,b,!1),b!==2){if(Xp&&!D){E.errorRecoveryDisabledLanes|=g,to|=g,f=4;break e}g=Mn,Mn=f,g!==null&&(Mn===null?Mn=g:Mn.push.apply(Mn,g))}f=b}if(g=!1,f!==2)continue}}if(f===1){wl(s,0),Li(s,i,0,!0);break}e:{switch(c=s,g=f,g){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:Li(c,i,Yn,!Oi);break e;case 2:Mn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(f=_f+300-wn(),10<f)){if(Li(c,i,Yn,!Oi),Gr(c,0,!0)!==0)break e;Gs=i,c.timeoutHandle=V0(i0.bind(null,c,o,Mn,bf,Zp,i,Yn,to,bl,Oi,g,"Throttled",-0,0),f);break e}i0(c,o,Mn,bf,Zp,i,Yn,to,bl,Oi,g,null,-0,0)}}break}while(!0);ls(s)}function i0(s,i,o,c,f,g,b,E,D,q,J,ee,G,$){if(s.timeoutHandle=-1,ee=i.subtreeFlags,ee&8192||(ee&16785408)===16785408){ee={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Rr},Xw(i,g,ee);var fe=(g&62914560)===g?_f-wn():(g&4194048)===g?t0-wn():0;if(fe=nC(ee,fe),fe!==null){Gs=g,s.cancelPendingCommit=fe(f0.bind(null,s,i,g,o,c,f,b,E,D,J,ee,null,G,$)),Li(s,g,b,!q);return}}f0(s,i,g,o,c,f,b,E,D)}function _k(s){for(var i=s;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var c=0;c<o.length;c++){var f=o[c],g=f.getSnapshot;f=f.value;try{if(!Gn(g(),f))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Li(s,i,o,c){i&=~Jp,i&=~to,s.suspendedLanes|=i,s.pingedLanes&=~i,c&&(s.warmLanes|=i),c=s.expirationTimes;for(var f=i;0<f;){var g=31-Rt(f),b=1<<g;c[g]=-1,f&=~b}o!==0&&ka(s,o,i)}function xf(){return(qe&6)===0?(Su(0),!1):!0}function ry(){if(Ne!==null){if(Qe===0)var s=Ne.return;else s=Ne,Ps=Ka=null,vp(s),hl=null,cu=0,s=Ne;for(;s!==null;)Mw(s.alternate,s),s=s.return;Ne=null}}function wl(s,i){var o=s.timeoutHandle;o!==-1&&(s.timeoutHandle=-1,Lk(o)),o=s.cancelPendingCommit,o!==null&&(s.cancelPendingCommit=null,o()),Gs=0,ry(),nt=s,Ne=o=Cs(s.current,null),Pe=i,Qe=0,$n=null,Oi=!1,vl=Ir(s,i),Xp=!1,bl=Yn=Jp=to=Vi=Et=0,Mn=Iu=null,Zp=!1,(i&8)!==0&&(i|=i&32);var c=s.entangledLanes;if(c!==0)for(s=s.entanglements,c&=i;0<c;){var f=31-Rt(c),g=1<<f;i|=s[f],c&=~g}return qs=i,Bh(),o}function a0(s,i){Ee=null,K.H=yu,i===dl||i===Yh?(i=wx(),Qe=3):i===op?(i=wx(),Qe=4):Qe=i===Vp?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,$n=i,Ne===null&&(Et=1,uf(s,hr(i,s.current)))}function o0(){var s=Kn.current;return s===null?!0:(Pe&4194048)===Pe?pr===null:(Pe&62914560)===Pe||(Pe&536870912)!==0?s===pr:!1}function l0(){var s=K.H;return K.H=yu,s===null?yu:s}function c0(){var s=K.A;return K.A=pk,s}function wf(){Et=4,Oi||(Pe&4194048)!==Pe&&Kn.current!==null||(vl=!0),(Vi&134217727)===0&&(to&134217727)===0||nt===null||Li(nt,Pe,Yn,!1)}function sy(s,i,o){var c=qe;qe|=2;var f=l0(),g=c0();(nt!==s||Pe!==i)&&(bf=null,wl(s,i)),i=!1;var b=Et;e:do try{if(Qe!==0&&Ne!==null){var E=Ne,D=$n;switch(Qe){case 8:ry(),b=6;break e;case 3:case 2:case 9:case 6:Kn.current===null&&(i=!0);var q=Qe;if(Qe=0,$n=null,Tl(s,E,D,q),o&&vl){b=0;break e}break;default:q=Qe,Qe=0,$n=null,Tl(s,E,D,q)}}vk(),b=Et;break}catch(J){a0(s,J)}while(!0);return i&&s.shellSuspendCounter++,Ps=Ka=null,qe=c,K.H=f,K.A=g,Ne===null&&(nt=null,Pe=0,Bh()),b}function vk(){for(;Ne!==null;)u0(Ne)}function bk(s,i){var o=qe;qe|=2;var c=l0(),f=c0();nt!==s||Pe!==i?(bf=null,vf=wn()+500,wl(s,i)):vl=Ir(s,i);e:do try{if(Qe!==0&&Ne!==null){i=Ne;var g=$n;t:switch(Qe){case 1:Qe=0,$n=null,Tl(s,i,g,1);break;case 2:case 9:if(bx(g)){Qe=0,$n=null,d0(i);break}i=function(){Qe!==2&&Qe!==9||nt!==s||(Qe=7),ls(s)},g.then(i,i);break e;case 3:Qe=7;break e;case 4:Qe=5;break e;case 7:bx(g)?(Qe=0,$n=null,d0(i)):(Qe=0,$n=null,Tl(s,i,g,7));break;case 5:var b=null;switch(Ne.tag){case 26:b=Ne.memoizedState;case 5:case 27:var E=Ne;if(b?W0(b):E.stateNode.complete){Qe=0,$n=null;var D=E.sibling;if(D!==null)Ne=D;else{var q=E.return;q!==null?(Ne=q,Tf(q)):Ne=null}break t}}Qe=0,$n=null,Tl(s,i,g,5);break;case 6:Qe=0,$n=null,Tl(s,i,g,6);break;case 8:ry(),Et=6;break e;default:throw Error(r(462))}}xk();break}catch(J){a0(s,J)}while(!0);return Ps=Ka=null,K.H=c,K.A=f,qe=o,Ne!==null?0:(nt=null,Pe=0,Bh(),Et)}function xk(){for(;Ne!==null&&!Og();)u0(Ne)}function u0(s){var i=Ow(s.alternate,s,qs);s.memoizedProps=s.pendingProps,i===null?Tf(s):Ne=i}function d0(s){var i=s,o=i.alternate;switch(i.tag){case 15:case 0:i=Rw(o,i,i.pendingProps,i.type,void 0,Pe);break;case 11:i=Rw(o,i,i.pendingProps,i.type.render,i.ref,Pe);break;case 5:vp(i);default:Mw(o,i),i=Ne=cx(i,qs),i=Ow(o,i,qs)}s.memoizedProps=s.pendingProps,i===null?Tf(s):Ne=i}function Tl(s,i,o,c){Ps=Ka=null,vp(i),hl=null,cu=0;var f=i.return;try{if(ck(s,f,i,o,Pe)){Et=1,uf(s,hr(o,s.current)),Ne=null;return}}catch(g){if(f!==null)throw Ne=f,g;Et=1,uf(s,hr(o,s.current)),Ne=null;return}i.flags&32768?(Me||c===1?s=!0:vl||(Pe&536870912)!==0?s=!1:(Oi=s=!0,(c===2||c===9||c===3||c===6)&&(c=Kn.current,c!==null&&c.tag===13&&(c.flags|=16384))),h0(i,s)):Tf(i)}function Tf(s){var i=s;do{if((i.flags&32768)!==0){h0(i,Oi);return}s=i.return;var o=hk(i.alternate,i,qs);if(o!==null){Ne=o;return}if(i=i.sibling,i!==null){Ne=i;return}Ne=i=s}while(i!==null);Et===0&&(Et=5)}function h0(s,i){do{var o=fk(s.alternate,s);if(o!==null){o.flags&=32767,Ne=o;return}if(o=s.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(s=s.sibling,s!==null)){Ne=s;return}Ne=s=o}while(s!==null);Et=6,Ne=null}function f0(s,i,o,c,f,g,b,E,D){s.cancelPendingCommit=null;do Ef();while($t!==0);if((qe&6)!==0)throw Error(r(327));if(i!==null){if(i===s.current)throw Error(r(177));if(g=i.lanes|i.childLanes,g|=Kg,jg(s,o,g,b,E,D),s===nt&&(Ne=nt=null,Pe=0),xl=i,ji=s,Gs=o,ey=g,ty=f,n0=c,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,Ik(mi,function(){return _0(),null})):(s.callbackNode=null,s.callbackPriority=0),c=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||c){c=K.T,K.T=null,f=le.p,le.p=2,b=qe,qe|=4;try{mk(s,i,o)}finally{qe=b,le.p=f,K.T=c}}$t=1,m0(),g0(),p0()}}function m0(){if($t===1){$t=0;var s=ji,i=xl,o=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||o){o=K.T,K.T=null;var c=le.p;le.p=2;var f=qe;qe|=4;try{$w(i,s);var g=py,b=ex(s.containerInfo),E=g.focusedElem,D=g.selectionRange;if(b!==E&&E&&E.ownerDocument&&Zb(E.ownerDocument.documentElement,E)){if(D!==null&&Bg(E)){var q=D.start,J=D.end;if(J===void 0&&(J=q),"selectionStart"in E)E.selectionStart=q,E.selectionEnd=Math.min(J,E.value.length);else{var ee=E.ownerDocument||document,G=ee&&ee.defaultView||window;if(G.getSelection){var $=G.getSelection(),fe=E.textContent.length,xe=Math.min(D.start,fe),et=D.end===void 0?xe:Math.min(D.end,fe);!$.extend&&xe>et&&(b=et,et=xe,xe=b);var j=Jb(E,xe),O=Jb(E,et);if(j&&O&&($.rangeCount!==1||$.anchorNode!==j.node||$.anchorOffset!==j.offset||$.focusNode!==O.node||$.focusOffset!==O.offset)){var F=ee.createRange();F.setStart(j.node,j.offset),$.removeAllRanges(),xe>et?($.addRange(F),$.extend(O.node,O.offset)):(F.setEnd(O.node,O.offset),$.addRange(F))}}}}for(ee=[],$=E;$=$.parentNode;)$.nodeType===1&&ee.push({element:$,left:$.scrollLeft,top:$.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<ee.length;E++){var Z=ee[E];Z.element.scrollLeft=Z.left,Z.element.scrollTop=Z.top}}Mf=!!gy,py=gy=null}finally{qe=f,le.p=c,K.T=o}}s.current=i,$t=2}}function g0(){if($t===2){$t=0;var s=ji,i=xl,o=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||o){o=K.T,K.T=null;var c=le.p;le.p=2;var f=qe;qe|=4;try{qw(s,i.alternate,i)}finally{qe=f,le.p=c,K.T=o}}$t=3}}function p0(){if($t===4||$t===3){$t=0,fh();var s=ji,i=xl,o=Gs,c=n0;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?$t=5:($t=0,xl=ji=null,y0(s,s.pendingLanes));var f=s.pendingLanes;if(f===0&&(Mi=null),Ss(o),i=i.stateNode,sn&&typeof sn.onCommitFiberRoot=="function")try{sn.onCommitFiberRoot(Er,i,void 0,(i.current.flags&128)===128)}catch{}if(c!==null){i=K.T,f=le.p,le.p=2,K.T=null;try{for(var g=s.onRecoverableError,b=0;b<c.length;b++){var E=c[b];g(E.value,{componentStack:E.stack})}}finally{K.T=i,le.p=f}}(Gs&3)!==0&&Ef(),ls(s),f=s.pendingLanes,(o&261930)!==0&&(f&42)!==0?s===ny?Au++:(Au=0,ny=s):Au=0,Su(0)}}function y0(s,i){(s.pooledCacheLanes&=i)===0&&(i=s.pooledCache,i!=null&&(s.pooledCache=null,ou(i)))}function Ef(){return m0(),g0(),p0(),_0()}function _0(){if($t!==5)return!1;var s=ji,i=ey;ey=0;var o=Ss(Gs),c=K.T,f=le.p;try{le.p=32>o?32:o,K.T=null,o=ty,ty=null;var g=ji,b=Gs;if($t=0,xl=ji=null,Gs=0,(qe&6)!==0)throw Error(r(331));var E=qe;if(qe|=4,Zw(g.current),Ww(g,g.current,b,o),qe=E,Su(0,!1),sn&&typeof sn.onPostCommitFiberRoot=="function")try{sn.onPostCommitFiberRoot(Er,g)}catch{}return!0}finally{le.p=f,K.T=c,y0(s,i)}}function v0(s,i,o){i=hr(o,i),i=Op(s.stateNode,i,2),s=ki(s,i,2),s!==null&&(Na(s,2),ls(s))}function $e(s,i,o){if(s.tag===3)v0(s,s,o);else for(;i!==null;){if(i.tag===3){v0(i,s,o);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Mi===null||!Mi.has(c))){s=hr(o,s),o=bw(2),c=ki(i,o,2),c!==null&&(xw(o,c,i,s),Na(c,2),ls(c));break}}i=i.return}}function iy(s,i,o){var c=s.pingCache;if(c===null){c=s.pingCache=new yk;var f=new Set;c.set(i,f)}else f=c.get(i),f===void 0&&(f=new Set,c.set(i,f));f.has(o)||(Xp=!0,f.add(o),s=wk.bind(null,s,i,o),i.then(s,s))}function wk(s,i,o){var c=s.pingCache;c!==null&&c.delete(i),s.pingedLanes|=s.suspendedLanes&o,s.warmLanes&=~o,nt===s&&(Pe&o)===o&&(Et===4||Et===3&&(Pe&62914560)===Pe&&300>wn()-_f?(qe&2)===0&&wl(s,0):Jp|=o,bl===Pe&&(bl=0)),ls(s)}function b0(s,i){i===0&&(i=vh()),s=qa(s,i),s!==null&&(Na(s,i),ls(s))}function Tk(s){var i=s.memoizedState,o=0;i!==null&&(o=i.retryLane),b0(s,o)}function Ek(s,i){var o=0;switch(s.tag){case 31:case 13:var c=s.stateNode,f=s.memoizedState;f!==null&&(o=f.retryLane);break;case 19:c=s.stateNode;break;case 22:c=s.stateNode._retryCache;break;default:throw Error(r(314))}c!==null&&c.delete(i),b0(s,o)}function Ik(s,i){return Qt(s,i)}var If=null,El=null,ay=!1,Af=!1,oy=!1,Ui=0;function ls(s){s!==El&&s.next===null&&(El===null?If=El=s:El=El.next=s),Af=!0,ay||(ay=!0,Sk())}function Su(s,i){if(!oy&&Af){oy=!0;do for(var o=!1,c=If;c!==null;){if(s!==0){var f=c.pendingLanes;if(f===0)var g=0;else{var b=c.suspendedLanes,E=c.pingedLanes;g=(1<<31-Rt(42|s)+1)-1,g&=f&~(b&~E),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(o=!0,E0(c,g))}else g=Pe,g=Gr(c,c===nt?g:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(g&3)===0||Ir(c,g)||(o=!0,E0(c,g));c=c.next}while(o);oy=!1}}function Ak(){x0()}function x0(){Af=ay=!1;var s=0;Ui!==0&&jk()&&(s=Ui);for(var i=wn(),o=null,c=If;c!==null;){var f=c.next,g=w0(c,i);g===0?(c.next=null,o===null?If=f:o.next=f,f===null&&(El=o)):(o=c,(s!==0||(g&3)!==0)&&(Af=!0)),c=f}$t!==0&&$t!==5||Su(s),Ui!==0&&(Ui=0)}function w0(s,i){for(var o=s.suspendedLanes,c=s.pingedLanes,f=s.expirationTimes,g=s.pendingLanes&-62914561;0<g;){var b=31-Rt(g),E=1<<b,D=f[b];D===-1?((E&o)===0||(E&c)!==0)&&(f[b]=Mg(E,i)):D<=i&&(s.expiredLanes|=E),g&=~E}if(i=nt,o=Pe,o=Gr(s,s===i?o:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c=s.callbackNode,o===0||s===i&&(Qe===2||Qe===9)||s.cancelPendingCommit!==null)return c!==null&&c!==null&&fi(c),s.callbackNode=null,s.callbackPriority=0;if((o&3)===0||Ir(s,o)){if(i=o&-o,i===s.callbackPriority)return i;switch(c!==null&&fi(c),Ss(o)){case 2:case 8:o=jc;break;case 32:o=mi;break;case 268435456:o=mh;break;default:o=mi}return c=T0.bind(null,s),o=Qt(o,c),s.callbackPriority=i,s.callbackNode=o,i}return c!==null&&c!==null&&fi(c),s.callbackPriority=2,s.callbackNode=null,2}function T0(s,i){if($t!==0&&$t!==5)return s.callbackNode=null,s.callbackPriority=0,null;var o=s.callbackNode;if(Ef()&&s.callbackNode!==o)return null;var c=Pe;return c=Gr(s,s===nt?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c===0?null:(s0(s,c,i),w0(s,wn()),s.callbackNode!=null&&s.callbackNode===o?T0.bind(null,s):null)}function E0(s,i){if(Ef())return null;s0(s,i,!0)}function Sk(){Uk(function(){(qe&6)!==0?Qt(Mc,Ak):x0()})}function ly(){if(Ui===0){var s=cl;s===0&&(s=Fr,Fr<<=1,(Fr&261888)===0&&(Fr=256)),Ui=s}return Ui}function I0(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:$o(""+s)}function A0(s,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,s.id&&o.setAttribute("form",s.id),i.parentNode.insertBefore(o,i),s=new FormData(s),o.parentNode.removeChild(o),s}function Rk(s,i,o,c,f){if(i==="submit"&&o&&o.stateNode===f){var g=I0((f[Xt]||null).action),b=c.submitter;b&&(i=(i=b[Xt]||null)?I0(i.formAction):b.getAttribute("formAction"),i!==null&&(g=i,b=null));var E=new ts("action","action",null,c,f);s.push({event:E,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Ui!==0){var D=b?A0(f,b):new FormData(f);Rp(o,{pending:!0,data:D,method:f.method,action:g},null,D)}}else typeof g=="function"&&(E.preventDefault(),D=b?A0(f,b):new FormData(f),Rp(o,{pending:!0,data:D,method:f.method,action:g},g,D))},currentTarget:f}]})}}for(var cy=0;cy<Hg.length;cy++){var uy=Hg[cy],Nk=uy.toLowerCase(),kk=uy[0].toUpperCase()+uy.slice(1);Pr(Nk,"on"+kk)}Pr(rx,"onAnimationEnd"),Pr(sx,"onAnimationIteration"),Pr(ix,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(KN,"onTransitionRun"),Pr(QN,"onTransitionStart"),Pr($N,"onTransitionCancel"),Pr(ax,"onTransitionEnd"),Xr("onMouseEnter",["mouseout","mouseover"]),Xr("onMouseLeave",["mouseout","mouseover"]),Xr("onPointerEnter",["pointerout","pointerover"]),Xr("onPointerLeave",["pointerout","pointerover"]),Wr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Wr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Wr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Wr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Wr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Wr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ru="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ck=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ru));function S0(s,i){i=(i&4)!==0;for(var o=0;o<s.length;o++){var c=s[o],f=c.event;c=c.listeners;e:{var g=void 0;if(i)for(var b=c.length-1;0<=b;b--){var E=c[b],D=E.instance,q=E.currentTarget;if(E=E.listener,D!==g&&f.isPropagationStopped())break e;g=E,f.currentTarget=q;try{g(f)}catch(J){zh(J)}f.currentTarget=null,g=D}else for(b=0;b<c.length;b++){if(E=c[b],D=E.instance,q=E.currentTarget,E=E.listener,D!==g&&f.isPropagationStopped())break e;g=E,f.currentTarget=q;try{g(f)}catch(J){zh(J)}f.currentTarget=null,g=D}}}}function ke(s,i){var o=i[qo];o===void 0&&(o=i[qo]=new Set);var c=s+"__bubble";o.has(c)||(R0(i,s,2,!1),o.add(c))}function dy(s,i,o){var c=0;i&&(c|=4),R0(o,s,c,i)}var Sf="_reactListening"+Math.random().toString(36).slice(2);function hy(s){if(!s[Sf]){s[Sf]=!0,zc.forEach(function(o){o!=="selectionchange"&&(Ck.has(o)||dy(o,!1,s),dy(o,!0,s))});var i=s.nodeType===9?s:s.ownerDocument;i===null||i[Sf]||(i[Sf]=!0,dy("selectionchange",!1,i))}}function R0(s,i,o,c){switch(rT(i)){case 2:var f=iC;break;case 8:f=aC;break;default:f=Sy}o=f.bind(null,i,o,s),f=void 0,!Va||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),c?f!==void 0?s.addEventListener(i,o,{capture:!0,passive:f}):s.addEventListener(i,o,!0):f!==void 0?s.addEventListener(i,o,{passive:f}):s.addEventListener(i,o,!1)}function fy(s,i,o,c,f){var g=c;if((i&1)===0&&(i&2)===0&&c!==null)e:for(;;){if(c===null)return;var b=c.tag;if(b===3||b===4){var E=c.stateNode.containerInfo;if(E===f)break;if(b===4)for(b=c.return;b!==null;){var D=b.tag;if((D===3||D===4)&&b.stateNode.containerInfo===f)return;b=b.return}for(;E!==null;){if(b=$r(E),b===null)return;if(D=b.tag,D===5||D===6||D===26||D===27){c=g=b;continue e}E=E.parentNode}}c=c.return}bi(function(){var q=g,J=lr(o),ee=[];e:{var G=ox.get(s);if(G!==void 0){var $=ts,fe=s;switch(s){case"keypress":if(ja(o)===0)break e;case"keydown":case"keyup":$=jh;break;case"focusin":fe="focus",$=Ua;break;case"focusout":fe="blur",$=Ua;break;case"beforeblur":case"afterblur":$=Ua;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$=Zc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$=Rh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$=_;break;case rx:case sx:case ix:$=kh;break;case ax:$=I;break;case"scroll":case"scrollend":$=Jc;break;case"wheel":$=Q;break;case"copy":case"cut":case"paste":$=Ch;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$=ks;break;case"toggle":case"beforetoggle":$=Te}var xe=(i&4)!==0,et=!xe&&(s==="scroll"||s==="scrollend"),j=xe?G!==null?G+"Capture":null:G;xe=[];for(var O=q,F;O!==null;){var Z=O;if(F=Z.stateNode,Z=Z.tag,Z!==5&&Z!==26&&Z!==27||F===null||j===null||(Z=Nr(O,j),Z!=null&&xe.push(Nu(O,Z,F))),et)break;O=O.return}0<xe.length&&(G=new $(G,fe,null,o,J),ee.push({event:G,listeners:xe}))}}if((i&7)===0){e:{if(G=s==="mouseover"||s==="pointerover",$=s==="mouseout"||s==="pointerout",G&&o!==Yc&&(fe=o.relatedTarget||o.fromElement)&&($r(fe)||fe[Kr]))break e;if(($||G)&&(G=J.window===J?J:(G=J.ownerDocument)?G.defaultView||G.parentWindow:window,$?(fe=o.relatedTarget||o.toElement,$=q,fe=fe?$r(fe):null,fe!==null&&(et=l(fe),xe=fe.tag,fe!==et||xe!==5&&xe!==27&&xe!==6)&&(fe=null)):($=null,fe=q),$!==fe)){if(xe=Zc,Z="onMouseLeave",j="onMouseEnter",O="mouse",(s==="pointerout"||s==="pointerover")&&(xe=ks,Z="onPointerLeave",j="onPointerEnter",O="pointer"),et=$==null?G:Fn($),F=fe==null?G:Fn(fe),G=new xe(Z,O+"leave",$,o,J),G.target=et,G.relatedTarget=F,Z=null,$r(J)===q&&(xe=new xe(j,O+"enter",fe,o,J),xe.target=F,xe.relatedTarget=et,Z=xe),et=Z,$&&fe)t:{for(xe=Dk,j=$,O=fe,F=0,Z=j;Z;Z=xe(Z))F++;Z=0;for(var be=O;be;be=xe(be))Z++;for(;0<F-Z;)j=xe(j),F--;for(;0<Z-F;)O=xe(O),Z--;for(;F--;){if(j===O||O!==null&&j===O.alternate){xe=j;break t}j=xe(j),O=xe(O)}xe=null}else xe=null;$!==null&&N0(ee,G,$,xe,!1),fe!==null&&et!==null&&N0(ee,et,fe,xe,!0)}}e:{if(G=q?Fn(q):window,$=G.nodeName&&G.nodeName.toLowerCase(),$==="select"||$==="input"&&G.type==="file")var Ue=Kb;else if(Gb(G))if(Qb)Ue=qN;else{Ue=BN;var ge=zN}else $=G.nodeName,!$||$.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?q&&Qo(q.elementType)&&(Ue=Kb):Ue=FN;if(Ue&&(Ue=Ue(s,q))){Hb(ee,Ue,o,J);break e}ge&&ge(s,G,q),s==="focusout"&&q&&G.type==="number"&&q.memoizedProps.value!=null&&Kc(G,"number",G.value)}switch(ge=q?Fn(q):window,s){case"focusin":(Gb(ge)||ge.contentEditable==="true")&&(tl=ge,Fg=q,su=null);break;case"focusout":su=Fg=tl=null;break;case"mousedown":qg=!0;break;case"contextmenu":case"mouseup":case"dragend":qg=!1,tx(ee,o,J);break;case"selectionchange":if(HN)break;case"keydown":case"keyup":tx(ee,o,J)}var Ae;if(Fe)e:{switch(s){case"compositionstart":var Oe="onCompositionStart";break e;case"compositionend":Oe="onCompositionEnd";break e;case"compositionupdate":Oe="onCompositionUpdate";break e}Oe=void 0}else el?za(s,o)&&(Oe="onCompositionEnd"):s==="keydown"&&o.keyCode===229&&(Oe="onCompositionStart");Oe&&(ss&&o.locale!=="ko"&&(el||Oe!=="onCompositionStart"?Oe==="onCompositionEnd"&&el&&(Ae=Xc()):(es=J,Wc="value"in es?es.value:es.textContent,el=!0)),ge=Rf(q,Oe),0<ge.length&&(Oe=new rs(Oe,s,null,o,J),ee.push({event:Oe,listeners:ge}),Ae?Oe.data=Ae:(Ae=Zo(o),Ae!==null&&(Oe.data=Ae)))),(Ae=ur?MN(s,o):jN(s,o))&&(Oe=Rf(q,"onBeforeInput"),0<Oe.length&&(ge=new rs("onBeforeInput","beforeinput",null,o,J),ee.push({event:ge,listeners:Oe}),ge.data=Ae)),Rk(ee,s,q,o,J)}S0(ee,i)})}function Nu(s,i,o){return{instance:s,listener:i,currentTarget:o}}function Rf(s,i){for(var o=i+"Capture",c=[];s!==null;){var f=s,g=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||g===null||(f=Nr(s,o),f!=null&&c.unshift(Nu(s,f,g)),f=Nr(s,i),f!=null&&c.push(Nu(s,f,g))),s.tag===3)return c;s=s.return}return[]}function Dk(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function N0(s,i,o,c,f){for(var g=i._reactName,b=[];o!==null&&o!==c;){var E=o,D=E.alternate,q=E.stateNode;if(E=E.tag,D!==null&&D===c)break;E!==5&&E!==26&&E!==27||q===null||(D=q,f?(q=Nr(o,g),q!=null&&b.unshift(Nu(o,q,D))):f||(q=Nr(o,g),q!=null&&b.push(Nu(o,q,D)))),o=o.return}b.length!==0&&s.push({event:i,listeners:b})}var Pk=/\r\n?/g,Ok=/\u0000|\uFFFD/g;function k0(s){return(typeof s=="string"?s:""+s).replace(Pk,`
`).replace(Ok,"")}function C0(s,i){return i=k0(i),k0(s)===i}function Ze(s,i,o,c,f,g){switch(o){case"children":typeof c=="string"?i==="body"||i==="textarea"&&c===""||Dn(s,c):(typeof c=="number"||typeof c=="bigint")&&i!=="body"&&Dn(s,""+c);break;case"className":qn(s,"class",c);break;case"tabIndex":qn(s,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":qn(s,o,c);break;case"style":$c(s,c,g);break;case"data":if(i!=="object"){qn(s,"data",c);break}case"src":case"href":if(c===""&&(i!=="a"||o!=="href")){s.removeAttribute(o);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(o);break}c=$o(""+c),s.setAttribute(o,c);break;case"action":case"formAction":if(typeof c=="function"){s.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(o==="formAction"?(i!=="input"&&Ze(s,i,"name",f.name,f,null),Ze(s,i,"formEncType",f.formEncType,f,null),Ze(s,i,"formMethod",f.formMethod,f,null),Ze(s,i,"formTarget",f.formTarget,f,null)):(Ze(s,i,"encType",f.encType,f,null),Ze(s,i,"method",f.method,f,null),Ze(s,i,"target",f.target,f,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(o);break}c=$o(""+c),s.setAttribute(o,c);break;case"onClick":c!=null&&(s.onclick=Rr);break;case"onScroll":c!=null&&ke("scroll",s);break;case"onScrollEnd":c!=null&&ke("scrollend",s);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(o=c.__html,o!=null){if(f.children!=null)throw Error(r(60));s.innerHTML=o}}break;case"multiple":s.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":s.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){s.removeAttribute("xlink:href");break}o=$o(""+c),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(o,""+c):s.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(o,""):s.removeAttribute(o);break;case"capture":case"download":c===!0?s.setAttribute(o,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(o,c):s.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?s.setAttribute(o,c):s.removeAttribute(o);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?s.removeAttribute(o):s.setAttribute(o,c);break;case"popover":ke("beforetoggle",s),ke("toggle",s),Ho(s,"popover",c);break;case"xlinkActuate":Ut(s,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Ut(s,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Ut(s,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Ut(s,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Ut(s,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Ut(s,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Ut(s,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Ut(s,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Ut(s,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Ho(s,"is",c);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Sh.get(o)||o,Ho(s,o,c))}}function my(s,i,o,c,f,g){switch(o){case"style":$c(s,c,g);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(o=c.__html,o!=null){if(f.children!=null)throw Error(r(60));s.innerHTML=o}}break;case"children":typeof c=="string"?Dn(s,c):(typeof c=="number"||typeof c=="bigint")&&Dn(s,""+c);break;case"onScroll":c!=null&&ke("scroll",s);break;case"onScrollEnd":c!=null&&ke("scrollend",s);break;case"onClick":c!=null&&(s.onclick=Rr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Bc.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),i=o.slice(2,f?o.length-7:void 0),g=s[Xt]||null,g=g!=null?g[o]:null,typeof g=="function"&&s.removeEventListener(i,g,f),typeof c=="function")){typeof g!="function"&&g!==null&&(o in s?s[o]=null:s.hasAttribute(o)&&s.removeAttribute(o)),s.addEventListener(i,c,f);break e}o in s?s[o]=c:c===!0?s.setAttribute(o,""):Ho(s,o,c)}}}function un(s,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ke("error",s),ke("load",s);var c=!1,f=!1,g;for(g in o)if(o.hasOwnProperty(g)){var b=o[g];if(b!=null)switch(g){case"src":c=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:Ze(s,i,g,b,o,null)}}f&&Ze(s,i,"srcSet",o.srcSet,o,null),c&&Ze(s,i,"src",o.src,o,null);return;case"input":ke("invalid",s);var E=g=b=f=null,D=null,q=null;for(c in o)if(o.hasOwnProperty(c)){var J=o[c];if(J!=null)switch(c){case"name":f=J;break;case"type":b=J;break;case"checked":D=J;break;case"defaultChecked":q=J;break;case"value":g=J;break;case"defaultValue":E=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(r(137,i));break;default:Ze(s,i,c,J,o,null)}}Eh(s,g,E,D,q,b,f,!1);return;case"select":ke("invalid",s),c=b=g=null;for(f in o)if(o.hasOwnProperty(f)&&(E=o[f],E!=null))switch(f){case"value":g=E;break;case"defaultValue":b=E;break;case"multiple":c=E;default:Ze(s,i,f,E,o,null)}i=g,o=b,s.multiple=!!c,i!=null?pi(s,!!c,i,!1):o!=null&&pi(s,!!c,o,!0);return;case"textarea":ke("invalid",s),g=f=c=null;for(b in o)if(o.hasOwnProperty(b)&&(E=o[b],E!=null))switch(b){case"value":c=E;break;case"defaultValue":f=E;break;case"children":g=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(r(91));break;default:Ze(s,i,b,E,o,null)}yi(s,c,f,g);return;case"option":for(D in o)if(o.hasOwnProperty(D)&&(c=o[D],c!=null))switch(D){case"selected":s.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:Ze(s,i,D,c,o,null)}return;case"dialog":ke("beforetoggle",s),ke("toggle",s),ke("cancel",s),ke("close",s);break;case"iframe":case"object":ke("load",s);break;case"video":case"audio":for(c=0;c<Ru.length;c++)ke(Ru[c],s);break;case"image":ke("error",s),ke("load",s);break;case"details":ke("toggle",s);break;case"embed":case"source":case"link":ke("error",s),ke("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(q in o)if(o.hasOwnProperty(q)&&(c=o[q],c!=null))switch(q){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:Ze(s,i,q,c,o,null)}return;default:if(Qo(i)){for(J in o)o.hasOwnProperty(J)&&(c=o[J],c!==void 0&&my(s,i,J,c,o,void 0));return}}for(E in o)o.hasOwnProperty(E)&&(c=o[E],c!=null&&Ze(s,i,E,c,o,null))}function Vk(s,i,o,c){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,g=null,b=null,E=null,D=null,q=null,J=null;for($ in o){var ee=o[$];if(o.hasOwnProperty($)&&ee!=null)switch($){case"checked":break;case"value":break;case"defaultValue":D=ee;default:c.hasOwnProperty($)||Ze(s,i,$,null,c,ee)}}for(var G in c){var $=c[G];if(ee=o[G],c.hasOwnProperty(G)&&($!=null||ee!=null))switch(G){case"type":g=$;break;case"name":f=$;break;case"checked":q=$;break;case"defaultChecked":J=$;break;case"value":b=$;break;case"defaultValue":E=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(r(137,i));break;default:$!==ee&&Ze(s,i,G,$,c,ee)}}Ko(s,b,E,D,q,J,g,f);return;case"select":$=b=E=G=null;for(g in o)if(D=o[g],o.hasOwnProperty(g)&&D!=null)switch(g){case"value":break;case"multiple":$=D;default:c.hasOwnProperty(g)||Ze(s,i,g,null,c,D)}for(f in c)if(g=c[f],D=o[f],c.hasOwnProperty(f)&&(g!=null||D!=null))switch(f){case"value":G=g;break;case"defaultValue":E=g;break;case"multiple":b=g;default:g!==D&&Ze(s,i,f,g,c,D)}i=E,o=b,c=$,G!=null?pi(s,!!o,G,!1):!!c!=!!o&&(i!=null?pi(s,!!o,i,!0):pi(s,!!o,o?[]:"",!1));return;case"textarea":$=G=null;for(E in o)if(f=o[E],o.hasOwnProperty(E)&&f!=null&&!c.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:Ze(s,i,E,null,c,f)}for(b in c)if(f=c[b],g=o[b],c.hasOwnProperty(b)&&(f!=null||g!=null))switch(b){case"value":G=f;break;case"defaultValue":$=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==g&&Ze(s,i,b,f,c,g)}Ih(s,G,$);return;case"option":for(var fe in o)if(G=o[fe],o.hasOwnProperty(fe)&&G!=null&&!c.hasOwnProperty(fe))switch(fe){case"selected":s.selected=!1;break;default:Ze(s,i,fe,null,c,G)}for(D in c)if(G=c[D],$=o[D],c.hasOwnProperty(D)&&G!==$&&(G!=null||$!=null))switch(D){case"selected":s.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:Ze(s,i,D,G,c,$)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var xe in o)G=o[xe],o.hasOwnProperty(xe)&&G!=null&&!c.hasOwnProperty(xe)&&Ze(s,i,xe,null,c,G);for(q in c)if(G=c[q],$=o[q],c.hasOwnProperty(q)&&G!==$&&(G!=null||$!=null))switch(q){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(r(137,i));break;default:Ze(s,i,q,G,c,$)}return;default:if(Qo(i)){for(var et in o)G=o[et],o.hasOwnProperty(et)&&G!==void 0&&!c.hasOwnProperty(et)&&my(s,i,et,void 0,c,G);for(J in c)G=c[J],$=o[J],!c.hasOwnProperty(J)||G===$||G===void 0&&$===void 0||my(s,i,J,G,c,$);return}}for(var j in o)G=o[j],o.hasOwnProperty(j)&&G!=null&&!c.hasOwnProperty(j)&&Ze(s,i,j,null,c,G);for(ee in c)G=c[ee],$=o[ee],!c.hasOwnProperty(ee)||G===$||G==null&&$==null||Ze(s,i,ee,G,c,$)}function D0(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Mk(){if(typeof performance.getEntriesByType=="function"){for(var s=0,i=0,o=performance.getEntriesByType("resource"),c=0;c<o.length;c++){var f=o[c],g=f.transferSize,b=f.initiatorType,E=f.duration;if(g&&E&&D0(b)){for(b=0,E=f.responseEnd,c+=1;c<o.length;c++){var D=o[c],q=D.startTime;if(q>E)break;var J=D.transferSize,ee=D.initiatorType;J&&D0(ee)&&(D=D.responseEnd,b+=J*(D<E?1:(E-q)/(D-q)))}if(--c,i+=8*(g+b)/(f.duration/1e3),s++,10<s)break}}if(0<s)return i/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var gy=null,py=null;function Nf(s){return s.nodeType===9?s:s.ownerDocument}function P0(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function O0(s,i){if(s===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&i==="foreignObject"?0:s}function yy(s,i){return s==="textarea"||s==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var _y=null;function jk(){var s=window.event;return s&&s.type==="popstate"?s===_y?!1:(_y=s,!0):(_y=null,!1)}var V0=typeof setTimeout=="function"?setTimeout:void 0,Lk=typeof clearTimeout=="function"?clearTimeout:void 0,M0=typeof Promise=="function"?Promise:void 0,Uk=typeof queueMicrotask=="function"?queueMicrotask:typeof M0<"u"?function(s){return M0.resolve(null).then(s).catch(zk)}:V0;function zk(s){setTimeout(function(){throw s})}function zi(s){return s==="head"}function j0(s,i){var o=i,c=0;do{var f=o.nextSibling;if(s.removeChild(o),f&&f.nodeType===8)if(o=f.data,o==="/$"||o==="/&"){if(c===0){s.removeChild(f),Rl(i);return}c--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")c++;else if(o==="html")ku(s.ownerDocument.documentElement);else if(o==="head"){o=s.ownerDocument.head,ku(o);for(var g=o.firstChild;g;){var b=g.nextSibling,E=g.nodeName;g[Qr]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&g.rel.toLowerCase()==="stylesheet"||o.removeChild(g),g=b}}else o==="body"&&ku(s.ownerDocument.body);o=f}while(o);Rl(i)}function L0(s,i){var o=s;s=0;do{var c=o.nextSibling;if(o.nodeType===1?i?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(i?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),c&&c.nodeType===8)if(o=c.data,o==="/$"){if(s===0)break;s--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||s++;o=c}while(o)}function vy(s){var i=s.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":vy(o),Go(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}s.removeChild(o)}}function Bk(s,i,o,c){for(;s.nodeType===1;){var f=o;if(s.nodeName.toLowerCase()!==i.toLowerCase()){if(!c&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(c){if(!s[Qr])switch(i){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(g=s.getAttribute("rel"),g==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(g!==f.rel||s.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||s.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||s.getAttribute("title")!==(f.title==null?null:f.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(g=s.getAttribute("src"),(g!==(f.src==null?null:f.src)||s.getAttribute("type")!==(f.type==null?null:f.type)||s.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&g&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(i==="input"&&s.type==="hidden"){var g=f.name==null?null:""+f.name;if(f.type==="hidden"&&s.getAttribute("name")===g)return s}else return s;if(s=yr(s.nextSibling),s===null)break}return null}function Fk(s,i,o){if(i==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!o||(s=yr(s.nextSibling),s===null))return null;return s}function U0(s,i){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!i||(s=yr(s.nextSibling),s===null))return null;return s}function by(s){return s.data==="$?"||s.data==="$~"}function xy(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function qk(s,i){var o=s.ownerDocument;if(s.data==="$~")s._reactRetry=i;else if(s.data!=="$?"||o.readyState!=="loading")i();else{var c=function(){i(),o.removeEventListener("DOMContentLoaded",c)};o.addEventListener("DOMContentLoaded",c),s._reactRetry=c}}function yr(s){for(;s!=null;s=s.nextSibling){var i=s.nodeType;if(i===1||i===3)break;if(i===8){if(i=s.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return s}var wy=null;function z0(s){s=s.nextSibling;for(var i=0;s;){if(s.nodeType===8){var o=s.data;if(o==="/$"||o==="/&"){if(i===0)return yr(s.nextSibling);i--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||i++}s=s.nextSibling}return null}function B0(s){s=s.previousSibling;for(var i=0;s;){if(s.nodeType===8){var o=s.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(i===0)return s;i--}else o!=="/$"&&o!=="/&"||i++}s=s.previousSibling}return null}function F0(s,i,o){switch(i=Nf(o),s){case"html":if(s=i.documentElement,!s)throw Error(r(452));return s;case"head":if(s=i.head,!s)throw Error(r(453));return s;case"body":if(s=i.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function ku(s){for(var i=s.attributes;i.length;)s.removeAttributeNode(i[0]);Go(s)}var _r=new Map,q0=new Set;function kf(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Hs=le.d;le.d={f:Gk,r:Hk,D:Kk,C:Qk,L:$k,m:Yk,X:Xk,S:Wk,M:Jk};function Gk(){var s=Hs.f(),i=xf();return s||i}function Hk(s){var i=or(s);i!==null&&i.tag===5&&i.type==="form"?aw(i):Hs.r(s)}var Il=typeof document>"u"?null:document;function G0(s,i,o){var c=Il;if(c&&typeof i=="string"&&i){var f=Cn(i);f='link[rel="'+s+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),q0.has(f)||(q0.add(f),s={rel:s,crossOrigin:o,href:i},c.querySelector(f)===null&&(i=c.createElement("link"),un(i,"link",s),Lt(i),c.head.appendChild(i)))}}function Kk(s){Hs.D(s),G0("dns-prefetch",s,null)}function Qk(s,i){Hs.C(s,i),G0("preconnect",s,i)}function $k(s,i,o){Hs.L(s,i,o);var c=Il;if(c&&s&&i){var f='link[rel="preload"][as="'+Cn(i)+'"]';i==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+Cn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+Cn(o.imageSizes)+'"]')):f+='[href="'+Cn(s)+'"]';var g=f;switch(i){case"style":g=Al(s);break;case"script":g=Sl(s)}_r.has(g)||(s=x({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:s,as:i},o),_r.set(g,s),c.querySelector(f)!==null||i==="style"&&c.querySelector(Cu(g))||i==="script"&&c.querySelector(Du(g))||(i=c.createElement("link"),un(i,"link",s),Lt(i),c.head.appendChild(i)))}}function Yk(s,i){Hs.m(s,i);var o=Il;if(o&&s){var c=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+Cn(c)+'"][href="'+Cn(s)+'"]',g=f;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=Sl(s)}if(!_r.has(g)&&(s=x({rel:"modulepreload",href:s},i),_r.set(g,s),o.querySelector(f)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Du(g)))return}c=o.createElement("link"),un(c,"link",s),Lt(c),o.head.appendChild(c)}}}function Wk(s,i,o){Hs.S(s,i,o);var c=Il;if(c&&s){var f=Yr(c).hoistableStyles,g=Al(s);i=i||"default";var b=f.get(g);if(!b){var E={loading:0,preload:null};if(b=c.querySelector(Cu(g)))E.loading=5;else{s=x({rel:"stylesheet",href:s,"data-precedence":i},o),(o=_r.get(g))&&Ty(s,o);var D=b=c.createElement("link");Lt(D),un(D,"link",s),D._p=new Promise(function(q,J){D.onload=q,D.onerror=J}),D.addEventListener("load",function(){E.loading|=1}),D.addEventListener("error",function(){E.loading|=2}),E.loading|=4,Cf(b,i,c)}b={type:"stylesheet",instance:b,count:1,state:E},f.set(g,b)}}}function Xk(s,i){Hs.X(s,i);var o=Il;if(o&&s){var c=Yr(o).hoistableScripts,f=Sl(s),g=c.get(f);g||(g=o.querySelector(Du(f)),g||(s=x({src:s,async:!0},i),(i=_r.get(f))&&Ey(s,i),g=o.createElement("script"),Lt(g),un(g,"link",s),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(f,g))}}function Jk(s,i){Hs.M(s,i);var o=Il;if(o&&s){var c=Yr(o).hoistableScripts,f=Sl(s),g=c.get(f);g||(g=o.querySelector(Du(f)),g||(s=x({src:s,async:!0,type:"module"},i),(i=_r.get(f))&&Ey(s,i),g=o.createElement("script"),Lt(g),un(g,"link",s),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(f,g))}}function H0(s,i,o,c){var f=(f=ir.current)?kf(f):null;if(!f)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=Al(o.href),o=Yr(f).hoistableStyles,c=o.get(i),c||(c={type:"style",instance:null,count:0,state:null},o.set(i,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){s=Al(o.href);var g=Yr(f).hoistableStyles,b=g.get(s);if(b||(f=f.ownerDocument||f,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(s,b),(g=f.querySelector(Cu(s)))&&!g._p&&(b.instance=g,b.state.loading=5),_r.has(s)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},_r.set(s,o),g||Zk(f,s,o,b.state))),i&&c===null)throw Error(r(528,""));return b}if(i&&c!==null)throw Error(r(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Sl(o),o=Yr(f).hoistableScripts,c=o.get(i),c||(c={type:"script",instance:null,count:0,state:null},o.set(i,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function Al(s){return'href="'+Cn(s)+'"'}function Cu(s){return'link[rel="stylesheet"]['+s+"]"}function K0(s){return x({},s,{"data-precedence":s.precedence,precedence:null})}function Zk(s,i,o,c){s.querySelector('link[rel="preload"][as="style"]['+i+"]")?c.loading=1:(i=s.createElement("link"),c.preload=i,i.addEventListener("load",function(){return c.loading|=1}),i.addEventListener("error",function(){return c.loading|=2}),un(i,"link",o),Lt(i),s.head.appendChild(i))}function Sl(s){return'[src="'+Cn(s)+'"]'}function Du(s){return"script[async]"+s}function Q0(s,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var c=s.querySelector('style[data-href~="'+Cn(o.href)+'"]');if(c)return i.instance=c,Lt(c),c;var f=x({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return c=(s.ownerDocument||s).createElement("style"),Lt(c),un(c,"style",f),Cf(c,o.precedence,s),i.instance=c;case"stylesheet":f=Al(o.href);var g=s.querySelector(Cu(f));if(g)return i.state.loading|=4,i.instance=g,Lt(g),g;c=K0(o),(f=_r.get(f))&&Ty(c,f),g=(s.ownerDocument||s).createElement("link"),Lt(g);var b=g;return b._p=new Promise(function(E,D){b.onload=E,b.onerror=D}),un(g,"link",c),i.state.loading|=4,Cf(g,o.precedence,s),i.instance=g;case"script":return g=Sl(o.src),(f=s.querySelector(Du(g)))?(i.instance=f,Lt(f),f):(c=o,(f=_r.get(g))&&(c=x({},o),Ey(c,f)),s=s.ownerDocument||s,f=s.createElement("script"),Lt(f),un(f,"link",c),s.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(c=i.instance,i.state.loading|=4,Cf(c,o.precedence,s));return i.instance}function Cf(s,i,o){for(var c=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=c.length?c[c.length-1]:null,g=f,b=0;b<c.length;b++){var E=c[b];if(E.dataset.precedence===i)g=E;else if(g!==f)break}g?g.parentNode.insertBefore(s,g.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(s,i.firstChild))}function Ty(s,i){s.crossOrigin==null&&(s.crossOrigin=i.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=i.referrerPolicy),s.title==null&&(s.title=i.title)}function Ey(s,i){s.crossOrigin==null&&(s.crossOrigin=i.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=i.referrerPolicy),s.integrity==null&&(s.integrity=i.integrity)}var Df=null;function $0(s,i,o){if(Df===null){var c=new Map,f=Df=new Map;f.set(o,c)}else f=Df,c=f.get(o),c||(c=new Map,f.set(o,c));if(c.has(s))return c;for(c.set(s,null),o=o.getElementsByTagName(s),f=0;f<o.length;f++){var g=o[f];if(!(g[Qr]||g[jt]||s==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var b=g.getAttribute(i)||"";b=s+b;var E=c.get(b);E?E.push(g):c.set(b,[g])}}return c}function Y0(s,i,o){s=s.ownerDocument||s,s.head.insertBefore(o,i==="title"?s.querySelector("head > title"):null)}function eC(s,i,o){if(o===1||i.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return s=i.disabled,typeof i.precedence=="string"&&s==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function W0(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function tC(s,i,o,c){if(o.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var f=Al(c.href),g=i.querySelector(Cu(f));if(g){i=g._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(s.count++,s=Pf.bind(s),i.then(s,s)),o.state.loading|=4,o.instance=g,Lt(g);return}g=i.ownerDocument||i,c=K0(c),(f=_r.get(f))&&Ty(c,f),g=g.createElement("link"),Lt(g);var b=g;b._p=new Promise(function(E,D){b.onload=E,b.onerror=D}),un(g,"link",c),o.instance=g}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(o,i),(i=o.state.preload)&&(o.state.loading&3)===0&&(s.count++,o=Pf.bind(s),i.addEventListener("load",o),i.addEventListener("error",o))}}var Iy=0;function nC(s,i){return s.stylesheets&&s.count===0&&Vf(s,s.stylesheets),0<s.count||0<s.imgCount?function(o){var c=setTimeout(function(){if(s.stylesheets&&Vf(s,s.stylesheets),s.unsuspend){var g=s.unsuspend;s.unsuspend=null,g()}},6e4+i);0<s.imgBytes&&Iy===0&&(Iy=62500*Mk());var f=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&Vf(s,s.stylesheets),s.unsuspend)){var g=s.unsuspend;s.unsuspend=null,g()}},(s.imgBytes>Iy?50:800)+i);return s.unsuspend=o,function(){s.unsuspend=null,clearTimeout(c),clearTimeout(f)}}:null}function Pf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Vf(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Of=null;function Vf(s,i){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Of=new Map,i.forEach(rC,s),Of=null,Pf.call(s))}function rC(s,i){if(!(i.state.loading&4)){var o=Of.get(s);if(o)var c=o.get(null);else{o=new Map,Of.set(s,o);for(var f=s.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<f.length;g++){var b=f[g];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(o.set(b.dataset.precedence,b),c=b)}c&&o.set(null,c)}f=i.instance,b=f.getAttribute("data-precedence"),g=o.get(b)||c,g===c&&o.set(null,f),o.set(b,f),this.count++,c=Pf.bind(this),f.addEventListener("load",c),f.addEventListener("error",c),g?g.parentNode.insertBefore(f,g.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(f,s.firstChild)),i.state.loading|=4}}var Pu={$$typeof:X,Provider:null,Consumer:null,_currentValue:ve,_currentValue2:ve,_threadCount:0};function sC(s,i,o,c,f,g,b,E,D){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Hr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hr(0),this.hiddenUpdates=Hr(null),this.identifierPrefix=c,this.onUncaughtError=f,this.onCaughtError=g,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function X0(s,i,o,c,f,g,b,E,D,q,J,ee){return s=new sC(s,i,o,b,D,q,J,ee,E),i=1,g===!0&&(i|=24),g=Hn(3,null,null,i),s.current=g,g.stateNode=s,i=sp(),i.refCount++,s.pooledCache=i,i.refCount++,g.memoizedState={element:c,isDehydrated:o,cache:i},lp(g),s}function J0(s){return s?(s=sl,s):sl}function Z0(s,i,o,c,f,g){f=J0(f),c.context===null?c.context=f:c.pendingContext=f,c=Ni(i),c.payload={element:o},g=g===void 0?null:g,g!==null&&(c.callback=g),o=ki(s,c,i),o!==null&&(jn(o,s,i),du(o,s,i))}function eT(s,i){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var o=s.retryLane;s.retryLane=o!==0&&o<i?o:i}}function Ay(s,i){eT(s,i),(s=s.alternate)&&eT(s,i)}function tT(s){if(s.tag===13||s.tag===31){var i=qa(s,67108864);i!==null&&jn(i,s,67108864),Ay(s,67108864)}}function nT(s){if(s.tag===13||s.tag===31){var i=Wn();i=Ca(i);var o=qa(s,i);o!==null&&jn(o,s,i),Ay(s,i)}}var Mf=!0;function iC(s,i,o,c){var f=K.T;K.T=null;var g=le.p;try{le.p=2,Sy(s,i,o,c)}finally{le.p=g,K.T=f}}function aC(s,i,o,c){var f=K.T;K.T=null;var g=le.p;try{le.p=8,Sy(s,i,o,c)}finally{le.p=g,K.T=f}}function Sy(s,i,o,c){if(Mf){var f=Ry(c);if(f===null)fy(s,i,c,jf,o),sT(s,c);else if(lC(f,s,i,o,c))c.stopPropagation();else if(sT(s,c),i&4&&-1<oC.indexOf(s)){for(;f!==null;){var g=or(f);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var b=qr(g.pendingLanes);if(b!==0){var E=g;for(E.pendingLanes|=2,E.entangledLanes|=2;b;){var D=1<<31-Rt(b);E.entanglements[1]|=D,b&=~D}ls(g),(qe&6)===0&&(vf=wn()+500,Su(0))}}break;case 31:case 13:E=qa(g,2),E!==null&&jn(E,g,2),xf(),Ay(g,2)}if(g=Ry(c),g===null&&fy(s,i,c,jf,o),g===f)break;f=g}f!==null&&c.stopPropagation()}else fy(s,i,c,null,o)}}function Ry(s){return s=lr(s),Ny(s)}var jf=null;function Ny(s){if(jf=null,s=$r(s),s!==null){var i=l(s);if(i===null)s=null;else{var o=i.tag;if(o===13){if(s=u(i),s!==null)return s;s=null}else if(o===31){if(s=h(i),s!==null)return s;s=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;s=null}else i!==s&&(s=null)}}return jf=s,null}function rT(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Sa()){case Mc:return 2;case jc:return 8;case mi:case Vg:return 32;case mh:return 268435456;default:return 32}default:return 32}}var ky=!1,Bi=null,Fi=null,qi=null,Ou=new Map,Vu=new Map,Gi=[],oC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function sT(s,i){switch(s){case"focusin":case"focusout":Bi=null;break;case"dragenter":case"dragleave":Fi=null;break;case"mouseover":case"mouseout":qi=null;break;case"pointerover":case"pointerout":Ou.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vu.delete(i.pointerId)}}function Mu(s,i,o,c,f,g){return s===null||s.nativeEvent!==g?(s={blockedOn:i,domEventName:o,eventSystemFlags:c,nativeEvent:g,targetContainers:[f]},i!==null&&(i=or(i),i!==null&&tT(i)),s):(s.eventSystemFlags|=c,i=s.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),s)}function lC(s,i,o,c,f){switch(i){case"focusin":return Bi=Mu(Bi,s,i,o,c,f),!0;case"dragenter":return Fi=Mu(Fi,s,i,o,c,f),!0;case"mouseover":return qi=Mu(qi,s,i,o,c,f),!0;case"pointerover":var g=f.pointerId;return Ou.set(g,Mu(Ou.get(g)||null,s,i,o,c,f)),!0;case"gotpointercapture":return g=f.pointerId,Vu.set(g,Mu(Vu.get(g)||null,s,i,o,c,f)),!0}return!1}function iT(s){var i=$r(s.target);if(i!==null){var o=l(i);if(o!==null){if(i=o.tag,i===13){if(i=u(o),i!==null){s.blockedOn=i,Ar(s.priority,function(){nT(o)});return}}else if(i===31){if(i=h(o),i!==null){s.blockedOn=i,Ar(s.priority,function(){nT(o)});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){s.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Lf(s){if(s.blockedOn!==null)return!1;for(var i=s.targetContainers;0<i.length;){var o=Ry(s.nativeEvent);if(o===null){o=s.nativeEvent;var c=new o.constructor(o.type,o);Yc=c,o.target.dispatchEvent(c),Yc=null}else return i=or(o),i!==null&&tT(i),s.blockedOn=o,!1;i.shift()}return!0}function aT(s,i,o){Lf(s)&&o.delete(i)}function cC(){ky=!1,Bi!==null&&Lf(Bi)&&(Bi=null),Fi!==null&&Lf(Fi)&&(Fi=null),qi!==null&&Lf(qi)&&(qi=null),Ou.forEach(aT),Vu.forEach(aT)}function Uf(s,i){s.blockedOn===i&&(s.blockedOn=null,ky||(ky=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,cC)))}var zf=null;function oT(s){zf!==s&&(zf=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){zf===s&&(zf=null);for(var i=0;i<s.length;i+=3){var o=s[i],c=s[i+1],f=s[i+2];if(typeof c!="function"){if(Ny(c||o)===null)continue;break}var g=or(o);g!==null&&(s.splice(i,3),i-=3,Rp(g,{pending:!0,data:f,method:o.method,action:c},c,f))}}))}function Rl(s){function i(D){return Uf(D,s)}Bi!==null&&Uf(Bi,s),Fi!==null&&Uf(Fi,s),qi!==null&&Uf(qi,s),Ou.forEach(i),Vu.forEach(i);for(var o=0;o<Gi.length;o++){var c=Gi[o];c.blockedOn===s&&(c.blockedOn=null)}for(;0<Gi.length&&(o=Gi[0],o.blockedOn===null);)iT(o),o.blockedOn===null&&Gi.shift();if(o=(s.ownerDocument||s).$$reactFormReplay,o!=null)for(c=0;c<o.length;c+=3){var f=o[c],g=o[c+1],b=f[Xt]||null;if(typeof g=="function")b||oT(o);else if(b){var E=null;if(g&&g.hasAttribute("formAction")){if(f=g,b=g[Xt]||null)E=b.formAction;else if(Ny(f)!==null)continue}else E=b.action;typeof E=="function"?o[c+1]=E:(o.splice(c,3),c-=3),oT(o)}}}function lT(){function s(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(b){return f=b})},focusReset:"manual",scroll:"manual"})}function i(){f!==null&&(f(),f=null),c||setTimeout(o,20)}function o(){if(!c&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,f=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(o,100),function(){c=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),f!==null&&(f(),f=null)}}}function Cy(s){this._internalRoot=s}Bf.prototype.render=Cy.prototype.render=function(s){var i=this._internalRoot;if(i===null)throw Error(r(409));var o=i.current,c=Wn();Z0(o,c,s,i,null,null)},Bf.prototype.unmount=Cy.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var i=s.containerInfo;Z0(s.current,2,null,s,null,null),xf(),i[Kr]=null}};function Bf(s){this._internalRoot=s}Bf.prototype.unstable_scheduleHydration=function(s){if(s){var i=bh();s={blockedOn:null,target:s,priority:i};for(var o=0;o<Gi.length&&i!==0&&i<Gi[o].priority;o++);Gi.splice(o,0,s),o===0&&iT(s)}};var cT=e.version;if(cT!=="19.2.0")throw Error(r(527,cT,"19.2.0"));le.findDOMNode=function(s){var i=s._reactInternals;if(i===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=y(i),s=s!==null?v(s):null,s=s===null?null:s.stateNode,s};var uC={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ff=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ff.isDisabled&&Ff.supportsFiber)try{Er=Ff.inject(uC),sn=Ff}catch{}}return Lu.createRoot=function(s,i){if(!a(s))throw Error(r(299));var o=!1,c="",f=pw,g=yw,b=_w;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(g=i.onCaughtError),i.onRecoverableError!==void 0&&(b=i.onRecoverableError)),i=X0(s,1,!1,null,null,o,c,null,f,g,b,lT),s[Kr]=i.current,hy(s),new Cy(i)},Lu.hydrateRoot=function(s,i,o){if(!a(s))throw Error(r(299));var c=!1,f="",g=pw,b=yw,E=_w,D=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(b=o.onCaughtError),o.onRecoverableError!==void 0&&(E=o.onRecoverableError),o.formState!==void 0&&(D=o.formState)),i=X0(s,1,!0,i,o??null,c,f,D,g,b,E,lT),i.context=J0(null),o=i.current,c=Wn(),c=Ca(c),f=Ni(c),f.callback=null,ki(o,f,c),o=c,i.current.lanes=o,Na(i,o),ls(i),s[Kr]=i.current,hy(s),new Bf(i)},Lu.version="19.2.0",Lu}var gT;function _C(){if(gT)return Py.exports;gT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Py.exports=yC(),Py.exports}var vC=_C();const bC=GI(vC),HI=se.createContext(null),KI=se.createContext(null),xC=({children:n})=>{const[e,t]=se.useState(()=>{const a=localStorage.getItem("theme");return a||(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")});se.useEffect(()=>{e==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("theme",e)},[e]);const r=()=>{t(a=>a==="light"?"dark":"light")};return p.jsx(KI.Provider,{value:{theme:e,toggleTheme:r},children:n})},QI=()=>{const n=se.useContext(KI);if(!n)throw new Error("useTheme must be used within a ThemeProvider");return n},sr=()=>{const n=se.useContext(HI);if(!n)throw new Error("useAuth must be used within an AuthProvider");return n},aa=Gm.memo(({children:n,className:e="",variant:t="primary",size:r="md",isRound:a=!1,...l})=>{const u="font-bold focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition ease-in-out duration-150",h={primary:"bg-primary hover:bg-primary/90 text-white focus:ring-primary flex items-center justify-center",secondary:"bg-gray-200 hover:bg-gray-300 text-gray-800 dark:bg-gray-700 dark:text-gray-200 dark:hover:bg-gray-600 focus:ring-gray-500 flex items-center justify-center",danger:"bg-red-600 hover:bg-red-700 text-white focus:ring-red-500 flex items-center justify-center"},m={sm:a?"p-2":"py-2 px-3 text-sm",md:a?"p-2.5":"py-2 px-4 text-sm",lg:a?"p-3":"py-3 px-6 text-base"},y=a?"rounded-full":"rounded-md shadow-sm";return p.jsx("button",{className:`${u} ${h[t]} ${m[r]} ${y} ${e}`,...l,children:n})}),$I=()=>{const n=window.location.pathname;return n.includes("/social_media-new/")||n==="/social_media-new"?"/social_media-new":window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"?"":"/social_media-new"},pT=n=>$I()+n,wC=n=>{const e=$I();return e&&n.startsWith(e)?n.slice(e.length)||"/":n},Xn={push:n=>{const e=pT(n);window.history.pushState({},"",e),window.dispatchEvent(new PopStateEvent("popstate"))},replace:n=>{const e=pT(n);window.history.replaceState({},"",e),window.dispatchEvent(new PopStateEvent("popstate"))},getCurrentRoute:()=>wC(window.location.pathname),back:()=>{window.history.back()}},YI=n=>{const e=n.startsWith("/")?n.slice(1):n;return window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"?`/${e}`:`/social_media-new/${e}`},TC=()=>{const{login:n,loginWithGoogle:e}=sr(),{toggleAuth:t,isFlipping:r}=XI(),[a,l]=se.useState(""),[u,h]=se.useState(""),[m,y]=se.useState(""),[v,x]=se.useState(!1),[T,R]=se.useState(!1),V=async M=>{M.preventDefault(),y(""),x(!0);try{await n(a,u)}catch(W){y(W.message||"Failed to log in. Please check your credentials.")}finally{x(!1)}},U=async()=>{y(""),R(!0);try{await e()}catch(M){y(M.message||"Failed to log in with Google.")}finally{R(!1)}};return p.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-white to-orange-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 flex items-center justify-center p-4 relative overflow-hidden",children:[p.jsx("div",{className:"absolute top-10 left-10 w-32 h-32 bg-saffron/10 rounded-3xl transform rotate-12 animate-pulse"}),p.jsx("div",{className:"absolute bottom-20 right-20 w-40 h-40 bg-saffron/10 rounded-3xl transform -rotate-12 animate-pulse"}),p.jsx("div",{className:"absolute top-1/4 left-1/4 w-2 h-2 bg-saffron rounded-full animate-ping"}),p.jsx("div",{className:"absolute top-1/3 right-1/4 w-2 h-2 bg-yellow-400 rounded-full animate-pulse",style:{animationDelay:"0.5s"}}),p.jsx("div",{className:"absolute bottom-1/4 left-1/3 w-2 h-2 bg-orange-400 rounded-full animate-ping",style:{animationDelay:"1s"}}),p.jsx("div",{className:"absolute top-2/3 right-1/3 w-2 h-2 bg-saffron rounded-full animate-pulse",style:{animationDelay:"1.5s"}}),p.jsx("div",{className:"absolute top-1/2 left-1/5 w-1.5 h-1.5 bg-yellow-300 rounded-full animate-ping",style:{animationDelay:"0.3s"}}),p.jsx("div",{className:"absolute bottom-1/3 right-1/5 w-1.5 h-1.5 bg-orange-300 rounded-full animate-pulse",style:{animationDelay:"0.8s"}}),p.jsx("div",{className:"absolute top-3/4 left-2/3 w-1 h-1 bg-yellow-400 rounded-full animate-ping",style:{animationDelay:"1.2s"}}),p.jsx("div",{className:"absolute top-1/5 right-2/3 w-1 h-1 bg-saffron rounded-full animate-pulse",style:{animationDelay:"1.7s"}}),p.jsx("style",{dangerouslySetInnerHTML:{__html:`
        @keyframes float-sparkle {
          0%, 100% { transform: translateY(0px) scale(1); opacity: 0.4; }
          50% { transform: translateY(-20px) scale(1.2); opacity: 1; }
        }
        @keyframes twinkle {
          0%, 100% { opacity: 0.3; transform: scale(0.8); }
          50% { opacity: 1; transform: scale(1.2); }
        }
        @keyframes flip {
          0% { transform: rotateY(0deg) translateX(0); }
          10% { transform: rotateY(36deg) translateX(-3px); }
          20% { transform: rotateY(72deg) translateX(3px); }
          30% { transform: rotateY(108deg) translateX(-2px); }
          40% { transform: rotateY(144deg) translateX(2px); }
          50% { transform: rotateY(180deg) translateX(0); }
          60% { transform: rotateY(216deg) translateX(-2px); }
          70% { transform: rotateY(252deg) translateX(2px); }
          80% { transform: rotateY(288deg) translateX(-3px); }
          90% { transform: rotateY(324deg) translateX(3px); }
          100% { transform: rotateY(360deg) translateX(0); }
        }
        @keyframes gentle-float {
          0%, 100% { transform: translateY(0px) rotate(0deg); }
          25% { transform: translateY(-5px) rotate(1deg); }
          50% { transform: translateY(0px) rotate(0deg); }
          75% { transform: translateY(-3px) rotate(-1deg); }
        }
        .sparkle-float { animation: float-sparkle 3s ease-in-out infinite; }
        .sparkle-twinkle { animation: twinkle 2s ease-in-out infinite; }
        .image-float { animation: gentle-float 4s ease-in-out infinite; }
      `}}),p.jsx("div",{className:"absolute top-1/6 left-1/6 w-3 h-3 bg-gradient-to-br from-yellow-200 to-orange-300 rounded-full sparkle-float",style:{animationDelay:"0s"}}),p.jsx("div",{className:"absolute top-1/2 right-1/6 w-2 h-2 bg-gradient-to-br from-yellow-300 to-saffron rounded-full sparkle-twinkle",style:{animationDelay:"0.5s"}}),p.jsx("div",{className:"absolute bottom-1/6 left-2/3 w-2.5 h-2.5 bg-gradient-to-br from-orange-200 to-saffron rounded-full sparkle-float",style:{animationDelay:"1s"}}),p.jsx("div",{className:"absolute top-1/3 left-1/2 w-1.5 h-1.5 bg-gradient-to-br from-yellow-400 to-orange-400 rounded-full sparkle-twinkle",style:{animationDelay:"1.5s"}}),p.jsxs("div",{className:"relative z-10 w-full max-w-5xl grid md:grid-cols-2 gap-8 items-center",children:[p.jsxs("div",{className:"hidden md:flex flex-col items-center justify-center",children:[p.jsxs("div",{className:"relative",children:[p.jsx("img",{src:YI("assets/loginpage.png"),alt:"Login Illustration",className:`w-full h-auto max-w-lg object-contain drop-shadow-2xl transition-transform duration-700 ${r?"animate-[flip_0.7s_ease-in-out]":"image-float"}`,style:{transformStyle:"preserve-3d"}}),p.jsx("div",{className:"absolute -top-4 -left-4 grid grid-cols-3 gap-2",children:[...Array(9)].map((M,W)=>p.jsx("div",{className:"w-2 h-2 bg-saffron rounded-full"},W))}),p.jsx("div",{className:"absolute -bottom-4 -right-4 grid grid-cols-3 gap-2",children:[...Array(9)].map((M,W)=>p.jsx("div",{className:"w-2 h-2 bg-saffron rounded-full"},W))})]}),p.jsx("h2",{className:"mt-8 text-3xl font-bold text-gray-800 dark:text-white",children:"Welcome Back!"}),p.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"Sign in to continue your journey"})]}),p.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl shadow-2xl p-8 md:p-10",children:[p.jsxs("div",{className:"text-center mb-8",children:[p.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white mb-2",children:"Agent Login"}),p.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Hey, Enter your details to get sign in to your account"})]}),m&&p.jsx("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl text-red-600 dark:text-red-400 text-sm",children:m}),p.jsxs("form",{className:"space-y-5",onSubmit:V,children:[p.jsx("div",{children:p.jsx("input",{id:"email",type:"email",placeholder:"Enter Email / Phone No",value:a,onChange:M=>l(M.target.value),autoComplete:"email",required:!0,className:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl text-gray-800 dark:text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-saffron focus:border-transparent transition-all"})}),p.jsxs("div",{className:"relative",children:[p.jsx("input",{id:"password",type:"password",placeholder:"Passcode",value:u,onChange:M=>h(M.target.value),autoComplete:"current-password",required:!0,className:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl text-gray-800 dark:text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-saffron focus:border-transparent transition-all"}),p.jsx("button",{type:"button",className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 text-sm font-medium",children:"Hide"})]}),p.jsx("div",{className:"text-left",children:p.jsx("a",{href:"#",className:"text-sm text-gray-600 dark:text-gray-400 hover:text-saffron transition-colors",children:"Having trouble in sign in?"})}),p.jsx(aa,{type:"submit",className:"w-full bg-gradient-to-r from-saffron to-saffron-dark hover:from-saffron-dark hover:to-saffron text-white font-semibold py-3 rounded-xl shadow-lg hover:shadow-xl transition-all transform hover:scale-[1.02]",disabled:v||T,children:v?"Signing in...":"Sign in"})]}),p.jsxs("div",{className:"relative my-6",children:[p.jsx("div",{className:"absolute inset-0 flex items-center",children:p.jsx("div",{className:"w-full border-t border-gray-200 dark:border-gray-700"})}),p.jsx("div",{className:"relative flex justify-center text-sm",children:p.jsx("span",{className:"px-4 bg-white dark:bg-gray-800 text-gray-500 dark:text-gray-400",children:"Or Sign in with"})})]}),p.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[p.jsxs("button",{type:"button",onClick:U,disabled:T||v,className:"flex items-center justify-center px-4 py-3 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-600 transition-all transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed",children:[p.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[p.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),p.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),p.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),p.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),p.jsx("span",{className:"ml-2 text-sm font-medium text-gray-700 dark:text-gray-300",children:"Google"})]}),p.jsxs("button",{type:"button",className:"flex items-center justify-center px-4 py-3 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-600 transition-all transform hover:scale-105",children:[p.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:p.jsx("path",{d:"M17.05 20.28c-.98.95-2.05.88-3.08.4-1.09-.5-2.08-.48-3.24 0-1.44.62-2.2.44-3.06-.4C2.79 15.25 3.51 7.59 9.05 7.31c1.35.07 2.29.74 3.08.8 1.18-.24 2.31-.93 3.57-.84 1.51.12 2.65.72 3.4 1.8-3.12 1.87-2.38 5.98.48 7.13-.57 1.5-1.31 2.99-2.54 4.09l.01-.01zM12.03 7.25c-.15-2.23 1.66-4.07 3.74-4.25.29 2.58-2.34 4.5-3.74 4.25z"})}),p.jsx("span",{className:"ml-2 text-sm font-medium text-gray-700 dark:text-gray-300",children:"Apple ID"})]}),p.jsxs("button",{type:"button",className:"flex items-center justify-center px-4 py-3 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-600 transition-all transform hover:scale-105",children:[p.jsx("svg",{className:"w-5 h-5 text-blue-600",viewBox:"0 0 24 24",fill:"currentColor",children:p.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),p.jsx("span",{className:"ml-2 text-sm font-medium text-gray-700 dark:text-gray-300",children:"Facebook"})]})]}),p.jsxs("div",{className:"mt-6 text-center text-sm text-gray-600 dark:text-gray-400",children:["Don't have an account? ",p.jsx("button",{type:"button",onClick:()=>{t(),Xn.push("/signup")},className:"text-saffron font-semibold hover:text-saffron-dark transition-colors",children:"Request Now"})]})]})]})]})},EC=()=>{const{signup:n}=sr(),{toggleAuth:e,isFlipping:t}=XI(),[r,a]=se.useState(""),[l,u]=se.useState(""),[h,m]=se.useState(""),[y,v]=se.useState(""),[x,T]=se.useState(!1),R=async V=>{V.preventDefault(),v(""),T(!0);try{await n(r,l,h)}catch(U){v(U.message||"Failed to sign up. Please try again.")}finally{T(!1)}};return p.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-white to-orange-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 flex items-center justify-center p-4 relative overflow-hidden",children:[p.jsx("div",{className:"absolute top-10 left-10 w-32 h-32 bg-saffron/10 rounded-3xl transform rotate-12 animate-pulse"}),p.jsx("div",{className:"absolute bottom-20 right-20 w-40 h-40 bg-saffron/10 rounded-3xl transform -rotate-12 animate-pulse"}),p.jsx("div",{className:"absolute top-1/4 left-1/4 w-2 h-2 bg-saffron rounded-full animate-ping"}),p.jsx("div",{className:"absolute top-1/3 right-1/4 w-2 h-2 bg-yellow-400 rounded-full animate-pulse",style:{animationDelay:"0.5s"}}),p.jsx("div",{className:"absolute bottom-1/4 left-1/3 w-2 h-2 bg-orange-400 rounded-full animate-ping",style:{animationDelay:"1s"}}),p.jsx("div",{className:"absolute top-2/3 right-1/3 w-2 h-2 bg-saffron rounded-full animate-pulse",style:{animationDelay:"1.5s"}}),p.jsx("div",{className:"absolute top-1/2 left-1/5 w-1.5 h-1.5 bg-yellow-300 rounded-full animate-ping",style:{animationDelay:"0.3s"}}),p.jsx("div",{className:"absolute bottom-1/3 right-1/5 w-1.5 h-1.5 bg-orange-300 rounded-full animate-pulse",style:{animationDelay:"0.8s"}}),p.jsx("div",{className:"absolute top-3/4 left-2/3 w-1 h-1 bg-yellow-400 rounded-full animate-ping",style:{animationDelay:"1.2s"}}),p.jsx("div",{className:"absolute top-1/5 right-2/3 w-1 h-1 bg-saffron rounded-full animate-pulse",style:{animationDelay:"1.7s"}}),p.jsx("style",{dangerouslySetInnerHTML:{__html:`
        @keyframes float-sparkle {
          0%, 100% { transform: translateY(0px) scale(1); opacity: 0.4; }
          50% { transform: translateY(-20px) scale(1.2); opacity: 1; }
        }
        @keyframes twinkle {
          0%, 100% { opacity: 0.3; transform: scale(0.8); }
          50% { opacity: 1; transform: scale(1.2); }
        }
        @keyframes flip {
          0% { transform: rotateY(0deg) translateX(0); }
          10% { transform: rotateY(36deg) translateX(-3px); }
          20% { transform: rotateY(72deg) translateX(3px); }
          30% { transform: rotateY(108deg) translateX(-2px); }
          40% { transform: rotateY(144deg) translateX(2px); }
          50% { transform: rotateY(180deg) translateX(0); }
          60% { transform: rotateY(216deg) translateX(-2px); }
          70% { transform: rotateY(252deg) translateX(2px); }
          80% { transform: rotateY(288deg) translateX(-3px); }
          90% { transform: rotateY(324deg) translateX(3px); }
          100% { transform: rotateY(360deg) translateX(0); }
        }
        @keyframes gentle-float {
          0%, 100% { transform: translateY(0px) rotate(0deg); }
          25% { transform: translateY(-5px) rotate(1deg); }
          50% { transform: translateY(0px) rotate(0deg); }
          75% { transform: translateY(-3px) rotate(-1deg); }
        }
        .sparkle-float { animation: float-sparkle 3s ease-in-out infinite; }
        .sparkle-twinkle { animation: twinkle 2s ease-in-out infinite; }
        .image-float { animation: gentle-float 4s ease-in-out infinite; }
      `}}),p.jsx("div",{className:"absolute top-1/6 left-1/6 w-3 h-3 bg-gradient-to-br from-yellow-200 to-orange-300 rounded-full sparkle-float",style:{animationDelay:"0s"}}),p.jsx("div",{className:"absolute top-1/2 right-1/6 w-2 h-2 bg-gradient-to-br from-yellow-300 to-saffron rounded-full sparkle-twinkle",style:{animationDelay:"0.5s"}}),p.jsx("div",{className:"absolute bottom-1/6 left-2/3 w-2.5 h-2.5 bg-gradient-to-br from-orange-200 to-saffron rounded-full sparkle-float",style:{animationDelay:"1s"}}),p.jsx("div",{className:"absolute top-1/3 left-1/2 w-1.5 h-1.5 bg-gradient-to-br from-yellow-400 to-orange-400 rounded-full sparkle-twinkle",style:{animationDelay:"1.5s"}}),p.jsxs("div",{className:"relative z-10 w-full max-w-5xl grid md:grid-cols-2 gap-8 items-center",children:[p.jsxs("div",{className:"hidden md:flex flex-col items-center justify-center",children:[p.jsxs("div",{className:"relative",children:[p.jsx("img",{src:YI("assets/loginpage.png"),alt:"SignUp Illustration",className:`w-full h-auto max-w-lg object-contain drop-shadow-2xl transition-transform duration-700 ${t?"animate-[flip_0.7s_ease-in-out]":"image-float"}`,style:{transformStyle:"preserve-3d"}}),p.jsx("div",{className:"absolute -top-4 -left-4 grid grid-cols-3 gap-2",children:[...Array(9)].map((V,U)=>p.jsx("div",{className:"w-2 h-2 bg-saffron rounded-full"},U))}),p.jsx("div",{className:"absolute -bottom-4 -right-4 grid grid-cols-3 gap-2",children:[...Array(9)].map((V,U)=>p.jsx("div",{className:"w-2 h-2 bg-saffron rounded-full"},U))})]}),p.jsx("h2",{className:"mt-8 text-3xl font-bold text-gray-800 dark:text-white",children:"Join Us Today!"}),p.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"Create your account to get started"})]}),p.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl shadow-2xl p-8 md:p-10",children:[p.jsxs("div",{className:"text-center mb-8",children:[p.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white mb-2",children:"Create Account"}),p.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Enter your details to create your account"})]}),y&&p.jsx("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl text-red-600 dark:text-red-400 text-sm",children:y}),p.jsxs("form",{className:"space-y-5",onSubmit:R,children:[p.jsx("div",{children:p.jsx("input",{id:"name",type:"text",placeholder:"Full Name",value:r,onChange:V=>a(V.target.value),required:!0,className:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl text-gray-800 dark:text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-saffron focus:border-transparent transition-all"})}),p.jsx("div",{children:p.jsx("input",{id:"email-signup",type:"email",placeholder:"Email Address",value:l,onChange:V=>u(V.target.value),required:!0,className:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl text-gray-800 dark:text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-saffron focus:border-transparent transition-all"})}),p.jsx("div",{children:p.jsx("input",{id:"password-signup",type:"password",placeholder:"Password",value:h,onChange:V=>m(V.target.value),required:!0,className:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl text-gray-800 dark:text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-saffron focus:border-transparent transition-all"})}),p.jsx(aa,{type:"submit",className:"w-full bg-gradient-to-r from-saffron to-saffron-dark hover:from-saffron-dark hover:to-saffron text-white font-semibold py-3 rounded-xl shadow-lg hover:shadow-xl transition-all transform hover:scale-[1.02]",disabled:x,children:x?"Creating account...":"Create Account"})]}),p.jsxs("div",{className:"mt-6 text-center text-sm text-gray-600 dark:text-gray-400",children:["Already have an account? ",p.jsx("button",{type:"button",onClick:()=>{e(),Xn.push("/login")},className:"text-saffron font-semibold hover:text-saffron-dark transition-colors",children:"Sign In"})]})]})]})]})},WI=se.createContext({isLogin:!0,isFlipping:!1,toggleAuth:()=>{}}),XI=()=>se.useContext(WI),IC=({currentRoute:n="/login"})=>{const[e,t]=se.useState(n!=="/signup"),[r,a]=se.useState(!1),l=()=>{a(!0),setTimeout(()=>{t(!e),setTimeout(()=>{a(!1)},100)},350)};return p.jsx(WI.Provider,{value:{isLogin:e,isFlipping:r,toggleAuth:l},children:e?p.jsx(TC,{}):p.jsx(EC,{})})},AC=({currentPage:n,setCurrentPage:e})=>{const{user:t,logout:r}=sr(),{theme:a,toggleTheme:l}=QI();return p.jsxs("header",{className:"sticky top-0 z-10 bg-surface-light/80 dark:bg-surface-dark/80 backdrop-blur-sm hidden md:block",children:[p.jsxs("div",{className:"flex items-center p-4 pb-2 justify-between",children:[p.jsx("div",{className:"flex shrink-0 items-center justify-start w-12 gap-2 cursor-pointer",onClick:()=>e("feed"),children:p.jsx("span",{className:"material-symbols-outlined text-primary text-3xl",children:"all_inclusive"})}),p.jsx("h1",{className:"text-text-light dark:text-text-dark text-xl font-bold leading-tight tracking-[-0.015em] flex-1",children:"Productive Bharat"}),p.jsxs("div",{className:"flex items-center justify-end gap-2",children:[p.jsx("button",{onClick:l,className:"flex cursor-pointer items-center justify-center overflow-hidden rounded-full h-10 w-10 bg-transparent text-text-light dark:text-text-dark hover:bg-primary/10 transition-all",title:a==="dark"?"Switch to light mode":"Switch to dark mode",children:p.jsx("span",{className:"material-symbols-outlined",children:a==="dark"?"light_mode":"dark_mode"})}),p.jsxs("button",{onClick:()=>alert("Notifications clicked!"),className:"flex cursor-pointer items-center justify-center overflow-hidden rounded-full h-10 w-10 bg-transparent text-text-light dark:text-text-dark hover:bg-primary/10 transition-all relative",children:[p.jsx("span",{className:"material-symbols-outlined",children:"notifications"}),p.jsx("div",{className:"absolute top-1 right-1 h-2.5 w-2.5 rounded-full bg-primary border-2 border-surface-light dark:border-surface-dark"})]}),p.jsx("button",{onClick:()=>e("settings"),className:`flex cursor-pointer items-center justify-center overflow-hidden rounded-full h-10 w-10 transition-all ${n==="settings"?"bg-primary/20 text-primary":"bg-transparent text-text-light dark:text-text-dark hover:bg-primary/10"}`,title:"Settings",children:p.jsx("span",{className:"material-symbols-outlined",children:"settings"})})]})]}),p.jsx("div",{className:"px-4",children:p.jsxs("div",{className:"flex border-b border-border-light dark:border-border-dark gap-8",children:[p.jsx("button",{onClick:()=>e("feed"),className:`flex flex-col items-center justify-center border-b-[3px] pb-3 pt-2 ${n==="feed"?"border-b-primary":"border-b-transparent"}`,children:p.jsx("p",{className:`text-sm font-bold leading-normal tracking-[0.015em] ${n==="feed"?"text-primary":"text-text-muted-light dark:text-text-muted-dark"}`,children:"Feed"})}),p.jsx("button",{onClick:()=>e("users"),className:`flex flex-col items-center justify-center border-b-[3px] pb-3 pt-2 ${n==="users"?"border-b-primary":"border-b-transparent"}`,children:p.jsx("p",{className:`text-sm font-bold leading-normal tracking-[0.015em] ${n==="users"?"text-primary":"text-text-muted-light dark:text-text-muted-dark"}`,children:"Network"})}),p.jsx("button",{onClick:()=>e("profile"),className:`flex flex-col items-center justify-center border-b-[3px] pb-3 pt-2 ${n==="profile"?"border-b-primary":"border-b-transparent"}`,children:p.jsx("p",{className:`text-sm font-bold leading-normal tracking-[0.015em] ${n==="profile"?"text-primary":"text-text-muted-light dark:text-text-muted-dark"}`,children:"Profile"})}),(t==null?void 0:t.role)==="admin"&&p.jsxs("button",{onClick:()=>e("admin"),className:`flex flex-col items-center justify-center border-b-[3px] pb-3 pt-2 gap-1 ${n==="admin"?"border-b-primary":"border-b-transparent"}`,children:[p.jsx("span",{className:`material-symbols-outlined text-xl ${n==="admin"?"text-primary":"text-text-muted-light dark:text-text-muted-dark"}`,children:"admin_panel_settings"}),p.jsx("p",{className:`text-sm font-bold leading-normal tracking-[0.015em] ${n==="admin"?"text-primary":"text-text-muted-light dark:text-text-muted-dark"}`,children:"Admin"})]})]})})]})},SC="modulepreload",RC=function(n){return"/social_media-new/"+n},yT={},_T=function(e,t,r){let a=Promise.resolve();if(t&&t.length>0){let u=function(y){return Promise.all(y.map(v=>Promise.resolve(v).then(x=>({status:"fulfilled",value:x}),x=>({status:"rejected",reason:x}))))};document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),m=(h==null?void 0:h.nonce)||(h==null?void 0:h.getAttribute("nonce"));a=u(t.map(y=>{if(y=RC(y),y in yT)return;yT[y]=!0;const v=y.endsWith(".css"),x=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${y}"]${x}`))return;const T=document.createElement("link");if(T.rel=v?"stylesheet":SC,v||(T.as="script"),T.crossOrigin="",T.href=y,m&&T.setAttribute("nonce",m),document.head.appendChild(T),v)return new Promise((R,V)=>{T.addEventListener("load",R),T.addEventListener("error",()=>V(new Error(`Unable to preload CSS for ${y}`)))})}))}function l(u){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=u,window.dispatchEvent(h),!h.defaultPrevented)throw u}return a.then(u=>{for(const h of u||[])h.status==="rejected"&&l(h.reason);return e().catch(l)})},NC=()=>{};var vT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JI=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let a=n.charCodeAt(r);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},kC=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const a=n[t++];if(a<128)e[r++]=String.fromCharCode(a);else if(a>191&&a<224){const l=n[t++];e[r++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=n[t++],u=n[t++],h=n[t++],m=((a&7)<<18|(l&63)<<12|(u&63)<<6|h&63)-65536;e[r++]=String.fromCharCode(55296+(m>>10)),e[r++]=String.fromCharCode(56320+(m&1023))}else{const l=n[t++],u=n[t++];e[r++]=String.fromCharCode((a&15)<<12|(l&63)<<6|u&63)}}return e.join("")},ZI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<n.length;a+=3){const l=n[a],u=a+1<n.length,h=u?n[a+1]:0,m=a+2<n.length,y=m?n[a+2]:0,v=l>>2,x=(l&3)<<4|h>>4;let T=(h&15)<<2|y>>6,R=y&63;m||(R=64,u||(T=64)),r.push(t[v],t[x],t[T],t[R])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(JI(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):kC(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<n.length;){const l=t[n.charAt(a++)],h=a<n.length?t[n.charAt(a)]:0;++a;const y=a<n.length?t[n.charAt(a)]:64;++a;const x=a<n.length?t[n.charAt(a)]:64;if(++a,l==null||h==null||y==null||x==null)throw new CC;const T=l<<2|h>>4;if(r.push(T),y!==64){const R=h<<4&240|y>>2;if(r.push(R),x!==64){const V=y<<6&192|x;r.push(V)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class CC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const DC=function(n){const e=JI(n);return ZI.encodeByteArray(e,!0)},ym=function(n){return DC(n).replace(/\./g,"")},X_=function(n){try{return ZI.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function _m(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!PC(t)||(n[t]=_m(n[t],e[t]));return n}function PC(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC=()=>J_().__FIREBASE_DEFAULTS__,VC=()=>{if(typeof process>"u"||typeof vT>"u")return;const n=vT.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},MC=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&X_(n[1]);return e&&JSON.parse(e)},Z_=()=>{try{return NC()||OC()||VC()||MC()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},ev=()=>{var n;return(n=Z_())==null?void 0:n.config},jC=n=>{var e;return(e=Z_())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _a(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function tv(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eA(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",a=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${r}`,aud:r,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[ym(JSON.stringify(t)),ym(JSON.stringify(u)),""].join(".")}const sd={};function UC(){const n={prod:[],emulator:[]};for(const e of Object.keys(sd))sd[e]?n.emulator.push(e):n.prod.push(e);return n}function zC(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let bT=!1;function nv(n,e){if(typeof window>"u"||typeof document>"u"||!_a(window.location.host)||sd[n]===e||sd[n]||bT)return;sd[n]=e;function t(T){return`__firebase__banner__${T}`}const r="__firebase__banner",l=UC().prod.length>0;function u(){const T=document.getElementById(r);T&&T.remove()}function h(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function m(T,R){T.setAttribute("width","24"),T.setAttribute("id",R),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function y(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{bT=!0,u()},T}function v(T,R){T.setAttribute("id",R),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function x(){const T=zC(r),R=t("text"),V=document.getElementById(R)||document.createElement("span"),U=t("learnmore"),M=document.getElementById(U)||document.createElement("a"),W=t("preprendIcon"),Y=document.getElementById(W)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const X=T.element;h(X),v(M,U);const oe=y();m(Y,W),X.append(Y,V,M,oe),document.body.appendChild(X)}l?(V.innerText="Preview backend disconnected.",Y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,V.innerText="Preview backend running in this workspace."),V.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",x):x()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function BC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(vt())}function Hm(){var e;const n=(e=Z_())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function FC(){return typeof window<"u"||tA()}function tA(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function qC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function nA(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function rv(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function rA(){const n=vt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function sA(){return!Hm()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function iA(){return!Hm()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function xd(){try{return typeof indexedDB=="object"}catch{return!1}}function GC(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var l;e(((l=a.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HC="FirebaseError";class vn extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=HC,Object.setPrototypeOf(this,vn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Po.prototype.create)}}class Po{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],u=l?KC(l,r):"Error",h=`${this.serviceName}: ${u} (${a}).`;return new vn(a,h,r)}}function KC(n,e){return n.replace(QC,(t,r)=>{const a=e[r];return a!=null?String(a):`<${r}?>`})}const QC=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xT(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function $C(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function oa(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const a of t){if(!r.includes(a))return!1;const l=n[a],u=e[a];if(wT(l)&&wT(u)){if(!oa(l,u))return!1}else if(l!==u)return!1}for(const a of r)if(!t.includes(a))return!1;return!0}function wT(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vc(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Fl(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[a,l]=r.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function Wu(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function aA(n,e){const t=new YC(n,e);return t.subscribe.bind(t)}class YC{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let a;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");WC(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:r},a.next===void 0&&(a.next=My),a.error===void 0&&(a.error=My),a.complete===void 0&&(a.complete=My);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function WC(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function My(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pe(n){return n&&n._delegate?n._delegate:n}class wr{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ro="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new LC;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(r)return null;throw a}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ZC(e))try{this.getOrInitializeService({instanceIdentifier:ro})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});r.resolve(l)}catch{}}}}clearInstance(e=ro){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ro){return this.instances.has(e)}getOptions(e=ro){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[l,u]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(l);r===h&&u.resolve(a)}return a}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(r)??new Set;a.add(e),this.onInitCallbacks.set(r,a);const l=this.instances.get(r);return l&&e(l,r),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const a of r)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:JC(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ro){return this.component?this.component.multipleInstances?e:ro:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function JC(n){return n===ro?void 0:n}function ZC(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new XC(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sv=[];var Ce;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ce||(Ce={}));const lA={debug:Ce.DEBUG,verbose:Ce.VERBOSE,info:Ce.INFO,warn:Ce.WARN,error:Ce.ERROR,silent:Ce.SILENT},e2=Ce.INFO,t2={[Ce.DEBUG]:"log",[Ce.VERBOSE]:"log",[Ce.INFO]:"info",[Ce.WARN]:"warn",[Ce.ERROR]:"error"},n2=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),a=t2[e];if(a)console[a](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Km{constructor(e){this.name=e,this._logLevel=e2,this._logHandler=n2,this._userLogHandler=null,sv.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ce))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?lA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ce.DEBUG,...e),this._logHandler(this,Ce.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ce.VERBOSE,...e),this._logHandler(this,Ce.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ce.INFO,...e),this._logHandler(this,Ce.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ce.WARN,...e),this._logHandler(this,Ce.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ce.ERROR,...e),this._logHandler(this,Ce.ERROR,...e)}}function r2(n){sv.forEach(e=>{e.setLogLevel(n)})}function s2(n,e){for(const t of sv){let r=null;e&&e.level&&(r=lA[e.level]),n===null?t.userLogHandler=null:t.userLogHandler=(a,l,...u)=>{const h=u.map(m=>{if(m==null)return null;if(typeof m=="string")return m;if(typeof m=="number"||typeof m=="boolean")return m.toString();if(m instanceof Error)return m.message;try{return JSON.stringify(m)}catch{return null}}).filter(m=>m).join(" ");l>=(r??a.logLevel)&&n({level:Ce[l].toLowerCase(),message:h,args:u,type:a.name})}}}const i2=(n,e)=>e.some(t=>n instanceof t);let TT,ET;function a2(){return TT||(TT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function o2(){return ET||(ET=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cA=new WeakMap,a_=new WeakMap,uA=new WeakMap,jy=new WeakMap,iv=new WeakMap;function l2(n){const e=new Promise((t,r)=>{const a=()=>{n.removeEventListener("success",l),n.removeEventListener("error",u)},l=()=>{t(ta(n.result)),a()},u=()=>{r(n.error),a()};n.addEventListener("success",l),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&cA.set(t,n)}).catch(()=>{}),iv.set(e,n),e}function c2(n){if(a_.has(n))return;const e=new Promise((t,r)=>{const a=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",u),n.removeEventListener("abort",u)},l=()=>{t(),a()},u=()=>{r(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",l),n.addEventListener("error",u),n.addEventListener("abort",u)});a_.set(n,e)}let o_={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return a_.get(n);if(e==="objectStoreNames")return n.objectStoreNames||uA.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ta(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function u2(n){o_=n(o_)}function d2(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Ly(this),e,...t);return uA.set(r,e.sort?e.sort():[e]),ta(r)}:o2().includes(n)?function(...e){return n.apply(Ly(this),e),ta(cA.get(this))}:function(...e){return ta(n.apply(Ly(this),e))}}function h2(n){return typeof n=="function"?d2(n):(n instanceof IDBTransaction&&c2(n),i2(n,a2())?new Proxy(n,o_):n)}function ta(n){if(n instanceof IDBRequest)return l2(n);if(jy.has(n))return jy.get(n);const e=h2(n);return e!==n&&(jy.set(n,e),iv.set(e,n)),e}const Ly=n=>iv.get(n);function f2(n,e,{blocked:t,upgrade:r,blocking:a,terminated:l}={}){const u=indexedDB.open(n,e),h=ta(u);return r&&u.addEventListener("upgradeneeded",m=>{r(ta(u.result),m.oldVersion,m.newVersion,ta(u.transaction),m)}),t&&u.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),h.then(m=>{l&&m.addEventListener("close",()=>l()),a&&m.addEventListener("versionchange",y=>a(y.oldVersion,y.newVersion,y))}).catch(()=>{}),h}const m2=["get","getKey","getAll","getAllKeys","count"],g2=["put","add","delete","clear"],Uy=new Map;function IT(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Uy.get(e))return Uy.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,a=g2.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(a||m2.includes(t)))return;const l=async function(u,...h){const m=this.transaction(u,a?"readwrite":"readonly");let y=m.store;return r&&(y=y.index(h.shift())),(await Promise.all([y[t](...h),a&&m.done]))[0]};return Uy.set(e,l),l}u2(n=>({...n,get:(e,t,r)=>IT(e,t)||n.get(e,t,r),has:(e,t)=>!!IT(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(y2(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function y2(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const vm="@firebase/app",l_="0.14.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Js=new Km("@firebase/app"),_2="@firebase/app-compat",v2="@firebase/analytics-compat",b2="@firebase/analytics",x2="@firebase/app-check-compat",w2="@firebase/app-check",T2="@firebase/auth",E2="@firebase/auth-compat",I2="@firebase/database",A2="@firebase/data-connect",S2="@firebase/database-compat",R2="@firebase/functions",N2="@firebase/functions-compat",k2="@firebase/installations",C2="@firebase/installations-compat",D2="@firebase/messaging",P2="@firebase/messaging-compat",O2="@firebase/performance",V2="@firebase/performance-compat",M2="@firebase/remote-config",j2="@firebase/remote-config-compat",L2="@firebase/storage",U2="@firebase/storage-compat",z2="@firebase/firestore",B2="@firebase/ai",F2="@firebase/firestore-compat",q2="firebase",G2="12.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const la="[DEFAULT]",H2={[vm]:"fire-core",[_2]:"fire-core-compat",[b2]:"fire-analytics",[v2]:"fire-analytics-compat",[w2]:"fire-app-check",[x2]:"fire-app-check-compat",[T2]:"fire-auth",[E2]:"fire-auth-compat",[I2]:"fire-rtdb",[A2]:"fire-data-connect",[S2]:"fire-rtdb-compat",[R2]:"fire-fn",[N2]:"fire-fn-compat",[k2]:"fire-iid",[C2]:"fire-iid-compat",[D2]:"fire-fcm",[P2]:"fire-fcm-compat",[O2]:"fire-perf",[V2]:"fire-perf-compat",[M2]:"fire-rc",[j2]:"fire-rc-compat",[L2]:"fire-gcs",[U2]:"fire-gcs-compat",[z2]:"fire-fst",[F2]:"fire-fst-compat",[B2]:"fire-vertex","fire-js":"fire-js",[q2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ca=new Map,Wl=new Map,Xl=new Map;function wd(n,e){try{n.container.addComponent(e)}catch(t){Js.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function dA(n,e){n.container.addOrOverwriteComponent(e)}function Zs(n){const e=n.name;if(Xl.has(e))return Js.debug(`There were multiple attempts to register component ${e}.`),!1;Xl.set(e,n);for(const t of ca.values())wd(t,n);for(const t of Wl.values())wd(t,n);return!0}function hA(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function K2(n,e,t=la){hA(n,e).clearInstance(t)}function av(n){return n.options!==void 0}function fA(n){return av(n)?!1:"authIdToken"in n||"appCheckToken"in n||"releaseOnDeref"in n||"automaticDataCollectionEnabled"in n}function dt(n){return n==null?!1:n.settings!==void 0}function Q2(){Xl.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},tr=new Po("app","Firebase",$2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mA=class{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new wr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw tr.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AT(n,e){const t=X_(n.split(".")[1]);if(t===null){console.error(`FirebaseServerApp ${e} is invalid: second part could not be parsed.`);return}if(JSON.parse(t).exp===void 0){console.error(`FirebaseServerApp ${e} is invalid: expiration claim could not be parsed`);return}const a=JSON.parse(t).exp*1e3,l=new Date().getTime();a-l<=0&&console.error(`FirebaseServerApp ${e} is invalid: the token has expired.`)}class Y2 extends mA{constructor(e,t,r,a){const l=t.automaticDataCollectionEnabled!==void 0?t.automaticDataCollectionEnabled:!0,u={name:r,automaticDataCollectionEnabled:l};if(e.apiKey!==void 0)super(e,u,a);else{const h=e;super(h.options,u,a)}this._serverConfig={automaticDataCollectionEnabled:l,...t},this._serverConfig.authIdToken&&AT(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&AT(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,nr(vm,l_,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){lv(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw tr.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ri=G2;function ov(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:la,automaticDataCollectionEnabled:!0,...e},a=r.name;if(typeof a!="string"||!a)throw tr.create("bad-app-name",{appName:String(a)});if(t||(t=ev()),!t)throw tr.create("no-options");const l=ca.get(a);if(l){if(oa(t,l.options)&&oa(r,l.config))return l;throw tr.create("duplicate-app",{appName:a})}const u=new oA(a);for(const m of Xl.values())u.addComponent(m);const h=new mA(t,r,u);return ca.set(a,h),h}function W2(n,e={}){if(FC()&&!tA())throw tr.create("invalid-server-app-environment");let t,r=e||{};if(n&&(av(n)?t=n.options:fA(n)?r=n:t=n),r.automaticDataCollectionEnabled===void 0&&(r.automaticDataCollectionEnabled=!0),t||(t=ev()),!t)throw tr.create("no-options");const a={...r,...t};a.releaseOnDeref!==void 0&&delete a.releaseOnDeref;const l=v=>[...v].reduce((x,T)=>Math.imul(31,x)+T.charCodeAt(0)|0,0);if(r.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw tr.create("finalization-registry-not-supported",{});const u=""+l(JSON.stringify(a)),h=Wl.get(u);if(h)return h.incRefCount(r.releaseOnDeref),h;const m=new oA(u);for(const v of Xl.values())m.addComponent(v);const y=new Y2(t,r,u,m);return Wl.set(u,y),y}function X2(n=la){const e=ca.get(n);if(!e&&n===la&&ev())return ov();if(!e)throw tr.create("no-app",{appName:n});return e}function J2(){return Array.from(ca.values())}async function lv(n){let e=!1;const t=n.name;ca.has(t)?(e=!0,ca.delete(t)):Wl.has(t)&&n.decRefCount()<=0&&(Wl.delete(t),e=!0),e&&(await Promise.all(n.container.getProviders().map(r=>r.delete())),n.isDeleted=!0)}function nr(n,e,t){let r=H2[n]??n;t&&(r+=`-${t}`);const a=r.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const u=[`Unable to register library "${r}" with version "${e}":`];a&&u.push(`library name "${r}" contains illegal characters (whitespace or "/")`),a&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Js.warn(u.join(" "));return}Zs(new wr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}function gA(n,e){if(n!==null&&typeof n!="function")throw tr.create("invalid-log-argument");s2(n,e)}function pA(n){r2(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z2="firebase-heartbeat-database",eD=1,Td="firebase-heartbeat-store";let zy=null;function yA(){return zy||(zy=f2(Z2,eD,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Td)}catch(t){console.warn(t)}}}}).catch(n=>{throw tr.create("idb-open",{originalErrorMessage:n.message})})),zy}async function tD(n){try{const t=(await yA()).transaction(Td),r=await t.objectStore(Td).get(_A(n));return await t.done,r}catch(e){if(e instanceof vn)Js.warn(e.message);else{const t=tr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Js.warn(t.message)}}}async function ST(n,e){try{const r=(await yA()).transaction(Td,"readwrite");await r.objectStore(Td).put(e,_A(n)),await r.done}catch(t){if(t instanceof vn)Js.warn(t.message);else{const r=tr.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Js.warn(r.message)}}}function _A(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nD=1024,rD=30;class sD{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new aD(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=RT();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(u=>u.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>rD){const u=oD(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Js.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=RT(),{heartbeatsToSend:r,unsentEntries:a}=iD(this._heartbeatsCache.heartbeats),l=ym(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Js.warn(t),""}}}function RT(){return new Date().toISOString().substring(0,10)}function iD(n,e=nD){const t=[];let r=n.slice();for(const a of n){const l=t.find(u=>u.agent===a.agent);if(l){if(l.dates.push(a.date),NT(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),NT(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class aD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return xd()?GC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await tD(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return ST(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return ST(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function NT(n){return ym(JSON.stringify({version:2,heartbeats:n})).length}function oD(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lD(n){Zs(new wr("platform-logger",e=>new p2(e),"PRIVATE")),Zs(new wr("heartbeat",e=>new sD(e),"PRIVATE")),nr(vm,l_,n),nr(vm,l_,"esm2020"),nr("fire-js","")}lD("");const cD=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:vn,SDK_VERSION:ri,_DEFAULT_ENTRY_NAME:la,_addComponent:wd,_addOrOverwriteComponent:dA,_apps:ca,_clearComponents:Q2,_components:Xl,_getProvider:hA,_isFirebaseApp:av,_isFirebaseServerApp:dt,_isFirebaseServerAppSettings:fA,_registerComponent:Zs,_removeServiceInstance:K2,_serverApps:Wl,deleteApp:lv,getApp:X2,getApps:J2,initializeApp:ov,initializeServerApp:W2,onLog:gA,registerVersion:nr,setLogLevel:pA},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uD{constructor(e,t){this._delegate=e,this.firebase=t,wd(e,new wr("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),lv(this._delegate)))}_getService(e,t=la){var a;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return!r.isInitialized()&&((a=r.getComponent())==null?void 0:a.instantiationMode)==="EXPLICIT"&&r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e,t=la){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){wd(this._delegate,e)}_addOrOverwriteComponent(e){dA(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dD={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},kT=new Po("app-compat","Firebase",dD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hD(n){const e={},t={__esModule:!0,initializeApp:l,app:a,registerVersion:nr,setLogLevel:pA,onLog:gA,apps:null,SDK_VERSION:ri,INTERNAL:{registerComponent:h,removeApp:r,useAsService:m,modularAPIs:cD}};t.default=t,Object.defineProperty(t,"apps",{get:u});function r(y){delete e[y]}function a(y){if(y=y||la,!xT(e,y))throw kT.create("no-app",{appName:y});return e[y]}a.App=n;function l(y,v={}){const x=ov(y,v);if(xT(e,x.name))return e[x.name];const T=new n(x,t);return e[x.name]=T,T}function u(){return Object.keys(e).map(y=>e[y])}function h(y){const v=y.name,x=v.replace("-compat","");if(Zs(y)&&y.type==="PUBLIC"){const T=(R=a())=>{if(typeof R[x]!="function")throw kT.create("invalid-app-argument",{appName:v});return R[x]()};y.serviceProps!==void 0&&_m(T,y.serviceProps),t[x]=T,n.prototype[x]=function(...R){return this._getService.bind(this,v).apply(this,y.multipleInstances?R:[])}}return y.type==="PUBLIC"?t[x]:null}function m(y,v){return v==="serverAuth"?null:v}return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vA(){const n=hD(uD);n.INTERNAL={...n.INTERNAL,createFirebaseNamespace:vA,extendNamespace:e,createSubscribe:aA,ErrorFactory:Po,deepExtend:_m};function e(t){_m(n,t)}return n}const fD=vA();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CT=new Km("@firebase/app-compat"),mD="@firebase/app-compat",gD="0.5.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pD(n){nr(mD,gD,n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const n=J_();if(n.firebase!==void 0){CT.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=n.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&CT.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const rt=fD;pD();var yD="firebase",_D="12.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */rt.registerVersion(yD,_D,"app-compat");const Uu={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"},Nl={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vD(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}}function bA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const bD=vD,xD=bA,xA=new Po("auth","Firebase",bA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bm=new Km("@firebase/auth");function wD(n,...e){bm.logLevel<=Ce.WARN&&bm.warn(`Auth (${ri}): ${n}`,...e)}function em(n,...e){bm.logLevel<=Ce.ERROR&&bm.error(`Auth (${ri}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mn(n,...e){throw uv(n,...e)}function Yt(n,...e){return uv(n,...e)}function cv(n,e,t){const r={...xD(),[e]:t};return new Po("auth","Firebase",r).create(e,{appName:n.name})}function nn(n){return cv(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function bc(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&mn(n,"argument-error"),cv(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function uv(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return xA.create(n,...e)}function re(n,e,...t){if(!n)throw uv(e,...t)}function ps(n){const e="INTERNAL ASSERTION FAILED: "+n;throw em(e),new Error(e)}function zr(n,e){n||ps(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ed(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function dv(){return DT()==="http:"||DT()==="https:"}function DT(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(dv()||nA()||"connection"in navigator)?navigator.onLine:!0}function ED(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(e,t){this.shortDelay=e,this.longDelay=t,zr(t>e,"Short delay should be less than long delay!"),this.isMobile=BC()||rv()}get(){return TD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hv(n,e){zr(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ps("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ps("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ps("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ID={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],SD=new Hd(3e4,6e4);function At(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function St(n,e,t,r,a={}){return TA(n,a,async()=>{let l={},u={};r&&(e==="GET"?u=r:l={body:JSON.stringify(r)});const h=vc({key:n.config.apiKey,...u}).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const y={method:e,headers:m,...l};return qC()||(y.referrerPolicy="no-referrer"),n.emulatorConfig&&_a(n.emulatorConfig.host)&&(y.credentials="include"),wA.fetch()(await EA(n,n.config.apiHost,t,h),y)})}async function TA(n,e,t){n._canInitEmulator=!1;const r={...ID,...e};try{const a=new ND(n),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const u=await l.json();if("needConfirmation"in u)throw Xu(n,"account-exists-with-different-credential",u);if(l.ok&&!("errorMessage"in u))return u;{const h=l.ok?u.errorMessage:u.error.message,[m,y]=h.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw Xu(n,"credential-already-in-use",u);if(m==="EMAIL_EXISTS")throw Xu(n,"email-already-in-use",u);if(m==="USER_DISABLED")throw Xu(n,"user-disabled",u);const v=r[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw cv(n,v,y);mn(n,v)}}catch(a){if(a instanceof vn)throw a;mn(n,"network-request-failed",{message:String(a)})}}async function si(n,e,t,r,a={}){const l=await St(n,e,t,r,a);return"mfaPendingCredential"in l&&mn(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function EA(n,e,t,r){const a=`${e}${t}?${r}`,l=n,u=l.config.emulator?hv(n.config,a):`${n.config.apiScheme}://${a}`;return AD.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(u).toString():u}function RD(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ND{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Yt(this.auth,"network-request-failed")),SD.get())})}}function Xu(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const a=Yt(n,e,r);return a.customData._tokenResponse=t,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PT(n){return n!==void 0&&n.getResponse!==void 0}function OT(n){return n!==void 0&&n.enterprise!==void 0}class IA{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return RD(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kD(n){return(await St(n,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function AA(n,e){return St(n,"GET","/v2/recaptchaConfig",At(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CD(n,e){return St(n,"POST","/v1/accounts:delete",e)}async function DD(n,e){return St(n,"POST","/v1/accounts:update",e)}async function xm(n,e){return St(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function id(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function PD(n,e=!1){const t=pe(n),r=await t.getIdToken(e),a=Qm(r);re(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,u=l==null?void 0:l.sign_in_provider;return{claims:a,token:r,authTime:id(By(a.auth_time)),issuedAtTime:id(By(a.iat)),expirationTime:id(By(a.exp)),signInProvider:u||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function By(n){return Number(n)*1e3}function Qm(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return em("JWT malformed, contained fewer than 3 sections"),null;try{const a=X_(t);return a?JSON.parse(a):(em("Failed to decode base64 JWT payload"),null)}catch(a){return em("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function VT(n){const e=Qm(n);return re(e,"internal-error"),re(typeof e.exp<"u","internal-error"),re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ei(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof vn&&OD(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function OD({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c_{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=id(this.lastLoginAt),this.creationTime=id(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Id(n){var x;const e=n.auth,t=await n.getIdToken(),r=await ei(n,xm(e,{idToken:t}));re(r==null?void 0:r.users.length,e,"internal-error");const a=r.users[0];n._notifyReloadListener(a);const l=(x=a.providerUserInfo)!=null&&x.length?SA(a.providerUserInfo):[],u=jD(n.providerData,l),h=n.isAnonymous,m=!(n.email&&a.passwordHash)&&!(u!=null&&u.length),y=h?m:!1,v={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:u,metadata:new c_(a.createdAt,a.lastLoginAt),isAnonymous:y};Object.assign(n,v)}async function MD(n){const e=pe(n);await Id(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function jD(n,e){return[...n.filter(r=>!e.some(a=>a.providerId===r.providerId)),...e]}function SA(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LD(n,e){const t=await TA(n,{},async()=>{const r=vc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=n.config,u=await EA(n,a,"/v1/token",`key=${l}`),h=await n._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:h,body:r};return n.emulatorConfig&&_a(n.emulatorConfig.host)&&(m.credentials="include"),wA.fetch()(u,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function UD(n,e){return St(n,"POST","/v2/accounts:revokeToken",At(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){re(e.idToken,"internal-error"),re(typeof e.idToken<"u","internal-error"),re(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):VT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){re(e.length!==0,"internal-error");const t=VT(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:a,expiresIn:l}=await LD(e,t);this.updateTokensAndExpiration(r,a,Number(l))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:a,expirationTime:l}=t,u=new ql;return r&&(re(typeof r=="string","internal-error",{appName:e}),u.refreshToken=r),a&&(re(typeof a=="string","internal-error",{appName:e}),u.accessToken=a),l&&(re(typeof l=="number","internal-error",{appName:e}),u.expirationTime=l),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ql,this.toJSON())}_performRefresh(){return ps("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ki(n,e){re(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class jr{constructor({uid:e,auth:t,stsTokenManager:r,...a}){this.providerId="firebase",this.proactiveRefresh=new VD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new c_(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await ei(this,this.stsTokenManager.getToken(this.auth,e));return re(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return PD(this,e)}reload(){return MD(this)}_assign(e){this!==e&&(re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new jr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Id(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(dt(this.auth.app))return Promise.reject(nn(this.auth));const e=await this.getIdToken();return await ei(this,CD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,u=t.photoURL??void 0,h=t.tenantId??void 0,m=t._redirectEventId??void 0,y=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:x,emailVerified:T,isAnonymous:R,providerData:V,stsTokenManager:U}=t;re(x&&U,e,"internal-error");const M=ql.fromJSON(this.name,U);re(typeof x=="string",e,"internal-error"),Ki(r,e.name),Ki(a,e.name),re(typeof T=="boolean",e,"internal-error"),re(typeof R=="boolean",e,"internal-error"),Ki(l,e.name),Ki(u,e.name),Ki(h,e.name),Ki(m,e.name),Ki(y,e.name),Ki(v,e.name);const W=new jr({uid:x,auth:e,email:a,emailVerified:T,displayName:r,isAnonymous:R,photoURL:u,phoneNumber:l,tenantId:h,stsTokenManager:M,createdAt:y,lastLoginAt:v});return V&&Array.isArray(V)&&(W.providerData=V.map(Y=>({...Y}))),m&&(W._redirectEventId=m),W}static async _fromIdTokenResponse(e,t,r=!1){const a=new ql;a.updateFromServerResponse(t);const l=new jr({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:r});return await Id(l),l}static async _fromGetAccountInfoResponse(e,t,r){const a=t.users[0];re(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?SA(a.providerUserInfo):[],u=!(a.email&&a.passwordHash)&&!(l!=null&&l.length),h=new ql;h.updateFromIdToken(r);const m=new jr({uid:a.localId,auth:e,stsTokenManager:h,isAnonymous:u}),y={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new c_(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(l!=null&&l.length)};return Object.assign(m,y),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MT=new Map;function er(n){zr(n instanceof Function,"Expected a class definition");let e=MT.get(n);return e?(zr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,MT.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}RA.type="NONE";const Jl=RA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function po(n,e,t){return`firebase:${n}:${e}:${t}`}class Gl{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:a,name:l}=this.auth;this.fullUserKey=po(this.userKey,a.apiKey,l),this.fullPersistenceKey=po("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await xm(this.auth,{idToken:e}).catch(()=>{});return t?jr._fromGetAccountInfoResponse(this.auth,t,e):null}return jr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Gl(er(Jl),e,r);const a=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=a[0]||er(Jl);const u=po(r,e.config.apiKey,e.name);let h=null;for(const y of t)try{const v=await y._get(u);if(v){let x;if(typeof v=="string"){const T=await xm(e,{idToken:v}).catch(()=>{});if(!T)break;x=await jr._fromGetAccountInfoResponse(e,T,v)}else x=jr._fromJSON(e,v);y!==l&&(h=x),l=y;break}}catch{}const m=a.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new Gl(l,e,r):(l=m[0],h&&await l._set(u,h.toJSON()),await Promise.all(t.map(async y=>{if(y!==l)try{await y._remove(u)}catch{}})),new Gl(l,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jT(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(DA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(NA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(PA(e))return"Blackberry";if(OA(e))return"Webos";if(kA(e))return"Safari";if((e.includes("chrome/")||CA(e))&&!e.includes("edge/"))return"Chrome";if(Kd(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function NA(n=vt()){return/firefox\//i.test(n)}function kA(n=vt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function CA(n=vt()){return/crios\//i.test(n)}function DA(n=vt()){return/iemobile/i.test(n)}function Kd(n=vt()){return/android/i.test(n)}function PA(n=vt()){return/blackberry/i.test(n)}function OA(n=vt()){return/webos/i.test(n)}function Qd(n=vt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function zD(n=vt()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(n)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(n)}function BD(n=vt()){var e;return Qd(n)&&!!((e=window.navigator)!=null&&e.standalone)}function FD(){return rA()&&document.documentMode===10}function VA(n=vt()){return Qd(n)||Kd(n)||OA(n)||PA(n)||/windows phone/i.test(n)||DA(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MA(n,e=[]){let t;switch(n){case"Browser":t=jT(vt());break;case"Worker":t=`${jT(vt())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ri}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qD{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=l=>new Promise((u,h)=>{try{const m=e(l);u(m)}catch(m){h(m)}});r.onAbort=t,this.queue.push(r);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GD(n,e={}){return St(n,"GET","/v2/passwordPolicy",At(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HD=6;class KD{constructor(e){var r;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??HD,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let a=0;a<e.length;a++)r=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{constructor(e,t,r,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new LT(this),this.idTokenSubscription=new LT(this),this.beforeStateQueue=new qD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=er(t)),this._initializationPromise=this.queue(async()=>{var r,a,l;if(!this._deleted&&(this.persistenceManager=await Gl.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await xm(this,{idToken:e}),r=await jr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(dt(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(h,h))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(l=this.redirectUser)==null?void 0:l._redirectEventId,h=r==null?void 0:r._redirectEventId,m=await this.tryRedirectSignIn(e);(!u||u===h)&&(m!=null&&m.user)&&(r=m.user,a=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(r)}catch(u){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Id(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=ED()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(dt(this.app))return Promise.reject(nn(this));const t=e?pe(e):null;return t&&re(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return dt(this.app)?Promise.reject(nn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return dt(this.app)?Promise.reject(nn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(er(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await GD(this),t=new KD(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Po("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await UD(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&er(e)||this._popupRedirectResolver;re(t,this,"argument-error"),this.redirectPersistenceManager=await Gl.create(this,[er(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let u=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(re(h,this,"internal-error"),h.then(()=>{u||l(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,r,a);return()=>{u=!0,m()}}else{const m=e.addObserver(t);return()=>{u=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=MA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var t;if(dt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&wD(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function bt(n){return pe(n)}class LT{constructor(e){this.auth=e,this.observer=null,this.addObserver=aA(t=>this.observer=t)}get next(){return re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $d={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function $D(n){$d=n}function fv(n){return $d.loadJS(n)}function YD(){return $d.recaptchaV2Script}function WD(){return $d.recaptchaEnterpriseScript}function XD(){return $d.gapiScript}function jA(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JD=500,ZD=6e4,qf=1e12;class eP{constructor(e){this.auth=e,this.counter=qf,this._widgets=new Map}render(e,t){const r=this.counter;return this._widgets.set(r,new rP(e,this.auth.name,t||{})),this.counter++,r}reset(e){var r;const t=e||qf;(r=this._widgets.get(t))==null||r.delete(),this._widgets.delete(t)}getResponse(e){var r;const t=e||qf;return((r=this._widgets.get(t))==null?void 0:r.getResponse())||""}async execute(e){var r;const t=e||qf;return(r=this._widgets.get(t))==null||r.execute(),""}}class tP{constructor(){this.enterprise=new nP}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class nP{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class rP{constructor(e,t,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const a=typeof e=="string"?document.getElementById(e):e;re(a,"argument-error",{appName:t}),this.container=a,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=sP(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch{}this.isVisible&&this.execute()},ZD)},JD))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function sP(n){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<n;r++)e.push(t.charAt(Math.floor(Math.random()*t.length)));return e.join("")}const iP="recaptcha-enterprise",ad="NO_RECAPTCHA";class LA{constructor(e){this.type=iP,this.auth=bt(e)}async verify(e="verify",t=!1){async function r(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(u,h)=>{AA(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const y=new IA(m);return l.tenantId==null?l._agentRecaptchaConfig=y:l._tenantRecaptchaConfigs[l.tenantId]=y,u(y.siteKey)}}).catch(m=>{h(m)})})}function a(l,u,h){const m=window.grecaptcha;OT(m)?m.enterprise.ready(()=>{m.enterprise.execute(l,{action:e}).then(y=>{u(y)}).catch(()=>{u(ad)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new tP().execute("siteKey",{action:"verify"}):new Promise((l,u)=>{r(this.auth).then(h=>{if(!t&&OT(window.grecaptcha))a(h,l,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let m=WD();m.length!==0&&(m+=h),fv(m).then(()=>{a(h,l,u)}).catch(y=>{u(y)})}}).catch(h=>{u(h)})})}}async function zu(n,e,t,r=!1,a=!1){const l=new LA(n);let u;if(a)u=ad;else try{u=await l.verify(t)}catch{u=await l.verify(t,!0)}const h={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const m=h.phoneEnrollmentInfo.phoneNumber,y=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:y,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const m=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return r?Object.assign(h,{captchaResp:u}):Object.assign(h,{captchaResponse:u}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function na(n,e,t,r,a){var l,u;if(a==="EMAIL_PASSWORD_PROVIDER")if((l=n._getRecaptchaConfig())!=null&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const h=await zu(n,e,t,t==="getOobCode");return r(n,h)}else return r(n,e).catch(async h=>{if(h.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const m=await zu(n,e,t,t==="getOobCode");return r(n,m)}else return Promise.reject(h)});else if(a==="PHONE_PROVIDER")if((u=n._getRecaptchaConfig())!=null&&u.isProviderEnabled("PHONE_PROVIDER")){const h=await zu(n,e,t);return r(n,h).catch(async m=>{var y;if(((y=n._getRecaptchaConfig())==null?void 0:y.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(m.code==="auth/missing-recaptcha-token"||m.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);const v=await zu(n,e,t,!1,!0);return r(n,v)}return Promise.reject(m)})}else{const h=await zu(n,e,t,!1,!0);return r(n,h)}else return Promise.reject(a+" provider is not supported.")}async function aP(n){const e=bt(n),t=await AA(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new IA(t);e.tenantId==null?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.isAnyProviderEnabled()&&new LA(e).verify()}function oP(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(er);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function lP(n,e,t){const r=bt(n);re(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const a=!!(t!=null&&t.disableWarnings),l=UA(e),{host:u,port:h}=cP(e),m=h===null?"":`:${h}`,y={url:`${l}//${u}${m}/`},v=Object.freeze({host:u,port:h,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!r._canInitEmulator){re(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),re(oa(y,r.config.emulator)&&oa(v,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=y,r.emulatorConfig=v,r.settings.appVerificationDisabledForTesting=!0,_a(u)?(tv(`${l}//${u}${m}`),nv("Auth",!0)):a||uP()}function UA(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function cP(n){const e=UA(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){const l=a[1];return{host:l,port:UT(r.substr(l.length+1))}}else{const[l,u]=r.split(":");return{host:l,port:UT(u)}}}function UT(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function uP(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ps("not implemented")}_getIdTokenResponse(e){return ps("not implemented")}_linkToIdToken(e,t){return ps("not implemented")}_getReauthenticationResolver(e){return ps("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zA(n,e){return St(n,"POST","/v1/accounts:resetPassword",At(n,e))}async function dP(n,e){return St(n,"POST","/v1/accounts:update",e)}async function hP(n,e){return St(n,"POST","/v1/accounts:signUp",e)}async function fP(n,e){return St(n,"POST","/v1/accounts:update",At(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mP(n,e){return si(n,"POST","/v1/accounts:signInWithPassword",At(n,e))}async function $m(n,e){return St(n,"POST","/v1/accounts:sendOobCode",At(n,e))}async function gP(n,e){return $m(n,e)}async function pP(n,e){return $m(n,e)}async function yP(n,e){return $m(n,e)}async function _P(n,e){return $m(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vP(n,e){return si(n,"POST","/v1/accounts:signInWithEmailLink",At(n,e))}async function bP(n,e){return si(n,"POST","/v1/accounts:signInWithEmailLink",At(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad extends xc{constructor(e,t,r,a=null){super("password",r),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new Ad(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Ad(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return na(e,t,"signInWithPassword",mP,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return vP(e,{email:this._email,oobCode:this._password});default:mn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return na(e,r,"signUpPassword",hP,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return bP(e,{idToken:t,email:this._email,oobCode:this._password});default:mn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ws(n,e){return si(n,"POST","/v1/accounts:signInWithIdp",At(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xP="http://localhost";class Ts extends xc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ts(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):mn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:a,...l}=t;if(!r||!a)return null;const u=new Ts(r,a);return u.idToken=l.idToken||void 0,u.accessToken=l.accessToken||void 0,u.secret=l.secret,u.nonce=l.nonce,u.pendingToken=l.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return Ws(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Ws(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ws(e,t)}buildRequest(){const e={requestUri:xP,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=vc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zT(n,e){return St(n,"POST","/v1/accounts:sendVerificationCode",At(n,e))}async function wP(n,e){return si(n,"POST","/v1/accounts:signInWithPhoneNumber",At(n,e))}async function TP(n,e){const t=await si(n,"POST","/v1/accounts:signInWithPhoneNumber",At(n,e));if(t.temporaryProof)throw Xu(n,"account-exists-with-different-credential",t);return t}const EP={USER_NOT_FOUND:"user-not-found"};async function IP(n,e){const t={...e,operation:"REAUTH"};return si(n,"POST","/v1/accounts:signInWithPhoneNumber",At(n,t),EP)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo extends xc{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new yo({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new yo({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return wP(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return TP(e,{idToken:t,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return IP(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:r,verificationCode:a}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:r,code:a}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:t,verificationCode:r,phoneNumber:a,temporaryProof:l}=e;return!r&&!t&&!a&&!l?null:new yo({verificationId:t,verificationCode:r,phoneNumber:a,temporaryProof:l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AP(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function SP(n){const e=Fl(Wu(n)).link,t=e?Fl(Wu(e)).deep_link_id:null,r=Fl(Wu(n)).deep_link_id;return(r?Fl(Wu(r)).link:null)||r||t||e||n}class Ym{constructor(e){const t=Fl(Wu(e)),r=t.apiKey??null,a=t.oobCode??null,l=AP(t.mode??null);re(r&&a&&l,"argument-error"),this.apiKey=r,this.operation=l,this.code=a,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=SP(e);try{return new Ym(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(){this.providerId=va.PROVIDER_ID}static credential(e,t){return Ad._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Ym.parseLink(t);return re(r,"argument-error"),Ad._fromEmailAndCode(e,r.code,r.tenantId)}}va.PROVIDER_ID="password";va.EMAIL_PASSWORD_SIGN_IN_METHOD="password";va.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc extends ii{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Hl extends wc{static credentialFromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;return re("providerId"in t&&"signInMethod"in t,"argument-error"),Ts._fromParams(t)}credential(e){return this._credential({...e,nonce:e.rawNonce})}_credential(e){return re(e.idToken||e.accessToken,"argument-error"),Ts._fromParams({...e,providerId:this.providerId,signInMethod:this.providerId})}static credentialFromResult(e){return Hl.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Hl.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r,oauthTokenSecret:a,pendingToken:l,nonce:u,providerId:h}=e;if(!r&&!a&&!t&&!l||!h)return null;try{return new Hl(h)._credential({idToken:t,accessToken:r,nonce:u,pendingToken:l})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds extends wc{constructor(){super("facebook.com")}static credential(e){return Ts._fromParams({providerId:ds.PROVIDER_ID,signInMethod:ds.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ds.credentialFromTaggedObject(e)}static credentialFromError(e){return ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ds.credential(e.oauthAccessToken)}catch{return null}}}ds.FACEBOOK_SIGN_IN_METHOD="facebook.com";ds.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs extends wc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ts._fromParams({providerId:hs.PROVIDER_ID,signInMethod:hs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return hs.credentialFromTaggedObject(e)}static credentialFromError(e){return hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return hs.credential(t,r)}catch{return null}}}hs.GOOGLE_SIGN_IN_METHOD="google.com";hs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs extends wc{constructor(){super("github.com")}static credential(e){return Ts._fromParams({providerId:fs.PROVIDER_ID,signInMethod:fs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fs.credentialFromTaggedObject(e)}static credentialFromError(e){return fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fs.credential(e.oauthAccessToken)}catch{return null}}}fs.GITHUB_SIGN_IN_METHOD="github.com";fs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RP="http://localhost";class Zl extends xc{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){const t=this.buildRequest();return Ws(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Ws(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ws(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:a,pendingToken:l}=t;return!r||!a||!l||r!==a?null:new Zl(r,l)}static _create(e,t){return new Zl(e,t)}buildRequest(){return{requestUri:RP,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NP="saml.";class wm extends ii{constructor(e){re(e.startsWith(NP),"argument-error"),super(e)}static credentialFromResult(e){return wm.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return wm.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=Zl.fromJSON(e);return re(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:t,providerId:r}=e;if(!t||!r)return null;try{return Zl._create(r,t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms extends wc{constructor(){super("twitter.com")}static credential(e,t){return Ts._fromParams({providerId:ms.PROVIDER_ID,signInMethod:ms.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ms.credentialFromTaggedObject(e)}static credentialFromError(e){return ms.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return ms.credential(t,r)}catch{return null}}}ms.TWITTER_SIGN_IN_METHOD="twitter.com";ms.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BA(n,e){return si(n,"POST","/v1/accounts:signUp",At(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,a=!1){const l=await jr._fromIdTokenResponse(e,r,a),u=BT(r);return new Tr({user:l,providerId:u,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const a=BT(r);return new Tr({user:e,providerId:a,_tokenResponse:r,operationType:t})}}function BT(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kP(n){var a;if(dt(n.app))return Promise.reject(nn(n));const e=bt(n);if(await e._initializationPromise,(a=e.currentUser)!=null&&a.isAnonymous)return new Tr({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await BA(e,{returnSecureToken:!0}),r=await Tr._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm extends vn{constructor(e,t,r,a){super(t.code,t.message),this.operationType=r,this.user=a,Object.setPrototypeOf(this,Tm.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,a){return new Tm(e,t,r,a)}}function FA(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Tm._fromErrorAndOperation(n,l,e,r):l})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qA(n){return new Set(n.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CP(n,e){const t=pe(n);await Wm(!0,t,e);const{providerUserInfo:r}=await DD(t.auth,{idToken:await t.getIdToken(),deleteProvider:[e]}),a=qA(r||[]);return t.providerData=t.providerData.filter(l=>a.has(l.providerId)),a.has("phone")||(t.phoneNumber=null),await t.auth._persistUserIfCurrent(t),t}async function mv(n,e,t=!1){const r=await ei(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Tr._forOperation(n,"link",r)}async function Wm(n,e,t){await Id(e);const r=qA(e.providerData),a=n===!1?"provider-already-linked":"no-such-provider";re(r.has(t)===n,e.auth,a)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GA(n,e,t=!1){const{auth:r}=n;if(dt(r.app))return Promise.reject(nn(r));const a="reauthenticate";try{const l=await ei(n,FA(r,a,e,n),t);re(l.idToken,r,"internal-error");const u=Qm(l.idToken);re(u,r,"internal-error");const{sub:h}=u;return re(n.uid===h,r,"user-mismatch"),Tr._forOperation(n,a,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&mn(r,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HA(n,e,t=!1){if(dt(n.app))return Promise.reject(nn(n));const r="signIn",a=await FA(n,r,e),l=await Tr._fromIdTokenResponse(n,r,a);return t||await n._updateCurrentUser(l.user),l}async function Xm(n,e){return HA(bt(n),e)}async function KA(n,e){const t=pe(n);return await Wm(!1,t,e.providerId),mv(t,e)}async function QA(n,e){return GA(pe(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DP(n,e){return si(n,"POST","/v1/accounts:signInWithCustomToken",At(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PP(n,e){if(dt(n.app))return Promise.reject(nn(n));const t=bt(n),r=await DP(t,{token:e,returnSecureToken:!0}),a=await Tr._fromIdTokenResponse(t,"signIn",r);return await t._updateCurrentUser(a.user),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?gv._fromServerResponse(e,t):"totpInfo"in t?pv._fromServerResponse(e,t):mn(e,"internal-error")}}class gv extends Yd{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new gv(t)}}class pv extends Yd{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new pv(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jm(n,e,t){var r;re(((r=t.url)==null?void 0:r.length)>0,n,"invalid-continue-uri"),re(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),re(typeof t.linkDomain>"u"||t.linkDomain.length>0,n,"invalid-hosting-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.linkDomain=t.linkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(re(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(re(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yv(n){const e=bt(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function OP(n,e,t){const r=bt(n),a={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};t&&Jm(r,a,t),await na(r,a,"getOobCode",pP,"EMAIL_PASSWORD_PROVIDER")}async function VP(n,e,t){await zA(pe(n),{oobCode:e,newPassword:t}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&yv(n),r})}async function MP(n,e){await fP(pe(n),{oobCode:e})}async function $A(n,e){const t=pe(n),r=await zA(t,{oobCode:e}),a=r.requestType;switch(re(a,t,"internal-error"),a){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":re(r.newEmail,t,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":re(r.mfaInfo,t,"internal-error");default:re(r.email,t,"internal-error")}let l=null;return r.mfaInfo&&(l=Yd._fromServerResponse(bt(t),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:l},operation:a}}async function jP(n,e){const{data:t}=await $A(pe(n),e);return t.email}async function LP(n,e,t){if(dt(n.app))return Promise.reject(nn(n));const r=bt(n),u=await na(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",BA,"EMAIL_PASSWORD_PROVIDER").catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&yv(n),m}),h=await Tr._fromIdTokenResponse(r,"signIn",u);return await r._updateCurrentUser(h.user),h}function UP(n,e,t){return dt(n.app)?Promise.reject(nn(n)):Xm(pe(n),va.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&yv(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zP(n,e,t){const r=bt(n),a={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function l(u,h){re(h.handleCodeInApp,r,"argument-error"),h&&Jm(r,u,h)}l(a,t),await na(r,a,"getOobCode",yP,"EMAIL_PASSWORD_PROVIDER")}function BP(n,e){const t=Ym.parseLink(e);return(t==null?void 0:t.operation)==="EMAIL_SIGNIN"}async function FP(n,e,t){if(dt(n.app))return Promise.reject(nn(n));const r=pe(n),a=va.credentialWithLink(e,t||Ed());return re(a._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),Xm(r,a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qP(n,e){return St(n,"POST","/v1/accounts:createAuthUri",At(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GP(n,e){const t=dv()?Ed():"http://localhost",r={identifier:e,continueUri:t},{signinMethods:a}=await qP(pe(n),r);return a||[]}async function HP(n,e){const t=pe(n),a={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()};e&&Jm(t.auth,a,e);const{email:l}=await gP(t.auth,a);l!==n.email&&await n.reload()}async function KP(n,e,t){const r=pe(n),l={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await n.getIdToken(),newEmail:e};t&&Jm(r.auth,l,t);const{email:u}=await _P(r.auth,l);u!==n.email&&await n.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QP(n,e){return St(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $P(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=pe(n),l={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},u=await ei(r,QP(r.auth,l));r.displayName=u.displayName||null,r.photoURL=u.photoUrl||null;const h=r.providerData.find(({providerId:m})=>m==="password");h&&(h.displayName=r.displayName,h.photoURL=r.photoURL),await r._updateTokensIfNecessary(u)}function YP(n,e){const t=pe(n);return dt(t.auth.app)?Promise.reject(nn(t.auth)):YA(t,e,null)}function WP(n,e){return YA(pe(n),null,e)}async function YA(n,e,t){const{auth:r}=n,l={idToken:await n.getIdToken(),returnSecureToken:!0};e&&(l.email=e),t&&(l.password=t);const u=await ei(n,dP(r,l));await n._updateTokensIfNecessary(u,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XP(n){var a,l;if(!n)return null;const{providerId:e}=n,t=n.rawUserInfo?JSON.parse(n.rawUserInfo):{},r=n.isNewUser||n.kind==="identitytoolkit#SignupNewUserResponse";if(!e&&(n!=null&&n.idToken)){const u=(l=(a=Qm(n.idToken))==null?void 0:a.firebase)==null?void 0:l.sign_in_provider;if(u){const h=u!=="anonymous"&&u!=="custom"?u:null;return new Kl(r,h)}}if(!e)return null;switch(e){case"facebook.com":return new JP(r,t);case"github.com":return new ZP(r,t);case"google.com":return new eO(r,t);case"twitter.com":return new tO(r,t,n.screenName||null);case"custom":case"anonymous":return new Kl(r,null);default:return new Kl(r,e,t)}}class Kl{constructor(e,t,r={}){this.isNewUser=e,this.providerId=t,this.profile=r}}class WA extends Kl{constructor(e,t,r,a){super(e,t,r),this.username=a}}class JP extends Kl{constructor(e,t){super(e,"facebook.com",t)}}class ZP extends WA{constructor(e,t){super(e,"github.com",t,typeof(t==null?void 0:t.login)=="string"?t==null?void 0:t.login:null)}}class eO extends Kl{constructor(e,t){super(e,"google.com",t)}}class tO extends WA{constructor(e,t,r){super(e,"twitter.com",t,r)}}function nO(n){const{user:e,_tokenResponse:t}=n;return e.isAnonymous&&!t?{providerId:null,isNewUser:!1,profile:null}:XP(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e,t,r){this.type=e,this.credential=t,this.user=r}static _fromIdtoken(e,t){return new ho("enroll",e,t)}static _fromMfaPendingCredential(e){return new ho("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,r;if(e!=null&&e.multiFactorSession){if((t=e.multiFactorSession)!=null&&t.pendingCredential)return ho._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if((r=e.multiFactorSession)!=null&&r.idToken)return ho._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v{constructor(e,t,r){this.session=e,this.hints=t,this.signInResolver=r}static _fromError(e,t){const r=bt(e),a=t.customData._serverResponse,l=(a.mfaInfo||[]).map(h=>Yd._fromServerResponse(r,h));re(a.mfaPendingCredential,r,"internal-error");const u=ho._fromMfaPendingCredential(a.mfaPendingCredential);return new _v(u,l,async h=>{const m=await h._process(r,u);delete a.mfaInfo,delete a.mfaPendingCredential;const y={...a,idToken:m.idToken,refreshToken:m.refreshToken};switch(t.operationType){case"signIn":const v=await Tr._fromIdTokenResponse(r,t.operationType,y);return await r._updateCurrentUser(v.user),v;case"reauthenticate":return re(t.user,r,"internal-error"),Tr._forOperation(t.user,t.operationType,y);default:mn(r,"internal-error")}})}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}function rO(n,e){var a;const t=pe(n),r=e;return re(e.customData.operationType,t,"argument-error"),re((a=r.customData._serverResponse)==null?void 0:a.mfaPendingCredential,t,"argument-error"),_v._fromError(t,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FT(n,e){return St(n,"POST","/v2/accounts/mfaEnrollment:start",At(n,e))}function sO(n,e){return St(n,"POST","/v2/accounts/mfaEnrollment:finalize",At(n,e))}function iO(n,e){return St(n,"POST","/v2/accounts/mfaEnrollment:withdraw",At(n,e))}class vv{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(r=>Yd._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new vv(e)}async getSession(){return ho._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const r=e,a=await this.getSession(),l=await ei(this.user,r._process(this.user.auth,a,t));return await this.user._updateTokensIfNecessary(l),this.user.reload()}async unenroll(e){const t=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const a=await ei(this.user,iO(this.user.auth,{idToken:r,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter(({uid:l})=>l!==t),await this.user._updateTokensIfNecessary(a),await this.user.reload()}catch(a){throw a}}}const Fy=new WeakMap;function aO(n){const e=pe(n);return Fy.has(e)||Fy.set(e,vv._fromUser(e)),Fy.get(e)}const Em="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Em,"1"),this.storage.removeItem(Em),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oO=1e3,lO=10;class JA extends XA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=VA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),a=this.localCache[t];r!==a&&e(t,a,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,h,m)=>{this.notifyListeners(u,m)});return}const r=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const u=this.storage.getItem(r);!t&&this.localCache[r]===u||this.notifyListeners(r,u)},l=this.storage.getItem(r);FD()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,lO):a()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},oO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}JA.type="LOCAL";const bv=JA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA extends XA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}ZA.type="SESSION";const bo=ZA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cO(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const r=new Zm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:a,data:l}=t.data,u=this.handlersMap[a];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:a});const h=Array.from(u).map(async y=>y(t.origin,l)),m=await cO(h);t.ports[0].postMessage({status:"done",eventId:r,eventType:a,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Zm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wd(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uO{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,u;return new Promise((h,m)=>{const y=Wd("",20);a.port1.start();const v=setTimeout(()=>{m(new Error("unsupported_event"))},r);u={messageChannel:a,onMessage(x){const T=x;if(T.data.eventId===y)switch(T.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),h(T.data.response);break;default:clearTimeout(v),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(u),a.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[a.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(){return window}function dO(n){Ht().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xv(){return typeof Ht().WorkerGlobalScope<"u"&&typeof Ht().importScripts=="function"}async function hO(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function fO(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function mO(){return xv()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eS="firebaseLocalStorageDb",gO=1,Im="firebaseLocalStorage",tS="fbase_key";class Xd{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function eg(n,e){return n.transaction([Im],e?"readwrite":"readonly").objectStore(Im)}function pO(){const n=indexedDB.deleteDatabase(eS);return new Xd(n).toPromise()}function u_(){const n=indexedDB.open(eS,gO);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Im,{keyPath:tS})}catch(a){t(a)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Im)?e(r):(r.close(),await pO(),e(await u_()))})})}async function qT(n,e,t){const r=eg(n,!0).put({[tS]:e,value:t});return new Xd(r).toPromise()}async function yO(n,e){const t=eg(n,!1).get(e),r=await new Xd(t).toPromise();return r===void 0?null:r.value}function GT(n,e){const t=eg(n,!0).delete(e);return new Xd(t).toPromise()}const _O=800,vO=3;class nS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await u_(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>vO)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return xv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Zm._getInstance(mO()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await hO(),!this.activeServiceWorker)return;this.sender=new uO(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||fO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await u_();return await qT(e,Em,"1"),await GT(e,Em),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>qT(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>yO(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>GT(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=eg(a,!1).getAll();return new Xd(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)r.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!r.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),_O)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}nS.type="LOCAL";const Sd=nS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HT(n,e){return St(n,"POST","/v2/accounts/mfaSignIn:start",At(n,e))}function bO(n,e){return St(n,"POST","/v2/accounts/mfaSignIn:finalize",At(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qy=jA("rcb"),xO=new Hd(3e4,6e4);class wO{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!((e=Ht().grecaptcha)!=null&&e.render)}load(e,t=""){return re(TO(t),e,"argument-error"),this.shouldResolveImmediately(t)&&PT(Ht().grecaptcha)?Promise.resolve(Ht().grecaptcha):new Promise((r,a)=>{const l=Ht().setTimeout(()=>{a(Yt(e,"network-request-failed"))},xO.get());Ht()[qy]=()=>{Ht().clearTimeout(l),delete Ht()[qy];const h=Ht().grecaptcha;if(!h||!PT(h)){a(Yt(e,"internal-error"));return}const m=h.render;h.render=(y,v)=>{const x=m(y,v);return this.counter++,x},this.hostLanguage=t,r(h)};const u=`${YD()}?${vc({onload:qy,render:"explicit",hl:t})}`;fv(u).catch(()=>{clearTimeout(l),a(Yt(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!((t=Ht().grecaptcha)!=null&&t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function TO(n){return n.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(n)}class EO{async load(e){return new eP(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const od="recaptcha",IO={theme:"light",type:"image"};let AO=class{constructor(e,t,r={...IO}){this.parameters=r,this.type=od,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=bt(e),this.isInvisible=this.parameters.size==="invisible",re(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const a=typeof t=="string"?document.getElementById(t):t;re(a,this.auth,"argument-error"),this.container=a,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new EO:new wO,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),r=t.getResponse(e);return r||new Promise(a=>{const l=u=>{u&&(this.tokenChangeListeners.delete(l),a(u))};this.tokenChangeListeners.add(l),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){re(!this.parameters.sitekey,this.auth,"argument-error"),re(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),re(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(r=>r(t)),typeof e=="function")e(t);else if(typeof e=="string"){const r=Ht()[e];typeof r=="function"&&r(t)}}}assertNotDestroyed(){re(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){re(dv()&&!xv(),this.auth,"internal-error"),await SO(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await kD(this.auth);re(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return re(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function SO(){let n=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}n=()=>e(),window.addEventListener("load",n)}).catch(e=>{throw n&&window.removeEventListener("load",n),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=yo._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function RO(n,e,t){if(dt(n.app))return Promise.reject(nn(n));const r=bt(n),a=await tg(r,e,pe(t));return new wv(a,l=>Xm(r,l))}async function NO(n,e,t){const r=pe(n);await Wm(!1,r,"phone");const a=await tg(r.auth,e,pe(t));return new wv(a,l=>KA(r,l))}async function kO(n,e,t){const r=pe(n);if(dt(r.auth.app))return Promise.reject(nn(r.auth));const a=await tg(r.auth,e,pe(t));return new wv(a,l=>QA(r,l))}async function tg(n,e,t){var r;if(!n._getRecaptchaConfig())try{await aP(n)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let a;if(typeof e=="string"?a={phoneNumber:e}:a=e,"session"in a){const l=a.session;if("phoneNumber"in a){re(l.type==="enroll",n,"internal-error");const u={idToken:l.credential,phoneEnrollmentInfo:{phoneNumber:a.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await na(n,u,"mfaSmsEnrollment",async(v,x)=>{if(x.phoneEnrollmentInfo.captchaResponse===ad){re((t==null?void 0:t.type)===od,v,"argument-error");const T=await Gy(v,x,t);return FT(v,T)}return FT(v,x)},"PHONE_PROVIDER").catch(v=>Promise.reject(v))).phoneSessionInfo.sessionInfo}else{re(l.type==="signin",n,"internal-error");const u=((r=a.multiFactorHint)==null?void 0:r.uid)||a.multiFactorUid;re(u,n,"missing-multi-factor-info");const h={mfaPendingCredential:l.credential,mfaEnrollmentId:u,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await na(n,h,"mfaSmsSignIn",async(x,T)=>{if(T.phoneSignInInfo.captchaResponse===ad){re((t==null?void 0:t.type)===od,x,"argument-error");const R=await Gy(x,T,t);return HT(x,R)}return HT(x,T)},"PHONE_PROVIDER").catch(x=>Promise.reject(x))).phoneResponseInfo.sessionInfo}}else{const l={phoneNumber:a.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await na(n,l,"sendVerificationCode",async(y,v)=>{if(v.captchaResponse===ad){re((t==null?void 0:t.type)===od,y,"argument-error");const x=await Gy(y,v,t);return zT(y,x)}return zT(y,v)},"PHONE_PROVIDER").catch(y=>Promise.reject(y))).sessionInfo}}finally{t==null||t._reset()}}async function CO(n,e){const t=pe(n);if(dt(t.auth.app))return Promise.reject(nn(t.auth));await mv(t,e)}async function Gy(n,e,t){re(t.type===od,n,"argument-error");const r=await t.verify();re(typeof r=="string",n,"argument-error");const a={...e};if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.captchaResponse,h=a.phoneEnrollmentInfo.clientType,m=a.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:r,captchaResponse:u,clientType:h,recaptchaVersion:m}}),a}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.captchaResponse,u=a.phoneSignInInfo.clientType,h=a.phoneSignInInfo.recaptchaVersion;return Object.assign(a,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:l,clientType:u,recaptchaVersion:h}}),a}else return Object.assign(a,{recaptchaToken:r}),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xo=class tm{constructor(e){this.providerId=tm.PROVIDER_ID,this.auth=bt(e)}verifyPhoneNumber(e,t){return tg(this.auth,e,pe(t))}static credential(e,t){return yo._fromVerification(e,t)}static credentialFromResult(e){const t=e;return tm.credentialFromTaggedObject(t)}static credentialFromError(e){return tm.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:r}=e;return t&&r?yo._fromTokenResponse(t,r):null}};xo.PROVIDER_ID="phone";xo.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oo(n,e){return e?er(e):(re(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv extends xc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ws(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ws(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ws(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function DO(n){return HA(n.auth,new Tv(n),n.bypassAuthState)}function PO(n){const{auth:e,user:t}=n;return re(t,e,"internal-error"),GA(t,new Tv(n),n.bypassAuthState)}async function OO(n){const{auth:e,user:t}=n;return re(t,e,"internal-error"),mv(t,new Tv(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{constructor(e,t,r,a,l=!1){this.auth=e,this.resolver=r,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:a,tenantId:l,error:u,type:h}=e;if(u){this.reject(u);return}const m={auth:this.auth,requestUri:t,sessionId:r,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(m))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return DO;case"linkViaPopup":case"linkViaRedirect":return OO;case"reauthViaPopup":case"reauthViaRedirect":return PO;default:mn(this.auth,"internal-error")}}resolve(e){zr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){zr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VO=new Hd(2e3,1e4);async function MO(n,e,t){if(dt(n.app))return Promise.reject(Yt(n,"operation-not-supported-in-this-environment"));const r=bt(n);bc(n,e,ii);const a=Oo(r,t);return new $s(r,"signInViaPopup",e,a).executeNotNull()}async function jO(n,e,t){const r=pe(n);if(dt(r.auth.app))return Promise.reject(Yt(r.auth,"operation-not-supported-in-this-environment"));bc(r.auth,e,ii);const a=Oo(r.auth,t);return new $s(r.auth,"reauthViaPopup",e,a,r).executeNotNull()}async function LO(n,e,t){const r=pe(n);bc(r.auth,e,ii);const a=Oo(r.auth,t);return new $s(r.auth,"linkViaPopup",e,a,r).executeNotNull()}class $s extends rS{constructor(e,t,r,a,l){super(e,t,a,l),this.provider=r,this.authWindow=null,this.pollId=null,$s.currentPopupAction&&$s.currentPopupAction.cancel(),$s.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return re(e,this.auth,"internal-error"),e}async onExecution(){zr(this.filter.length===1,"Popup operations only handle one event");const e=Wd();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Yt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Yt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,$s.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if((r=(t=this.authWindow)==null?void 0:t.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Yt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,VO.get())};e()}}$s.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UO="pendingRedirect",ld=new Map;class zO extends rS{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=ld.get(this.auth._key());if(!e){try{const r=await BO(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}ld.set(this.auth._key(),e)}return this.bypassAuthState||ld.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function BO(n,e){const t=iS(e),r=sS(n);if(!await r._isAvailable())return!1;const a=await r._get(t)==="true";return await r._remove(t),a}async function Ev(n,e){return sS(n)._set(iS(e),"true")}function FO(){ld.clear()}function Iv(n,e){ld.set(n._key(),e)}function sS(n){return er(n._redirectPersistence)}function iS(n){return po(UO,n.config.apiKey,n.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qO(n,e,t){return GO(n,e,t)}async function GO(n,e,t){if(dt(n.app))return Promise.reject(nn(n));const r=bt(n);bc(n,e,ii),await r._initializationPromise;const a=Oo(r,t);return await Ev(a,r),a._openRedirect(r,e,"signInViaRedirect")}function HO(n,e,t){return KO(n,e,t)}async function KO(n,e,t){const r=pe(n);if(bc(r.auth,e,ii),dt(r.auth.app))return Promise.reject(nn(r.auth));await r.auth._initializationPromise;const a=Oo(r.auth,t);await Ev(a,r.auth);const l=await aS(r);return a._openRedirect(r.auth,e,"reauthViaRedirect",l)}function QO(n,e,t){return $O(n,e,t)}async function $O(n,e,t){const r=pe(n);bc(r.auth,e,ii),await r.auth._initializationPromise;const a=Oo(r.auth,t);await Wm(!1,r,e.providerId),await Ev(a,r.auth);const l=await aS(r);return a._openRedirect(r.auth,e,"linkViaRedirect",l)}async function YO(n,e){return await bt(n)._initializationPromise,ng(n,e,!1)}async function ng(n,e,t=!1){if(dt(n.app))return Promise.reject(nn(n));const r=bt(n),a=Oo(r,e),u=await new zO(r,a,t).execute();return u&&!t&&(delete u.user._redirectEventId,await r._persistUserIfCurrent(u.user),await r._setRedirectUser(null,e)),u}async function aS(n){const e=Wd(`${n.uid}:::`);return n._redirectEventId=e,await n.auth._setRedirectUser(n),await n.auth._persistUserIfCurrent(n),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WO=600*1e3;class oS{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!XO(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!lS(e)){const a=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";t.onError(Yt(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=WO&&this.cachedEventUids.clear(),this.cachedEventUids.has(KT(e))}saveEventToCache(e){this.cachedEventUids.add(KT(e)),this.lastProcessedEventTime=Date.now()}}function KT(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function lS({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function XO(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return lS(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cS(n,e={}){return St(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ZO=/^https?/;async function eV(n){if(n.config.emulator)return;const{authorizedDomains:e}=await cS(n);for(const t of e)try{if(tV(t))return}catch{}mn(n,"unauthorized-domain")}function tV(n){const e=Ed(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===r}if(!ZO.test(t))return!1;if(JO.test(n))return r===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nV=new Hd(3e4,6e4);function QT(){const n=Ht().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function rV(n){return new Promise((e,t)=>{var a,l,u;function r(){QT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{QT(),t(Yt(n,"network-request-failed"))},timeout:nV.get()})}if((l=(a=Ht().gapi)==null?void 0:a.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((u=Ht().gapi)!=null&&u.load)r();else{const h=jA("iframefcb");return Ht()[h]=()=>{gapi.load?r():t(Yt(n,"network-request-failed"))},fv(`${XD()}?onload=${h}`).catch(m=>t(m))}}).catch(e=>{throw nm=null,e})}let nm=null;function sV(n){return nm=nm||rV(n),nm}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iV=new Hd(5e3,15e3),aV="__/auth/iframe",oV="emulator/auth/iframe",lV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},cV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function uV(n){const e=n.config;re(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?hv(e,oV):`https://${n.config.authDomain}/${aV}`,r={apiKey:e.apiKey,appName:n.name,v:ri},a=cV.get(n.config.apiHost);a&&(r.eid=a);const l=n._getFrameworks();return l.length&&(r.fw=l.join(",")),`${t}?${vc(r).slice(1)}`}async function dV(n){const e=await sV(n),t=Ht().gapi;return re(t,n,"internal-error"),e.open({where:document.body,url:uV(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:lV,dontclear:!0},r=>new Promise(async(a,l)=>{await r.restyle({setHideOnLeave:!1});const u=Yt(n,"network-request-failed"),h=Ht().setTimeout(()=>{l(u)},iV.get());function m(){Ht().clearTimeout(h),a(r)}r.ping(m).then(m,()=>{l(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},fV=500,mV=600,gV="_blank",pV="http://localhost";class $T{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function yV(n,e,t,r=fV,a=mV){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let h="";const m={...hV,width:r.toString(),height:a.toString(),top:l,left:u},y=vt().toLowerCase();t&&(h=CA(y)?gV:t),NA(y)&&(e=e||pV,m.scrollbars="yes");const v=Object.entries(m).reduce((T,[R,V])=>`${T}${R}=${V},`,"");if(BD(y)&&h!=="_self")return _V(e||"",h),new $T(null);const x=window.open(e||"",h,v);re(x,n,"popup-blocked");try{x.focus()}catch{}return new $T(x)}function _V(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vV="__/auth/handler",bV="emulator/auth/handler",xV=encodeURIComponent("fac");async function d_(n,e,t,r,a,l){re(n.config.authDomain,n,"auth-domain-config-required"),re(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:ri,eventId:a};if(e instanceof ii){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",$C(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,x]of Object.entries(l||{}))u[v]=x}if(e instanceof wc){const v=e.getScopes().filter(x=>x!=="");v.length>0&&(u.scopes=v.join(","))}n.tenantId&&(u.tid=n.tenantId);const h=u;for(const v of Object.keys(h))h[v]===void 0&&delete h[v];const m=await n._getAppCheckToken(),y=m?`#${xV}=${encodeURIComponent(m)}`:"";return`${wV(n)}?${vc(h).slice(1)}${y}`}function wV({config:n}){return n.emulator?hv(n,bV):`https://${n.authDomain}/${vV}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hy="webStorageSupport";class TV{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=bo,this._completeRedirectFn=ng,this._overrideRedirectResult=Iv}async _openPopup(e,t,r,a){var u;zr((u=this.eventManagers[e._key()])==null?void 0:u.manager,"_initialize() not called before _openPopup()");const l=await d_(e,t,r,Ed(),a);return yV(e,l,Wd())}async _openRedirect(e,t,r,a){await this._originValidation(e);const l=await d_(e,t,r,Ed(),a);return dO(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(zr(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await dV(e),r=new oS(e);return t.register("authEvent",a=>(re(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:r.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Hy,{type:Hy},a=>{var u;const l=(u=a==null?void 0:a[0])==null?void 0:u[Hy];l!==void 0&&t(!!l),mn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=eV(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return VA()||kA()||Qd()}}const EV=TV;class IV{constructor(e){this.factorId=e}_process(e,t,r){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,r);case"signin":return this._finalizeSignIn(e,t.credential);default:return ps("unexpected MultiFactorSessionType")}}}class Av extends IV{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new Av(e)}_finalizeEnroll(e,t,r){return sO(e,{idToken:t,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return bO(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class uS{constructor(){}static assertion(e){return Av._fromCredential(e)}}uS.FACTOR_ID="phone";var YT="@firebase/auth",WT="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AV{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SV(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function RV(n){Zs(new wr("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:u,authDomain:h}=r.options;re(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const m={apiKey:u,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:MA(n)},y=new QD(r,a,l,m);return oP(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Zs(new wr("auth-internal",e=>{const t=bt(e.getProvider("auth").getImmediate());return(r=>new AV(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),nr(YT,WT,SV(n)),nr(YT,WT,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NV=300;jC("authIdTokenMaxAge");function kV(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}$D({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=a=>{const l=Yt("internal-error");l.customData=a,t(l)},r.type="text/javascript",r.charset="UTF-8",kV().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});RV("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wo(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CV=2e3;async function DV(n,e,t){const{BuildInfo:r}=wo();zr(e.sessionId,"AuthEvent did not contain a session ID");const a=await jV(e.sessionId),l={};return Qd()?l.ibi=r.packageName:Kd()?l.apn=r.packageName:mn(n,"operation-not-supported-in-this-environment"),r.displayName&&(l.appDisplayName=r.displayName),l.sessionId=a,d_(n,t,e.type,void 0,e.eventId??void 0,l)}async function PV(n){const{BuildInfo:e}=wo(),t={};Qd()?t.iosBundleId=e.packageName:Kd()?t.androidPackageName=e.packageName:mn(n,"operation-not-supported-in-this-environment"),await cS(n,t)}function OV(n){const{cordova:e}=wo();return new Promise(t=>{e.plugins.browsertab.isAvailable(r=>{let a=null;r?e.plugins.browsertab.openUrl(n):a=e.InAppBrowser.open(n,zD()?"_blank":"_system","location=yes"),t(a)})})}async function VV(n,e,t){const{cordova:r}=wo();let a=()=>{};try{await new Promise((l,u)=>{let h=null;function m(){var T;l();const x=(T=r.plugins.browsertab)==null?void 0:T.close;typeof x=="function"&&x(),typeof(t==null?void 0:t.close)=="function"&&t.close()}function y(){h||(h=window.setTimeout(()=>{u(Yt(n,"redirect-cancelled-by-user"))},CV))}function v(){(document==null?void 0:document.visibilityState)==="visible"&&y()}e.addPassiveListener(m),document.addEventListener("resume",y,!1),Kd()&&document.addEventListener("visibilitychange",v,!1),a=()=>{e.removePassiveListener(m),document.removeEventListener("resume",y,!1),document.removeEventListener("visibilitychange",v,!1),h&&window.clearTimeout(h)}})}finally{a()}}function MV(n){var t,r,a,l,u,h,m,y,v,x;const e=wo();re(typeof((t=e==null?void 0:e.universalLinks)==null?void 0:t.subscribe)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),re(typeof((r=e==null?void 0:e.BuildInfo)==null?void 0:r.packageName)<"u",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),re(typeof((u=(l=(a=e==null?void 0:e.cordova)==null?void 0:a.plugins)==null?void 0:l.browsertab)==null?void 0:u.openUrl)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),re(typeof((y=(m=(h=e==null?void 0:e.cordova)==null?void 0:h.plugins)==null?void 0:m.browsertab)==null?void 0:y.isAvailable)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),re(typeof((x=(v=e==null?void 0:e.cordova)==null?void 0:v.InAppBrowser)==null?void 0:x.open)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function jV(n){const e=LV(n),t=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(t)).map(a=>a.toString(16).padStart(2,"0")).join("")}function LV(n){if(zr(/[0-9a-zA-Z]+/.test(n),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(n);const e=new ArrayBuffer(n.length),t=new Uint8Array(e);for(let r=0;r<n.length;r++)t[r]=n.charCodeAt(r);return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UV=20;class zV extends oS{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(t=>t(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function BV(n,e,t=null){return{type:e,eventId:t,urlResponse:null,sessionId:GV(),postBody:null,tenantId:n.tenantId,error:Yt(n,"no-auth-event")}}function FV(n,e){return h_()._set(f_(n),e)}async function XT(n){const e=await h_()._get(f_(n));return e&&await h_()._remove(f_(n)),e}function qV(n,e){var r,a;const t=KV(e);if(t.includes("/__/auth/callback")){const l=rm(t),u=l.firebaseError?HV(decodeURIComponent(l.firebaseError)):null,h=(a=(r=u==null?void 0:u.code)==null?void 0:r.split("auth/"))==null?void 0:a[1],m=h?Yt(h):null;return m?{type:n.type,eventId:n.eventId,tenantId:n.tenantId,error:m,urlResponse:null,sessionId:null,postBody:null}:{type:n.type,eventId:n.eventId,tenantId:n.tenantId,sessionId:n.sessionId,urlResponse:t,postBody:null}}return null}function GV(){const n=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let t=0;t<UV;t++){const r=Math.floor(Math.random()*e.length);n.push(e.charAt(r))}return n.join("")}function h_(){return er(bv)}function f_(n){return po("authEvent",n.config.apiKey,n.name)}function HV(n){try{return JSON.parse(n)}catch{return null}}function KV(n){const e=rm(n),t=e.link?decodeURIComponent(e.link):void 0,r=rm(t).link,a=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return rm(a).link||a||r||t||n}function rm(n){if(!(n!=null&&n.includes("?")))return{};const[e,...t]=n.split("?");return Fl(t.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QV=500;class $V{constructor(){this._redirectPersistence=bo,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ng,this._overrideRedirectResult=Iv}async _initialize(e){const t=e._key();let r=this.eventManagers.get(t);return r||(r=new zV(e),this.eventManagers.set(t,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){mn(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,r,a){MV(e);const l=await this._initialize(e);await l.initialized(),l.resetRedirect(),FO(),await this._originValidation(e);const u=BV(e,r,a);await FV(e,u);const h=await DV(e,u,t),m=await OV(h);return VV(e,l,m)}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=PV(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:r,handleOpenURL:a,BuildInfo:l}=wo(),u=setTimeout(async()=>{await XT(e),t.onEvent(JT())},QV),h=async v=>{clearTimeout(u);const x=await XT(e);let T=null;x&&(v!=null&&v.url)&&(T=qV(x,v.url)),t.onEvent(T||JT())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,h);const m=a,y=`${l.packageName.toLowerCase()}://`;wo().handleOpenURL=async v=>{if(v.toLowerCase().startsWith(y)&&h({url:v}),typeof m=="function")try{m(v)}catch(x){console.error(x)}}}}const YV=$V;function JT(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Yt("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WV(n,e){bt(n)._logFramework(e)}var XV="@firebase/auth-compat",JV="0.6.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZV=1e3;function cd(){var n;return((n=self==null?void 0:self.location)==null?void 0:n.protocol)||null}function e4(){return cd()==="http:"||cd()==="https:"}function dS(n=vt()){return!!((cd()==="file:"||cd()==="ionic:"||cd()==="capacitor:")&&n.toLowerCase().match(/iphone|ipad|ipod|android/))}function t4(){return rv()||Hm()}function n4(){return rA()&&(document==null?void 0:document.documentMode)===11}function r4(n=vt()){return/Edge\/\d+/.test(n)}function s4(n=vt()){return n4()||r4(n)}function hS(){try{const n=self.localStorage,e=Wd();if(n)return n.setItem(e,"1"),n.removeItem(e),s4()?xd():!0}catch{return Sv()&&xd()}return!1}function Sv(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ky(){return(e4()||nA()||dS())&&!t4()&&hS()&&!Sv()}function fS(){return dS()&&typeof document<"u"}async function i4(){return fS()?new Promise(n=>{const e=setTimeout(()=>{n(!1)},ZV);document.addEventListener("deviceready",()=>{clearTimeout(e),n(!0)})}):!1}function a4(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zn={LOCAL:"local",NONE:"none",SESSION:"session"},Bu=re,mS="persistence";function o4(n,e){if(Bu(Object.values(Zn).includes(e),n,"invalid-persistence-type"),rv()){Bu(e!==Zn.SESSION,n,"unsupported-persistence-type");return}if(Hm()){Bu(e===Zn.NONE,n,"unsupported-persistence-type");return}if(Sv()){Bu(e===Zn.NONE||e===Zn.LOCAL&&xd(),n,"unsupported-persistence-type");return}Bu(e===Zn.NONE||hS(),n,"unsupported-persistence-type")}async function m_(n){await n._initializationPromise;const e=gS(),t=po(mS,n.config.apiKey,n.name);e&&e.setItem(t,n._getPersistenceType())}function l4(n,e){const t=gS();if(!t)return[];const r=po(mS,n,e);switch(t.getItem(r)){case Zn.NONE:return[Jl];case Zn.LOCAL:return[Sd,bo];case Zn.SESSION:return[bo];default:return[]}}function gS(){var n;try{return((n=a4())==null?void 0:n.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c4=re;class Ji{constructor(){this.browserResolver=er(EV),this.cordovaResolver=er(YV),this.underlyingResolver=null,this._redirectPersistence=bo,this._completeRedirectFn=ng,this._overrideRedirectResult=Iv}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,r,a){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,r,a)}async _openRedirect(e,t,r,a){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,r,a)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return fS()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return c4(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await i4();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pS(n){return n.unwrap()}function u4(n){return n.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d4(n){return yS(n)}function h4(n,e){var r;const t=(r=e.customData)==null?void 0:r._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const a=e;a.resolver=new f4(n,rO(n,e))}else if(t){const a=yS(e),l=e;a&&(l.credential=a,l.tenantId=t.tenantId||void 0,l.email=t.email||void 0,l.phoneNumber=t.phoneNumber||void 0)}}function yS(n){const{_tokenResponse:e}=n instanceof vn?n.customData:n;if(!e)return null;if(!(n instanceof vn)&&"temporaryProof"in e&&"phoneNumber"in e)return xo.credentialFromResult(n);const t=e.providerId;if(!t||t===Uu.PASSWORD)return null;let r;switch(t){case Uu.GOOGLE:r=hs;break;case Uu.FACEBOOK:r=ds;break;case Uu.GITHUB:r=fs;break;case Uu.TWITTER:r=ms;break;default:const{oauthIdToken:a,oauthAccessToken:l,oauthTokenSecret:u,pendingToken:h,nonce:m}=e;return!l&&!u&&!a&&!h?null:h?t.startsWith("saml.")?Zl._create(t,h):Ts._fromParams({providerId:t,signInMethod:t,pendingToken:h,idToken:a,accessToken:l}):new Hl(t).credential({idToken:a,accessToken:l,rawNonce:m})}return n instanceof vn?r.credentialFromError(n):r.credentialFromResult(n)}function Ln(n,e){return e.catch(t=>{throw t instanceof vn&&h4(n,t),t}).then(t=>{const r=t.operationType,a=t.user;return{operationType:r,credential:d4(t),additionalUserInfo:nO(t),user:rg.getOrCreate(a)}})}async function g_(n,e){const t=await e;return{verificationId:t.verificationId,confirm:r=>Ln(n,t.confirm(r))}}class f4{constructor(e,t){this.resolver=t,this.auth=u4(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return Ln(pS(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rg=class Ju{constructor(e){this._delegate=e,this.multiFactor=aO(e)}static getOrCreate(e){return Ju.USER_MAP.has(e)||Ju.USER_MAP.set(e,new Ju(e)),Ju.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return Ln(this.auth,KA(this._delegate,e))}async linkWithPhoneNumber(e,t){return g_(this.auth,NO(this._delegate,e,t))}async linkWithPopup(e){return Ln(this.auth,LO(this._delegate,e,Ji))}async linkWithRedirect(e){return await m_(bt(this.auth)),QO(this._delegate,e,Ji)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return Ln(this.auth,QA(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return g_(this.auth,kO(this._delegate,e,t))}reauthenticateWithPopup(e){return Ln(this.auth,jO(this._delegate,e,Ji))}async reauthenticateWithRedirect(e){return await m_(bt(this.auth)),HO(this._delegate,e,Ji)}sendEmailVerification(e){return HP(this._delegate,e)}async unlink(e){return await CP(this._delegate,e),this}updateEmail(e){return YP(this._delegate,e)}updatePassword(e){return WP(this._delegate,e)}updatePhoneNumber(e){return CO(this._delegate,e)}updateProfile(e){return $P(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return KP(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}};rg.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fu=re;class p_{constructor(e,t){if(this.app=e,t.isInitialized()){this._delegate=t.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;Fu(r,"invalid-api-key",{appName:e.name}),Fu(r,"invalid-api-key",{appName:e.name});const a=typeof window<"u"?Ji:void 0;this._delegate=t.initialize({options:{persistence:m4(r,e.name),popupRedirectResolver:a}}),this._delegate._updateErrorMap(bD),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?rg.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){lP(this._delegate,e,t)}applyActionCode(e){return MP(this._delegate,e)}checkActionCode(e){return $A(this._delegate,e)}confirmPasswordReset(e,t){return VP(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return Ln(this._delegate,LP(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return GP(this._delegate,e)}isSignInWithEmailLink(e){return BP(this._delegate,e)}async getRedirectResult(){Fu(Ky(),this._delegate,"operation-not-supported-in-this-environment");const e=await YO(this._delegate,Ji);return e?Ln(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){WV(this._delegate,e)}onAuthStateChanged(e,t,r){const{next:a,error:l,complete:u}=ZT(e,t,r);return this._delegate.onAuthStateChanged(a,l,u)}onIdTokenChanged(e,t,r){const{next:a,error:l,complete:u}=ZT(e,t,r);return this._delegate.onIdTokenChanged(a,l,u)}sendSignInLinkToEmail(e,t){return zP(this._delegate,e,t)}sendPasswordResetEmail(e,t){return OP(this._delegate,e,t||void 0)}async setPersistence(e){o4(this._delegate,e);let t;switch(e){case Zn.SESSION:t=bo;break;case Zn.LOCAL:t=await er(Sd)._isAvailable()?Sd:bv;break;case Zn.NONE:t=Jl;break;default:return mn("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return Ln(this._delegate,kP(this._delegate))}signInWithCredential(e){return Ln(this._delegate,Xm(this._delegate,e))}signInWithCustomToken(e){return Ln(this._delegate,PP(this._delegate,e))}signInWithEmailAndPassword(e,t){return Ln(this._delegate,UP(this._delegate,e,t))}signInWithEmailLink(e,t){return Ln(this._delegate,FP(this._delegate,e,t))}signInWithPhoneNumber(e,t){return g_(this._delegate,RO(this._delegate,e,t))}async signInWithPopup(e){return Fu(Ky(),this._delegate,"operation-not-supported-in-this-environment"),Ln(this._delegate,MO(this._delegate,e,Ji))}async signInWithRedirect(e){return Fu(Ky(),this._delegate,"operation-not-supported-in-this-environment"),await m_(this._delegate),qO(this._delegate,e,Ji)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return jP(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}p_.Persistence=Zn;function ZT(n,e,t){let r=n;typeof n!="function"&&({next:r,error:e,complete:t}=n);const a=r;return{next:u=>a(u&&rg.getOrCreate(u)),error:e,complete:t}}function m4(n,e){const t=l4(n,e);if(typeof self<"u"&&!t.includes(Sd)&&t.push(Sd),typeof window<"u")for(const r of[bv,bo])t.includes(r)||t.push(r);return t.includes(Jl)||t.push(Jl),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rv{static credential(e,t){return xo.credential(e,t)}constructor(){this.providerId="phone",this._delegate=new xo(pS(rt.auth()))}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}Rv.PHONE_SIGN_IN_METHOD=xo.PHONE_SIGN_IN_METHOD;Rv.PROVIDER_ID=xo.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g4=re;class p4{constructor(e,t,r=rt.app()){var a;g4((a=r.options)==null?void 0:a.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new AO(r.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y4="auth-compat";function _4(n){n.INTERNAL.registerComponent(new wr(y4,e=>{const t=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new p_(t,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Nl.EMAIL_SIGNIN,PASSWORD_RESET:Nl.PASSWORD_RESET,RECOVER_EMAIL:Nl.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:Nl.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:Nl.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:Nl.VERIFY_EMAIL}},EmailAuthProvider:va,FacebookAuthProvider:ds,GithubAuthProvider:fs,GoogleAuthProvider:hs,OAuthProvider:Hl,SAMLAuthProvider:wm,PhoneAuthProvider:Rv,PhoneMultiFactorGenerator:uS,RecaptchaVerifier:p4,TwitterAuthProvider:ms,Auth:p_,AuthCredential:xc,Error:vn}).setInstantiationMode("LAZY").setMultipleInstances(!1)),n.registerVersion(XV,JV)}_4(rt);var eE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ra,_S;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,A){function S(){}S.prototype=A.prototype,C.F=A.prototype,C.prototype=new S,C.prototype.constructor=C,C.D=function(k,P,L){for(var N=Array(arguments.length-2),tt=2;tt<arguments.length;tt++)N[tt-2]=arguments[tt];return A.prototype[P].apply(k,N)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(C,A,S){S||(S=0);const k=Array(16);if(typeof A=="string")for(var P=0;P<16;++P)k[P]=A.charCodeAt(S++)|A.charCodeAt(S++)<<8|A.charCodeAt(S++)<<16|A.charCodeAt(S++)<<24;else for(P=0;P<16;++P)k[P]=A[S++]|A[S++]<<8|A[S++]<<16|A[S++]<<24;A=C.g[0],S=C.g[1],P=C.g[2];let L=C.g[3],N;N=A+(L^S&(P^L))+k[0]+3614090360&4294967295,A=S+(N<<7&4294967295|N>>>25),N=L+(P^A&(S^P))+k[1]+3905402710&4294967295,L=A+(N<<12&4294967295|N>>>20),N=P+(S^L&(A^S))+k[2]+606105819&4294967295,P=L+(N<<17&4294967295|N>>>15),N=S+(A^P&(L^A))+k[3]+3250441966&4294967295,S=P+(N<<22&4294967295|N>>>10),N=A+(L^S&(P^L))+k[4]+4118548399&4294967295,A=S+(N<<7&4294967295|N>>>25),N=L+(P^A&(S^P))+k[5]+1200080426&4294967295,L=A+(N<<12&4294967295|N>>>20),N=P+(S^L&(A^S))+k[6]+2821735955&4294967295,P=L+(N<<17&4294967295|N>>>15),N=S+(A^P&(L^A))+k[7]+4249261313&4294967295,S=P+(N<<22&4294967295|N>>>10),N=A+(L^S&(P^L))+k[8]+1770035416&4294967295,A=S+(N<<7&4294967295|N>>>25),N=L+(P^A&(S^P))+k[9]+2336552879&4294967295,L=A+(N<<12&4294967295|N>>>20),N=P+(S^L&(A^S))+k[10]+4294925233&4294967295,P=L+(N<<17&4294967295|N>>>15),N=S+(A^P&(L^A))+k[11]+2304563134&4294967295,S=P+(N<<22&4294967295|N>>>10),N=A+(L^S&(P^L))+k[12]+1804603682&4294967295,A=S+(N<<7&4294967295|N>>>25),N=L+(P^A&(S^P))+k[13]+4254626195&4294967295,L=A+(N<<12&4294967295|N>>>20),N=P+(S^L&(A^S))+k[14]+2792965006&4294967295,P=L+(N<<17&4294967295|N>>>15),N=S+(A^P&(L^A))+k[15]+1236535329&4294967295,S=P+(N<<22&4294967295|N>>>10),N=A+(P^L&(S^P))+k[1]+4129170786&4294967295,A=S+(N<<5&4294967295|N>>>27),N=L+(S^P&(A^S))+k[6]+3225465664&4294967295,L=A+(N<<9&4294967295|N>>>23),N=P+(A^S&(L^A))+k[11]+643717713&4294967295,P=L+(N<<14&4294967295|N>>>18),N=S+(L^A&(P^L))+k[0]+3921069994&4294967295,S=P+(N<<20&4294967295|N>>>12),N=A+(P^L&(S^P))+k[5]+3593408605&4294967295,A=S+(N<<5&4294967295|N>>>27),N=L+(S^P&(A^S))+k[10]+38016083&4294967295,L=A+(N<<9&4294967295|N>>>23),N=P+(A^S&(L^A))+k[15]+3634488961&4294967295,P=L+(N<<14&4294967295|N>>>18),N=S+(L^A&(P^L))+k[4]+3889429448&4294967295,S=P+(N<<20&4294967295|N>>>12),N=A+(P^L&(S^P))+k[9]+568446438&4294967295,A=S+(N<<5&4294967295|N>>>27),N=L+(S^P&(A^S))+k[14]+3275163606&4294967295,L=A+(N<<9&4294967295|N>>>23),N=P+(A^S&(L^A))+k[3]+4107603335&4294967295,P=L+(N<<14&4294967295|N>>>18),N=S+(L^A&(P^L))+k[8]+1163531501&4294967295,S=P+(N<<20&4294967295|N>>>12),N=A+(P^L&(S^P))+k[13]+2850285829&4294967295,A=S+(N<<5&4294967295|N>>>27),N=L+(S^P&(A^S))+k[2]+4243563512&4294967295,L=A+(N<<9&4294967295|N>>>23),N=P+(A^S&(L^A))+k[7]+1735328473&4294967295,P=L+(N<<14&4294967295|N>>>18),N=S+(L^A&(P^L))+k[12]+2368359562&4294967295,S=P+(N<<20&4294967295|N>>>12),N=A+(S^P^L)+k[5]+4294588738&4294967295,A=S+(N<<4&4294967295|N>>>28),N=L+(A^S^P)+k[8]+2272392833&4294967295,L=A+(N<<11&4294967295|N>>>21),N=P+(L^A^S)+k[11]+1839030562&4294967295,P=L+(N<<16&4294967295|N>>>16),N=S+(P^L^A)+k[14]+4259657740&4294967295,S=P+(N<<23&4294967295|N>>>9),N=A+(S^P^L)+k[1]+2763975236&4294967295,A=S+(N<<4&4294967295|N>>>28),N=L+(A^S^P)+k[4]+1272893353&4294967295,L=A+(N<<11&4294967295|N>>>21),N=P+(L^A^S)+k[7]+4139469664&4294967295,P=L+(N<<16&4294967295|N>>>16),N=S+(P^L^A)+k[10]+3200236656&4294967295,S=P+(N<<23&4294967295|N>>>9),N=A+(S^P^L)+k[13]+681279174&4294967295,A=S+(N<<4&4294967295|N>>>28),N=L+(A^S^P)+k[0]+3936430074&4294967295,L=A+(N<<11&4294967295|N>>>21),N=P+(L^A^S)+k[3]+3572445317&4294967295,P=L+(N<<16&4294967295|N>>>16),N=S+(P^L^A)+k[6]+76029189&4294967295,S=P+(N<<23&4294967295|N>>>9),N=A+(S^P^L)+k[9]+3654602809&4294967295,A=S+(N<<4&4294967295|N>>>28),N=L+(A^S^P)+k[12]+3873151461&4294967295,L=A+(N<<11&4294967295|N>>>21),N=P+(L^A^S)+k[15]+530742520&4294967295,P=L+(N<<16&4294967295|N>>>16),N=S+(P^L^A)+k[2]+3299628645&4294967295,S=P+(N<<23&4294967295|N>>>9),N=A+(P^(S|~L))+k[0]+4096336452&4294967295,A=S+(N<<6&4294967295|N>>>26),N=L+(S^(A|~P))+k[7]+1126891415&4294967295,L=A+(N<<10&4294967295|N>>>22),N=P+(A^(L|~S))+k[14]+2878612391&4294967295,P=L+(N<<15&4294967295|N>>>17),N=S+(L^(P|~A))+k[5]+4237533241&4294967295,S=P+(N<<21&4294967295|N>>>11),N=A+(P^(S|~L))+k[12]+1700485571&4294967295,A=S+(N<<6&4294967295|N>>>26),N=L+(S^(A|~P))+k[3]+2399980690&4294967295,L=A+(N<<10&4294967295|N>>>22),N=P+(A^(L|~S))+k[10]+4293915773&4294967295,P=L+(N<<15&4294967295|N>>>17),N=S+(L^(P|~A))+k[1]+2240044497&4294967295,S=P+(N<<21&4294967295|N>>>11),N=A+(P^(S|~L))+k[8]+1873313359&4294967295,A=S+(N<<6&4294967295|N>>>26),N=L+(S^(A|~P))+k[15]+4264355552&4294967295,L=A+(N<<10&4294967295|N>>>22),N=P+(A^(L|~S))+k[6]+2734768916&4294967295,P=L+(N<<15&4294967295|N>>>17),N=S+(L^(P|~A))+k[13]+1309151649&4294967295,S=P+(N<<21&4294967295|N>>>11),N=A+(P^(S|~L))+k[4]+4149444226&4294967295,A=S+(N<<6&4294967295|N>>>26),N=L+(S^(A|~P))+k[11]+3174756917&4294967295,L=A+(N<<10&4294967295|N>>>22),N=P+(A^(L|~S))+k[2]+718787259&4294967295,P=L+(N<<15&4294967295|N>>>17),N=S+(L^(P|~A))+k[9]+3951481745&4294967295,C.g[0]=C.g[0]+A&4294967295,C.g[1]=C.g[1]+(P+(N<<21&4294967295|N>>>11))&4294967295,C.g[2]=C.g[2]+P&4294967295,C.g[3]=C.g[3]+L&4294967295}r.prototype.v=function(C,A){A===void 0&&(A=C.length);const S=A-this.blockSize,k=this.C;let P=this.h,L=0;for(;L<A;){if(P==0)for(;L<=S;)a(this,C,L),L+=this.blockSize;if(typeof C=="string"){for(;L<A;)if(k[P++]=C.charCodeAt(L++),P==this.blockSize){a(this,k),P=0;break}}else for(;L<A;)if(k[P++]=C[L++],P==this.blockSize){a(this,k),P=0;break}}this.h=P,this.o+=A},r.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var A=1;A<C.length-8;++A)C[A]=0;A=this.o*8;for(var S=C.length-8;S<C.length;++S)C[S]=A&255,A/=256;for(this.v(C),C=Array(16),A=0,S=0;S<4;++S)for(let k=0;k<32;k+=8)C[A++]=this.g[S]>>>k&255;return C};function l(C,A){var S=h;return Object.prototype.hasOwnProperty.call(S,C)?S[C]:S[C]=A(C)}function u(C,A){this.h=A;const S=[];let k=!0;for(let P=C.length-1;P>=0;P--){const L=C[P]|0;k&&L==A||(S[P]=L,k=!1)}this.g=S}var h={};function m(C){return-128<=C&&C<128?l(C,function(A){return new u([A|0],A<0?-1:0)}):new u([C|0],C<0?-1:0)}function y(C){if(isNaN(C)||!isFinite(C))return x;if(C<0)return M(y(-C));const A=[];let S=1;for(let k=0;C>=S;k++)A[k]=C/S|0,S*=4294967296;return new u(A,0)}function v(C,A){if(C.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(C.charAt(0)=="-")return M(v(C.substring(1),A));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const S=y(Math.pow(A,8));let k=x;for(let L=0;L<C.length;L+=8){var P=Math.min(8,C.length-L);const N=parseInt(C.substring(L,L+P),A);P<8?(P=y(Math.pow(A,P)),k=k.j(P).add(y(N))):(k=k.j(S),k=k.add(y(N)))}return k}var x=m(0),T=m(1),R=m(16777216);n=u.prototype,n.m=function(){if(U(this))return-M(this).m();let C=0,A=1;for(let S=0;S<this.g.length;S++){const k=this.i(S);C+=(k>=0?k:4294967296+k)*A,A*=4294967296}return C},n.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(V(this))return"0";if(U(this))return"-"+M(this).toString(C);const A=y(Math.pow(C,6));var S=this;let k="";for(;;){const P=oe(S,A).g;S=W(S,P.j(A));let L=((S.g.length>0?S.g[0]:S.h)>>>0).toString(C);if(S=P,V(S))return L+k;for(;L.length<6;)L="0"+L;k=L+k}},n.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function V(C){if(C.h!=0)return!1;for(let A=0;A<C.g.length;A++)if(C.g[A]!=0)return!1;return!0}function U(C){return C.h==-1}n.l=function(C){return C=W(this,C),U(C)?-1:V(C)?0:1};function M(C){const A=C.g.length,S=[];for(let k=0;k<A;k++)S[k]=~C.g[k];return new u(S,~C.h).add(T)}n.abs=function(){return U(this)?M(this):this},n.add=function(C){const A=Math.max(this.g.length,C.g.length),S=[];let k=0;for(let P=0;P<=A;P++){let L=k+(this.i(P)&65535)+(C.i(P)&65535),N=(L>>>16)+(this.i(P)>>>16)+(C.i(P)>>>16);k=N>>>16,L&=65535,N&=65535,S[P]=N<<16|L}return new u(S,S[S.length-1]&-2147483648?-1:0)};function W(C,A){return C.add(M(A))}n.j=function(C){if(V(this)||V(C))return x;if(U(this))return U(C)?M(this).j(M(C)):M(M(this).j(C));if(U(C))return M(this.j(M(C)));if(this.l(R)<0&&C.l(R)<0)return y(this.m()*C.m());const A=this.g.length+C.g.length,S=[];for(var k=0;k<2*A;k++)S[k]=0;for(k=0;k<this.g.length;k++)for(let P=0;P<C.g.length;P++){const L=this.i(k)>>>16,N=this.i(k)&65535,tt=C.i(P)>>>16,wt=C.i(P)&65535;S[2*k+2*P]+=N*wt,Y(S,2*k+2*P),S[2*k+2*P+1]+=L*wt,Y(S,2*k+2*P+1),S[2*k+2*P+1]+=N*tt,Y(S,2*k+2*P+1),S[2*k+2*P+2]+=L*tt,Y(S,2*k+2*P+2)}for(C=0;C<A;C++)S[C]=S[2*C+1]<<16|S[2*C];for(C=A;C<2*A;C++)S[C]=0;return new u(S,0)};function Y(C,A){for(;(C[A]&65535)!=C[A];)C[A+1]+=C[A]>>>16,C[A]&=65535,A++}function X(C,A){this.g=C,this.h=A}function oe(C,A){if(V(A))throw Error("division by zero");if(V(C))return new X(x,x);if(U(C))return A=oe(M(C),A),new X(M(A.g),M(A.h));if(U(A))return A=oe(C,M(A)),new X(M(A.g),A.h);if(C.g.length>30){if(U(C)||U(A))throw Error("slowDivide_ only works with positive integers.");for(var S=T,k=A;k.l(C)<=0;)S=ye(S),k=ye(k);var P=he(S,1),L=he(k,1);for(k=he(k,2),S=he(S,2);!V(k);){var N=L.add(k);N.l(C)<=0&&(P=P.add(S),L=N),k=he(k,1),S=he(S,1)}return A=W(C,P.j(A)),new X(P,A)}for(P=x;C.l(A)>=0;){for(S=Math.max(1,Math.floor(C.m()/A.m())),k=Math.ceil(Math.log(S)/Math.LN2),k=k<=48?1:Math.pow(2,k-48),L=y(S),N=L.j(A);U(N)||N.l(C)>0;)S-=k,L=y(S),N=L.j(A);V(L)&&(L=T),P=P.add(L),C=W(C,N)}return new X(P,C)}n.B=function(C){return oe(this,C).h},n.and=function(C){const A=Math.max(this.g.length,C.g.length),S=[];for(let k=0;k<A;k++)S[k]=this.i(k)&C.i(k);return new u(S,this.h&C.h)},n.or=function(C){const A=Math.max(this.g.length,C.g.length),S=[];for(let k=0;k<A;k++)S[k]=this.i(k)|C.i(k);return new u(S,this.h|C.h)},n.xor=function(C){const A=Math.max(this.g.length,C.g.length),S=[];for(let k=0;k<A;k++)S[k]=this.i(k)^C.i(k);return new u(S,this.h^C.h)};function ye(C){const A=C.g.length+1,S=[];for(let k=0;k<A;k++)S[k]=C.i(k)<<1|C.i(k-1)>>>31;return new u(S,C.h)}function he(C,A){const S=A>>5;A%=32;const k=C.g.length-S,P=[];for(let L=0;L<k;L++)P[L]=A>0?C.i(L+S)>>>A|C.i(L+S+1)<<32-A:C.i(L+S);return new u(P,C.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,_S=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=y,u.fromString=v,ra=u}).apply(typeof eE<"u"?eE:typeof self<"u"?self:typeof window<"u"?window:{});var Gf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vS,Zu,bS,sm,y_,xS,wS,TS;(function(){var n,e=Object.defineProperty;function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Gf=="object"&&Gf];for(var _=0;_<d.length;++_){var w=d[_];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var r=t(this);function a(d,_){if(_)e:{var w=r;d=d.split(".");for(var I=0;I<d.length-1;I++){var B=d[I];if(!(B in w))break e;w=w[B]}d=d[d.length-1],I=w[d],_=_(I),_!=I&&_!=null&&e(w,d,{configurable:!0,writable:!0,value:_})}}a("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(d){return d||function(_){var w=[],I;for(I in _)Object.prototype.hasOwnProperty.call(_,I)&&w.push([I,_[I]]);return w}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},u=this||self;function h(d){var _=typeof d;return _=="object"&&d!=null||_=="function"}function m(d,_,w){return d.call.apply(d.bind,arguments)}function y(d,_,w){return y=m,y.apply(null,arguments)}function v(d,_){var w=Array.prototype.slice.call(arguments,1);return function(){var I=w.slice();return I.push.apply(I,arguments),d.apply(this,I)}}function x(d,_){function w(){}w.prototype=_.prototype,d.Z=_.prototype,d.prototype=new w,d.prototype.constructor=d,d.Ob=function(I,B,Q){for(var ie=Array(arguments.length-2),Te=2;Te<arguments.length;Te++)ie[Te-2]=arguments[Te];return _.prototype[B].apply(I,ie)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function R(d){const _=d.length;if(_>0){const w=Array(_);for(let I=0;I<_;I++)w[I]=d[I];return w}return[]}function V(d,_){for(let I=1;I<arguments.length;I++){const B=arguments[I];var w=typeof B;if(w=w!="object"?w:B?Array.isArray(B)?"array":w:"null",w=="array"||w=="object"&&typeof B.length=="number"){w=d.length||0;const Q=B.length||0;d.length=w+Q;for(let ie=0;ie<Q;ie++)d[w+ie]=B[ie]}else d.push(B)}}class U{constructor(_,w){this.i=_,this.j=w,this.h=0,this.g=null}get(){let _;return this.h>0?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function M(d){u.setTimeout(()=>{throw d},0)}function W(){var d=C;let _=null;return d.g&&(_=d.g,d.g=d.g.next,d.g||(d.h=null),_.next=null),_}class Y{constructor(){this.h=this.g=null}add(_,w){const I=X.get();I.set(_,w),this.h?this.h.next=I:this.g=I,this.h=I}}var X=new U(()=>new oe,d=>d.reset());class oe{constructor(){this.next=this.g=this.h=null}set(_,w){this.h=_,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let ye,he=!1,C=new Y,A=()=>{const d=Promise.resolve(void 0);ye=()=>{d.then(S)}};function S(){for(var d;d=W();){try{d.h.call(d.g)}catch(w){M(w)}var _=X;_.j(d),_.h<100&&(_.h++,d.next=_.g,_.g=d)}he=!1}function k(){this.u=this.u,this.C=this.C}k.prototype.u=!1,k.prototype.dispose=function(){this.u||(this.u=!0,this.N())},k.prototype[Symbol.dispose]=function(){this.dispose()},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(d,_){this.type=d,this.g=this.target=_,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var L=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var d=!1,_=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const w=()=>{};u.addEventListener("test",w,_),u.removeEventListener("test",w,_)}catch{}return d})();function N(d){return/^[\s\xa0]*$/.test(d)}function tt(d,_){P.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,_)}x(tt,P),tt.prototype.init=function(d,_){const w=this.type=d.type,I=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=_,_=d.relatedTarget,_||(w=="mouseover"?_=d.fromElement:w=="mouseout"&&(_=d.toElement)),this.relatedTarget=_,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&tt.Z.h.call(this)},tt.prototype.h=function(){tt.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var wt="closure_listenable_"+(Math.random()*1e6|0),K=0;function le(d,_,w,I,B){this.listener=d,this.proxy=null,this.src=_,this.type=w,this.capture=!!I,this.ha=B,this.key=++K,this.da=this.fa=!1}function ve(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Le(d,_,w){for(const I in d)_.call(w,d[I],I,d)}function Ge(d,_){for(const w in d)_.call(void 0,d[w],w,d)}function ue(d){const _={};for(const w in d)_[w]=d[w];return _}const Re="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Se(d,_){let w,I;for(let B=1;B<arguments.length;B++){I=arguments[B];for(w in I)d[w]=I[w];for(let Q=0;Q<Re.length;Q++)w=Re[Q],Object.prototype.hasOwnProperty.call(I,w)&&(d[w]=I[w])}}function st(d){this.src=d,this.g={},this.h=0}st.prototype.add=function(d,_,w,I,B){const Q=d.toString();d=this.g[Q],d||(d=this.g[Q]=[],this.h++);const ie=ir(d,_,I,B);return ie>-1?(_=d[ie],w||(_.fa=!1)):(_=new le(_,this.src,Q,!!I,B),_.fa=w,d.push(_)),_};function rn(d,_){const w=_.type;if(w in d.g){var I=d.g[w],B=Array.prototype.indexOf.call(I,_,void 0),Q;(Q=B>=0)&&Array.prototype.splice.call(I,B,1),Q&&(ve(_),d.g[w].length==0&&(delete d.g[w],d.h--))}}function ir(d,_,w,I){for(let B=0;B<d.length;++B){const Q=d[B];if(!Q.da&&Q.listener==_&&Q.capture==!!w&&Q.ha==I)return B}return-1}var di="closure_lm_"+(Math.random()*1e6|0),hi={};function As(d,_,w,I,B){if(Array.isArray(_)){for(let Q=0;Q<_.length;Q++)As(d,_[Q],w,I,B);return null}return w=Vc(w),d&&d[wt]?d.J(_,w,h(I)?!!I.capture:!1,B):Dc(d,_,w,!1,I,B)}function Dc(d,_,w,I,B,Q){if(!_)throw Error("Invalid event type");const ie=h(B)?!!B.capture:!!B;let Te=Aa(d);if(Te||(d[di]=Te=new st(d)),w=Te.add(_,w,I,ie,Q),w.proxy)return w;if(I=Uo(),w.proxy=I,I.src=d,I.listener=w,d.addEventListener)L||(B=ie),B===void 0&&(B=!1),d.addEventListener(_.toString(),I,B);else if(d.attachEvent)d.attachEvent(Br(_.toString()),I);else if(d.addListener&&d.removeListener)d.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return w}function Uo(){function d(w){return _.call(d.src,d.listener,w)}const _=Pc;return d}function zo(d,_,w,I,B){if(Array.isArray(_))for(var Q=0;Q<_.length;Q++)zo(d,_[Q],w,I,B);else I=h(I)?!!I.capture:!!I,w=Vc(w),d&&d[wt]?(d=d.i,Q=String(_).toString(),Q in d.g&&(_=d.g[Q],w=ir(_,w,I,B),w>-1&&(ve(_[w]),Array.prototype.splice.call(_,w,1),_.length==0&&(delete d.g[Q],d.h--)))):d&&(d=Aa(d))&&(_=d.g[_.toString()],d=-1,_&&(d=ir(_,w,I,B)),(w=d>-1?_[d]:null)&&Bo(w))}function Bo(d){if(typeof d!="number"&&d&&!d.da){var _=d.src;if(_&&_[wt])rn(_.i,d);else{var w=d.type,I=d.proxy;_.removeEventListener?_.removeEventListener(w,I,d.capture):_.detachEvent?_.detachEvent(Br(w),I):_.addListener&&_.removeListener&&_.removeListener(I),(w=Aa(_))?(rn(w,d),w.h==0&&(w.src=null,_[di]=null)):ve(d)}}}function Br(d){return d in hi?hi[d]:hi[d]="on"+d}function Pc(d,_){if(d.da)d=!0;else{_=new tt(_,this);const w=d.listener,I=d.ha||d.src;d.fa&&Bo(d),d=w.call(I,_)}return d}function Aa(d){return d=d[di],d instanceof st?d:null}var Oc="__closure_events_fn_"+(Math.random()*1e9>>>0);function Vc(d){return typeof d=="function"?d:(d[Oc]||(d[Oc]=function(_){return d.handleEvent(_)}),d[Oc])}function Vt(){k.call(this),this.i=new st(this),this.M=this,this.G=null}x(Vt,k),Vt.prototype[wt]=!0,Vt.prototype.removeEventListener=function(d,_,w,I){zo(this,d,_,w,I)};function Qt(d,_){var w,I=d.G;if(I)for(w=[];I;I=I.G)w.push(I);if(d=d.M,I=_.type||_,typeof _=="string")_=new P(_,d);else if(_ instanceof P)_.target=_.target||d;else{var B=_;_=new P(I,d),Se(_,B)}B=!0;let Q,ie;if(w)for(ie=w.length-1;ie>=0;ie--)Q=_.g=w[ie],B=fi(Q,I,!0,_)&&B;if(Q=_.g=d,B=fi(Q,I,!0,_)&&B,B=fi(Q,I,!1,_)&&B,w)for(ie=0;ie<w.length;ie++)Q=_.g=w[ie],B=fi(Q,I,!1,_)&&B}Vt.prototype.N=function(){if(Vt.Z.N.call(this),this.i){var d=this.i;for(const _ in d.g){const w=d.g[_];for(let I=0;I<w.length;I++)ve(w[I]);delete d.g[_],d.h--}}this.G=null},Vt.prototype.J=function(d,_,w,I){return this.i.add(String(d),_,!1,w,I)},Vt.prototype.K=function(d,_,w,I){return this.i.add(String(d),_,!0,w,I)};function fi(d,_,w,I){if(_=d.i.g[String(_)],!_)return!0;_=_.concat();let B=!0;for(let Q=0;Q<_.length;++Q){const ie=_[Q];if(ie&&!ie.da&&ie.capture==w){const Te=ie.listener,Nt=ie.ha||ie.src;ie.fa&&rn(d.i,ie),B=Te.call(Nt,I)!==!1&&B}}return B&&!I.defaultPrevented}function Og(d,_){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=y(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(_)>2147483647?-1:u.setTimeout(d,_||0)}function fh(d){d.g=Og(()=>{d.g=null,d.i&&(d.i=!1,fh(d))},d.l);const _=d.h;d.h=null,d.m.apply(null,_)}class wn extends k{constructor(_,w){super(),this.m=_,this.l=w,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:fh(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Sa(d){k.call(this),this.h=d,this.g={}}x(Sa,k);var Mc=[];function jc(d){Le(d.g,function(_,w){this.g.hasOwnProperty(w)&&Bo(_)},d),d.g={}}Sa.prototype.N=function(){Sa.Z.N.call(this),jc(this)},Sa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var mi=u.JSON.stringify,Vg=u.JSON.parse,mh=class{stringify(d){return u.JSON.stringify(d,void 0)}parse(d){return u.JSON.parse(d,void 0)}};function gh(){}function ph(){}var Er={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function sn(){P.call(this,"d")}x(sn,P);function ar(){P.call(this,"c")}x(ar,P);var Rt={},yh=null;function Fo(){return yh=yh||new Vt}Rt.Ia="serverreachability";function _h(d){P.call(this,Rt.Ia,d)}x(_h,P);function Fr(d){const _=Fo();Qt(_,new _h(_))}Rt.STAT_EVENT="statevent";function Ra(d,_){P.call(this,Rt.STAT_EVENT,d),this.stat=_}x(Ra,P);function Mt(d){const _=Fo();Qt(_,new Ra(_,d))}Rt.Ja="timingevent";function qr(d,_){P.call(this,Rt.Ja,d),this.size=_}x(qr,P);function Gr(d,_){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){d()},_)}function Ir(){this.g=!0}Ir.prototype.ua=function(){this.g=!1};function Mg(d,_,w,I,B,Q){d.info(function(){if(d.g)if(Q){var ie="",Te=Q.split("&");for(let Fe=0;Fe<Te.length;Fe++){var Nt=Te[Fe].split("=");if(Nt.length>1){const ft=Nt[0];Nt=Nt[1];const ur=ft.split("_");ie=ur.length>=2&&ur[1]=="type"?ie+(ft+"="+Nt+"&"):ie+(ft+"=redacted&")}}}else ie=null;else ie=Q;return"XMLHTTP REQ ("+I+") [attempt "+B+"]: "+_+`
`+w+`
`+ie})}function vh(d,_,w,I,B,Q,ie){d.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+B+"]: "+_+`
`+w+`
`+Q+" "+ie})}function Hr(d,_,w,I){d.info(function(){return"XMLHTTP TEXT ("+_+"): "+jg(d,w)+(I?" "+I:"")})}function Na(d,_){d.info(function(){return"TIMEOUT: "+_})}Ir.prototype.info=function(){};function jg(d,_){if(!d.g)return _;if(!_)return null;try{const Q=JSON.parse(_);if(Q){for(d=0;d<Q.length;d++)if(Array.isArray(Q[d])){var w=Q[d];if(!(w.length<2)){var I=w[1];if(Array.isArray(I)&&!(I.length<1)){var B=I[0];if(B!="noop"&&B!="stop"&&B!="close")for(let ie=1;ie<I.length;ie++)I[ie]=""}}}}return mi(Q)}catch{return _}}var ka={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Lc={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Uc;function Ca(){}x(Ca,gh),Ca.prototype.g=function(){return new XMLHttpRequest},Uc=new Ca;function Ss(d){return encodeURIComponent(String(d))}function bh(d){var _=1;d=d.split(":");const w=[];for(;_>0&&d.length;)w.push(d.shift()),_--;return d.length&&w.push(d.join(":")),w}function Ar(d,_,w,I){this.j=d,this.i=_,this.l=w,this.S=I||1,this.V=new Sa(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Sr}function Sr(){this.i=null,this.g="",this.h=!1}var jt={},Xt={};function Kr(d,_,w){d.M=1,d.A=Da(Ut(_)),d.u=w,d.R=!0,qo(d,null)}function qo(d,_){d.F=Date.now(),Qr(d),d.B=Ut(d.A);var w=d.B,I=d.S;Array.isArray(I)||(I=[String(I)]),Qo(w.i,"t",I),d.C=0,w=d.j.L,d.h=new Sr,d.g=Vh(d.j,w?_:null,!d.u),d.P>0&&(d.O=new wn(y(d.Y,d,d.g),d.P)),_=d.V,w=d.g,I=d.ba;var B="readystatechange";Array.isArray(B)||(B&&(Mc[0]=B.toString()),B=Mc);for(let Q=0;Q<B.length;Q++){const ie=As(w,B[Q],I||_.handleEvent,!1,_.h||_);if(!ie)break;_.g[ie.key]=ie}_=d.J?ue(d.J):{},d.u?(d.v||(d.v="POST"),_["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,_)):(d.v="GET",d.g.ea(d.B,d.v,null,_)),Fr(),Mg(d.i,d.v,d.B,d.l,d.S,d.u)}Ar.prototype.ba=function(d){d=d.target;const _=this.O;_&&kr(d)==3?_.j():this.Y(d)},Ar.prototype.Y=function(d){try{if(d==this.g)e:{const Te=kr(this.g),Nt=this.g.ya(),Fe=this.g.ca();if(!(Te<3)&&(Te!=3||this.g&&(this.h.h||this.g.la()||an(this.g)))){this.K||Te!=4||Nt==7||(Nt==8||Fe<=0?Fr(3):Fr(2)),$r(this);var _=this.g.ca();this.X=_;var w=Lg(this);if(this.o=_==200,vh(this.i,this.v,this.B,this.l,this.S,Te,_),this.o){if(this.U&&!this.L){t:{if(this.g){var I,B=this.g;if((I=B.g?B.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(I)){var Q=I;break t}}Q=null}if(d=Q)Hr(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Yr(this,d);else{this.o=!1,this.m=3,Mt(12),Fn(this),or(this);break e}}if(this.R){d=!0;let ft;for(;!this.K&&this.C<w.length;)if(ft=wh(this,w),ft==Xt){Te==4&&(this.m=4,Mt(14),d=!1),Hr(this.i,this.l,null,"[Incomplete Response]");break}else if(ft==jt){this.m=4,Mt(15),Hr(this.i,this.l,w,"[Invalid Chunk]"),d=!1;break}else Hr(this.i,this.l,ft,null),Yr(this,ft);if(xh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Te!=4||w.length!=0||this.h.h||(this.m=1,Mt(16),d=!1),this.o=this.o&&d,!d)Hr(this.i,this.l,w,"[Invalid Chunked Response]"),Fn(this),or(this);else if(w.length>0&&!this.W){this.W=!0;var ie=this.j;ie.g==this&&ie.aa&&!ie.P&&(ie.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),eu(ie),ie.P=!0,Mt(11))}}else Hr(this.i,this.l,w,null),Yr(this,w);Te==4&&Fn(this),this.o&&!this.K&&(Te==4?Ch(this.j,this):(this.o=!1,Qr(this)))}else Ns(this.g),_==400&&w.indexOf("Unknown SID")>0?(this.m=3,Mt(12)):(this.m=0,Mt(13)),Fn(this),or(this)}}}catch{}finally{}};function Lg(d){if(!xh(d))return d.g.la();const _=an(d.g);if(_==="")return"";let w="";const I=_.length,B=kr(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return Fn(d),or(d),"";d.h.i=new u.TextDecoder}for(let Q=0;Q<I;Q++)d.h.h=!0,w+=d.h.i.decode(_[Q],{stream:!(B&&Q==I-1)});return _.length=0,d.h.g+=w,d.C=0,d.h.g}function xh(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function wh(d,_){var w=d.C,I=_.indexOf(`
`,w);return I==-1?Xt:(w=Number(_.substring(w,I)),isNaN(w)?jt:(I+=1,I+w>_.length?Xt:(_=_.slice(I,I+w),d.C=I+w,_)))}Ar.prototype.cancel=function(){this.K=!0,Fn(this)};function Qr(d){d.T=Date.now()+d.H,Go(d,d.H)}function Go(d,_){if(d.D!=null)throw Error("WatchDog timer not null");d.D=Gr(y(d.aa,d),_)}function $r(d){d.D&&(u.clearTimeout(d.D),d.D=null)}Ar.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(Na(this.i,this.B),this.M!=2&&(Fr(),Mt(17)),Fn(this),this.m=2,or(this)):Go(this,this.T-d)};function or(d){d.j.I==0||d.K||Ch(d.j,d)}function Fn(d){$r(d);var _=d.O;_&&typeof _.dispose=="function"&&_.dispose(),d.O=null,jc(d.V),d.g&&(_=d.g,d.g=null,_.abort(),_.dispose())}function Yr(d,_){try{var w=d.j;if(w.I!=0&&(w.g==d||Xr(w.h,d))){if(!d.L&&Xr(w.h,d)&&w.I==3){try{var I=w.Ba.g.parse(_)}catch{I=null}if(Array.isArray(I)&&I.length==3){var B=I;if(B[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<d.F)Jo(w),wi(w);else break e;Ua(w),Mt(18)}}else w.xa=B[1],0<w.xa-w.K&&B[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=Gr(y(w.Va,w),6e3));Wr(w.h)<=1&&w.ta&&(w.ta=void 0)}else rs(w,11)}else if((d.L||w.g==d)&&Jo(w),!N(_))for(B=w.Ba.g.parse(_),_=0;_<B.length;_++){let Fe=B[_];const ft=Fe[0];if(!(ft<=w.K))if(w.K=ft,Fe=Fe[1],w.I==2)if(Fe[0]=="c"){w.M=Fe[1],w.ba=Fe[2];const ur=Fe[3];ur!=null&&(w.ka=ur,w.j.info("VER="+w.ka));const ss=Fe[4];ss!=null&&(w.za=ss,w.j.info("SVER="+w.za));const Cr=Fe[5];Cr!=null&&typeof Cr=="number"&&Cr>0&&(I=1.5*Cr,w.O=I,w.j.info("backChannelRequestTimeoutMs_="+I)),I=w;const Dr=d.g;if(Dr){const za=Dr.g?Dr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(za){var Q=I.h;Q.g||za.indexOf("spdy")==-1&&za.indexOf("quic")==-1&&za.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(Fc(Q,Q.h),Q.h=null))}if(I.G){const Zo=Dr.g?Dr.g.getResponseHeader("X-HTTP-Session-Id"):null;Zo&&(I.wa=Zo,Ke(I.J,I.G,Zo))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-d.F,w.j.info("Handshake RTT: "+w.T+"ms")),I=w;var ie=d;if(I.na=Oh(I,I.L?I.ba:null,I.W),ie.L){qc(I.h,ie);var Te=ie,Nt=I.O;Nt&&(Te.H=Nt),Te.D&&($r(Te),Qr(Te)),I.g=ie}else Nh(I);w.i.length>0&&ns(w)}else Fe[0]!="stop"&&Fe[0]!="close"||rs(w,7);else w.I==3&&(Fe[0]=="stop"||Fe[0]=="close"?Fe[0]=="stop"?rs(w,7):Jc(w):Fe[0]!="noop"&&w.l&&w.l.qa(Fe),w.A=0)}}Fr(4)}catch{}}var Lt=class{constructor(d,_){this.g=d,this.map=_}};function zc(d){this.l=d||10,u.PerformanceNavigationTiming?(d=u.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Bc(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Wr(d){return d.h?1:d.g?d.g.size:0}function Xr(d,_){return d.h?d.h==_:d.g?d.g.has(_):!1}function Fc(d,_){d.g?d.g.add(_):d.h=_}function qc(d,_){d.h&&d.h==_?d.h=null:d.g&&d.g.has(_)&&d.g.delete(_)}zc.prototype.cancel=function(){if(this.i=Gc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Gc(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let _=d.i;for(const w of d.g.values())_=_.concat(w.G);return _}return R(d.i)}var Th=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ho(d,_){if(d){d=d.split("&");for(let w=0;w<d.length;w++){const I=d[w].indexOf("=");let B,Q=null;I>=0?(B=d[w].substring(0,I),Q=d[w].substring(I+1)):B=d[w],_(B,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function qn(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let _;d instanceof qn?(this.l=d.l,Jt(this,d.j),this.o=d.o,this.g=d.g,gi(this,d.u),this.h=d.h,Hc(this,Sh(d.i)),this.m=d.m):d&&(_=String(d).match(Th))?(this.l=!1,Jt(this,_[1]||"",!0),this.o=Jr(_[2]||""),this.g=Jr(_[3]||"",!0),gi(this,_[4]),this.h=Jr(_[5]||"",!0),Hc(this,_[6]||"",!0),this.m=Jr(_[7]||"")):(this.l=!1,this.i=new yi(null,this.l))}qn.prototype.toString=function(){const d=[];var _=this.j;_&&d.push(Pa(_,Ko,!0),":");var w=this.g;return(w||_=="file")&&(d.push("//"),(_=this.o)&&d.push(Pa(_,Ko,!0),"@"),d.push(Ss(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&d.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&d.push("/"),d.push(Pa(w,w.charAt(0)=="/"?Kc:Eh,!0))),(w=this.i.toString())&&d.push("?",w),(w=this.m)&&d.push("#",Pa(w,Ih)),d.join("")},qn.prototype.resolve=function(d){const _=Ut(this);let w=!!d.j;w?Jt(_,d.j):w=!!d.o,w?_.o=d.o:w=!!d.g,w?_.g=d.g:w=d.u!=null;var I=d.h;if(w)gi(_,d.u);else if(w=!!d.h){if(I.charAt(0)!="/")if(this.g&&!this.h)I="/"+I;else{var B=_.h.lastIndexOf("/");B!=-1&&(I=_.h.slice(0,B+1)+I)}if(B=I,B==".."||B==".")I="";else if(B.indexOf("./")!=-1||B.indexOf("/.")!=-1){I=B.lastIndexOf("/",0)==0,B=B.split("/");const Q=[];for(let ie=0;ie<B.length;){const Te=B[ie++];Te=="."?I&&ie==B.length&&Q.push(""):Te==".."?((Q.length>1||Q.length==1&&Q[0]!="")&&Q.pop(),I&&ie==B.length&&Q.push("")):(Q.push(Te),I=!0)}I=Q.join("/")}else I=B}return w?_.h=I:w=d.i.toString()!=="",w?Hc(_,Sh(d.i)):w=!!d.m,w&&(_.m=d.m),_};function Ut(d){return new qn(d)}function Jt(d,_,w){d.j=w?Jr(_,!0):_,d.j&&(d.j=d.j.replace(/:$/,""))}function gi(d,_){if(_){if(_=Number(_),isNaN(_)||_<0)throw Error("Bad port number "+_);d.u=_}else d.u=null}function Hc(d,_,w){_ instanceof yi?(d.i=_,$o(d.i,d.l)):(w||(_=Pa(_,pi)),d.i=new yi(_,d.l))}function Ke(d,_,w){d.i.set(_,w)}function Da(d){return Ke(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function Jr(d,_){return d?_?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Pa(d,_,w){return typeof d=="string"?(d=encodeURI(d).replace(_,Cn),w&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Cn(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Ko=/[#\/\?@]/g,Eh=/[#\?:]/g,Kc=/[#\?]/g,pi=/[#\?@]/g,Ih=/#/g;function yi(d,_){this.h=this.g=null,this.i=d||null,this.j=!!_}function Dn(d){d.g||(d.g=new Map,d.h=0,d.i&&Ho(d.i,function(_,w){d.add(decodeURIComponent(_.replace(/\+/g," ")),w)}))}n=yi.prototype,n.add=function(d,_){Dn(this),this.i=null,d=_i(this,d);let w=this.g.get(d);return w||this.g.set(d,w=[]),w.push(_),this.h+=1,this};function Ah(d,_){Dn(d),_=_i(d,_),d.g.has(_)&&(d.i=null,d.h-=d.g.get(_).length,d.g.delete(_))}function Qc(d,_){return Dn(d),_=_i(d,_),d.g.has(_)}n.forEach=function(d,_){Dn(this),this.g.forEach(function(w,I){w.forEach(function(B){d.call(_,B,I,this)},this)},this)};function $c(d,_){Dn(d);let w=[];if(typeof _=="string")Qc(d,_)&&(w=w.concat(d.g.get(_i(d,_))));else for(d=Array.from(d.g.values()),_=0;_<d.length;_++)w=w.concat(d[_]);return w}n.set=function(d,_){return Dn(this),this.i=null,d=_i(this,d),Qc(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[_]),this.h+=1,this},n.get=function(d,_){return d?(d=$c(this,d),d.length>0?String(d[0]):_):_};function Qo(d,_,w){Ah(d,_),w.length>0&&(d.i=null,d.g.set(_i(d,_),R(w)),d.h+=w.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],_=Array.from(this.g.keys());for(let I=0;I<_.length;I++){var w=_[I];const B=Ss(w);w=$c(this,w);for(let Q=0;Q<w.length;Q++){let ie=B;w[Q]!==""&&(ie+="="+Ss(w[Q])),d.push(ie)}}return this.i=d.join("&")};function Sh(d){const _=new yi;return _.i=d.i,d.g&&(_.g=new Map(d.g),_.h=d.h),_}function _i(d,_){return _=String(_),d.j&&(_=_.toLowerCase()),_}function $o(d,_){_&&!d.j&&(Dn(d),d.i=null,d.g.forEach(function(w,I){const B=I.toLowerCase();I!=B&&(Ah(this,I),Qo(this,B,w))},d)),d.j=_}function Rr(d,_){const w=new Ir;if(u.Image){const I=new Image;I.onload=v(lr,w,"TestLoadImage: loaded",!0,_,I),I.onerror=v(lr,w,"TestLoadImage: error",!1,_,I),I.onabort=v(lr,w,"TestLoadImage: abort",!1,_,I),I.ontimeout=v(lr,w,"TestLoadImage: timeout",!1,_,I),u.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=d}else _(!1)}function Yc(d,_){const w=new Ir,I=new AbortController,B=setTimeout(()=>{I.abort(),lr(w,"TestPingServer: timeout",!1,_)},1e4);fetch(d,{signal:I.signal}).then(Q=>{clearTimeout(B),Q.ok?lr(w,"TestPingServer: ok",!0,_):lr(w,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(B),lr(w,"TestPingServer: error",!1,_)})}function lr(d,_,w,I,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),I(w)}catch{}}function vi(){this.g=new mh}function Zr(d){this.i=d.Sb||null,this.h=d.ab||!1}x(Zr,gh),Zr.prototype.g=function(){return new Oa(this.i,this.h)};function Oa(d,_){Vt.call(this),this.H=d,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}x(Oa,Vt),n=Oa.prototype,n.open=function(d,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=_,this.readyState=1,Nr(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const _={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(_.body=d),(this.H||u).fetch(new Request(this.D,_)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,bi(this)),this.readyState=0},n.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Nr(this)),this.g&&(this.readyState=3,Nr(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Yo(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function Yo(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}n.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var _=d.value?d.value:new Uint8Array(0);(_=this.B.decode(_,{stream:!d.done}))&&(this.response=this.responseText+=_)}d.done?bi(this):Nr(this),this.readyState==3&&Yo(this)}},n.Oa=function(d){this.g&&(this.response=this.responseText=d,bi(this))},n.Na=function(d){this.g&&(this.response=d,bi(this))},n.ga=function(){this.g&&bi(this)};function bi(d){d.readyState=4,d.l=null,d.j=null,d.B=null,Nr(d)}n.setRequestHeader=function(d,_){this.A.append(d,_)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],_=this.h.entries();for(var w=_.next();!w.done;)w=w.value,d.push(w[0]+": "+w[1]),w=_.next();return d.join(`\r
`)};function Nr(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Oa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function cr(d){let _="";return Le(d,function(w,I){_+=I,_+=":",_+=w,_+=`\r
`}),_}function Va(d,_,w){e:{for(I in w){var I=!1;break e}I=!0}I||(w=cr(w),typeof d=="string"?w!=null&&Ss(w):Ke(d,_,w))}function Xe(d){Vt.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}x(Xe,Vt);var es=/^https?$/i,Wc=["POST","PUT"];n=Xe.prototype,n.Fa=function(d){this.H=d},n.ea=function(d,_,w,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);_=_?_.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Uc.g(),this.g.onreadystatechange=T(y(this.Ca,this));try{this.B=!0,this.g.open(_,String(d),!0),this.B=!1}catch(Q){Ma(this,Q);return}if(d=w||"",w=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var B in I)w.set(B,I[B]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const Q of I.keys())w.set(Q,I.get(Q));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(w.keys()).find(Q=>Q.toLowerCase()=="content-type"),B=u.FormData&&d instanceof u.FormData,!(Array.prototype.indexOf.call(Wc,_,void 0)>=0)||I||B||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,ie]of w)this.g.setRequestHeader(Q,ie);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(Q){Ma(this,Q)}};function Ma(d,_){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=_,d.o=5,Xc(d),Rs(d)}function Xc(d){d.A||(d.A=!0,Qt(d,"complete"),Qt(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,Qt(this,"complete"),Qt(this,"abort"),Rs(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Rs(this,!0)),Xe.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?ja(this):this.Xa())},n.Xa=function(){ja(this)};function ja(d){if(d.h&&typeof l<"u"){if(d.v&&kr(d)==4)setTimeout(d.Ca.bind(d),0);else if(Qt(d,"readystatechange"),kr(d)==4){d.h=!1;try{const Q=d.ca();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var w;if(!(w=_)){var I;if(I=Q===0){let ie=String(d.D).match(Th)[1]||null;!ie&&u.self&&u.self.location&&(ie=u.self.location.protocol.slice(0,-1)),I=!es.test(ie?ie.toLowerCase():"")}w=I}if(w)Qt(d,"complete"),Qt(d,"success");else{d.o=6;try{var B=kr(d)>2?d.g.statusText:""}catch{B=""}d.l=B+" ["+d.ca()+"]",Xc(d)}}finally{Rs(d)}}}}function Rs(d,_){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const w=d.g;d.g=null,_||Qt(d,"ready");try{w.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function kr(d){return d.g?d.g.readyState:0}n.ca=function(){try{return kr(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(d){if(this.g){var _=this.g.responseText;return d&&_.indexOf(d)==0&&(_=_.substring(d.length)),Vg(_)}};function an(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Ns(d){const _={};d=(d.g&&kr(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<d.length;I++){if(N(d[I]))continue;var w=bh(d[I]);const B=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const Q=_[B]||[];_[B]=Q,Q.push(w)}Ge(_,function(I){return I.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ts(d,_,w){return w&&w.internalChannelParams&&w.internalChannelParams[d]||_}function xi(d){this.za=0,this.i=[],this.j=new Ir,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ts("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ts("baseRetryDelayMs",5e3,d),this.Za=ts("retryDelaySeedMs",1e4,d),this.Ta=ts("forwardChannelMaxRetries",2,d),this.va=ts("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new zc(d&&d.concurrentRequestLimit),this.Ba=new vi,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=xi.prototype,n.ka=8,n.I=1,n.connect=function(d,_,w,I){Mt(0),this.W=d,this.H=_||{},w&&I!==void 0&&(this.H.OSID=w,this.H.OAID=I),this.F=this.X,this.J=Oh(this,null,this.W),ns(this)};function Jc(d){if(Wo(d),d.I==3){var _=d.V++,w=Ut(d.J);if(Ke(w,"SID",d.M),Ke(w,"RID",_),Ke(w,"TYPE","terminate"),La(d,w),_=new Ar(d,d.j,_),_.M=2,_.A=Da(Ut(w)),w=!1,u.navigator&&u.navigator.sendBeacon)try{w=u.navigator.sendBeacon(_.A.toString(),"")}catch{}!w&&u.Image&&(new Image().src=_.A,w=!0),w||(_.g=Vh(_.j,null),_.g.ea(_.A)),_.F=Date.now(),Qr(_)}Ph(d)}function wi(d){d.g&&(eu(d),d.g.cancel(),d.g=null)}function Wo(d){wi(d),d.v&&(u.clearTimeout(d.v),d.v=null),Jo(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&u.clearTimeout(d.m),d.m=null)}function ns(d){if(!Bc(d.h)&&!d.m){d.m=!0;var _=d.Ea;ye||A(),he||(ye(),he=!0),C.add(_,d),d.D=0}}function Xo(d,_){return Wr(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=_.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=Gr(y(d.Ea,d,_),Dh(d,d.D)),d.D++,!0)}n.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const B=new Ar(this,this.j,d);let Q=this.o;if(this.U&&(Q?(Q=ue(Q),Se(Q,this.U)):Q=this.U),this.u!==null||this.R||(B.J=Q,Q=null),this.S)e:{for(var _=0,w=0;w<this.i.length;w++){t:{var I=this.i[w];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(_+=I,_>4096){_=w;break e}if(_===4096||w===this.i.length-1){_=w+1;break e}}_=1e3}else _=1e3;_=Rh(this,B,_),w=Ut(this.J),Ke(w,"RID",d),Ke(w,"CVER",22),this.G&&Ke(w,"X-HTTP-Session-Id",this.G),La(this,w),Q&&(this.R?_="headers="+Ss(cr(Q))+"&"+_:this.u&&Va(w,this.u,Q)),Fc(this.h,B),this.Ra&&Ke(w,"TYPE","init"),this.S?(Ke(w,"$req",_),Ke(w,"SID","null"),B.U=!0,Kr(B,w,null)):Kr(B,w,_),this.I=2}}else this.I==3&&(d?Zc(this,d):this.i.length==0||Bc(this.h)||Zc(this))};function Zc(d,_){var w;_?w=_.l:w=d.V++;const I=Ut(d.J);Ke(I,"SID",d.M),Ke(I,"RID",w),Ke(I,"AID",d.K),La(d,I),d.u&&d.o&&Va(I,d.u,d.o),w=new Ar(d,d.j,w,d.D+1),d.u===null&&(w.J=d.o),_&&(d.i=_.G.concat(d.i)),_=Rh(d,w,1e3),w.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),Fc(d.h,w),Kr(w,I,_)}function La(d,_){d.H&&Le(d.H,function(w,I){Ke(_,I,w)}),d.l&&Le({},function(w,I){Ke(_,I,w)})}function Rh(d,_,w){w=Math.min(d.i.length,w);const I=d.l?y(d.l.Ka,d.l,d):null;e:{var B=d.i;let Te=-1;for(;;){const Nt=["count="+w];Te==-1?w>0?(Te=B[0].g,Nt.push("ofs="+Te)):Te=0:Nt.push("ofs="+Te);let Fe=!0;for(let ft=0;ft<w;ft++){var Q=B[ft].g;const ur=B[ft].map;if(Q-=Te,Q<0)Te=Math.max(0,B[ft].g-100),Fe=!1;else try{Q="req"+Q+"_"||"";try{var ie=ur instanceof Map?ur:Object.entries(ur);for(const[ss,Cr]of ie){let Dr=Cr;h(Cr)&&(Dr=mi(Cr)),Nt.push(Q+ss+"="+encodeURIComponent(Dr))}}catch(ss){throw Nt.push(Q+"type="+encodeURIComponent("_badmap")),ss}}catch{I&&I(ur)}}if(Fe){ie=Nt.join("&");break e}}ie=void 0}return d=d.i.splice(0,w),_.G=d,ie}function Nh(d){if(!d.g&&!d.v){d.Y=1;var _=d.Da;ye||A(),he||(ye(),he=!0),C.add(_,d),d.A=0}}function Ua(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=Gr(y(d.Da,d),Dh(d,d.A)),d.A++,!0)}n.Da=function(){if(this.v=null,kh(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=Gr(y(this.Wa,this),d)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Mt(10),wi(this),kh(this))};function eu(d){d.B!=null&&(u.clearTimeout(d.B),d.B=null)}function kh(d){d.g=new Ar(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var _=Ut(d.na);Ke(_,"RID","rpc"),Ke(_,"SID",d.M),Ke(_,"AID",d.K),Ke(_,"CI",d.F?"0":"1"),!d.F&&d.ia&&Ke(_,"TO",d.ia),Ke(_,"TYPE","xmlhttp"),La(d,_),d.u&&d.o&&Va(_,d.u,d.o),d.O&&(d.g.H=d.O);var w=d.g;d=d.ba,w.M=1,w.A=Da(Ut(_)),w.u=null,w.R=!0,qo(w,d)}n.Va=function(){this.C!=null&&(this.C=null,wi(this),Ua(this),Mt(19))};function Jo(d){d.C!=null&&(u.clearTimeout(d.C),d.C=null)}function Ch(d,_){var w=null;if(d.g==_){Jo(d),eu(d),d.g=null;var I=2}else if(Xr(d.h,_))w=_.G,qc(d.h,_),I=1;else return;if(d.I!=0){if(_.o)if(I==1){w=_.u?_.u.length:0,_=Date.now()-_.F;var B=d.D;I=Fo(),Qt(I,new qr(I,w)),ns(d)}else Nh(d);else if(B=_.m,B==3||B==0&&_.X>0||!(I==1&&Xo(d,_)||I==2&&Ua(d)))switch(w&&w.length>0&&(_=d.h,_.i=_.i.concat(w)),B){case 1:rs(d,5);break;case 4:rs(d,10);break;case 3:rs(d,6);break;default:rs(d,2)}}}function Dh(d,_){let w=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(w*=2),w*_}function rs(d,_){if(d.j.info("Error code "+_),_==2){var w=y(d.bb,d),I=d.Ua;const B=!I;I=new qn(I||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Jt(I,"https"),Da(I),B?Rr(I.toString(),w):Yc(I.toString(),w)}else Mt(2);d.I=0,d.l&&d.l.pa(_),Ph(d),Wo(d)}n.bb=function(d){d?(this.j.info("Successfully pinged google.com"),Mt(2)):(this.j.info("Failed to ping google.com"),Mt(1))};function Ph(d){if(d.I=0,d.ja=[],d.l){const _=Gc(d.h);(_.length!=0||d.i.length!=0)&&(V(d.ja,_),V(d.ja,d.i),d.h.i.length=0,R(d.i),d.i.length=0),d.l.oa()}}function Oh(d,_,w){var I=w instanceof qn?Ut(w):new qn(w);if(I.g!="")_&&(I.g=_+"."+I.g),gi(I,I.u);else{var B=u.location;I=B.protocol,_=_?_+"."+B.hostname:B.hostname,B=+B.port;const Q=new qn(null);I&&Jt(Q,I),_&&(Q.g=_),B&&gi(Q,B),w&&(Q.h=w),I=Q}return w=d.G,_=d.wa,w&&_&&Ke(I,w,_),Ke(I,"VER",d.ka),La(d,I),I}function Vh(d,_,w){if(_&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return _=d.Aa&&!d.ma?new Xe(new Zr({ab:w})):new Xe(d.ma),_.Fa(d.L),_}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Mh(){}n=Mh.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Ti(){}Ti.prototype.g=function(d,_){return new Tn(d,_)};function Tn(d,_){Vt.call(this),this.g=new xi(_),this.l=d,this.h=_&&_.messageUrlParams||null,d=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(d?d["X-WebChannel-Content-Type"]=_.messageContentType:d={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.sa&&(d?d["X-WebChannel-Client-Profile"]=_.sa:d={"X-WebChannel-Client-Profile":_.sa}),this.g.U=d,(d=_&&_.Qb)&&!N(d)&&(this.g.u=d),this.A=_&&_.supportsCrossDomainXhr||!1,this.v=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!N(_)&&(this.g.G=_,d=this.h,d!==null&&_ in d&&(d=this.h,_ in d&&delete d[_])),this.j=new ks(this)}x(Tn,Vt),Tn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Tn.prototype.close=function(){Jc(this.g)},Tn.prototype.o=function(d){var _=this.g;if(typeof d=="string"){var w={};w.__data__=d,d=w}else this.v&&(w={},w.__data__=mi(d),d=w);_.i.push(new Lt(_.Ya++,d)),_.I==3&&ns(_)},Tn.prototype.N=function(){this.g.l=null,delete this.j,Jc(this.g),delete this.g,Tn.Z.N.call(this)};function jh(d){sn.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var _=d.__sm__;if(_){e:{for(const w in _){d=w;break e}d=void 0}(this.i=d)&&(d=this.i,_=_!==null&&d in _?_[d]:void 0),this.data=_}else this.data=d}x(jh,sn);function Lh(){ar.call(this),this.status=1}x(Lh,ar);function ks(d){this.g=d}x(ks,Mh),ks.prototype.ra=function(){Qt(this.g,"a")},ks.prototype.qa=function(d){Qt(this.g,new jh(d))},ks.prototype.pa=function(d){Qt(this.g,new Lh)},ks.prototype.oa=function(){Qt(this.g,"b")},Ti.prototype.createWebChannel=Ti.prototype.g,Tn.prototype.send=Tn.prototype.o,Tn.prototype.open=Tn.prototype.m,Tn.prototype.close=Tn.prototype.close,TS=function(){return new Ti},wS=function(){return Fo()},xS=Rt,y_={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ka.NO_ERROR=0,ka.TIMEOUT=8,ka.HTTP_ERROR=6,sm=ka,Lc.COMPLETE="complete",bS=Lc,ph.EventType=Er,Er.OPEN="a",Er.CLOSE="b",Er.ERROR="c",Er.MESSAGE="d",Vt.prototype.listen=Vt.prototype.J,Zu=ph,Xe.prototype.listenOnce=Xe.prototype.K,Xe.prototype.getLastError=Xe.prototype.Ha,Xe.prototype.getLastErrorCode=Xe.prototype.ya,Xe.prototype.getStatus=Xe.prototype.ca,Xe.prototype.getResponseJson=Xe.prototype.La,Xe.prototype.getResponseText=Xe.prototype.la,Xe.prototype.send=Xe.prototype.ea,Xe.prototype.setWithCredentials=Xe.prototype.Fa,vS=Xe}).apply(typeof Gf<"u"?Gf:typeof self<"u"?self:typeof window<"u"?window:{});const tE="@firebase/firestore",nE="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}tn.UNAUTHENTICATED=new tn(null),tn.GOOGLE_CREDENTIALS=new tn("google-credentials-uid"),tn.FIRST_PARTY=new tn("first-party-uid"),tn.MOCK_USER=new tn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tc="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ua=new Km("@firebase/firestore");function jl(){return ua.logLevel}function v4(n){ua.setLogLevel(n)}function ne(n,...e){if(ua.logLevel<=Ce.DEBUG){const t=e.map(Nv);ua.debug(`Firestore (${Tc}): ${n}`,...t)}}function Dt(n,...e){if(ua.logLevel<=Ce.ERROR){const t=e.map(Nv);ua.error(`Firestore (${Tc}): ${n}`,...t)}}function Es(n,...e){if(ua.logLevel<=Ce.WARN){const t=e.map(Nv);ua.warn(`Firestore (${Tc}): ${n}`,...t)}}function Nv(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function de(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,ES(n,r,t)}function ES(n,e,t){let r=`FIRESTORE (${Tc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Dt(r),new Error(r)}function me(n,e,t,r){let a="Unexpected state";typeof t=="string"?a=t:r=t,n||ES(e,a,r)}function b4(n,e){n||de(57014,e)}function ce(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class te extends vn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class x4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(tn.UNAUTHENTICATED)))}shutdown(){}}class w4{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class T4{constructor(e){this.t=e,this.currentUser=tn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){me(this.o===void 0,42304);let r=this.i;const a=m=>this.i!==r?(r=this.i,t(m)):Promise.resolve();let l=new fn;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new fn,e.enqueueRetryable((()=>a(this.currentUser)))};const u=()=>{const m=l;e.enqueueRetryable((async()=>{await m.promise,await a(this.currentUser)}))},h=m=>{ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((m=>h(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?h(m):(ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new fn)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(me(typeof r.accessToken=="string",31837,{l:r}),new IS(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return me(e===null||typeof e=="string",2055,{h:e}),new tn(e)}}class E4{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=tn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class I4{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new E4(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(tn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class rE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class A4{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,dt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){me(this.o===void 0,3512);const r=l=>{l.error!=null&&ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.m;return this.m=l.token,ne("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>r(l)))};const a=l=>{ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new rE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(me(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new rE(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S4(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const a=S4(40);for(let l=0;l<a.length;++l)r.length<20&&a[l]<t&&(r+=e.charAt(a[l]%62))}return r}}function we(n,e){return n<e?-1:n>e?1:0}function __(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const a=n.charAt(r),l=e.charAt(r);if(a!==l)return Qy(a)===Qy(l)?we(a,l):Qy(a)?1:-1}return we(n.length,e.length)}const R4=55296,N4=57343;function Qy(n){const e=n.charCodeAt(0);return e>=R4&&e<=N4}function ec(n,e,t){return n.length===e.length&&n.every(((r,a)=>t(r,e[a])))}function AS(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE="__name__";class cs{constructor(e,t,r){t===void 0?t=0:t>e.length&&de(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&de(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return cs.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof cs?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let a=0;a<r;a++){const l=cs.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return we(e.length,t.length)}static compareSegments(e,t){const r=cs.isNumericId(e),a=cs.isNumericId(t);return r&&!a?-1:!r&&a?1:r&&a?cs.extractNumericId(e).compare(cs.extractNumericId(t)):__(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ra.fromString(e.substring(4,e.length-2))}}class De extends cs{construct(e,t,r){return new De(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new te(H.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((a=>a.length>0)))}return new De(t)}static emptyPath(){return new De([])}}const k4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class yt extends cs{construct(e,t,r){return new yt(e,t,r)}static isValidIdentifier(e){return k4.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),yt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===sE}static keyField(){return new yt([sE])}static fromServerFormat(e){const t=[];let r="",a=0;const l=()=>{if(r.length===0)throw new te(H.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;a<e.length;){const h=e[a];if(h==="\\"){if(a+1===e.length)throw new te(H.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[a+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new te(H.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,a+=2}else h==="`"?(u=!u,a++):h!=="."||u?(r+=h,a++):(l(),a++)}if(l(),u)throw new te(H.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new yt(t)}static emptyPath(){return new yt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.path=e}static fromPath(e){return new ae(De.fromString(e))}static fromName(e){return new ae(De.fromString(e).popFirst(5))}static empty(){return new ae(De.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&De.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return De.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ae(new De(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cv(n,e,t){if(!t)throw new te(H.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function SS(n,e,t,r){if(e===!0&&r===!0)throw new te(H.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function iE(n){if(!ae.isDocumentKey(n))throw new te(H.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function aE(n){if(ae.isDocumentKey(n))throw new te(H.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function RS(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function sg(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":de(12329,{type:typeof n})}function Be(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new te(H.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=sg(n);throw new te(H.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function NS(n,e){if(e<=0)throw new te(H.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Jd(n,e){if(!RS(n))throw new te(H.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const a=e[r].typeString,l="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const u=n[r];if(a&&typeof u!==a){t=`JSON field '${r}' must be a ${a}.`;break}if(l!==void 0&&u!==l.value){t=`Expected '${r}' field to equal '${l.value}'`;break}}if(t)throw new te(H.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oE=-62135596800,lE=1e6;class He{static now(){return He.fromMillis(Date.now())}static fromDate(e){return He.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*lE);return new He(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new te(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new te(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<oE)throw new te(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new te(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/lE}_compareTo(e){return this.seconds===e.seconds?we(this.nanoseconds,e.nanoseconds):we(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:He._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Jd(e,He._jsonSchema))return new He(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-oE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}He._jsonSchemaVersion="firestore/timestamp/1.0",He._jsonSchema={type:Kt("string",He._jsonSchemaVersion),seconds:Kt("number"),nanoseconds:Kt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{static fromTimestamp(e){return new _e(e)}static min(){return new _e(new He(0,0))}static max(){return new _e(new He(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tc=-1;class Am{constructor(e,t,r,a){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=a}}function v_(n){return n.fields.find((e=>e.kind===2))}function so(n){return n.fields.filter((e=>e.kind!==2))}Am.UNKNOWN_ID=-1;class im{constructor(e,t){this.fieldPath=e,this.kind=t}}class Rd{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Rd(0,rr.min())}}function kS(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,a=_e.fromTimestamp(r===1e9?new He(t+1,0):new He(t,r));return new rr(a,ae.empty(),e)}function CS(n){return new rr(n.readTime,n.key,tc)}class rr{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new rr(_e.min(),ae.empty(),tc)}static max(){return new rr(_e.max(),ae.empty(),tc)}}function Dv(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ae.comparator(n.documentKey,e.documentKey),t!==0?t:we(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class PS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ba(n){if(n.code!==H.FAILED_PRECONDITION||n.message!==DS)throw n;ne("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&de(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new z(((r,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof z?t:z.resolve(t)}catch(t){return z.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):z.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):z.reject(t)}static resolve(e){return new z(((t,r)=>{t(e)}))}static reject(e){return new z(((t,r)=>{r(e)}))}static waitFor(e){return new z(((t,r)=>{let a=0,l=0,u=!1;e.forEach((h=>{++a,h.next((()=>{++l,u&&l===a&&t()}),(m=>r(m)))})),u=!0,l===a&&t()}))}static or(e){let t=z.resolve(!1);for(const r of e)t=t.next((a=>a?z.resolve(a):r()));return t}static forEach(e,t){const r=[];return e.forEach(((a,l)=>{r.push(t.call(this,a,l))})),this.waitFor(r)}static mapArray(e,t){return new z(((r,a)=>{const l=e.length,u=new Array(l);let h=0;for(let m=0;m<l;m++){const y=m;t(e[y]).next((v=>{u[y]=v,++h,h===l&&r(u)}),(v=>a(v)))}}))}static doWhile(e,t){return new z(((r,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):r()};l()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jn="SimpleDb";class ig{static open(e,t,r,a){try{return new ig(t,e.transaction(a,r))}catch(l){throw new ud(t,l)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new fn,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new ud(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const a=Pv(r.target.error);this.S.reject(new ud(e,a))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(ne(Jn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new D4(t)}}class vs{static delete(e){return ne(Jn,"Removing database:",e),ao(J_().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!xd())return!1;if(vs.F())return!0;const e=vt(),t=vs.M(e),r=0<t&&t<10,a=OS(e),l=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||l)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.N=r,this.B=null,vs.M(vt())===12.2&&Dt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(ne(Jn,"Opening database:",this.name),this.db=await new Promise(((t,r)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=l=>{const u=l.target.result;t(u)},a.onblocked=()=>{r(new ud(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const u=l.target.error;u.name==="VersionError"?r(new te(H.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):u.name==="InvalidStateError"?r(new te(H.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+u)):r(new ud(e,u))},a.onupgradeneeded=l=>{ne(Jn,'Database "'+this.name+'" requires upgrade from version:',l.oldVersion);const u=l.target.result;this.N.k(u,a.transaction,l.oldVersion,this.version).next((()=>{ne(Jn,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,a){const l=t==="readonly";let u=0;for(;;){++u;try{this.db=await this.L(e);const h=ig.open(this.db,e,l?"readonly":"readwrite",r),m=a(h).next((y=>(h.C(),y))).catch((y=>(h.abort(y),z.reject(y)))).toPromise();return m.catch((()=>{})),await h.D,m}catch(h){const m=h,y=m.name!=="FirebaseError"&&u<3;if(ne(Jn,"Transaction failed with error:",m.message,"Retrying:",y),this.close(),!y)return Promise.reject(m)}}}close(){this.db&&this.db.close(),this.db=void 0}}function OS(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class C4{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return ao(this.U.delete())}}class ud extends te{constructor(e,t){super(H.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function xa(n){return n.name==="IndexedDbTransactionError"}class D4{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(ne(Jn,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(ne(Jn,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ao(r)}add(e){return ne(Jn,"ADD",this.store.name,e,e),ao(this.store.add(e))}get(e){return ao(this.store.get(e)).next((t=>(t===void 0&&(t=null),ne(Jn,"GET",this.store.name,e,t),t)))}delete(e){return ne(Jn,"DELETE",this.store.name,e),ao(this.store.delete(e))}count(){return ne(Jn,"COUNT",this.store.name),ao(this.store.count())}J(e,t){const r=this.options(e,t),a=r.index?this.store.index(r.index):this.store;if(typeof a.getAll=="function"){const l=a.getAll(r.range);return new z(((u,h)=>{l.onerror=m=>{h(m.target.error)},l.onsuccess=m=>{u(m.target.result)}}))}{const l=this.cursor(r),u=[];return this.H(l,((h,m)=>{u.push(m)})).next((()=>u))}}Y(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new z(((a,l)=>{r.onerror=u=>{l(u.target.error)},r.onsuccess=u=>{a(u.target.result)}}))}Z(e,t){ne(Jn,"DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const a=this.cursor(r);return this.H(a,((l,u,h)=>h.delete()))}ee(e,t){let r;t?r=e:(r={},t=e);const a=this.cursor(r);return this.H(a,t)}te(e){const t=this.cursor({});return new z(((r,a)=>{t.onerror=l=>{const u=Pv(l.target.error);a(u)},t.onsuccess=l=>{const u=l.target.result;u?e(u.primaryKey,u.value).next((h=>{h?u.continue():r()})):r()}}))}H(e,t){const r=[];return new z(((a,l)=>{e.onerror=u=>{l(u.target.error)},e.onsuccess=u=>{const h=u.target.result;if(!h)return void a();const m=new C4(h),y=t(h.primaryKey,h.value,m);if(y instanceof z){const v=y.catch((x=>(m.done(),z.reject(x))));r.push(v)}m.isDone?a():m.G===null?h.continue():h.continue(m.G)}})).next((()=>z.waitFor(r)))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ao(n){return new z(((e,t)=>{n.onsuccess=r=>{const a=r.target.result;e(a)},n.onerror=r=>{const a=Pv(r.target.error);t(a)}}))}let cE=!1;function Pv(n){const e=vs.M(vt());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new te("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return cE||(cE=!0,setTimeout((()=>{throw r}),0)),r}}return n}const dd="IndexBackfiller";class P4{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){ne(dd,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();ne(dd,`Documents written: ${t}`)}catch(t){xa(t)?ne(dd,"Ignoring IndexedDB error during index backfill: ",t):await ba(t)}await this.re(6e4)}))}}class O4{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const r=new Set;let a=t,l=!0;return z.doWhile((()=>l===!0&&a>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((u=>{if(u!==null&&!r.has(u))return ne(dd,`Processing collection: ${u}`),this.oe(e,u,a).next((h=>{a-=h,r.add(u)}));l=!1})))).next((()=>t-a))}oe(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((a=>this.localStore.localDocuments.getNextDocuments(e,t,a,r).next((l=>{const u=l.changes;return this.localStore.indexManager.updateIndexEntries(e,u).next((()=>this._e(a,l))).next((h=>(ne(dd,`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h)))).next((()=>u.size))}))))}_e(e,t){let r=e;return t.changes.forEach(((a,l)=>{const u=CS(l);Dv(u,r)>0&&(r=u)})),new rr(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Un.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sa=-1;function Zd(n){return n==null}function Nd(n){return n===0&&1/n==-1/0}function VS(n){return typeof n=="number"&&Number.isInteger(n)&&!Nd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sm="";function bn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=uE(e)),e=V4(n.get(t),e);return uE(e)}function V4(n,e){let t=e;const r=n.length;for(let a=0;a<r;a++){const l=n.charAt(a);switch(l){case"\0":t+="";break;case Sm:t+="";break;default:t+=l}}return t}function uE(n){return n+Sm+""}function ys(n){const e=n.length;if(me(e>=2,64408,{path:n}),e===2)return me(n.charAt(0)===Sm&&n.charAt(1)==="",56145,{path:n}),De.emptyPath();const t=e-2,r=[];let a="";for(let l=0;l<e;){const u=n.indexOf(Sm,l);switch((u<0||u>t)&&de(50515,{path:n}),n.charAt(u+1)){case"":const h=n.substring(l,u);let m;a.length===0?m=h:(a+=h,m=a,a=""),r.push(m);break;case"":a+=n.substring(l,u),a+="\0";break;case"":a+=n.substring(l,u+1);break;default:de(61167,{path:n})}l=u+2}return new De(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const io="remoteDocuments",eh="owner",kl="owner",kd="mutationQueues",M4="userId",Mr="mutations",dE="batchId",fo="userMutationsIndex",hE=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function am(n,e){return[n,bn(e)]}function MS(n,e,t){return[n,bn(e),t]}const j4={},nc="documentMutations",Rm="remoteDocumentsV14",L4=["prefixPath","collectionGroup","readTime","documentId"],om="documentKeyIndex",U4=["prefixPath","collectionGroup","documentId"],jS="collectionGroupIndex",z4=["collectionGroup","readTime","prefixPath","documentId"],Cd="remoteDocumentGlobal",b_="remoteDocumentGlobalKey",rc="targets",LS="queryTargetsIndex",B4=["canonicalId","targetId"],sc="targetDocuments",F4=["targetId","path"],Ov="documentTargetsIndex",q4=["path","targetId"],Nm="targetGlobalKey",_o="targetGlobal",Dd="collectionParents",G4=["collectionId","parent"],ic="clientMetadata",H4="clientId",ag="bundles",K4="bundleId",og="namedQueries",Q4="name",Vv="indexConfiguration",$4="indexId",x_="collectionGroupIndex",Y4="collectionGroup",hd="indexState",W4=["indexId","uid"],US="sequenceNumberIndex",X4=["uid","sequenceNumber"],fd="indexEntries",J4=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],zS="documentKeyIndex",Z4=["indexId","uid","orderedDocumentKey"],lg="documentOverlays",eM=["userId","collectionPath","documentId"],w_="collectionPathOverlayIndex",tM=["userId","collectionPath","largestBatchId"],BS="collectionGroupOverlayIndex",nM=["userId","collectionGroup","largestBatchId"],Mv="globals",rM="name",FS=[kd,Mr,nc,io,rc,eh,_o,sc,ic,Cd,Dd,ag,og],sM=[...FS,lg],qS=[kd,Mr,nc,Rm,rc,eh,_o,sc,ic,Cd,Dd,ag,og,lg],GS=qS,jv=[...GS,Vv,hd,fd],iM=jv,HS=[...jv,Mv],aM=HS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_ extends PS{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function Wt(n,e){const t=ce(n);return vs.O(t.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function wa(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function KS(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e,t){this.comparator=e,this.root=t||dn.EMPTY}insert(e,t){return new at(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,dn.BLACK,null,null))}remove(e){return new at(this.comparator,this.root.remove(e,this.comparator).copy(null,null,dn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(a===0)return t+r.left.size;a<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Hf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Hf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Hf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Hf(this.root,e,this.comparator,!0)}}class Hf{constructor(e,t,r,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class dn{constructor(e,t,r,a,l){this.key=e,this.value=t,this.color=r??dn.RED,this.left=a??dn.EMPTY,this.right=l??dn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,a,l){return new dn(e??this.key,t??this.value,r??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let a=this;const l=r(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,r),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return dn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return dn.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,dn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,dn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw de(43730,{key:this.key,value:this.value});if(this.right.isRed())throw de(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw de(27949);return e+(this.isRed()?0:1)}}dn.EMPTY=null,dn.RED=!0,dn.BLACK=!1;dn.EMPTY=new class{constructor(){this.size=0}get key(){throw de(57766)}get value(){throw de(16141)}get color(){throw de(16727)}get left(){throw de(29726)}get right(){throw de(36894)}copy(e,t,r,a,l){return this}insert(e,t,r){return new dn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(e){this.comparator=e,this.data=new at(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new mE(this.data.getIterator())}getIteratorFrom(e){return new mE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof We)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new We(this.comparator);return t.data=e,t}}class mE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Cl(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this.fields=e,e.sort(yt.comparator)}static empty(){return new zn([])}unionWith(e){let t=new We(yt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new zn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ec(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oM(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new QS("Invalid base64 string: "+l):l}})(e);return new It(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let u=0;u<a.length;++u)l+=String.fromCharCode(a[u]);return l})(e);return new It(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return we(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}It.EMPTY_BYTE_STRING=new It("");const lM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ti(n){if(me(!!n,39018),typeof n=="string"){let e=0;const t=lM.exec(n);if(me(!!t,46558,{timestamp:n}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:gt(n.seconds),nanos:gt(n.nanos)}}function gt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ni(n){return typeof n=="string"?It.fromBase64String(n):It.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $S="server_timestamp",YS="__type__",WS="__previous_value__",XS="__local_write_time__";function cg(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[YS])==null?void 0:r.stringValue)===$S}function ug(n){const e=n.mapValue.fields[WS];return cg(e)?ug(e):e}function Pd(n){const e=ti(n.mapValue.fields[XS].timestampValue);return new He(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cM{constructor(e,t,r,a,l,u,h,m,y,v){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=a,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.longPollingOptions=m,this.useFetchStreams=y,this.isUsingEmulator=v}}const E_="(default)";class da{constructor(e,t){this.projectId=e,this.database=t||E_}static empty(){return new da("","")}get isDefaultDatabase(){return this.database===E_}isEqual(e){return e instanceof da&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lv="__type__",JS="__max__",Zi={mapValue:{fields:{__type__:{stringValue:JS}}}},Uv="__vector__",ac="value",lm={nullValue:"NULL_VALUE"};function ha(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?cg(n)?4:ZS(n)?9007199254740991:dg(n)?10:11:de(28295,{value:n})}function Is(n,e){if(n===e)return!0;const t=ha(n);if(t!==ha(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Pd(n).isEqual(Pd(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const u=ti(a.timestampValue),h=ti(l.timestampValue);return u.seconds===h.seconds&&u.nanos===h.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(a,l){return ni(a.bytesValue).isEqual(ni(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(a,l){return gt(a.geoPointValue.latitude)===gt(l.geoPointValue.latitude)&&gt(a.geoPointValue.longitude)===gt(l.geoPointValue.longitude)})(n,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return gt(a.integerValue)===gt(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const u=gt(a.doubleValue),h=gt(l.doubleValue);return u===h?Nd(u)===Nd(h):isNaN(u)&&isNaN(h)}return!1})(n,e);case 9:return ec(n.arrayValue.values||[],e.arrayValue.values||[],Is);case 10:case 11:return(function(a,l){const u=a.mapValue.fields||{},h=l.mapValue.fields||{};if(fE(u)!==fE(h))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(h[m]===void 0||!Is(u[m],h[m])))return!1;return!0})(n,e);default:return de(52216,{left:n})}}function Od(n,e){return(n.values||[]).find((t=>Is(t,e)))!==void 0}function fa(n,e){if(n===e)return 0;const t=ha(n),r=ha(e);if(t!==r)return we(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return we(n.booleanValue,e.booleanValue);case 2:return(function(l,u){const h=gt(l.integerValue||l.doubleValue),m=gt(u.integerValue||u.doubleValue);return h<m?-1:h>m?1:h===m?0:isNaN(h)?isNaN(m)?0:-1:1})(n,e);case 3:return gE(n.timestampValue,e.timestampValue);case 4:return gE(Pd(n),Pd(e));case 5:return __(n.stringValue,e.stringValue);case 6:return(function(l,u){const h=ni(l),m=ni(u);return h.compareTo(m)})(n.bytesValue,e.bytesValue);case 7:return(function(l,u){const h=l.split("/"),m=u.split("/");for(let y=0;y<h.length&&y<m.length;y++){const v=we(h[y],m[y]);if(v!==0)return v}return we(h.length,m.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,u){const h=we(gt(l.latitude),gt(u.latitude));return h!==0?h:we(gt(l.longitude),gt(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return pE(n.arrayValue,e.arrayValue);case 10:return(function(l,u){var T,R,V,U;const h=l.fields||{},m=u.fields||{},y=(T=h[ac])==null?void 0:T.arrayValue,v=(R=m[ac])==null?void 0:R.arrayValue,x=we(((V=y==null?void 0:y.values)==null?void 0:V.length)||0,((U=v==null?void 0:v.values)==null?void 0:U.length)||0);return x!==0?x:pE(y,v)})(n.mapValue,e.mapValue);case 11:return(function(l,u){if(l===Zi.mapValue&&u===Zi.mapValue)return 0;if(l===Zi.mapValue)return 1;if(u===Zi.mapValue)return-1;const h=l.fields||{},m=Object.keys(h),y=u.fields||{},v=Object.keys(y);m.sort(),v.sort();for(let x=0;x<m.length&&x<v.length;++x){const T=__(m[x],v[x]);if(T!==0)return T;const R=fa(h[m[x]],y[v[x]]);if(R!==0)return R}return we(m.length,v.length)})(n.mapValue,e.mapValue);default:throw de(23264,{he:t})}}function gE(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return we(n,e);const t=ti(n),r=ti(e),a=we(t.seconds,r.seconds);return a!==0?a:we(t.nanos,r.nanos)}function pE(n,e){const t=n.values||[],r=e.values||[];for(let a=0;a<t.length&&a<r.length;++a){const l=fa(t[a],r[a]);if(l)return l}return we(t.length,r.length)}function oc(n){return I_(n)}function I_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=ti(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return ni(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return ae.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",a=!0;for(const l of t.values||[])a?a=!1:r+=",",r+=I_(l);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const u of r)l?l=!1:a+=",",a+=`${u}:${I_(t.fields[u])}`;return a+"}"})(n.mapValue):de(61005,{value:n})}function cm(n){switch(ha(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ug(n);return e?16+cm(e):16;case 5:return 2*n.stringValue.length;case 6:return ni(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((a,l)=>a+cm(l)),0)})(n.arrayValue);case 10:case 11:return(function(r){let a=0;return wa(r.fields,((l,u)=>{a+=l.length+cm(u)})),a})(n.mapValue);default:throw de(13486,{value:n})}}function To(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function A_(n){return!!n&&"integerValue"in n}function Vd(n){return!!n&&"arrayValue"in n}function yE(n){return!!n&&"nullValue"in n}function _E(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function um(n){return!!n&&"mapValue"in n}function dg(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[Lv])==null?void 0:r.stringValue)===Uv}function md(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return wa(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=md(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=md(n.arrayValue.values[t]);return e}return{...n}}function ZS(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===JS}const e1={mapValue:{fields:{[Lv]:{stringValue:Uv},[ac]:{arrayValue:{}}}}};function uM(n){return"nullValue"in n?lm:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?To(da.empty(),ae.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?dg(n)?e1:{mapValue:{}}:de(35942,{value:n})}function dM(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?To(da.empty(),ae.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?e1:"mapValue"in n?dg(n)?{mapValue:{}}:Zi:de(61959,{value:n})}function vE(n,e){const t=fa(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function bE(n,e){const t=fa(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.value=e}static empty(){return new hn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!um(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=md(t)}setAll(e){let t=yt.emptyPath(),r={},a=[];e.forEach(((u,h)=>{if(!t.isImmediateParentOf(h)){const m=this.getFieldsMap(t);this.applyChanges(m,r,a),r={},a=[],t=h.popLast()}u?r[h.lastSegment()]=md(u):a.push(h.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,r,a)}delete(e){const t=this.field(e.popLast());um(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Is(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=t.mapValue.fields[e.get(r)];um(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,r){wa(t,((a,l)=>e[a]=l));for(const a of r)delete e[a]}clone(){return new hn(md(this.value))}}function t1(n){const e=[];return wa(n.fields,((t,r)=>{const a=new yt([t]);if(um(r)){const l=t1(r.mapValue).fields;if(l.length===0)e.push(a);else for(const u of l)e.push(a.child(u))}else e.push(a)})),new zn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e,t,r,a,l,u,h){this.key=e,this.documentType=t,this.version=r,this.readTime=a,this.createTime=l,this.data=u,this.documentState=h}static newInvalidDocument(e){return new ut(e,0,_e.min(),_e.min(),_e.min(),hn.empty(),0)}static newFoundDocument(e,t,r,a){return new ut(e,1,t,_e.min(),r,a,0)}static newNoDocument(e,t){return new ut(e,2,t,_e.min(),_e.min(),hn.empty(),0)}static newUnknownDocument(e,t){return new ut(e,3,t,_e.min(),_e.min(),hn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(_e.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=hn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=hn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=_e.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ut&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ut(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(e,t){this.position=e,this.inclusive=t}}function xE(n,e,t){let r=0;for(let a=0;a<n.position.length;a++){const l=e[a],u=n.position[a];if(l.field.isKeyField()?r=ae.comparator(ae.fromName(u.referenceValue),t.key):r=fa(u,t.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function wE(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Is(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(e,t="asc"){this.field=e,this.dir=t}}function hM(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{}class Ve extends n1{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new fM(e,t,r):t==="array-contains"?new pM(e,r):t==="in"?new l1(e,r):t==="not-in"?new yM(e,r):t==="array-contains-any"?new _M(e,r):new Ve(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new mM(e,r):new gM(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(fa(t,this.value)):t!==null&&ha(this.value)===ha(t)&&this.matchesComparison(fa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return de(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ye extends n1{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Ye(e,t)}matches(e){return lc(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function lc(n){return n.op==="and"}function S_(n){return n.op==="or"}function zv(n){return r1(n)&&lc(n)}function r1(n){for(const e of n.filters)if(e instanceof Ye)return!1;return!0}function R_(n){if(n instanceof Ve)return n.field.canonicalString()+n.op.toString()+oc(n.value);if(zv(n))return n.filters.map((e=>R_(e))).join(",");{const e=n.filters.map((t=>R_(t))).join(",");return`${n.op}(${e})`}}function s1(n,e){return n instanceof Ve?(function(r,a){return a instanceof Ve&&r.op===a.op&&r.field.isEqual(a.field)&&Is(r.value,a.value)})(n,e):n instanceof Ye?(function(r,a){return a instanceof Ye&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce(((l,u,h)=>l&&s1(u,a.filters[h])),!0):!1})(n,e):void de(19439)}function i1(n,e){const t=n.filters.concat(e);return Ye.create(t,n.op)}function a1(n){return n instanceof Ve?(function(t){return`${t.field.canonicalString()} ${t.op} ${oc(t.value)}`})(n):n instanceof Ye?(function(t){return t.op.toString()+" {"+t.getFilters().map(a1).join(" ,")+"}"})(n):"Filter"}class fM extends Ve{constructor(e,t,r){super(e,t,r),this.key=ae.fromName(r.referenceValue)}matches(e){const t=ae.comparator(e.key,this.key);return this.matchesComparison(t)}}class mM extends Ve{constructor(e,t){super(e,"in",t),this.keys=o1("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class gM extends Ve{constructor(e,t){super(e,"not-in",t),this.keys=o1("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function o1(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((r=>ae.fromName(r.referenceValue)))}class pM extends Ve{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Vd(t)&&Od(t.arrayValue,this.value)}}class l1 extends Ve{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Od(this.value.arrayValue,t)}}class yM extends Ve{constructor(e,t){super(e,"not-in",t)}matches(e){if(Od(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Od(this.value.arrayValue,t)}}class _M extends Ve{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Vd(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Od(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vM{constructor(e,t=null,r=[],a=[],l=null,u=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=a,this.limit=l,this.startAt=u,this.endAt=h,this.Te=null}}function N_(n,e=null,t=[],r=[],a=null,l=null,u=null){return new vM(n,e,t,r,a,l,u)}function Eo(n){const e=ce(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>R_(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(l){return l.field.canonicalString()+l.dir})(r))).join(","),Zd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>oc(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>oc(r))).join(",")),e.Te=t}return e.Te}function th(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!hM(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!s1(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!wE(n.startAt,e.startAt)&&wE(n.endAt,e.endAt)}function km(n){return ae.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Cm(n,e){return n.filters.filter((t=>t instanceof Ve&&t.field.isEqual(e)))}function TE(n,e,t){let r=lm,a=!0;for(const l of Cm(n,e)){let u=lm,h=!0;switch(l.op){case"<":case"<=":u=uM(l.value);break;case"==":case"in":case">=":u=l.value;break;case">":u=l.value,h=!1;break;case"!=":case"not-in":u=lm}vE({value:r,inclusive:a},{value:u,inclusive:h})<0&&(r=u,a=h)}if(t!==null){for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(e)){const u=t.position[l];vE({value:r,inclusive:a},{value:u,inclusive:t.inclusive})<0&&(r=u,a=t.inclusive);break}}return{value:r,inclusive:a}}function EE(n,e,t){let r=Zi,a=!0;for(const l of Cm(n,e)){let u=Zi,h=!0;switch(l.op){case">=":case">":u=dM(l.value),h=!1;break;case"==":case"in":case"<=":u=l.value;break;case"<":u=l.value,h=!1;break;case"!=":case"not-in":u=Zi}bE({value:r,inclusive:a},{value:u,inclusive:h})>0&&(r=u,a=h)}if(t!==null){for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(e)){const u=t.position[l];bE({value:r,inclusive:a},{value:u,inclusive:t.inclusive})>0&&(r=u,a=t.inclusive);break}}return{value:r,inclusive:a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e,t=null,r=[],a=[],l=null,u="F",h=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=a,this.limit=l,this.limitType=u,this.startAt=h,this.endAt=m,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function c1(n,e,t,r,a,l,u,h){return new ai(n,e,t,r,a,l,u,h)}function Ec(n){return new ai(n)}function IE(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Bv(n){return n.collectionGroup!==null}function Ql(n){const e=ce(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let h=new We(yt.comparator);return u.filters.forEach((m=>{m.getFlattenedFilters().forEach((y=>{y.isInequality()&&(h=h.add(y.field))}))})),h})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Md(l,r))})),t.has(yt.keyField().canonicalString())||e.Ie.push(new Md(yt.keyField(),r))}return e.Ie}function Nn(n){const e=ce(n);return e.Ee||(e.Ee=bM(e,Ql(n))),e.Ee}function bM(n,e){if(n.limitType==="F")return N_(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new Md(a.field,l)}));const t=n.endAt?new ma(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new ma(n.startAt.position,n.startAt.inclusive):null;return N_(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function k_(n,e){const t=n.filters.concat([e]);return new ai(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Dm(n,e,t){return new ai(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function nh(n,e){return th(Nn(n),Nn(e))&&n.limitType===e.limitType}function u1(n){return`${Eo(Nn(n))}|lt:${n.limitType}`}function Ll(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((a=>a1(a))).join(", ")}]`),Zd(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((a=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(a))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((a=>oc(a))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((a=>oc(a))).join(",")),`Target(${r})`})(Nn(n))}; limitType=${n.limitType})`}function rh(n,e){return e.isFoundDocument()&&(function(r,a){const l=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):ae.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)})(n,e)&&(function(r,a){for(const l of Ql(r))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(r,a){for(const l of r.filters)if(!l.matches(a))return!1;return!0})(n,e)&&(function(r,a){return!(r.startAt&&!(function(u,h,m){const y=xE(u,h,m);return u.inclusive?y<=0:y<0})(r.startAt,Ql(r),a)||r.endAt&&!(function(u,h,m){const y=xE(u,h,m);return u.inclusive?y>=0:y>0})(r.endAt,Ql(r),a))})(n,e)}function d1(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function h1(n){return(e,t)=>{let r=!1;for(const a of Ql(n)){const l=xM(a,e,t);if(l!==0)return l;r=r||a.field.isKeyField()}return 0}}function xM(n,e,t){const r=n.field.isKeyField()?ae.comparator(e.key,t.key):(function(l,u,h){const m=u.data.field(l),y=h.data.field(l);return m!==null&&y!==null?fa(m,y):de(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return de(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[a,l]of r)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),a=this.inner[r];if(a===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return r.length===1?delete this.inner[t]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(e){wa(this.inner,((t,r)=>{for(const[a,l]of r)e(a,l)}))}isEmpty(){return KS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wM=new at(ae.comparator);function Bn(){return wM}const f1=new at(ae.comparator);function ed(...n){let e=f1;for(const t of n)e=e.insert(t.key,t);return e}function m1(n){let e=f1;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function _s(){return gd()}function g1(){return gd()}function gd(){return new oi((n=>n.toString()),((n,e)=>n.isEqual(e)))}const TM=new at(ae.comparator),EM=new We(ae.comparator);function Ie(...n){let e=EM;for(const t of n)e=e.add(t);return e}const IM=new We(we);function Fv(){return IM}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qv(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Nd(e)?"-0":e}}function p1(n){return{integerValue:""+n}}function y1(n,e){return VS(e)?p1(e):qv(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(){this._=void 0}}function AM(n,e,t){return n instanceof cc?(function(a,l){const u={fields:{[YS]:{stringValue:$S},[XS]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&cg(l)&&(l=ug(l)),l&&(u.fields[WS]=l),{mapValue:u}})(t,e):n instanceof Io?v1(n,e):n instanceof Ao?b1(n,e):(function(a,l){const u=_1(a,l),h=AE(u)+AE(a.Ae);return A_(u)&&A_(a.Ae)?p1(h):qv(a.serializer,h)})(n,e)}function SM(n,e,t){return n instanceof Io?v1(n,e):n instanceof Ao?b1(n,e):t}function _1(n,e){return n instanceof uc?(function(r){return A_(r)||(function(l){return!!l&&"doubleValue"in l})(r)})(e)?e:{integerValue:0}:null}class cc extends hg{}class Io extends hg{constructor(e){super(),this.elements=e}}function v1(n,e){const t=x1(e);for(const r of n.elements)t.some((a=>Is(a,r)))||t.push(r);return{arrayValue:{values:t}}}class Ao extends hg{constructor(e){super(),this.elements=e}}function b1(n,e){let t=x1(e);for(const r of n.elements)t=t.filter((a=>!Is(a,r)));return{arrayValue:{values:t}}}class uc extends hg{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function AE(n){return gt(n.integerValue||n.doubleValue)}function x1(n){return Vd(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(e,t){this.field=e,this.transform=t}}function RM(n,e){return n.field.isEqual(e.field)&&(function(r,a){return r instanceof Io&&a instanceof Io||r instanceof Ao&&a instanceof Ao?ec(r.elements,a.elements,Is):r instanceof uc&&a instanceof uc?Is(r.Ae,a.Ae):r instanceof cc&&a instanceof cc})(n.transform,e.transform)}class NM{constructor(e,t){this.version=e,this.transformResults=t}}class _t{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new _t}static exists(e){return new _t(void 0,e)}static updateTime(e){return new _t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function dm(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class fg{}function w1(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Ac(n.key,_t.none()):new Ic(n.key,n.data,_t.none());{const t=n.data,r=hn.empty();let a=new We(yt.comparator);for(let l of e.fields)if(!a.has(l)){let u=t.field(l);u===null&&l.length>1&&(l=l.popLast(),u=t.field(l)),u===null?r.delete(l):r.set(l,u),a=a.add(l)}return new li(n.key,r,new zn(a.toArray()),_t.none())}}function kM(n,e,t){n instanceof Ic?(function(a,l,u){const h=a.value.clone(),m=RE(a.fieldTransforms,l,u.transformResults);h.setAll(m),l.convertToFoundDocument(u.version,h).setHasCommittedMutations()})(n,e,t):n instanceof li?(function(a,l,u){if(!dm(a.precondition,l))return void l.convertToUnknownDocument(u.version);const h=RE(a.fieldTransforms,l,u.transformResults),m=l.data;m.setAll(T1(a)),m.setAll(h),l.convertToFoundDocument(u.version,m).setHasCommittedMutations()})(n,e,t):(function(a,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function pd(n,e,t,r){return n instanceof Ic?(function(l,u,h,m){if(!dm(l.precondition,u))return h;const y=l.value.clone(),v=NE(l.fieldTransforms,m,u);return y.setAll(v),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),null})(n,e,t,r):n instanceof li?(function(l,u,h,m){if(!dm(l.precondition,u))return h;const y=NE(l.fieldTransforms,m,u),v=u.data;return v.setAll(T1(l)),v.setAll(y),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),h===null?null:h.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((x=>x.field)))})(n,e,t,r):(function(l,u,h){return dm(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):h})(n,e,t)}function CM(n,e){let t=null;for(const r of n.fieldTransforms){const a=e.data.field(r.field),l=_1(r.transform,a||null);l!=null&&(t===null&&(t=hn.empty()),t.set(r.field,l))}return t||null}function SE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&ec(r,a,((l,u)=>RM(l,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Ic extends fg{constructor(e,t,r,a=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class li extends fg{constructor(e,t,r,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function T1(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function RE(n,e,t){const r=new Map;me(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let a=0;a<t.length;a++){const l=n[a],u=l.transform,h=e.data.field(l.field);r.set(l.field,SM(u,h,t[a]))}return r}function NE(n,e,t){const r=new Map;for(const a of n){const l=a.transform,u=t.data.field(a.field);r.set(a.field,AM(l,u,e))}return r}class Ac extends fg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Gv extends fg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv{constructor(e,t,r,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&kM(l,e,r[a])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=pd(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=pd(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=g1();return this.mutations.forEach((a=>{const l=e.get(a.key),u=l.overlayedDocument;let h=this.applyToLocalView(u,l.mutatedFields);h=t.has(a.key)?null:h;const m=w1(u,h);m!==null&&r.set(a.key,m),u.isValidDocument()||u.convertToNoDocument(_e.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ie())}isEqual(e){return this.batchId===e.batchId&&ec(this.mutations,e.mutations,((t,r)=>SE(t,r)))&&ec(this.baseMutations,e.baseMutations,((t,r)=>SE(t,r)))}}class Kv{constructor(e,t,r,a){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=a}static from(e,t,r){me(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let a=(function(){return TM})();const l=e.mutations;for(let u=0;u<l.length;u++)a=a.insert(l[u].key,r[u].version);return new Kv(e,t,r,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DM{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gt,je;function E1(n){switch(n){case H.OK:return de(64938);case H.CANCELLED:case H.UNKNOWN:case H.DEADLINE_EXCEEDED:case H.RESOURCE_EXHAUSTED:case H.INTERNAL:case H.UNAVAILABLE:case H.UNAUTHENTICATED:return!1;case H.INVALID_ARGUMENT:case H.NOT_FOUND:case H.ALREADY_EXISTS:case H.PERMISSION_DENIED:case H.FAILED_PRECONDITION:case H.ABORTED:case H.OUT_OF_RANGE:case H.UNIMPLEMENTED:case H.DATA_LOSS:return!0;default:return de(15467,{code:n})}}function I1(n){if(n===void 0)return Dt("GRPC error has no .code"),H.UNKNOWN;switch(n){case Gt.OK:return H.OK;case Gt.CANCELLED:return H.CANCELLED;case Gt.UNKNOWN:return H.UNKNOWN;case Gt.DEADLINE_EXCEEDED:return H.DEADLINE_EXCEEDED;case Gt.RESOURCE_EXHAUSTED:return H.RESOURCE_EXHAUSTED;case Gt.INTERNAL:return H.INTERNAL;case Gt.UNAVAILABLE:return H.UNAVAILABLE;case Gt.UNAUTHENTICATED:return H.UNAUTHENTICATED;case Gt.INVALID_ARGUMENT:return H.INVALID_ARGUMENT;case Gt.NOT_FOUND:return H.NOT_FOUND;case Gt.ALREADY_EXISTS:return H.ALREADY_EXISTS;case Gt.PERMISSION_DENIED:return H.PERMISSION_DENIED;case Gt.FAILED_PRECONDITION:return H.FAILED_PRECONDITION;case Gt.ABORTED:return H.ABORTED;case Gt.OUT_OF_RANGE:return H.OUT_OF_RANGE;case Gt.UNIMPLEMENTED:return H.UNIMPLEMENTED;case Gt.DATA_LOSS:return H.DATA_LOSS;default:return de(39323,{code:n})}}(je=Gt||(Gt={}))[je.OK=0]="OK",je[je.CANCELLED=1]="CANCELLED",je[je.UNKNOWN=2]="UNKNOWN",je[je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",je[je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",je[je.NOT_FOUND=5]="NOT_FOUND",je[je.ALREADY_EXISTS=6]="ALREADY_EXISTS",je[je.PERMISSION_DENIED=7]="PERMISSION_DENIED",je[je.UNAUTHENTICATED=16]="UNAUTHENTICATED",je[je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",je[je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",je[je.ABORTED=10]="ABORTED",je[je.OUT_OF_RANGE=11]="OUT_OF_RANGE",je[je.UNIMPLEMENTED=12]="UNIMPLEMENTED",je[je.INTERNAL=13]="INTERNAL",je[je.UNAVAILABLE=14]="UNAVAILABLE",je[je.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A1(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PM=new ra([4294967295,4294967295],0);function kE(n){const e=A1().encode(n),t=new _S;return t.update(e),new Uint8Array(t.digest())}function CE(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new ra([t,r],0),new ra([a,l],0)]}class $v{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new td(`Invalid padding: ${t}`);if(r<0)throw new td(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new td(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new td(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ra.fromNumber(this.ge)}ye(e,t,r){let a=e.add(t.multiply(ra.fromNumber(r)));return a.compare(PM)===1&&(a=new ra([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=kE(e),[r,a]=CE(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(r,a,l);if(!this.we(u))return!1}return!0}static create(e,t,r){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new $v(l,a,t);return r.forEach((h=>u.insert(h))),u}insert(e){if(this.ge===0)return;const t=kE(e),[r,a]=CE(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(r,a,l);this.Se(u)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class td extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(e,t,r,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const a=new Map;return a.set(e,ah.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new ih(_e.min(),a,new at(we),Bn(),Ie())}}class ah{constructor(e,t,r,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new ah(r,t,Ie(),Ie(),Ie())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm{constructor(e,t,r,a){this.be=e,this.removedTargetIds=t,this.key=r,this.De=a}}class S1{constructor(e,t){this.targetId=e,this.Ce=t}}class R1{constructor(e,t,r=It.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=a}}class DE{constructor(){this.ve=0,this.Fe=PE(),this.Me=It.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ie(),t=Ie(),r=Ie();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:r=r.add(a);break;default:de(38017,{changeType:l})}})),new ah(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=PE()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,me(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class OM{constructor(e){this.Ge=e,this.ze=new Map,this.je=Bn(),this.Je=Kf(),this.He=Kf(),this.Ye=new at(we)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:de(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,r=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(km(l))if(r===0){const u=new ae(l.path);this.et(t,u,ut.newNoDocument(u,_e.min()))}else me(r===1,20013,{expectedCount:r});else{const u=this._t(t);if(u!==r){const h=this.ut(e),m=h?this.ct(h,e,u):1;if(m!==0){this.it(t);const y=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,y)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:a=0},hashCount:l=0}=t;let u,h;try{u=ni(r).toUint8Array()}catch(m){if(m instanceof QS)return Es("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{h=new $v(u,a,l)}catch(m){return Es(m instanceof td?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return h.ge===0?null:h}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let a=0;return r.forEach((l=>{const u=this.Ge.ht(),h=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(h)||(this.et(t,l,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((l,u)=>{const h=this.ot(u);if(h){if(l.current&&km(h.target)){const m=new ae(h.target.path);this.It(m).has(u)||this.Et(u,m)||this.et(u,m,ut.newNoDocument(m,e))}l.Be&&(t.set(u,l.ke()),l.qe())}}));let r=Ie();this.He.forEach(((l,u)=>{let h=!0;u.forEachWhile((m=>{const y=this.ot(m);return!y||y.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(r=r.add(l))})),this.je.forEach(((l,u)=>u.setReadTime(e)));const a=new ih(e,t,this.Ye,this.je,r);return this.je=Bn(),this.Je=Kf(),this.He=Kf(),this.Ye=new at(we),a}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.Qe(t,1):a.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new DE,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new We(we),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new We(we),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ne("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new DE),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Kf(){return new at(ae.comparator)}function PE(){return new at(ae.comparator)}const VM={asc:"ASCENDING",desc:"DESCENDING"},MM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},jM={and:"AND",or:"OR"};class LM{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function C_(n,e){return n.useProto3Json||Zd(e)?e:{value:e}}function dc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function N1(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function UM(n,e){return dc(n,e.toTimestamp())}function Pt(n){return me(!!n,49232),_e.fromTimestamp((function(t){const r=ti(t);return new He(r.seconds,r.nanos)})(n))}function Yv(n,e){return D_(n,e).canonicalString()}function D_(n,e){const t=(function(a){return new De(["projects",a.projectId,"databases",a.database])})(n).child("documents");return e===void 0?t:t.child(e)}function k1(n){const e=De.fromString(n);return me(z1(e),10190,{key:e.toString()}),e}function jd(n,e){return Yv(n.databaseId,e.path)}function bs(n,e){const t=k1(e);if(t.get(1)!==n.databaseId.projectId)throw new te(H.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new te(H.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ae(P1(t))}function C1(n,e){return Yv(n.databaseId,e)}function D1(n){const e=k1(n);return e.length===4?De.emptyPath():P1(e)}function P_(n){return new De(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function P1(n){return me(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function OE(n,e,t){return{name:jd(n,e),fields:t.value.mapValue.fields}}function O1(n,e,t){const r=bs(n,e.name),a=Pt(e.updateTime),l=e.createTime?Pt(e.createTime):_e.min(),u=new hn({mapValue:{fields:e.fields}}),h=ut.newFoundDocument(r,a,l,u);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function zM(n,e){return"found"in e?(function(r,a){me(!!a.found,43571),a.found.name,a.found.updateTime;const l=bs(r,a.found.name),u=Pt(a.found.updateTime),h=a.found.createTime?Pt(a.found.createTime):_e.min(),m=new hn({mapValue:{fields:a.found.fields}});return ut.newFoundDocument(l,u,h,m)})(n,e):"missing"in e?(function(r,a){me(!!a.missing,3894),me(!!a.readTime,22933);const l=bs(r,a.missing),u=Pt(a.readTime);return ut.newNoDocument(l,u)})(n,e):de(7234,{result:e})}function BM(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:de(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(y,v){return y.useProto3Json?(me(v===void 0||typeof v=="string",58123),It.fromBase64String(v||"")):(me(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),It.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,h=u&&(function(y){const v=y.code===void 0?H.UNKNOWN:I1(y.code);return new te(v,y.message||"")})(u);t=new R1(r,a,l,h||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const a=bs(n,r.document.name),l=Pt(r.document.updateTime),u=r.document.createTime?Pt(r.document.createTime):_e.min(),h=new hn({mapValue:{fields:r.document.fields}}),m=ut.newFoundDocument(a,l,u,h),y=r.targetIds||[],v=r.removedTargetIds||[];t=new hm(y,v,m.key,m)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const a=bs(n,r.document),l=r.readTime?Pt(r.readTime):_e.min(),u=ut.newNoDocument(a,l),h=r.removedTargetIds||[];t=new hm([],h,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const a=bs(n,r.document),l=r.removedTargetIds||[];t=new hm([],l,a,null)}else{if(!("filter"in e))return de(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:a=0,unchangedNames:l}=r,u=new DM(a,l),h=r.targetId;t=new S1(h,u)}}return t}function Ld(n,e){let t;if(e instanceof Ic)t={update:OE(n,e.key,e.value)};else if(e instanceof Ac)t={delete:jd(n,e.key)};else if(e instanceof li)t={update:OE(n,e.key,e.data),updateMask:QM(e.fieldMask)};else{if(!(e instanceof Gv))return de(16599,{Vt:e.type});t={verify:jd(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(l,u){const h=u.transform;if(h instanceof cc)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Io)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Ao)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof uc)return{fieldPath:u.field.canonicalString(),increment:h.Ae};throw de(20930,{transform:u.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:UM(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:de(27497)})(n,e.precondition)),t}function O_(n,e){const t=e.currentDocument?(function(l){return l.updateTime!==void 0?_t.updateTime(Pt(l.updateTime)):l.exists!==void 0?_t.exists(l.exists):_t.none()})(e.currentDocument):_t.none(),r=e.updateTransforms?e.updateTransforms.map((a=>(function(u,h){let m=null;if("setToServerValue"in h)me(h.setToServerValue==="REQUEST_TIME",16630,{proto:h}),m=new cc;else if("appendMissingElements"in h){const v=h.appendMissingElements.values||[];m=new Io(v)}else if("removeAllFromArray"in h){const v=h.removeAllFromArray.values||[];m=new Ao(v)}else"increment"in h?m=new uc(u,h.increment):de(16584,{proto:h});const y=yt.fromServerFormat(h.fieldPath);return new sh(y,m)})(n,a))):[];if(e.update){e.update.name;const a=bs(n,e.update.name),l=new hn({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=(function(m){const y=m.fieldPaths||[];return new zn(y.map((v=>yt.fromServerFormat(v))))})(e.updateMask);return new li(a,l,u,t,r)}return new Ic(a,l,t,r)}if(e.delete){const a=bs(n,e.delete);return new Ac(a,t)}if(e.verify){const a=bs(n,e.verify);return new Gv(a,t)}return de(1463,{proto:e})}function FM(n,e){return n&&n.length>0?(me(e!==void 0,14353),n.map((t=>(function(a,l){let u=a.updateTime?Pt(a.updateTime):Pt(l);return u.isEqual(_e.min())&&(u=Pt(l)),new NM(u,a.transformResults||[])})(t,e)))):[]}function V1(n,e){return{documents:[C1(n,e.path)]}}function M1(n,e){const t={structuredQuery:{}},r=e.path;let a;e.collectionGroup!==null?(a=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=C1(n,a);const l=(function(y){if(y.length!==0)return U1(Ye.create(y,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const u=(function(y){if(y.length!==0)return y.map((v=>(function(T){return{field:Ul(T.field),direction:GM(T.dir)}})(v)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const h=C_(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:t,parent:a}}function j1(n){let e=D1(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let a=null;if(r>0){me(r===1,65062);const v=t.from[0];v.allDescendants?a=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=(function(x){const T=L1(x);return T instanceof Ye&&zv(T)?T.getFilters():[T]})(t.where));let u=[];t.orderBy&&(u=(function(x){return x.map((T=>(function(V){return new Md(zl(V.field),(function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(V.direction))})(T)))})(t.orderBy));let h=null;t.limit&&(h=(function(x){let T;return T=typeof x=="object"?x.value:x,Zd(T)?null:T})(t.limit));let m=null;t.startAt&&(m=(function(x){const T=!!x.before,R=x.values||[];return new ma(R,T)})(t.startAt));let y=null;return t.endAt&&(y=(function(x){const T=!x.before,R=x.values||[];return new ma(R,T)})(t.endAt)),c1(e,a,u,l,h,"F",m,y)}function qM(n,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return de(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function L1(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=zl(t.unaryFilter.field);return Ve.create(r,"==",{doubleValue:NaN});case"IS_NULL":const a=zl(t.unaryFilter.field);return Ve.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=zl(t.unaryFilter.field);return Ve.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=zl(t.unaryFilter.field);return Ve.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return de(61313);default:return de(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Ve.create(zl(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return de(58110);default:return de(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Ye.create(t.compositeFilter.filters.map((r=>L1(r))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return de(1026)}})(t.compositeFilter.op))})(n):de(30097,{filter:n})}function GM(n){return VM[n]}function HM(n){return MM[n]}function KM(n){return jM[n]}function Ul(n){return{fieldPath:n.canonicalString()}}function zl(n){return yt.fromServerFormat(n.fieldPath)}function U1(n){return n instanceof Ve?(function(t){if(t.op==="=="){if(_E(t.value))return{unaryFilter:{field:Ul(t.field),op:"IS_NAN"}};if(yE(t.value))return{unaryFilter:{field:Ul(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(_E(t.value))return{unaryFilter:{field:Ul(t.field),op:"IS_NOT_NAN"}};if(yE(t.value))return{unaryFilter:{field:Ul(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ul(t.field),op:HM(t.op),value:t.value}}})(n):n instanceof Ye?(function(t){const r=t.getFilters().map((a=>U1(a)));return r.length===1?r[0]:{compositeFilter:{op:KM(t.op),filters:r}}})(n):de(54877,{filter:n})}function QM(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function z1(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(e,t,r,a,l=_e.min(),u=_e.min(),h=It.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h,this.expectedCount=m}withSequenceNumber(e){return new Ys(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ys(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ys(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ys(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(e){this.yt=e}}function $M(n,e){let t;if(e.document)t=O1(n.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ae.fromSegments(e.noDocument.path),a=Ro(e.noDocument.readTime);t=ut.newNoDocument(r,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return de(56709);{const r=ae.fromSegments(e.unknownDocument.path),a=Ro(e.unknownDocument.version);t=ut.newUnknownDocument(r,a)}}return e.readTime&&t.setReadTime((function(a){const l=new He(a[0],a[1]);return _e.fromTimestamp(l)})(e.readTime)),t}function VE(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Pm(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(l,u){return{name:jd(l,u.key),fields:u.data.value.mapValue.fields,updateTime:dc(l,u.version.toTimestamp()),createTime:dc(l,u.createTime.toTimestamp())}})(n.yt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:So(e.version)};else{if(!e.isUnknownDocument())return de(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:So(e.version)}}return r}function Pm(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function So(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ro(n){const e=new He(n.seconds,n.nanoseconds);return _e.fromTimestamp(e)}function oo(n,e){const t=(e.baseMutations||[]).map((l=>O_(n.yt,l)));for(let l=0;l<e.mutations.length-1;++l){const u=e.mutations[l];if(l+1<e.mutations.length&&e.mutations[l+1].transform!==void 0){const h=e.mutations[l+1];u.updateTransforms=h.transform.fieldTransforms,e.mutations.splice(l+1,1),++l}}const r=e.mutations.map((l=>O_(n.yt,l))),a=He.fromMillis(e.localWriteTimeMs);return new Hv(e.batchId,a,t,r)}function nd(n){const e=Ro(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Ro(n.lastLimboFreeSnapshotVersion):_e.min();let r;return r=(function(l){return l.documents!==void 0})(n.query)?(function(l){const u=l.documents.length;return me(u===1,1966,{count:u}),Nn(Ec(D1(l.documents[0])))})(n.query):(function(l){return Nn(j1(l))})(n.query),new Ys(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,It.fromBase64String(n.resumeToken))}function F1(n,e){const t=So(e.snapshotVersion),r=So(e.lastLimboFreeSnapshotVersion);let a;a=km(e.target)?V1(n.yt,e.target):M1(n.yt,e.target).ft;const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Eo(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:a}}function Wv(n){const e=j1({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Dm(e,e.limit,"L"):e}function $y(n,e){return new Qv(e.largestBatchId,O_(n.yt,e.overlayMutation))}function ME(n,e){const t=e.path.lastSegment();return[n,bn(e.path.popLast()),t]}function jE(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:So(r.readTime),documentKey:bn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YM{getBundleMetadata(e,t){return LE(e).get(t).next((r=>{if(r)return(function(l){return{id:l.bundleId,createTime:Ro(l.createTime),version:l.version}})(r)}))}saveBundleMetadata(e,t){return LE(e).put((function(a){return{bundleId:a.id,createTime:So(Pt(a.createTime)),version:a.version}})(t))}getNamedQuery(e,t){return UE(e).get(t).next((r=>{if(r)return(function(l){return{name:l.name,query:Wv(l.bundledQuery),readTime:Ro(l.readTime)}})(r)}))}saveNamedQuery(e,t){return UE(e).put((function(a){return{name:a.name,readTime:So(Pt(a.readTime)),bundledQuery:a.bundledQuery}})(t))}}function LE(n){return Wt(n,ag)}function UE(n){return Wt(n,og)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const r=t.uid||"";return new mg(e,r)}getOverlay(e,t){return qu(e).get(ME(this.userId,t)).next((r=>r?$y(this.serializer,r):null))}getOverlays(e,t){const r=_s();return z.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&r.set(a,l)})))).next((()=>r))}saveOverlays(e,t,r){const a=[];return r.forEach(((l,u)=>{const h=new Qv(t,u);a.push(this.St(e,h))})),z.waitFor(a)}removeOverlaysForBatchId(e,t,r){const a=new Set;t.forEach((u=>a.add(bn(u.getCollectionPath()))));const l=[];return a.forEach((u=>{const h=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,r+1],!1,!0);l.push(qu(e).Z(w_,h))})),z.waitFor(l)}getOverlaysForCollection(e,t,r){const a=_s(),l=bn(t),u=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,Number.POSITIVE_INFINITY],!0);return qu(e).J(w_,u).next((h=>{for(const m of h){const y=$y(this.serializer,m);a.set(y.getKey(),y)}return a}))}getOverlaysForCollectionGroup(e,t,r,a){const l=_s();let u;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return qu(e).ee({index:BS,range:h},((m,y,v)=>{const x=$y(this.serializer,y);l.size()<a||x.largestBatchId===u?(l.set(x.getKey(),x),u=x.largestBatchId):v.done()})).next((()=>l))}St(e,t){return qu(e).put((function(a,l,u){const[h,m,y]=ME(l,u.mutation.key);return{userId:l,collectionPath:m,documentId:y,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Ld(a.yt,u.mutation)}})(this.serializer,this.userId,t))}}function qu(n){return Wt(n,lg)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WM{bt(e){return Wt(e,Mv)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const r=t==null?void 0:t.value;return r?It.fromUint8Array(r):It.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(gt(e.integerValue));else if("doubleValue"in e){const r=gt(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),Nd(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=ti(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(ni(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?ZS(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):dg(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):de(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const r=e.fields||{};this.Ft(t,55);for(const a of Object.keys(r))this.Ot(a,t),this.Ct(r[a],t)}kt(e,t){var u,h;const r=e.fields||{};this.Ft(t,53);const a=ac,l=((h=(u=r[a].arrayValue)==null?void 0:u.values)==null?void 0:h.length)||0;this.Ft(t,15),t.Mt(gt(l)),this.Ot(a,t),this.Ct(r[a],t)}Qt(e,t){const r=e.values||[];this.Ft(t,50);for(const a of r)this.Ct(a,t)}Lt(e,t){this.Ft(t,37),ae.fromName(e).path.forEach((r=>{this.Ft(t,60),this.Ut(r,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}lo.Kt=new lo;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dl=255;function XM(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function zE(n){const e=64-(function(r){let a=0;for(let l=0;l<8;++l){const u=XM(255&r[l]);if(a+=u,u!==8)break}return a})(n);return Math.ceil(e/8)}class JM{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Gt(r.value),r=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Jt(r.value),r=t.next();this.Ht()}Yt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const a=t.codePointAt(0);this.Gt(240|a>>>18),this.Gt(128|63&a>>>12),this.Gt(128|63&a>>>6),this.Gt(128|63&a)}}this.zt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const a=t.codePointAt(0);this.Jt(240|a>>>18),this.Jt(128|63&a>>>12),this.Jt(128|63&a>>>6),this.Jt(128|63&a)}}this.Ht()}Xt(e){const t=this.en(e),r=zE(t);this.tn(1+r),this.buffer[this.position++]=255&r;for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=255&t[a]}nn(e){const t=this.en(e),r=zE(t);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}rn(){this.sn(Dl),this.sn(255)}_n(){this.an(Dl),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(l){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,l,!1),new Uint8Array(u.buffer)})(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let a=1;a<t.length;++a)t[a]^=r?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===Dl?(this.sn(Dl),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===Dl?(this.an(Dl),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const a=new Uint8Array(r);a.set(this.buffer),this.buffer=a}}class ZM{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class ej{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Gu{constructor(){this.cn=new JM,this.ln=new ZM(this.cn),this.hn=new ej(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e,t,r,a){this.Tn=e,this.In=t,this.En=r,this.dn=a}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.dn,0),t!==e?r.set([0],this.dn.length):++r[r.length-1],new co(this.Tn,this.In,this.En,r)}Rn(e,t,r){return{indexId:this.Tn,uid:e,arrayValue:fm(this.En),directionalValue:fm(this.dn),orderedDocumentKey:fm(t),documentKey:r.path.toArray()}}Vn(e,t,r){const a=this.Rn(e,t,r);return[a.indexId,a.uid,a.arrayValue,a.directionalValue,a.orderedDocumentKey,a.documentKey]}}function Qi(n,e){let t=n.Tn-e.Tn;return t!==0?t:(t=BE(n.En,e.En),t!==0?t:(t=BE(n.dn,e.dn),t!==0?t:ae.comparator(n.In,e.In)))}function BE(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}function fm(n){return iA()?(function(t){let r="";for(let a=0;a<t.length;a++)r+=String.fromCharCode(t[a]);return r})(n):n}function FE(n){return typeof n!="string"?n:(function(t){const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r})(n)}class qE{constructor(e){this.mn=new We(((t,r)=>yt.comparator(t.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const r=t;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(me(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=v_(e);if(t!==void 0&&!this.wn(t))return!1;const r=so(e);let a=new Set,l=0,u=0;for(;l<r.length&&this.wn(r[l]);++l)a=a.add(r[l].fieldPath.canonicalString());if(l===r.length)return!0;if(this.mn.size>0){const h=this.mn.getIterator().getNext();if(!a.has(h.field.canonicalString())){const m=r[l];if(!this.Sn(h,m)||!this.bn(this.fn[u++],m))return!1}++l}for(;l<r.length;++l){const h=r[l];if(u>=this.fn.length||!this.bn(this.fn[u++],h))return!1}return!0}Dn(){if(this.pn)return null;let e=new We(yt.comparator);const t=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new im(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new im(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new im(r.field,r.dir==="asc"?0:1)));return new Am(Am.UNKNOWN_ID,this.collectionId,t,Rd.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q1(n){var t,r;if(me(n instanceof Ve||n instanceof Ye,20012),n instanceof Ve){if(n instanceof l1){const a=((r=(t=n.value.arrayValue)==null?void 0:t.values)==null?void 0:r.map((l=>Ve.create(n.field,"==",l))))||[];return Ye.create(a,"or")}return n}const e=n.filters.map((a=>q1(a)));return Ye.create(e,n.op)}function tj(n){if(n.getFilters().length===0)return[];const e=j_(q1(n));return me(G1(e),7391),V_(e)||M_(e)?[e]:e.getFilters()}function V_(n){return n instanceof Ve}function M_(n){return n instanceof Ye&&zv(n)}function G1(n){return V_(n)||M_(n)||(function(t){if(t instanceof Ye&&S_(t)){for(const r of t.getFilters())if(!V_(r)&&!M_(r))return!1;return!0}return!1})(n)}function j_(n){if(me(n instanceof Ve||n instanceof Ye,34018),n instanceof Ve)return n;if(n.filters.length===1)return j_(n.filters[0]);const e=n.filters.map((r=>j_(r)));let t=Ye.create(e,n.op);return t=Om(t),G1(t)?t:(me(t instanceof Ye,64498),me(lc(t),40251),me(t.filters.length>1,57927),t.filters.reduce(((r,a)=>Xv(r,a))))}function Xv(n,e){let t;return me(n instanceof Ve||n instanceof Ye,38388),me(e instanceof Ve||e instanceof Ye,25473),t=n instanceof Ve?e instanceof Ve?(function(a,l){return Ye.create([a,l],"and")})(n,e):GE(n,e):e instanceof Ve?GE(e,n):(function(a,l){if(me(a.filters.length>0&&l.filters.length>0,48005),lc(a)&&lc(l))return i1(a,l.getFilters());const u=S_(a)?a:l,h=S_(a)?l:a,m=u.filters.map((y=>Xv(y,h)));return Ye.create(m,"or")})(n,e),Om(t)}function GE(n,e){if(lc(e))return i1(e,n.getFilters());{const t=e.filters.map((r=>Xv(n,r)));return Ye.create(t,"or")}}function Om(n){if(me(n instanceof Ve||n instanceof Ye,11850),n instanceof Ve)return n;const e=n.getFilters();if(e.length===1)return Om(e[0]);if(r1(n))return n;const t=e.map((a=>Om(a))),r=[];return t.forEach((a=>{a instanceof Ve?r.push(a):a instanceof Ye&&(a.op===n.op?r.push(...a.filters):r.push(a))})),r.length===1?r[0]:Ye.create(r,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nj{constructor(){this.Cn=new Jv}addToCollectionParentIndex(e,t){return this.Cn.add(t),z.resolve()}getCollectionParents(e,t){return z.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return z.resolve()}deleteFieldIndex(e,t){return z.resolve()}deleteAllFieldIndexes(e){return z.resolve()}createTargetIndexes(e,t){return z.resolve()}getDocumentsMatchingTarget(e,t){return z.resolve(null)}getIndexType(e,t){return z.resolve(0)}getFieldIndexes(e,t){return z.resolve([])}getNextCollectionGroupToUpdate(e){return z.resolve(null)}getMinOffset(e,t){return z.resolve(rr.min())}getMinOffsetFromCollectionGroup(e,t){return z.resolve(rr.min())}updateCollectionGroup(e,t,r){return z.resolve()}updateIndexEntries(e,t){return z.resolve()}}class Jv{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t]||new We(De.comparator),l=!a.has(r);return this.index[t]=a.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t];return a&&a.has(r)}getEntries(e){return(this.index[e]||new We(De.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HE="IndexedDbIndexManager",Qf=new Uint8Array(0);class rj{constructor(e,t){this.databaseId=t,this.vn=new Jv,this.Fn=new oi((r=>Eo(r)),((r,a)=>th(r,a))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const r=t.lastSegment(),a=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const l={collectionId:r,parent:bn(a)};return KE(e).put(l)}return z.resolve()}getCollectionParents(e,t){const r=[],a=IDBKeyRange.bound([t,""],[AS(t),""],!1,!0);return KE(e).J(a).next((l=>{for(const u of l){if(u.collectionId!==t)break;r.push(ys(u.parent))}return r}))}addFieldIndex(e,t){const r=Hu(e),a=(function(h){return{indexId:h.indexId,collectionGroup:h.collectionGroup,fields:h.fields.map((m=>[m.fieldPath.canonicalString(),m.kind]))}})(t);delete a.indexId;const l=r.add(a);if(t.indexState){const u=Ol(e);return l.next((h=>{u.put(jE(h,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return l.next()}deleteFieldIndex(e,t){const r=Hu(e),a=Ol(e),l=Pl(e);return r.delete(t.indexId).next((()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Hu(e),r=Pl(e),a=Ol(e);return t.Z().next((()=>r.Z())).next((()=>a.Z()))}createTargetIndexes(e,t){return z.forEach(this.Mn(t),(r=>this.getIndexType(e,r).next((a=>{if(a===0||a===1){const l=new qE(r).Dn();if(l!=null)return this.addFieldIndex(e,l)}}))))}getDocumentsMatchingTarget(e,t){const r=Pl(e);let a=!0;const l=new Map;return z.forEach(this.Mn(t),(u=>this.xn(e,u).next((h=>{a&&(a=!!h),l.set(u,h)})))).next((()=>{if(a){let u=Ie();const h=[];return z.forEach(l,((m,y)=>{ne(HE,`Using index ${(function(X){return`id=${X.indexId}|cg=${X.collectionGroup}|f=${X.fields.map((oe=>`${oe.fieldPath}:${oe.kind}`)).join(",")}`})(m)} to execute ${Eo(t)}`);const v=(function(X,oe){const ye=v_(oe);if(ye===void 0)return null;for(const he of Cm(X,ye.fieldPath))switch(he.op){case"array-contains-any":return he.value.arrayValue.values||[];case"array-contains":return[he.value]}return null})(y,m),x=(function(X,oe){const ye=new Map;for(const he of so(oe))for(const C of Cm(X,he.fieldPath))switch(C.op){case"==":case"in":ye.set(he.fieldPath.canonicalString(),C.value);break;case"not-in":case"!=":return ye.set(he.fieldPath.canonicalString(),C.value),Array.from(ye.values())}return null})(y,m),T=(function(X,oe){const ye=[];let he=!0;for(const C of so(oe)){const A=C.kind===0?TE(X,C.fieldPath,X.startAt):EE(X,C.fieldPath,X.startAt);ye.push(A.value),he&&(he=A.inclusive)}return new ma(ye,he)})(y,m),R=(function(X,oe){const ye=[];let he=!0;for(const C of so(oe)){const A=C.kind===0?EE(X,C.fieldPath,X.endAt):TE(X,C.fieldPath,X.endAt);ye.push(A.value),he&&(he=A.inclusive)}return new ma(ye,he)})(y,m),V=this.On(m,y,T),U=this.On(m,y,R),M=this.Nn(m,y,x),W=this.Bn(m.indexId,v,V,T.inclusive,U,R.inclusive,M);return z.forEach(W,(Y=>r.Y(Y,t.limit).next((X=>{X.forEach((oe=>{const ye=ae.fromSegments(oe.documentKey);u.has(ye)||(u=u.add(ye),h.push(ye))}))}))))})).next((()=>h))}return z.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=tj(Ye.create(e.filters,"and")).map((r=>N_(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,r,a,l,u,h){const m=(t!=null?t.length:1)*Math.max(r.length,l.length),y=m/(t!=null?t.length:1),v=[];for(let x=0;x<m;++x){const T=t?this.Ln(t[x/y]):Qf,R=this.kn(e,T,r[x%y],a),V=this.qn(e,T,l[x%y],u),U=h.map((M=>this.kn(e,T,M,!0)));v.push(...this.createRange(R,V,U))}return v}kn(e,t,r,a){const l=new co(e,ae.empty(),t,r);return a?l:l.An()}qn(e,t,r,a){const l=new co(e,ae.empty(),t,r);return a?l.An():l}xn(e,t){const r=new qE(t),a=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next((l=>{let u=null;for(const h of l)r.yn(h)&&(!u||h.fields.length>u.fields.length)&&(u=h);return u}))}getIndexType(e,t){let r=2;const a=this.Mn(t);return z.forEach(a,(l=>this.xn(e,l).next((u=>{u?r!==0&&u.fields.length<(function(m){let y=new We(yt.comparator),v=!1;for(const x of m.filters)for(const T of x.getFlattenedFilters())T.field.isKeyField()||(T.op==="array-contains"||T.op==="array-contains-any"?v=!0:y=y.add(T.field));for(const x of m.orderBy)x.field.isKeyField()||(y=y.add(x.field));return y.size+(v?1:0)})(l)&&(r=1):r=0})))).next((()=>(function(u){return u.limit!==null})(t)&&a.length>1&&r===2?1:r))}Qn(e,t){const r=new Gu;for(const a of so(e)){const l=t.data.field(a.fieldPath);if(l==null)return null;const u=r.Pn(a.kind);lo.Kt.Dt(l,u)}return r.un()}Ln(e){const t=new Gu;return lo.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const r=new Gu;return lo.Kt.Dt(To(this.databaseId,t),r.Pn((function(l){const u=so(l);return u.length===0?0:u[u.length-1].kind})(e))),r.un()}Nn(e,t,r){if(r===null)return[];let a=[];a.push(new Gu);let l=0;for(const u of so(e)){const h=r[l++];for(const m of a)if(this.Un(t,u.fieldPath)&&Vd(h))a=this.Kn(a,u,h);else{const y=m.Pn(u.kind);lo.Kt.Dt(h,y)}}return this.Wn(a)}On(e,t,r){return this.Nn(e,t,r.position)}Wn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].un();return t}Kn(e,t,r){const a=[...e],l=[];for(const u of r.arrayValue.values||[])for(const h of a){const m=new Gu;m.seed(h.un()),lo.Kt.Dt(u,m.Pn(t.kind)),l.push(m)}return l}Un(e,t){return!!e.filters.find((r=>r instanceof Ve&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,t){const r=Hu(e),a=Ol(e);return(t?r.J(x_,IDBKeyRange.bound(t,t)):r.J()).next((l=>{const u=[];return z.forEach(l,(h=>a.get([h.indexId,this.uid]).next((m=>{u.push((function(v,x){const T=x?new Rd(x.sequenceNumber,new rr(Ro(x.readTime),new ae(ys(x.documentKey)),x.largestBatchId)):Rd.empty(),R=v.fields.map((([V,U])=>new im(yt.fromServerFormat(V),U)));return new Am(v.indexId,v.collectionGroup,R,T)})(h,m))})))).next((()=>u))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((r,a)=>{const l=r.indexState.sequenceNumber-a.indexState.sequenceNumber;return l!==0?l:we(r.collectionGroup,a.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,r){const a=Hu(e),l=Ol(e);return this.Gn(e).next((u=>a.J(x_,IDBKeyRange.bound(t,t)).next((h=>z.forEach(h,(m=>l.put(jE(m.indexId,this.uid,u,r))))))))}updateIndexEntries(e,t){const r=new Map;return z.forEach(t,((a,l)=>{const u=r.get(a.collectionGroup);return(u?z.resolve(u):this.getFieldIndexes(e,a.collectionGroup)).next((h=>(r.set(a.collectionGroup,h),z.forEach(h,(m=>this.zn(e,a,m).next((y=>{const v=this.jn(l,m);return y.isEqual(v)?z.resolve():this.Jn(e,l,m,y,v)})))))))}))}Hn(e,t,r,a){return Pl(e).put(a.Rn(this.uid,this.$n(r,t.key),t.key))}Yn(e,t,r,a){return Pl(e).delete(a.Vn(this.uid,this.$n(r,t.key),t.key))}zn(e,t,r){const a=Pl(e);let l=new We(Qi);return a.ee({index:zS,range:IDBKeyRange.only([r.indexId,this.uid,fm(this.$n(r,t))])},((u,h)=>{l=l.add(new co(r.indexId,t,FE(h.arrayValue),FE(h.directionalValue)))})).next((()=>l))}jn(e,t){let r=new We(Qi);const a=this.Qn(t,e);if(a==null)return r;const l=v_(t);if(l!=null){const u=e.data.field(l.fieldPath);if(Vd(u))for(const h of u.arrayValue.values||[])r=r.add(new co(t.indexId,e.key,this.Ln(h),a))}else r=r.add(new co(t.indexId,e.key,Qf,a));return r}Jn(e,t,r,a,l){ne(HE,"Updating index entries for document '%s'",t.key);const u=[];return(function(m,y,v,x,T){const R=m.getIterator(),V=y.getIterator();let U=Cl(R),M=Cl(V);for(;U||M;){let W=!1,Y=!1;if(U&&M){const X=v(U,M);X<0?Y=!0:X>0&&(W=!0)}else U!=null?Y=!0:W=!0;W?(x(M),M=Cl(V)):Y?(T(U),U=Cl(R)):(U=Cl(R),M=Cl(V))}})(a,l,Qi,(h=>{u.push(this.Hn(e,t,r,h))}),(h=>{u.push(this.Yn(e,t,r,h))})),z.waitFor(u)}Gn(e){let t=1;return Ol(e).ee({index:US,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,a,l)=>{l.done(),t=a.sequenceNumber+1})).next((()=>t))}createRange(e,t,r){r=r.sort(((u,h)=>Qi(u,h))).filter(((u,h,m)=>!h||Qi(u,m[h-1])!==0));const a=[];a.push(e);for(const u of r){const h=Qi(u,e),m=Qi(u,t);if(h===0)a[0]=e.An();else if(h>0&&m<0)a.push(u),a.push(u.An());else if(m>0)break}a.push(t);const l=[];for(let u=0;u<a.length;u+=2){if(this.Zn(a[u],a[u+1]))return[];const h=a[u].Vn(this.uid,Qf,ae.empty()),m=a[u+1].Vn(this.uid,Qf,ae.empty());l.push(IDBKeyRange.bound(h,m))}return l}Zn(e,t){return Qi(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(QE)}getMinOffset(e,t){return z.mapArray(this.Mn(t),(r=>this.xn(e,r).next((a=>a||de(44426))))).next(QE)}}function KE(n){return Wt(n,Dd)}function Pl(n){return Wt(n,fd)}function Hu(n){return Wt(n,Vv)}function Ol(n){return Wt(n,hd)}function QE(n){me(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const a=n[r].indexState.offset;Dv(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new rr(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $E={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},H1=41943040;class pn{static withCacheSize(e){return new pn(e,pn.DEFAULT_COLLECTION_PERCENTILE,pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K1(n,e,t){const r=n.store(Mr),a=n.store(nc),l=[],u=IDBKeyRange.only(t.batchId);let h=0;const m=r.ee({range:u},((v,x,T)=>(h++,T.delete())));l.push(m.next((()=>{me(h===1,47070,{batchId:t.batchId})})));const y=[];for(const v of t.mutations){const x=MS(e,v.key.path,t.batchId);l.push(a.delete(x)),y.push(v.key)}return z.waitFor(l).next((()=>y))}function Vm(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw de(14731);e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pn.DEFAULT_COLLECTION_PERCENTILE=10,pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,pn.DEFAULT=new pn(H1,pn.DEFAULT_COLLECTION_PERCENTILE,pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),pn.DISABLED=new pn(-1,0,0);class gg{constructor(e,t,r,a){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=a,this.Xn={}}static wt(e,t,r,a){me(e.uid!=="",64387);const l=e.isAuthenticated()?e.uid:"";return new gg(l,t,r,a)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return $i(e).ee({index:fo,range:r},((a,l,u)=>{t=!1,u.done()})).next((()=>t))}addMutationBatch(e,t,r,a){const l=Bl(e),u=$i(e);return u.add({}).next((h=>{me(typeof h=="number",49019);const m=new Hv(h,t,r,a),y=(function(R,V,U){const M=U.baseMutations.map((Y=>Ld(R.yt,Y))),W=U.mutations.map((Y=>Ld(R.yt,Y)));return{userId:V,batchId:U.batchId,localWriteTimeMs:U.localWriteTime.toMillis(),baseMutations:M,mutations:W}})(this.serializer,this.userId,m),v=[];let x=new We(((T,R)=>we(T.canonicalString(),R.canonicalString())));for(const T of a){const R=MS(this.userId,T.key.path,h);x=x.add(T.key.path.popLast()),v.push(u.put(y)),v.push(l.put(R,j4))}return x.forEach((T=>{v.push(this.indexManager.addToCollectionParentIndex(e,T))})),e.addOnCommittedListener((()=>{this.Xn[h]=m.keys()})),z.waitFor(v).next((()=>m))}))}lookupMutationBatch(e,t){return $i(e).get(t).next((r=>r?(me(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),oo(this.serializer,r)):null))}er(e,t){return this.Xn[t]?z.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((r=>{if(r){const a=r.keys();return this.Xn[t]=a,a}return null}))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=IDBKeyRange.lowerBound([this.userId,r]);let l=null;return $i(e).ee({index:fo,range:a},((u,h,m)=>{h.userId===this.userId&&(me(h.batchId>=r,47524,{tr:r}),l=oo(this.serializer,h)),m.done()})).next((()=>l))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=sa;return $i(e).ee({index:fo,range:t,reverse:!0},((a,l,u)=>{r=l.batchId,u.done()})).next((()=>r))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,sa],[this.userId,Number.POSITIVE_INFINITY]);return $i(e).J(fo,t).next((r=>r.map((a=>oo(this.serializer,a)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=am(this.userId,t.path),a=IDBKeyRange.lowerBound(r),l=[];return Bl(e).ee({range:a},((u,h,m)=>{const[y,v,x]=u,T=ys(v);if(y===this.userId&&t.path.isEqual(T))return $i(e).get(x).next((R=>{if(!R)throw de(61480,{nr:u,batchId:x});me(R.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:R.userId,batchId:x}),l.push(oo(this.serializer,R))}));m.done()})).next((()=>l))}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new We(we);const a=[];return t.forEach((l=>{const u=am(this.userId,l.path),h=IDBKeyRange.lowerBound(u),m=Bl(e).ee({range:h},((y,v,x)=>{const[T,R,V]=y,U=ys(R);T===this.userId&&l.path.isEqual(U)?r=r.add(V):x.done()}));a.push(m)})),z.waitFor(a).next((()=>this.rr(e,r)))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1,l=am(this.userId,r),u=IDBKeyRange.lowerBound(l);let h=new We(we);return Bl(e).ee({range:u},((m,y,v)=>{const[x,T,R]=m,V=ys(T);x===this.userId&&r.isPrefixOf(V)?V.length===a&&(h=h.add(R)):v.done()})).next((()=>this.rr(e,h)))}rr(e,t){const r=[],a=[];return t.forEach((l=>{a.push($i(e).get(l).next((u=>{if(u===null)throw de(35274,{batchId:l});me(u.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:u.userId,batchId:l}),r.push(oo(this.serializer,u))})))})),z.waitFor(a).next((()=>r))}removeMutationBatch(e,t){return K1(e.le,this.userId,t).next((r=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),z.forEach(r,(a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return z.resolve();const r=IDBKeyRange.lowerBound((function(u){return[u]})(this.userId)),a=[];return Bl(e).ee({range:r},((l,u,h)=>{if(l[0]===this.userId){const m=ys(l[1]);a.push(m)}else h.done()})).next((()=>{me(a.length===0,56720,{sr:a.map((l=>l.canonicalString()))})}))}))}containsKey(e,t){return Q1(e,this.userId,t)}_r(e){return $1(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:sa,lastStreamToken:""}))}}function Q1(n,e,t){const r=am(e,t.path),a=r[1],l=IDBKeyRange.lowerBound(r);let u=!1;return Bl(n).ee({range:l,X:!0},((h,m,y)=>{const[v,x,T]=h;v===e&&x===a&&(u=!0),y.done()})).next((()=>u))}function $i(n){return Wt(n,Mr)}function Bl(n){return Wt(n,nc)}function $1(n){return Wt(n,kd)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new No(0)}static cr(){return new No(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sj{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const r=new No(t.highestTargetId);return t.highestTargetId=r.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>_e.fromTimestamp(new He(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,r){return this.lr(e).next((a=>(a.highestListenSequenceNumber=t,r&&(a.lastRemoteSnapshotVersion=r.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.hr(e,a))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((r=>(r.targetCount+=1,this.Tr(t,r),this.hr(e,r))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Vl(e).delete(t.targetId))).next((()=>this.lr(e))).next((r=>(me(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r))))}removeTargets(e,t,r){let a=0;const l=[];return Vl(e).ee(((u,h)=>{const m=nd(h);m.sequenceNumber<=t&&r.get(m.targetId)===null&&(a++,l.push(this.removeTargetData(e,m)))})).next((()=>z.waitFor(l))).next((()=>a))}forEachTarget(e,t){return Vl(e).ee(((r,a)=>{const l=nd(a);t(l)}))}lr(e){return YE(e).get(Nm).next((t=>(me(t!==null,2888),t)))}hr(e,t){return YE(e).put(Nm,t)}Pr(e,t){return Vl(e).put(F1(this.serializer,t))}Tr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const r=Eo(t),a=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let l=null;return Vl(e).ee({range:a,index:LS},((u,h,m)=>{const y=nd(h);th(t,y.target)&&(l=y,m.done())})).next((()=>l))}addMatchingKeys(e,t,r){const a=[],l=Xi(e);return t.forEach((u=>{const h=bn(u.path);a.push(l.put({targetId:r,path:h})),a.push(this.referenceDelegate.addReference(e,r,u))})),z.waitFor(a)}removeMatchingKeys(e,t,r){const a=Xi(e);return z.forEach(t,(l=>{const u=bn(l.path);return z.waitFor([a.delete([r,u]),this.referenceDelegate.removeReference(e,r,l)])}))}removeMatchingKeysForTargetId(e,t){const r=Xi(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(a)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),a=Xi(e);let l=Ie();return a.ee({range:r,X:!0},((u,h,m)=>{const y=ys(u[1]),v=new ae(y);l=l.add(v)})).next((()=>l))}containsKey(e,t){const r=bn(t.path),a=IDBKeyRange.bound([r],[AS(r)],!1,!0);let l=0;return Xi(e).ee({index:Ov,X:!0,range:a},(([u,h],m,y)=>{u!==0&&(l++,y.done())})).next((()=>l>0))}At(e,t){return Vl(e).get(t).next((r=>r?nd(r):null))}}function Vl(n){return Wt(n,rc)}function YE(n){return Wt(n,_o)}function Xi(n){return Wt(n,sc)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WE="LruGarbageCollector",ij=1048576;function XE([n,e],[t,r]){const a=we(n,t);return a===0?we(e,r):a}class aj{constructor(e){this.Ir=e,this.buffer=new We(XE),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();XE(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Y1{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ne(WE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){xa(t)?ne(WE,"Ignoring IndexedDB error during garbage collection: ",t):await ba(t)}await this.Vr(3e5)}))}}class oj{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return z.resolve(Un.ce);const r=new aj(t);return this.mr.forEachTarget(e,(a=>r.Ar(a.sequenceNumber))).next((()=>this.mr.pr(e,(a=>r.Ar(a))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ne("LruGarbageCollector","Garbage collection skipped; disabled"),z.resolve($E)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ne("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),$E):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,a,l,u,h,m,y;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((x=>(x>this.params.maximumSequenceNumbersToCollect?(ne("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),a=this.params.maximumSequenceNumbersToCollect):a=x,u=Date.now(),this.nthSequenceNumber(e,a)))).next((x=>(r=x,h=Date.now(),this.removeTargets(e,r,t)))).next((x=>(l=x,m=Date.now(),this.removeOrphanedDocuments(e,r)))).next((x=>(y=Date.now(),jl()<=Ce.DEBUG&&ne("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-v}ms
	Determined least recently used ${a} in `+(h-u)+`ms
	Removed ${l} targets in `+(m-h)+`ms
	Removed ${x} documents in `+(y-m)+`ms
Total Duration: ${y-v}ms`),z.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:x}))))}}function W1(n,e){return new oj(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lj{constructor(e,t){this.db=e,this.garbageCollector=W1(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>t.next((a=>r+a))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((r,a)=>t(a)))}addReference(e,t,r){return $f(e,r)}removeReference(e,t,r){return $f(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return $f(e,t)}br(e,t){return(function(a,l){let u=!1;return $1(a).te((h=>Q1(a,h,l).next((m=>(m&&(u=!0),z.resolve(!m)))))).next((()=>u))})(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let l=0;return this.Sr(e,((u,h)=>{if(h<=t){const m=this.br(e,u).next((y=>{if(!y)return l++,r.getEntry(e,u).next((()=>(r.removeEntry(u,_e.min()),Xi(e).delete((function(x){return[0,bn(x.path)]})(u)))))}));a.push(m)}})).next((()=>z.waitFor(a))).next((()=>r.apply(e))).next((()=>l))}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return $f(e,t)}Sr(e,t){const r=Xi(e);let a,l=Un.ce;return r.ee({index:Ov},(([u,h],{path:m,sequenceNumber:y})=>{u===0?(l!==Un.ce&&t(new ae(ys(a)),l),l=y,a=m):l=Un.ce})).next((()=>{l!==Un.ce&&t(new ae(ys(a)),l)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function $f(n,e){return Xi(n).put((function(r,a){return{targetId:0,path:bn(r.path),sequenceNumber:a}})(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(){this.changes=new oi((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ut.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?z.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cj{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return no(e).put(r)}removeEntry(e,t,r){return no(e).delete((function(l,u){const h=l.path.toArray();return[h.slice(0,h.length-2),h[h.length-2],Pm(u),h[h.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next((r=>(r.byteSize+=t,this.Dr(e,r))))}getEntry(e,t){let r=ut.newInvalidDocument(t);return no(e).ee({index:om,range:IDBKeyRange.only(Ku(t))},((a,l)=>{r=this.Cr(t,l)})).next((()=>r))}vr(e,t){let r={size:0,document:ut.newInvalidDocument(t)};return no(e).ee({index:om,range:IDBKeyRange.only(Ku(t))},((a,l)=>{r={document:this.Cr(t,l),size:Vm(l)}})).next((()=>r))}getEntries(e,t){let r=Bn();return this.Fr(e,t,((a,l)=>{const u=this.Cr(a,l);r=r.insert(a,u)})).next((()=>r))}Mr(e,t){let r=Bn(),a=new at(ae.comparator);return this.Fr(e,t,((l,u)=>{const h=this.Cr(l,u);r=r.insert(l,h),a=a.insert(l,Vm(u))})).next((()=>({documents:r,Or:a})))}Fr(e,t,r){if(t.isEmpty())return z.resolve();let a=new We(eI);t.forEach((m=>a=a.add(m)));const l=IDBKeyRange.bound(Ku(a.first()),Ku(a.last())),u=a.getIterator();let h=u.getNext();return no(e).ee({index:om,range:l},((m,y,v)=>{const x=ae.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;h&&eI(h,x)<0;)r(h,null),h=u.getNext();h&&h.isEqual(x)&&(r(h,y),h=u.hasNext()?u.getNext():null),h?v.j(Ku(h)):v.done()})).next((()=>{for(;h;)r(h,null),h=u.hasNext()?u.getNext():null}))}getDocumentsMatchingQuery(e,t,r,a,l){const u=t.path,h=[u.popLast().toArray(),u.lastSegment(),Pm(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],m=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return no(e).J(IDBKeyRange.bound(h,m,!0)).next((y=>{l==null||l.incrementDocumentReadCount(y.length);let v=Bn();for(const x of y){const T=this.Cr(ae.fromSegments(x.prefixPath.concat(x.collectionGroup,x.documentId)),x);T.isFoundDocument()&&(rh(t,T)||a.has(T.key))&&(v=v.insert(T.key,T))}return v}))}getAllFromCollectionGroup(e,t,r,a){let l=Bn();const u=ZE(t,r),h=ZE(t,rr.max());return no(e).ee({index:jS,range:IDBKeyRange.bound(u,h,!0)},((m,y,v)=>{const x=this.Cr(ae.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);l=l.insert(x.key,x),l.size===a&&v.done()})).next((()=>l))}newChangeBuffer(e){return new uj(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return JE(e).get(b_).next((t=>(me(!!t,20021),t)))}Dr(e,t){return JE(e).put(b_,t)}Cr(e,t){if(t){const r=$M(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(_e.min())))return r}return ut.newInvalidDocument(e)}}function J1(n){return new cj(n)}class uj extends X1{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new oi((r=>r.toString()),((r,a)=>r.isEqual(a)))}applyChanges(e){const t=[];let r=0,a=new We(((l,u)=>we(l.canonicalString(),u.canonicalString())));return this.changes.forEach(((l,u)=>{const h=this.Br.get(l);if(t.push(this.Nr.removeEntry(e,l,h.readTime)),u.isValidDocument()){const m=VE(this.Nr.serializer,u);a=a.add(l.path.popLast());const y=Vm(m);r+=y-h.size,t.push(this.Nr.addEntry(e,l,m))}else if(r-=h.size,this.trackRemovals){const m=VE(this.Nr.serializer,u.convertToNoDocument(_e.min()));t.push(this.Nr.addEntry(e,l,m))}})),a.forEach((l=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,l))})),t.push(this.Nr.updateMetadata(e,r)),z.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((r=>(this.Br.set(t,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:r,Or:a})=>(a.forEach(((l,u)=>{this.Br.set(l,{size:u,readTime:r.get(l).readTime})})),r)))}}function JE(n){return Wt(n,Cd)}function no(n){return Wt(n,Rm)}function Ku(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function ZE(n,e){const t=e.documentKey.path.toArray();return[n,Pm(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function eI(n,e){const t=n.path.toArray(),r=e.path.toArray();let a=0;for(let l=0;l<t.length-2&&l<r.length-2;++l)if(a=we(t[l],r[l]),a)return a;return a=we(t.length,r.length),a||(a=we(t[t.length-2],r[r.length-2]),a||we(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dj{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(e,t,r,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=a}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(r=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(r!==null&&pd(r.mutation,a,zn.empty(),He.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Ie()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Ie()){const a=_s();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,r).next((l=>{let u=ed();return l.forEach(((h,m)=>{u=u.insert(h,m.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const r=_s();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Ie())))}populateOverlays(e,t,r){const a=[];return r.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((u,h)=>{t.set(u,h)}))}))}computeViews(e,t,r,a){let l=Bn();const u=gd(),h=(function(){return gd()})();return t.forEach(((m,y)=>{const v=r.get(y.key);a.has(y.key)&&(v===void 0||v.mutation instanceof li)?l=l.insert(y.key,y):v!==void 0?(u.set(y.key,v.mutation.getFieldMask()),pd(v.mutation,y,v.mutation.getFieldMask(),He.now())):u.set(y.key,zn.empty())})),this.recalculateAndSaveOverlays(e,l).next((m=>(m.forEach(((y,v)=>u.set(y,v))),t.forEach(((y,v)=>h.set(y,new dj(v,u.get(y)??null)))),h)))}recalculateAndSaveOverlays(e,t){const r=gd();let a=new at(((u,h)=>u-h)),l=Ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const h of u)h.keys().forEach((m=>{const y=t.get(m);if(y===null)return;let v=r.get(m)||zn.empty();v=h.applyToLocalView(y,v),r.set(m,v);const x=(a.get(h.batchId)||Ie()).add(m);a=a.insert(h.batchId,x)}))})).next((()=>{const u=[],h=a.getReverseIterator();for(;h.hasNext();){const m=h.getNext(),y=m.key,v=m.value,x=g1();v.forEach((T=>{if(!l.has(T)){const R=w1(t.get(T),r.get(T));R!==null&&x.set(T,R),l=l.add(T)}})),u.push(this.documentOverlayCache.saveOverlays(e,y,x))}return z.waitFor(u)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,a){return(function(u){return ae.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Bv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,a):this.getDocumentsMatchingCollectionQuery(e,t,r,a)}getNextDocuments(e,t,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,a).next((l=>{const u=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,a-l.size):z.resolve(_s());let h=tc,m=l;return u.next((y=>z.forEach(y,((v,x)=>(h<x.largestBatchId&&(h=x.largestBatchId),l.get(v)?z.resolve():this.remoteDocumentCache.getEntry(e,v).next((T=>{m=m.insert(v,T)}))))).next((()=>this.populateOverlays(e,y,l))).next((()=>this.computeViews(e,m,y,Ie()))).next((v=>({batchId:h,changes:m1(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ae(t)).next((r=>{let a=ed();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,a){const l=t.collectionGroup;let u=ed();return this.indexManager.getCollectionParents(e,l).next((h=>z.forEach(h,(m=>{const y=(function(x,T){return new ai(T,null,x.explicitOrderBy.slice(),x.filters.slice(),x.limit,x.limitType,x.startAt,x.endAt)})(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,r,a).next((v=>{v.forEach(((x,T)=>{u=u.insert(x,T)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,r,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,l,a)))).next((u=>{l.forEach(((m,y)=>{const v=y.getKey();u.get(v)===null&&(u=u.insert(v,ut.newInvalidDocument(v)))}));let h=ed();return u.forEach(((m,y)=>{const v=l.get(m);v!==void 0&&pd(v.mutation,y,zn.empty(),He.now()),rh(t,y)&&(h=h.insert(m,y))})),h}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hj{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return z.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:Pt(a.createTime)}})(t)),z.resolve()}getNamedQuery(e,t){return z.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(a){return{name:a.name,query:Wv(a.bundledQuery),readTime:Pt(a.readTime)}})(t)),z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fj{constructor(){this.overlays=new at(ae.comparator),this.qr=new Map}getOverlay(e,t){return z.resolve(this.overlays.get(t))}getOverlays(e,t){const r=_s();return z.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&r.set(a,l)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((a,l)=>{this.St(e,t,l)})),z.resolve()}removeOverlaysForBatchId(e,t,r){const a=this.qr.get(r);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(r)),z.resolve()}getOverlaysForCollection(e,t,r){const a=_s(),l=t.length+1,u=new ae(t.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const m=h.getNext().value,y=m.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&m.largestBatchId>r&&a.set(m.getKey(),m)}return z.resolve(a)}getOverlaysForCollectionGroup(e,t,r,a){let l=new at(((y,v)=>y-v));const u=this.overlays.getIterator();for(;u.hasNext();){const y=u.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>r){let v=l.get(y.largestBatchId);v===null&&(v=_s(),l=l.insert(y.largestBatchId,v)),v.set(y.getKey(),y)}}const h=_s(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((y,v)=>h.set(y,v))),!(h.size()>=a)););return z.resolve(h)}St(e,t,r){const a=this.overlays.get(r.key);if(a!==null){const u=this.qr.get(a.largestBatchId).delete(r.key);this.qr.set(a.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new Qv(t,r));let l=this.qr.get(t);l===void 0&&(l=Ie(),this.qr.set(t,l)),this.qr.set(t,l.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mj{constructor(){this.sessionToken=It.EMPTY_BYTE_STRING}getSessionToken(e){return z.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{constructor(){this.Qr=new We(en.$r),this.Ur=new We(en.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new en(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new en(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new ae(new De([])),r=new en(t,e),a=new en(t,e+1),l=[];return this.Ur.forEachInRange([r,a],(u=>{this.Gr(u),l.push(u.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ae(new De([])),r=new en(t,e),a=new en(t,e+1);let l=Ie();return this.Ur.forEachInRange([r,a],(u=>{l=l.add(u.key)})),l}containsKey(e){const t=new en(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class en{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ae.comparator(e.key,t.key)||we(e.Yr,t.Yr)}static Kr(e,t){return we(e.Yr,t.Yr)||ae.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gj{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new We(en.$r)}checkEmpty(e){return z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,a){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new Hv(l,t,r,a);this.mutationQueue.push(u);for(const h of a)this.Zr=this.Zr.add(new en(h.key,l)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return z.resolve(u)}lookupMutationBatch(e,t){return z.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=this.ei(r),l=a<0?0:a;return z.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(this.mutationQueue.length===0?sa:this.tr-1)}getAllMutationBatches(e){return z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new en(t,0),a=new en(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([r,a],(u=>{const h=this.Xr(u.Yr);l.push(h)})),z.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new We(we);return t.forEach((a=>{const l=new en(a,0),u=new en(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,u],(h=>{r=r.add(h.Yr)}))})),z.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1;let l=r;ae.isDocumentKey(l)||(l=l.child(""));const u=new en(new ae(l),0);let h=new We(we);return this.Zr.forEachWhile((m=>{const y=m.key.path;return!!r.isPrefixOf(y)&&(y.length===a&&(h=h.add(m.Yr)),!0)}),u),z.resolve(this.ti(h))}ti(e){const t=[];return e.forEach((r=>{const a=this.Xr(r);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){me(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return z.forEach(t.mutations,(a=>{const l=new en(a.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new en(t,0),a=this.Zr.firstAfterOrEqual(r);return z.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,z.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pj{constructor(e){this.ri=e,this.docs=(function(){return new at(ae.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,a=this.docs.get(r),l=a?a.size:0,u=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return z.resolve(r?r.document.mutableCopy():ut.newInvalidDocument(t))}getEntries(e,t){let r=Bn();return t.forEach((a=>{const l=this.docs.get(a);r=r.insert(a,l?l.document.mutableCopy():ut.newInvalidDocument(a))})),z.resolve(r)}getDocumentsMatchingQuery(e,t,r,a){let l=Bn();const u=t.path,h=new ae(u.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(h);for(;m.hasNext();){const{key:y,value:{document:v}}=m.getNext();if(!u.isPrefixOf(y.path))break;y.path.length>u.length+1||Dv(CS(v),r)<=0||(a.has(v.key)||rh(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return z.resolve(l)}getAllFromCollectionGroup(e,t,r,a){de(9500)}ii(e,t){return z.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new yj(this)}getSize(e){return z.resolve(this.size)}}class yj extends X1{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,a)=>{a.isValidDocument()?t.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(r)})),z.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _j{constructor(e){this.persistence=e,this.si=new oi((t=>Eo(t)),th),this.lastRemoteSnapshotVersion=_e.min(),this.highestTargetId=0,this.oi=0,this._i=new Zv,this.targetCount=0,this.ai=No.ur()}forEachTarget(e,t){return this.si.forEach(((r,a)=>t(a))),z.resolve()}getLastRemoteSnapshotVersion(e){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return z.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),z.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new No(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,z.resolve()}updateTargetData(e,t){return this.Pr(t),z.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,z.resolve()}removeTargets(e,t,r){let a=0;const l=[];return this.si.forEach(((u,h)=>{h.sequenceNumber<=t&&r.get(h.targetId)===null&&(this.si.delete(u),l.push(this.removeMatchingKeysForTargetId(e,h.targetId)),a++)})),z.waitFor(l).next((()=>a))}getTargetCount(e){return z.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return z.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),z.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((u=>{l.push(a.markPotentiallyOrphaned(e,u))})),z.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),z.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return z.resolve(r)}containsKey(e,t){return z.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eb{constructor(e,t){this.ui={},this.overlays={},this.ci=new Un(0),this.li=!1,this.li=!0,this.hi=new mj,this.referenceDelegate=e(this),this.Pi=new _j(this),this.indexManager=new nj,this.remoteDocumentCache=(function(a){return new pj(a)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new B1(t),this.Ii=new hj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new fj,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new gj(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){ne("MemoryPersistence","Starting transaction:",e);const a=new vj(this.ci.next());return this.referenceDelegate.Ei(),r(a).next((l=>this.referenceDelegate.di(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ai(e,t){return z.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class vj extends PS{constructor(e){super(),this.currentSequenceNumber=e}}class pg{constructor(e){this.persistence=e,this.Ri=new Zv,this.Vi=null}static mi(e){return new pg(e)}get fi(){if(this.Vi)return this.Vi;throw de(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),z.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),z.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),z.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((a=>this.fi.add(a.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.fi.add(l.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.fi,(r=>{const a=ae.fromPath(r);return this.gi(e,a).next((l=>{l||t.removeEntry(a,_e.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return z.or([()=>z.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Mm{constructor(e,t){this.persistence=e,this.pi=new oi((r=>bn(r.path)),((r,a)=>r.isEqual(a))),this.garbageCollector=W1(this,t)}static mi(e,t){return new Mm(e,t)}Ei(){}di(e){return z.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((a=>r+a))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return z.forEach(this.pi,((r,a)=>this.br(e,r,a).next((l=>l?z.resolve():t(a)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ii(e,(u=>this.br(e,u,t).next((h=>{h||(r++,l.removeEntry(u,_e.min()))})))).next((()=>l.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),z.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),z.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),z.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),z.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=cm(e.data.value)),t}br(e,t,r){return z.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.pi.get(t);return z.resolve(a!==void 0&&a>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bj{constructor(e){this.serializer=e}k(e,t,r,a){const l=new ig("createOrUpgrade",t);r<1&&a>=1&&((function(m){m.createObjectStore(eh)})(e),(function(m){m.createObjectStore(kd,{keyPath:M4}),m.createObjectStore(Mr,{keyPath:dE,autoIncrement:!0}).createIndex(fo,hE,{unique:!0}),m.createObjectStore(nc)})(e),tI(e),(function(m){m.createObjectStore(io)})(e));let u=z.resolve();return r<3&&a>=3&&(r!==0&&((function(m){m.deleteObjectStore(sc),m.deleteObjectStore(rc),m.deleteObjectStore(_o)})(e),tI(e)),u=u.next((()=>(function(m){const y=m.store(_o),v={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:_e.min().toTimestamp(),targetCount:0};return y.put(Nm,v)})(l)))),r<4&&a>=4&&(r!==0&&(u=u.next((()=>(function(m,y){return y.store(Mr).J().next((x=>{m.deleteObjectStore(Mr),m.createObjectStore(Mr,{keyPath:dE,autoIncrement:!0}).createIndex(fo,hE,{unique:!0});const T=y.store(Mr),R=x.map((V=>T.put(V)));return z.waitFor(R)}))})(e,l)))),u=u.next((()=>{(function(m){m.createObjectStore(ic,{keyPath:H4})})(e)}))),r<5&&a>=5&&(u=u.next((()=>this.yi(l)))),r<6&&a>=6&&(u=u.next((()=>((function(m){m.createObjectStore(Cd)})(e),this.wi(l))))),r<7&&a>=7&&(u=u.next((()=>this.Si(l)))),r<8&&a>=8&&(u=u.next((()=>this.bi(e,l)))),r<9&&a>=9&&(u=u.next((()=>{(function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&a>=10&&(u=u.next((()=>this.Di(l)))),r<11&&a>=11&&(u=u.next((()=>{(function(m){m.createObjectStore(ag,{keyPath:K4})})(e),(function(m){m.createObjectStore(og,{keyPath:Q4})})(e)}))),r<12&&a>=12&&(u=u.next((()=>{(function(m){const y=m.createObjectStore(lg,{keyPath:eM});y.createIndex(w_,tM,{unique:!1}),y.createIndex(BS,nM,{unique:!1})})(e)}))),r<13&&a>=13&&(u=u.next((()=>(function(m){const y=m.createObjectStore(Rm,{keyPath:L4});y.createIndex(om,U4),y.createIndex(jS,z4)})(e))).next((()=>this.Ci(e,l))).next((()=>e.deleteObjectStore(io)))),r<14&&a>=14&&(u=u.next((()=>this.Fi(e,l)))),r<15&&a>=15&&(u=u.next((()=>(function(m){m.createObjectStore(Vv,{keyPath:$4,autoIncrement:!0}).createIndex(x_,Y4,{unique:!1}),m.createObjectStore(hd,{keyPath:W4}).createIndex(US,X4,{unique:!1}),m.createObjectStore(fd,{keyPath:J4}).createIndex(zS,Z4,{unique:!1})})(e)))),r<16&&a>=16&&(u=u.next((()=>{t.objectStore(hd).clear()})).next((()=>{t.objectStore(fd).clear()}))),r<17&&a>=17&&(u=u.next((()=>{(function(m){m.createObjectStore(Mv,{keyPath:rM})})(e)}))),r<18&&a>=18&&iA()&&(u=u.next((()=>{t.objectStore(hd).clear()})).next((()=>{t.objectStore(fd).clear()}))),u}wi(e){let t=0;return e.store(io).ee(((r,a)=>{t+=Vm(a)})).next((()=>{const r={byteSize:t};return e.store(Cd).put(b_,r)}))}yi(e){const t=e.store(kd),r=e.store(Mr);return t.J().next((a=>z.forEach(a,(l=>{const u=IDBKeyRange.bound([l.userId,sa],[l.userId,l.lastAcknowledgedBatchId]);return r.J(fo,u).next((h=>z.forEach(h,(m=>{me(m.userId===l.userId,18650,"Cannot process batch from unexpected user",{batchId:m.batchId});const y=oo(this.serializer,m);return K1(e,l.userId,y).next((()=>{}))}))))}))))}Si(e){const t=e.store(sc),r=e.store(io);return e.store(_o).get(Nm).next((a=>{const l=[];return r.ee(((u,h)=>{const m=new De(u),y=(function(x){return[0,bn(x)]})(m);l.push(t.get(y).next((v=>v?z.resolve():(x=>t.put({targetId:0,path:bn(x),sequenceNumber:a.highestListenSequenceNumber}))(m))))})).next((()=>z.waitFor(l)))}))}bi(e,t){e.createObjectStore(Dd,{keyPath:G4});const r=t.store(Dd),a=new Jv,l=u=>{if(a.add(u)){const h=u.lastSegment(),m=u.popLast();return r.put({collectionId:h,parent:bn(m)})}};return t.store(io).ee({X:!0},((u,h)=>{const m=new De(u);return l(m.popLast())})).next((()=>t.store(nc).ee({X:!0},(([u,h,m],y)=>{const v=ys(h);return l(v.popLast())}))))}Di(e){const t=e.store(rc);return t.ee(((r,a)=>{const l=nd(a),u=F1(this.serializer,l);return t.put(u)}))}Ci(e,t){const r=t.store(io),a=[];return r.ee(((l,u)=>{const h=t.store(Rm),m=(function(x){return x.document?new ae(De.fromString(x.document.name).popFirst(5)):x.noDocument?ae.fromSegments(x.noDocument.path):x.unknownDocument?ae.fromSegments(x.unknownDocument.path):de(36783)})(u).path.toArray(),y={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};a.push(h.put(y))})).next((()=>z.waitFor(a)))}Fi(e,t){const r=t.store(Mr),a=J1(this.serializer),l=new eb(pg.mi,this.serializer.yt);return r.J().next((u=>{const h=new Map;return u.forEach((m=>{let y=h.get(m.userId)??Ie();oo(this.serializer,m).keys().forEach((v=>y=y.add(v))),h.set(m.userId,y)})),z.forEach(h,((m,y)=>{const v=new tn(y),x=mg.wt(this.serializer,v),T=l.getIndexManager(v),R=gg.wt(v,this.serializer,T,l.referenceDelegate);return new Z1(a,R,x,T).recalculateAndSaveOverlaysForDocumentKeys(new T_(t,Un.ce),m).next()}))}))}}function tI(n){n.createObjectStore(sc,{keyPath:F4}).createIndex(Ov,q4,{unique:!0}),n.createObjectStore(rc,{keyPath:"targetId"}).createIndex(LS,B4,{unique:!0}),n.createObjectStore(_o)}const Yi="IndexedDbPersistence",Yy=18e5,Wy=5e3,Xy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",eR="main";class tb{constructor(e,t,r,a,l,u,h,m,y,v,x=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Mi=l,this.window=u,this.document=h,this.xi=y,this.Oi=v,this.Ni=x,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=T=>Promise.resolve(),!tb.v())throw new te(H.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new lj(this,a),this.$i=t+eR,this.serializer=new B1(m),this.Ui=new vs(this.$i,this.Ni,new bj(this.serializer)),this.hi=new WM,this.Pi=new sj(this.referenceDelegate,this.serializer),this.remoteDocumentCache=J1(this.serializer),this.Ii=new YM,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,v===!1&&Dt(Yi,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new te(H.FAILED_PRECONDITION,Xy);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new Un(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Yf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(xa(e))return ne(Yi,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ne(Yi,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return Qu(e).get(kl).next((t=>z.resolve(this.es(t))))}ts(e){return Yf(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Yy)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const r=Wt(t,ic);return r.J().next((a=>{const l=this.ss(a,Yy),u=a.filter((h=>l.indexOf(h)===-1));return z.forEach(u,(h=>r.delete(h.clientId))).next((()=>u))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?z.resolve(!0):Qu(e).get(kl).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Wy)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new te(H.FAILED_PRECONDITION,Xy);return!1}}return!(!this.networkEnabled||!this.inForeground)||Yf(e).J().next((r=>this.ss(r,Wy).find((a=>{if(this.clientId!==a.clientId){const l=!this.networkEnabled&&a.networkEnabled,u=!this.inForeground&&a.inForeground,h=this.networkEnabled===a.networkEnabled;if(l||u&&h)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&ne(Yi,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[eh,ic],(e=>{const t=new T_(e,Un.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((r=>this.rs(r.updateTimeMs,t)&&!this.us(r.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>Yf(e).J().next((t=>this.ss(t,Yy).map((r=>r.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return gg.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new rj(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return mg.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,r){ne(Yi,"Starting transaction:",e);const a=t==="readonly"?"readonly":"readwrite",l=(function(m){return m===18?aM:m===17?HS:m===16?iM:m===15?jv:m===14?GS:m===13?qS:m===12?sM:m===11?FS:void de(60245)})(this.Ni);let u;return this.Ui.runTransaction(e,a,l,(h=>(u=new T_(h,this.ci?this.ci.next():Un.ce),t==="readwrite-primary"?this.Hi(u).next((m=>!!m||this.Yi(u))).next((m=>{if(!m)throw Dt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new te(H.FAILED_PRECONDITION,DS);return r(u)})).next((m=>this.Xi(u).next((()=>m)))):this.Is(u).next((()=>r(u)))))).then((h=>(u.raiseOnCommittedEvent(),h)))}Is(e){return Qu(e).get(kl).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Wy)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new te(H.FAILED_PRECONDITION,Xy)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Qu(e).put(kl,t)}static v(){return vs.v()}Zi(e){const t=Qu(e);return t.get(kl).next((r=>this.es(r)?(ne(Yi,"Releasing primary lease."),t.delete(kl)):z.resolve()))}rs(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(Dt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const t=/(?:Version|Mobile)\/1[456]/;sA()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var t;try{const r=((t=this.Ki)==null?void 0:t.getItem(this._s(e)))!==null;return ne(Yi,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Dt(Yi,"Failed to get zombied client id.",r),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){Dt("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Qu(n){return Wt(n,eh)}function Yf(n){return Wt(n,ic)}function nb(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rb{constructor(e,t,r,a){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=a}static As(e,t){let r=Ie(),a=Ie();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new rb(e,t.fromCache,r,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return sA()?8:OS(vt())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,a){const l={result:null};return this.ys(e,t).next((u=>{l.result=u})).next((()=>{if(!l.result)return this.ws(e,t,a,r).next((u=>{l.result=u}))})).next((()=>{if(l.result)return;const u=new xj;return this.Ss(e,t,u).next((h=>{if(l.result=h,this.Vs)return this.bs(e,t,u,h.size)}))})).next((()=>l.result))}bs(e,t,r,a){return r.documentReadCount<this.fs?(jl()<=Ce.DEBUG&&ne("QueryEngine","SDK will not create cache indexes for query:",Ll(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),z.resolve()):(jl()<=Ce.DEBUG&&ne("QueryEngine","Query:",Ll(t),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.gs*a?(jl()<=Ce.DEBUG&&ne("QueryEngine","The SDK decides to create cache indexes for query:",Ll(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Nn(t))):z.resolve())}ys(e,t){if(IE(t))return z.resolve(null);let r=Nn(t);return this.indexManager.getIndexType(e,r).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=Dm(t,null,"F"),r=Nn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((l=>{const u=Ie(...l);return this.ps.getDocuments(e,u).next((h=>this.indexManager.getMinOffset(e,r).next((m=>{const y=this.Ds(t,h);return this.Cs(t,y,u,m.readTime)?this.ys(e,Dm(t,null,"F")):this.vs(e,y,t,m)}))))})))))}ws(e,t,r,a){return IE(t)||a.isEqual(_e.min())?z.resolve(null):this.ps.getDocuments(e,r).next((l=>{const u=this.Ds(t,l);return this.Cs(t,u,r,a)?z.resolve(null):(jl()<=Ce.DEBUG&&ne("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Ll(t)),this.vs(e,u,t,kS(a,tc)).next((h=>h)))}))}Ds(e,t){let r=new We(h1(e));return t.forEach(((a,l)=>{rh(e,l)&&(r=r.add(l))})),r}Cs(e,t,r,a){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ss(e,t,r){return jl()<=Ce.DEBUG&&ne("QueryEngine","Using full collection scan to execute query:",Ll(t)),this.ps.getDocumentsMatchingQuery(e,t,rr.min(),r)}vs(e,t,r,a){return this.ps.getDocumentsMatchingQuery(e,r,a).next((l=>(t.forEach((u=>{l=l.insert(u.key,u)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sb="LocalStore",wj=3e8;class Tj{constructor(e,t,r,a){this.persistence=e,this.Fs=t,this.serializer=a,this.Ms=new at(we),this.xs=new oi((l=>Eo(l)),th),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Z1(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function nR(n,e,t,r){return new Tj(n,e,t,r)}async function rR(n,e){const t=ce(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let a;return t.mutationQueue.getAllMutationBatches(r).next((l=>(a=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((l=>{const u=[],h=[];let m=Ie();for(const y of a){u.push(y.batchId);for(const v of y.mutations)m=m.add(v.key)}for(const y of l){h.push(y.batchId);for(const v of y.mutations)m=m.add(v.key)}return t.localDocuments.getDocuments(r,m).next((y=>({Ls:y,removedBatchIds:u,addedBatchIds:h})))}))}))}function Ej(n,e){const t=ce(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const a=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(h,m,y,v){const x=y.batch,T=x.keys();let R=z.resolve();return T.forEach((V=>{R=R.next((()=>v.getEntry(m,V))).next((U=>{const M=y.docVersions.get(V);me(M!==null,48541),U.version.compareTo(M)<0&&(x.applyToRemoteDocument(U,y),U.isValidDocument()&&(U.setReadTime(y.commitVersion),v.addEntry(U)))}))})),R.next((()=>h.mutationQueue.removeMutationBatch(m,x)))})(t,r,e,l).next((()=>l.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(h){let m=Ie();for(let y=0;y<h.mutationResults.length;++y)h.mutationResults[y].transformResults.length>0&&(m=m.add(h.batch.mutations[y].key));return m})(e)))).next((()=>t.localDocuments.getDocuments(r,a)))}))}function sR(n){const e=ce(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function Ij(n,e){const t=ce(n),r=e.snapshotVersion;let a=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const u=t.Ns.newChangeBuffer({trackRemovals:!0});a=t.Ms;const h=[];e.targetChanges.forEach(((v,x)=>{const T=a.get(x);if(!T)return;h.push(t.Pi.removeMatchingKeys(l,v.removedDocuments,x).next((()=>t.Pi.addMatchingKeys(l,v.addedDocuments,x))));let R=T.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(x)!==null?R=R.withResumeToken(It.EMPTY_BYTE_STRING,_e.min()).withLastLimboFreeSnapshotVersion(_e.min()):v.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(v.resumeToken,r)),a=a.insert(x,R),(function(U,M,W){return U.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=wj?!0:W.addedDocuments.size+W.modifiedDocuments.size+W.removedDocuments.size>0})(T,R,v)&&h.push(t.Pi.updateTargetData(l,R))}));let m=Bn(),y=Ie();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))})),h.push(iR(l,u,e.documentUpdates).next((v=>{m=v.ks,y=v.qs}))),!r.isEqual(_e.min())){const v=t.Pi.getLastRemoteSnapshotVersion(l).next((x=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,r)));h.push(v)}return z.waitFor(h).next((()=>u.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,m,y))).next((()=>m))})).then((l=>(t.Ms=a,l)))}function iR(n,e,t){let r=Ie(),a=Ie();return t.forEach((l=>r=r.add(l))),e.getEntries(n,r).next((l=>{let u=Bn();return t.forEach(((h,m)=>{const y=l.get(h);m.isFoundDocument()!==y.isFoundDocument()&&(a=a.add(h)),m.isNoDocument()&&m.version.isEqual(_e.min())?(e.removeEntry(h,m.readTime),u=u.insert(h,m)):!y.isValidDocument()||m.version.compareTo(y.version)>0||m.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(m),u=u.insert(h,m)):ne(sb,"Ignoring outdated watch update for ",h,". Current version:",y.version," Watch version:",m.version)})),{ks:u,qs:a}}))}function Aj(n,e){const t=ce(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=sa),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function hc(n,e){const t=ce(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let a;return t.Pi.getTargetData(r,e).next((l=>l?(a=l,z.resolve(a)):t.Pi.allocateTargetId(r).next((u=>(a=new Ys(e,u,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,a).next((()=>a)))))))})).then((r=>{const a=t.Ms.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function fc(n,e,t){const r=ce(n),a=r.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",l,(u=>r.persistence.referenceDelegate.removeTarget(u,a)))}catch(u){if(!xa(u))throw u;ne(sb,`Failed to update sequence numbers for target ${e}: ${u}`)}r.Ms=r.Ms.remove(e),r.xs.delete(a.target)}function jm(n,e,t){const r=ce(n);let a=_e.min(),l=Ie();return r.persistence.runTransaction("Execute query","readwrite",(u=>(function(m,y,v){const x=ce(m),T=x.xs.get(v);return T!==void 0?z.resolve(x.Ms.get(T)):x.Pi.getTargetData(y,v)})(r,u,Nn(e)).next((h=>{if(h)return a=h.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(u,h.targetId).next((m=>{l=m}))})).next((()=>r.Fs.getDocumentsMatchingQuery(u,e,t?a:_e.min(),t?l:Ie()))).next((h=>(lR(r,d1(e),h),{documents:h,Qs:l})))))}function aR(n,e){const t=ce(n),r=ce(t.Pi),a=t.Ms.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",(l=>r.At(l,e).next((u=>u?u.target:null))))}function oR(n,e){const t=ce(n),r=t.Os.get(e)||_e.min();return t.persistence.runTransaction("Get new document changes","readonly",(a=>t.Ns.getAllFromCollectionGroup(a,e,kS(r,tc),Number.MAX_SAFE_INTEGER))).then((a=>(lR(t,e,a),a)))}function lR(n,e,t){let r=n.Os.get(e)||_e.min();t.forEach(((a,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)})),n.Os.set(e,r)}async function Sj(n,e,t,r){const a=ce(n);let l=Ie(),u=Bn();for(const y of t){const v=e.$s(y.metadata.name);y.document&&(l=l.add(v));const x=e.Us(y);x.setReadTime(e.Ks(y.metadata.readTime)),u=u.insert(v,x)}const h=a.Ns.newChangeBuffer({trackRemovals:!0}),m=await hc(a,(function(v){return Nn(Ec(De.fromString(`__bundle__/docs/${v}`)))})(r));return a.persistence.runTransaction("Apply bundle documents","readwrite",(y=>iR(y,h,u).next((v=>(h.apply(y),v))).next((v=>a.Pi.removeMatchingKeysForTargetId(y,m.targetId).next((()=>a.Pi.addMatchingKeys(y,l,m.targetId))).next((()=>a.localDocuments.getLocalViewOfDocuments(y,v.ks,v.qs))).next((()=>v.ks))))))}async function Rj(n,e,t=Ie()){const r=await hc(n,Nn(Wv(e.bundledQuery))),a=ce(n);return a.persistence.runTransaction("Save named query","readwrite",(l=>{const u=Pt(e.readTime);if(r.snapshotVersion.compareTo(u)>=0)return a.Ii.saveNamedQuery(l,e);const h=r.withResumeToken(It.EMPTY_BYTE_STRING,u);return a.Ms=a.Ms.insert(h.targetId,h),a.Pi.updateTargetData(l,h).next((()=>a.Pi.removeMatchingKeysForTargetId(l,r.targetId))).next((()=>a.Pi.addMatchingKeys(l,t,r.targetId))).next((()=>a.Ii.saveNamedQuery(l,e)))}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cR="firestore_clients";function nI(n,e){return`${cR}_${n}_${e}`}const uR="firestore_mutations";function rI(n,e,t){let r=`${uR}_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const dR="firestore_targets";function Jy(n,e){return`${dR}_${n}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const us="SharedClientState";class Lm{constructor(e,t,r,a){this.user=e,this.batchId=t,this.state=r,this.error=a}static Ws(e,t,r){const a=JSON.parse(r);let l,u=typeof a=="object"&&["pending","acknowledged","rejected"].indexOf(a.state)!==-1&&(a.error===void 0||typeof a.error=="object");return u&&a.error&&(u=typeof a.error.message=="string"&&typeof a.error.code=="string",u&&(l=new te(a.error.code,a.error.message))),u?new Lm(e,t,a.state,l):(Dt(us,`Failed to parse mutation state for ID '${t}': ${r}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class yd{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ws(e,t){const r=JSON.parse(t);let a,l=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return l&&r.error&&(l=typeof r.error.message=="string"&&typeof r.error.code=="string",l&&(a=new te(r.error.code,r.error.message))),l?new yd(e,r.state,a):(Dt(us,`Failed to parse target state for ID '${e}': ${t}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Um{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ws(e,t){const r=JSON.parse(t);let a=typeof r=="object"&&r.activeTargetIds instanceof Array,l=Fv();for(let u=0;a&&u<r.activeTargetIds.length;++u)a=VS(r.activeTargetIds[u]),l=l.add(r.activeTargetIds[u]);return a?new Um(e,l):(Dt(us,`Failed to parse client data for instance '${e}': ${t}`),null)}}class ib{constructor(e,t){this.clientId=e,this.onlineState=t}static Ws(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new ib(t.clientId,t.onlineState):(Dt(us,`Failed to parse online state: ${e}`),null)}}class L_{constructor(){this.activeTargetIds=Fv()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Zy{constructor(e,t,r,a,l){this.window=e,this.Mi=t,this.persistenceKey=r,this.Js=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new at(we),this.started=!1,this.Xs=[];const u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.eo=nI(this.persistenceKey,this.Js),this.no=(function(m){return`firestore_sequence_number_${m}`})(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new L_),this.ro=new RegExp(`^${cR}_${u}_([^_]*)$`),this.io=new RegExp(`^${uR}_${u}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${dR}_${u}_(\\d+)$`),this.oo=(function(m){return`firestore_online_state_${m}`})(this.persistenceKey),this._o=(function(m){return`firestore_bundle_loaded_v2_${m}`})(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const r of e){if(r===this.Js)continue;const a=this.getItem(nI(this.persistenceKey,r));if(a){const l=Um.Ws(r,a);l&&(this.Zs=this.Zs.insert(l.clientId,l))}}this.ao();const t=this.storage.getItem(this.oo);if(t){const r=this.uo(t);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let t=!1;return this.Zs.forEach(((r,a)=>{a.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,t,r){this.ho(e,t,r),this.Po(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const a=this.storage.getItem(Jy(this.persistenceKey,e));if(a){const l=yd.Ws(e,a);l&&(r=l.state)}}return t&&this.To.zs(e),this.ao(),r}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Jy(this.persistenceKey,e))}updateQueryState(e,t,r){this.Io(e,t,r)}handleUserChange(e,t,r){t.forEach((a=>{this.Po(a)})),this.currentUser=e,r.forEach((a=>{this.addPendingMutation(a)}))}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ne(us,"READ",e,t),t}setItem(e,t){ne(us,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){ne(us,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const t=e;if(t.storageArea===this.storage){if(ne(us,"EVENT",t.key,t.newValue),t.key===this.eo)return void Dt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.ro.test(t.key)){if(t.newValue==null){const r=this.Ro(t.key);return this.Vo(r,null)}{const r=this.mo(t.key,t.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(t.key)){if(t.newValue!==null){const r=this.fo(t.key,t.newValue);if(r)return this.po(r)}}else if(this.so.test(t.key)){if(t.newValue!==null){const r=this.yo(t.key,t.newValue);if(r)return this.wo(r)}}else if(t.key===this.oo){if(t.newValue!==null){const r=this.uo(t.newValue);if(r)return this.co(r)}}else if(t.key===this.no){const r=(function(l){let u=Un.ce;if(l!=null)try{const h=JSON.parse(l);me(typeof h=="number",30636,{So:l}),u=h}catch(h){Dt(us,"Failed to read sequence number from WebStorage",h)}return u})(t.newValue);r!==Un.ce&&this.sequenceNumberHandler(r)}else if(t.key===this._o){const r=this.bo(t.newValue);await Promise.all(r.map((a=>this.syncEngine.Do(a))))}}}else this.Xs.push(t)}))}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,t,r){const a=new Lm(this.currentUser,e,t,r),l=rI(this.persistenceKey,this.currentUser,e);this.setItem(l,a.Gs())}Po(e){const t=rI(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Eo(e){const t={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(t))}Io(e,t,r){const a=Jy(this.persistenceKey,e),l=new yd(e,t,r);this.setItem(a,l.Gs())}Ao(e){const t=JSON.stringify(Array.from(e));this.setItem(this._o,t)}Ro(e){const t=this.ro.exec(e);return t?t[1]:null}mo(e,t){const r=this.Ro(e);return Um.Ws(r,t)}fo(e,t){const r=this.io.exec(e),a=Number(r[1]),l=r[2]!==void 0?r[2]:null;return Lm.Ws(new tn(l),a,t)}yo(e,t){const r=this.so.exec(e),a=Number(r[1]);return yd.Ws(a,t)}uo(e){return ib.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);ne(us,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,t){const r=t?this.Zs.insert(e,t):this.Zs.remove(e),a=this.lo(this.Zs),l=this.lo(r),u=[],h=[];return l.forEach((m=>{a.has(m)||u.push(m)})),a.forEach((m=>{l.has(m)||h.push(m)})),this.syncEngine.Fo(u,h).then((()=>{this.Zs=r}))}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let t=Fv();return e.forEach(((r,a)=>{t=t.unionWith(a.activeTargetIds)})),t}}class hR{constructor(){this.Mo=new L_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new L_,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nj{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sI="ConnectivityMonitor";class iI{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ne(sI,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ne(sI,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wf=null;function U_(){return Wf===null?Wf=(function(){return 268435456+Math.round(2147483648*Math.random())})():Wf++,"0x"+Wf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e_="RestConnection",kj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Cj{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${a}`,this.Wo=this.databaseId.database===E_?`project_id=${r}`:`project_id=${r}&database_id=${a}`}Go(e,t,r,a,l){const u=U_(),h=this.zo(e,t.toUriEncodedString());ne(e_,`Sending RPC '${e}' ${u}:`,h,r);const m={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(m,a,l);const{host:y}=new URL(h),v=_a(y);return this.Jo(e,h,m,r,v).then((x=>(ne(e_,`Received RPC '${e}' ${u}: `,x),x)),(x=>{throw Es(e_,`RPC '${e}' ${u} failed with error: `,x,"url: ",h,"request:",r),x}))}Ho(e,t,r,a,l,u){return this.Go(e,t,r,a,l)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Tc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),r&&r.headers.forEach(((a,l)=>e[l]=a))}zo(e,t){const r=kj[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dj{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gn="WebChannelConnection";class Pj extends Cj{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,a,l){const u=U_();return new Promise(((h,m)=>{const y=new vS;y.setWithCredentials(!0),y.listenOnce(bS.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case sm.NO_ERROR:const x=y.getResponseJson();ne(gn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(x)),h(x);break;case sm.TIMEOUT:ne(gn,`RPC '${e}' ${u} timed out`),m(new te(H.DEADLINE_EXCEEDED,"Request time out"));break;case sm.HTTP_ERROR:const T=y.getStatus();if(ne(gn,`RPC '${e}' ${u} failed with status:`,T,"response text:",y.getResponseText()),T>0){let R=y.getResponseJson();Array.isArray(R)&&(R=R[0]);const V=R==null?void 0:R.error;if(V&&V.status&&V.message){const U=(function(W){const Y=W.toLowerCase().replace(/_/g,"-");return Object.values(H).indexOf(Y)>=0?Y:H.UNKNOWN})(V.status);m(new te(U,V.message))}else m(new te(H.UNKNOWN,"Server responded with status "+y.getStatus()))}else m(new te(H.UNAVAILABLE,"Connection failed."));break;default:de(9055,{l_:e,streamId:u,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{ne(gn,`RPC '${e}' ${u} completed.`)}}));const v=JSON.stringify(a);ne(gn,`RPC '${e}' ${u} sending request:`,a),y.send(t,"POST",v,r,15)}))}T_(e,t,r){const a=U_(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=TS(),h=wS(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(m.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(m.useFetchStreams=!0),this.jo(m.initMessageHeaders,t,r),m.encodeInitMessageHeaders=!0;const v=l.join("");ne(gn,`Creating RPC '${e}' stream ${a}: ${v}`,m);const x=u.createWebChannel(v,m);this.I_(x);let T=!1,R=!1;const V=new Dj({Yo:M=>{R?ne(gn,`Not sending because RPC '${e}' stream ${a} is closed:`,M):(T||(ne(gn,`Opening RPC '${e}' stream ${a} transport.`),x.open(),T=!0),ne(gn,`RPC '${e}' stream ${a} sending:`,M),x.send(M))},Zo:()=>x.close()}),U=(M,W,Y)=>{M.listen(W,(X=>{try{Y(X)}catch(oe){setTimeout((()=>{throw oe}),0)}}))};return U(x,Zu.EventType.OPEN,(()=>{R||(ne(gn,`RPC '${e}' stream ${a} transport opened.`),V.o_())})),U(x,Zu.EventType.CLOSE,(()=>{R||(R=!0,ne(gn,`RPC '${e}' stream ${a} transport closed`),V.a_(),this.E_(x))})),U(x,Zu.EventType.ERROR,(M=>{R||(R=!0,Es(gn,`RPC '${e}' stream ${a} transport errored. Name:`,M.name,"Message:",M.message),V.a_(new te(H.UNAVAILABLE,"The operation could not be completed")))})),U(x,Zu.EventType.MESSAGE,(M=>{var W;if(!R){const Y=M.data[0];me(!!Y,16349);const X=Y,oe=(X==null?void 0:X.error)||((W=X[0])==null?void 0:W.error);if(oe){ne(gn,`RPC '${e}' stream ${a} received error:`,oe);const ye=oe.status;let he=(function(S){const k=Gt[S];if(k!==void 0)return I1(k)})(ye),C=oe.message;he===void 0&&(he=H.INTERNAL,C="Unknown error status: "+ye+" with message "+oe.message),R=!0,V.a_(new te(he,C)),x.close()}else ne(gn,`RPC '${e}' stream ${a} received:`,Y),V.u_(Y)}})),U(h,xS.STAT_EVENT,(M=>{M.stat===y_.PROXY?ne(gn,`RPC '${e}' stream ${a} detected buffering proxy`):M.stat===y_.NOPROXY&&ne(gn,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{V.__()}),0),V}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fR(){return typeof window<"u"?window:null}function mm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oh(n){return new LM(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ab{constructor(e,t,r=1e3,a=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=a,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-r);a>0&&ne("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aI="PersistentStream";class mR{constructor(e,t,r,a,l,u,h,m){this.Mi=e,this.S_=r,this.b_=a,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new ab(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===H.RESOURCE_EXHAUSTED?(Dt(t.toString()),Dt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===H.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,a])=>{this.D_===t&&this.G_(r,a)}),(r=>{e((()=>{const a=new te(H.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(a)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((a=>{r((()=>this.z_(a)))})),this.stream.onMessage((a=>{r((()=>++this.F_==1?this.J_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ne(aI,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ne(aI,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Oj extends mR{constructor(e,t,r,a,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,a,u),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=BM(this.serializer,e),r=(function(l){if(!("targetChange"in l))return _e.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?_e.min():u.readTime?Pt(u.readTime):_e.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=P_(this.serializer),t.addTarget=(function(l,u){let h;const m=u.target;if(h=km(m)?{documents:V1(l,m)}:{query:M1(l,m).ft},h.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){h.resumeToken=N1(l,u.resumeToken);const y=C_(l,u.expectedCount);y!==null&&(h.expectedCount=y)}else if(u.snapshotVersion.compareTo(_e.min())>0){h.readTime=dc(l,u.snapshotVersion.toTimestamp());const y=C_(l,u.expectedCount);y!==null&&(h.expectedCount=y)}return h})(this.serializer,e);const r=qM(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=P_(this.serializer),t.removeTarget=e,this.q_(t)}}class Vj extends mR{constructor(e,t,r,a,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,a,u),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return me(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,me(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){me(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=FM(e.writeResults,e.commitTime),r=Pt(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=P_(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>Ld(this.serializer,r)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mj{}class jj extends Mj{constructor(e,t,r,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new te(H.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Go(e,D_(t,r),a,l,u))).catch((l=>{throw l.name==="FirebaseError"?(l.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new te(H.UNKNOWN,l.toString())}))}Ho(e,t,r,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Ho(e,D_(t,r),a,u,h,l))).catch((u=>{throw u.name==="FirebaseError"?(u.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new te(H.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Lj{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Dt(t),this.aa=!1):ne("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ko="RemoteStore";class Uj{constructor(e,t,r,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((u=>{r.enqueueAndForget((async()=>{Ta(this)&&(ne(ko,"Restarting streams for network reachability change."),await(async function(m){const y=ce(m);y.Ea.add(4),await Sc(y),y.Ra.set("Unknown"),y.Ea.delete(4),await lh(y)})(this))}))})),this.Ra=new Lj(r,a)}}async function lh(n){if(Ta(n))for(const e of n.da)await e(!0)}async function Sc(n){for(const e of n.da)await e(!1)}function yg(n,e){const t=ce(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),cb(t)?lb(t):Nc(t).O_()&&ob(t,e))}function mc(n,e){const t=ce(n),r=Nc(t);t.Ia.delete(e),r.O_()&&gR(t,e),t.Ia.size===0&&(r.O_()?r.L_():Ta(t)&&t.Ra.set("Unknown"))}function ob(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(_e.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Nc(n).Y_(e)}function gR(n,e){n.Va.Ue(e),Nc(n).Z_(e)}function lb(n){n.Va=new OM({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Nc(n).start(),n.Ra.ua()}function cb(n){return Ta(n)&&!Nc(n).x_()&&n.Ia.size>0}function Ta(n){return ce(n).Ea.size===0}function pR(n){n.Va=void 0}async function zj(n){n.Ra.set("Online")}async function Bj(n){n.Ia.forEach(((e,t)=>{ob(n,e)}))}async function Fj(n,e){pR(n),cb(n)?(n.Ra.ha(e),lb(n)):n.Ra.set("Unknown")}async function qj(n,e,t){if(n.Ra.set("Online"),e instanceof R1&&e.state===2&&e.cause)try{await(async function(a,l){const u=l.cause;for(const h of l.targetIds)a.Ia.has(h)&&(await a.remoteSyncer.rejectListen(h,u),a.Ia.delete(h),a.Va.removeTarget(h))})(n,e)}catch(r){ne(ko,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await zm(n,r)}else if(e instanceof hm?n.Va.Ze(e):e instanceof S1?n.Va.st(e):n.Va.tt(e),!t.isEqual(_e.min()))try{const r=await sR(n.localStore);t.compareTo(r)>=0&&await(function(l,u){const h=l.Va.Tt(u);return h.targetChanges.forEach(((m,y)=>{if(m.resumeToken.approximateByteSize()>0){const v=l.Ia.get(y);v&&l.Ia.set(y,v.withResumeToken(m.resumeToken,u))}})),h.targetMismatches.forEach(((m,y)=>{const v=l.Ia.get(m);if(!v)return;l.Ia.set(m,v.withResumeToken(It.EMPTY_BYTE_STRING,v.snapshotVersion)),gR(l,m);const x=new Ys(v.target,m,y,v.sequenceNumber);ob(l,x)})),l.remoteSyncer.applyRemoteEvent(h)})(n,t)}catch(r){ne(ko,"Failed to raise snapshot:",r),await zm(n,r)}}async function zm(n,e,t){if(!xa(e))throw e;n.Ea.add(1),await Sc(n),n.Ra.set("Offline"),t||(t=()=>sR(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ne(ko,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await lh(n)}))}function yR(n,e){return e().catch((t=>zm(n,t,e)))}async function Rc(n){const e=ce(n),t=ga(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:sa;for(;Gj(e);)try{const a=await Aj(e.localStore,r);if(a===null){e.Ta.length===0&&t.L_();break}r=a.batchId,Hj(e,a)}catch(a){await zm(e,a)}_R(e)&&vR(e)}function Gj(n){return Ta(n)&&n.Ta.length<10}function Hj(n,e){n.Ta.push(e);const t=ga(n);t.O_()&&t.X_&&t.ea(e.mutations)}function _R(n){return Ta(n)&&!ga(n).x_()&&n.Ta.length>0}function vR(n){ga(n).start()}async function Kj(n){ga(n).ra()}async function Qj(n){const e=ga(n);for(const t of n.Ta)e.ea(t.mutations)}async function $j(n,e,t){const r=n.Ta.shift(),a=Kv.from(r,e,t);await yR(n,(()=>n.remoteSyncer.applySuccessfulWrite(a))),await Rc(n)}async function Yj(n,e){e&&ga(n).X_&&await(async function(r,a){if((function(u){return E1(u)&&u!==H.ABORTED})(a.code)){const l=r.Ta.shift();ga(r).B_(),await yR(r,(()=>r.remoteSyncer.rejectFailedWrite(l.batchId,a))),await Rc(r)}})(n,e),_R(n)&&vR(n)}async function oI(n,e){const t=ce(n);t.asyncQueue.verifyOperationInProgress(),ne(ko,"RemoteStore received new credentials");const r=Ta(t);t.Ea.add(3),await Sc(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await lh(t)}async function z_(n,e){const t=ce(n);e?(t.Ea.delete(2),await lh(t)):e||(t.Ea.add(2),await Sc(t),t.Ra.set("Unknown"))}function Nc(n){return n.ma||(n.ma=(function(t,r,a){const l=ce(t);return l.sa(),new Oj(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Xo:zj.bind(null,n),t_:Bj.bind(null,n),r_:Fj.bind(null,n),H_:qj.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),cb(n)?lb(n):n.Ra.set("Unknown")):(await n.ma.stop(),pR(n))}))),n.ma}function ga(n){return n.fa||(n.fa=(function(t,r,a){const l=ce(t);return l.sa(),new Vj(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:Kj.bind(null,n),r_:Yj.bind(null,n),ta:Qj.bind(null,n),na:$j.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Rc(n)):(await n.fa.stop(),n.Ta.length>0&&(ne(ko,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ub{constructor(e,t,r,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=a,this.removalCallback=l,this.deferred=new fn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,a,l){const u=Date.now()+r,h=new ub(e,t,u,a,l);return h.start(r),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new te(H.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function kc(n,e){if(Dt("AsyncQueue",`${e}: ${n}`),xa(n))return new te(H.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{static emptySet(e){return new $l(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ae.comparator(t.key,r.key):(t,r)=>ae.comparator(t.key,r.key),this.keyedMap=ed(),this.sortedSet=new at(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof $l)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new $l;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(){this.ga=new at(ae.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):de(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class gc{constructor(e,t,r,a,l,u,h,m,y){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=m,this.hasCachedResults=y}static fromInitialDocuments(e,t,r,a,l){const u=[];return t.forEach((h=>{u.push({type:0,doc:h})})),new gc(e,t,$l.emptySet(t),u,r,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&nh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==r[a].type||!t[a].doc.isEqual(r[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wj{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class Xj{constructor(){this.queries=cI(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const a=ce(t),l=a.queries;a.queries=cI(),l.forEach(((u,h)=>{for(const m of h.Sa)m.onError(r)}))})(this,new te(H.ABORTED,"Firestore shutting down"))}}function cI(){return new oi((n=>u1(n)),nh)}async function db(n,e){const t=ce(n);let r=3;const a=e.query;let l=t.queries.get(a);l?!l.ba()&&e.Da()&&(r=2):(l=new Wj,r=e.Da()?0:1);try{switch(r){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(u){const h=kc(u,`Initialization of query '${Ll(e.query)}' failed`);return void e.onError(h)}t.queries.set(a,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&fb(t)}async function hb(n,e){const t=ce(n),r=e.query;let a=3;const l=t.queries.get(r);if(l){const u=l.Sa.indexOf(e);u>=0&&(l.Sa.splice(u,1),l.Sa.length===0?a=e.Da()?0:1:!l.ba()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function Jj(n,e){const t=ce(n);let r=!1;for(const a of e){const l=a.query,u=t.queries.get(l);if(u){for(const h of u.Sa)h.Fa(a)&&(r=!0);u.wa=a}}r&&fb(t)}function Zj(n,e,t){const r=ce(n),a=r.queries.get(e);if(a)for(const l of a.Sa)l.onError(t);r.queries.delete(e)}function fb(n){n.Ca.forEach((e=>{e.next()}))}var B_,uI;(uI=B_||(B_={})).Ma="default",uI.Cache="cache";class mb{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const a of e.docChanges)a.type!==3&&r.push(a);e=new gc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=gc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==B_.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e3{constructor(e,t){this.Qa=e,this.byteLength=t}$a(){return"metadata"in this.Qa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(e){this.serializer=e}$s(e){return bs(this.serializer,e)}Us(e){return e.metadata.exists?O1(this.serializer,e.document,!1):ut.newNoDocument(this.$s(e.metadata.name),this.Ks(e.metadata.readTime))}Ks(e){return Pt(e)}}class t3{constructor(e,t){this.Ua=e,this.serializer=t,this.Ka=[],this.Wa=[],this.collectionGroups=new Set,this.progress=bR(e)}get queries(){return this.Ka}get documents(){return this.Wa}Ga(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Qa.namedQuery)this.Ka.push(e.Qa.namedQuery);else if(e.Qa.documentMetadata){this.Wa.push({metadata:e.Qa.documentMetadata}),e.Qa.documentMetadata.exists||++t;const r=De.fromString(e.Qa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Qa.document&&(this.Wa[this.Wa.length-1].document=e.Qa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,{...this.progress}):null}za(e){const t=new Map,r=new dI(this.serializer);for(const a of e)if(a.metadata.queries){const l=r.$s(a.metadata.name);for(const u of a.metadata.queries){const h=(t.get(u)||Ie()).add(l);t.set(u,h)}}return t}async ja(e){const t=await Sj(e,new dI(this.serializer),this.Wa,this.Ua.id),r=this.za(this.documents);for(const a of this.Ka)await Rj(e,a,r.get(a.name));return this.progress.taskState="Success",{progress:this.progress,Ja:this.collectionGroups,Ha:t}}}function bR(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(e){this.key=e}}class wR{constructor(e){this.key=e}}class TR{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ie(),this.mutatedKeys=Ie(),this.eu=h1(e),this.tu=new $l(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new lI,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,u=a,h=!1;const m=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,y=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((v,x)=>{const T=a.get(v),R=rh(this.query,x)?x:null,V=!!T&&this.mutatedKeys.has(T.key),U=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let M=!1;T&&R?T.data.isEqual(R.data)?V!==U&&(r.track({type:3,doc:R}),M=!0):this.su(T,R)||(r.track({type:2,doc:R}),M=!0,(m&&this.eu(R,m)>0||y&&this.eu(R,y)<0)&&(h=!0)):!T&&R?(r.track({type:0,doc:R}),M=!0):T&&!R&&(r.track({type:1,doc:T}),M=!0,(m||y)&&(h=!0)),M&&(R?(u=u.add(R),l=U?l.add(v):l.delete(v)):(u=u.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),l=l.delete(v.key),r.track({type:1,doc:v})}return{tu:u,iu:r,Cs:h,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((v,x)=>(function(R,V){const U=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return de(20277,{Rt:M})}};return U(R)-U(V)})(v.type,x.type)||this.eu(v.doc,x.doc))),this.ou(r),a=a??!1;const h=t&&!a?this._u():[],m=this.Xa.size===0&&this.current&&!a?1:0,y=m!==this.Za;return this.Za=m,u.length!==0||y?{snapshot:new gc(this.query,e.tu,l,u,e.mutatedKeys,m===0,y,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new lI,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ie(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new wR(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new xR(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=Ie();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return gc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Ea="SyncEngine";class n3{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class r3{constructor(e){this.key=e,this.hu=!1}}class s3{constructor(e,t,r,a,l,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new oi((h=>u1(h)),nh),this.Iu=new Map,this.Eu=new Set,this.du=new at(ae.comparator),this.Au=new Map,this.Ru=new Zv,this.Vu={},this.mu=new Map,this.fu=No.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function i3(n,e,t=!0){const r=_g(n);let a;const l=r.Tu.get(e);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await ER(r,e,t,!0),a}async function a3(n,e){const t=_g(n);await ER(t,e,!0,!1)}async function ER(n,e,t,r){const a=await hc(n.localStore,Nn(e)),l=a.targetId,u=n.sharedClientState.addLocalQueryTarget(l,t);let h;return r&&(h=await gb(n,e,l,u==="current",a.resumeToken)),n.isPrimaryClient&&t&&yg(n.remoteStore,a),h}async function gb(n,e,t,r,a){n.pu=(x,T,R)=>(async function(U,M,W,Y){let X=M.view.ru(W);X.Cs&&(X=await jm(U.localStore,M.query,!1).then((({documents:C})=>M.view.ru(C,X))));const oe=Y&&Y.targetChanges.get(M.targetId),ye=Y&&Y.targetMismatches.get(M.targetId)!=null,he=M.view.applyChanges(X,U.isPrimaryClient,oe,ye);return F_(U,M.targetId,he.au),he.snapshot})(n,x,T,R);const l=await jm(n.localStore,e,!0),u=new TR(e,l.Qs),h=u.ru(l.documents),m=ah.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",a),y=u.applyChanges(h,n.isPrimaryClient,m);F_(n,t,y.au);const v=new n3(e,t,u);return n.Tu.set(e,v),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),y.snapshot}async function o3(n,e,t){const r=ce(n),a=r.Tu.get(e),l=r.Iu.get(a.targetId);if(l.length>1)return r.Iu.set(a.targetId,l.filter((u=>!nh(u,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await fc(r.localStore,a.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(a.targetId),t&&mc(r.remoteStore,a.targetId),pc(r,a.targetId)})).catch(ba)):(pc(r,a.targetId),await fc(r.localStore,a.targetId,!0))}async function l3(n,e){const t=ce(n),r=t.Tu.get(e),a=t.Iu.get(r.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),mc(t.remoteStore,r.targetId))}async function c3(n,e,t){const r=vb(n);try{const a=await(function(u,h){const m=ce(u),y=He.now(),v=h.reduce(((R,V)=>R.add(V.key)),Ie());let x,T;return m.persistence.runTransaction("Locally write mutations","readwrite",(R=>{let V=Bn(),U=Ie();return m.Ns.getEntries(R,v).next((M=>{V=M,V.forEach(((W,Y)=>{Y.isValidDocument()||(U=U.add(W))}))})).next((()=>m.localDocuments.getOverlayedDocuments(R,V))).next((M=>{x=M;const W=[];for(const Y of h){const X=CM(Y,x.get(Y.key).overlayedDocument);X!=null&&W.push(new li(Y.key,X,t1(X.value.mapValue),_t.exists(!0)))}return m.mutationQueue.addMutationBatch(R,y,W,h)})).next((M=>{T=M;const W=M.applyToLocalDocumentSet(x,U);return m.documentOverlayCache.saveOverlays(R,M.batchId,W)}))})).then((()=>({batchId:T.batchId,changes:m1(x)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(a.batchId),(function(u,h,m){let y=u.Vu[u.currentUser.toKey()];y||(y=new at(we)),y=y.insert(h,m),u.Vu[u.currentUser.toKey()]=y})(r,a.batchId,t),await ci(r,a.changes),await Rc(r.remoteStore)}catch(a){const l=kc(a,"Failed to persist write");t.reject(l)}}async function IR(n,e){const t=ce(n);try{const r=await Ij(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const u=t.Au.get(l);u&&(me(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?u.hu=!0:a.modifiedDocuments.size>0?me(u.hu,14607):a.removedDocuments.size>0&&(me(u.hu,42227),u.hu=!1))})),await ci(t,r,e)}catch(r){await ba(r)}}function hI(n,e,t){const r=ce(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const a=[];r.Tu.forEach(((l,u)=>{const h=u.view.va(e);h.snapshot&&a.push(h.snapshot)})),(function(u,h){const m=ce(u);m.onlineState=h;let y=!1;m.queries.forEach(((v,x)=>{for(const T of x.Sa)T.va(h)&&(y=!0)})),y&&fb(m)})(r.eventManager,e),a.length&&r.Pu.H_(a),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function u3(n,e,t){const r=ce(n);r.sharedClientState.updateQueryState(e,"rejected",t);const a=r.Au.get(e),l=a&&a.key;if(l){let u=new at(ae.comparator);u=u.insert(l,ut.newNoDocument(l,_e.min()));const h=Ie().add(l),m=new ih(_e.min(),new Map,new at(we),u,h);await IR(r,m),r.du=r.du.remove(l),r.Au.delete(e),_b(r)}else await fc(r.localStore,e,!1).then((()=>pc(r,e,t))).catch(ba)}async function d3(n,e){const t=ce(n),r=e.batch.batchId;try{const a=await Ej(t.localStore,e);yb(t,r,null),pb(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await ci(t,a)}catch(a){await ba(a)}}async function h3(n,e,t){const r=ce(n);try{const a=await(function(u,h){const m=ce(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let v;return m.mutationQueue.lookupMutationBatch(y,h).next((x=>(me(x!==null,37113),v=x.keys(),m.mutationQueue.removeMutationBatch(y,x)))).next((()=>m.mutationQueue.performConsistencyCheck(y))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(y,v,h))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,v))).next((()=>m.localDocuments.getDocuments(y,v)))}))})(r.localStore,e);yb(r,e,t),pb(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await ci(r,a)}catch(a){await ba(a)}}async function f3(n,e){const t=ce(n);Ta(t.remoteStore)||ne(Ea,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await(function(u){const h=ce(u);return h.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(m=>h.mutationQueue.getHighestUnacknowledgedBatchId(m)))})(t.localStore);if(r===sa)return void e.resolve();const a=t.mu.get(r)||[];a.push(e),t.mu.set(r,a)}catch(r){const a=kc(r,"Initialization of waitForPendingWrites() operation failed");e.reject(a)}}function pb(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function yb(n,e,t){const r=ce(n);let a=r.Vu[r.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),r.Vu[r.currentUser.toKey()]=a}}function pc(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||AR(n,r)}))}function AR(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(mc(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),_b(n))}function F_(n,e,t){for(const r of t)r instanceof xR?(n.Ru.addReference(r.key,e),m3(n,r)):r instanceof wR?(ne(Ea,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||AR(n,r.key)):de(19791,{wu:r})}function m3(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(ne(Ea,"New document in limbo: "+t),n.Eu.add(r),_b(n))}function _b(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new ae(De.fromString(e)),r=n.fu.next();n.Au.set(r,new r3(t)),n.du=n.du.insert(t,r),yg(n.remoteStore,new Ys(Nn(Ec(t.path)),r,"TargetPurposeLimboResolution",Un.ce))}}async function ci(n,e,t){const r=ce(n),a=[],l=[],u=[];r.Tu.isEmpty()||(r.Tu.forEach(((h,m)=>{u.push(r.pu(m,e,t).then((y=>{var v;if((y||t)&&r.isPrimaryClient){const x=y?!y.fromCache:(v=t==null?void 0:t.targetChanges.get(m.targetId))==null?void 0:v.current;r.sharedClientState.updateQueryState(m.targetId,x?"current":"not-current")}if(y){a.push(y);const x=rb.As(m.targetId,y);l.push(x)}})))})),await Promise.all(u),r.Pu.H_(a),await(async function(m,y){const v=ce(m);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(x=>z.forEach(y,(T=>z.forEach(T.Es,(R=>v.persistence.referenceDelegate.addReference(x,T.targetId,R))).next((()=>z.forEach(T.ds,(R=>v.persistence.referenceDelegate.removeReference(x,T.targetId,R)))))))))}catch(x){if(!xa(x))throw x;ne(sb,"Failed to update sequence numbers: "+x)}for(const x of y){const T=x.targetId;if(!x.fromCache){const R=v.Ms.get(T),V=R.snapshotVersion,U=R.withLastLimboFreeSnapshotVersion(V);v.Ms=v.Ms.insert(T,U)}}})(r.localStore,l))}async function g3(n,e){const t=ce(n);if(!t.currentUser.isEqual(e)){ne(Ea,"User change. New user:",e.toKey());const r=await rR(t.localStore,e);t.currentUser=e,(function(l,u){l.mu.forEach((h=>{h.forEach((m=>{m.reject(new te(H.CANCELLED,u))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ci(t,r.Ls)}}function p3(n,e){const t=ce(n),r=t.Au.get(e);if(r&&r.hu)return Ie().add(r.key);{let a=Ie();const l=t.Iu.get(e);if(!l)return a;for(const u of l){const h=t.Tu.get(u);a=a.unionWith(h.view.nu)}return a}}async function y3(n,e){const t=ce(n),r=await jm(t.localStore,e.query,!0),a=e.view.cu(r);return t.isPrimaryClient&&F_(t,e.targetId,a.au),a}async function _3(n,e){const t=ce(n);return oR(t.localStore,e).then((r=>ci(t,r)))}async function v3(n,e,t,r){const a=ce(n),l=await(function(h,m){const y=ce(h),v=ce(y.mutationQueue);return y.persistence.runTransaction("Lookup mutation documents","readonly",(x=>v.er(x,m).next((T=>T?y.localDocuments.getDocuments(x,T):z.resolve(null)))))})(a.localStore,e);l!==null?(t==="pending"?await Rc(a.remoteStore):t==="acknowledged"||t==="rejected"?(yb(a,e,r||null),pb(a,e),(function(h,m){ce(ce(h).mutationQueue).ir(m)})(a.localStore,e)):de(6720,"Unknown batchState",{Su:t}),await ci(a,l)):ne(Ea,"Cannot apply mutation batch with id: "+e)}async function b3(n,e){const t=ce(n);if(_g(t),vb(t),e===!0&&t.gu!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),a=await fI(t,r.toArray());t.gu=!0,await z_(t.remoteStore,!0);for(const l of a)yg(t.remoteStore,l)}else if(e===!1&&t.gu!==!1){const r=[];let a=Promise.resolve();t.Iu.forEach(((l,u)=>{t.sharedClientState.isLocalQueryTarget(u)?r.push(u):a=a.then((()=>(pc(t,u),fc(t.localStore,u,!0)))),mc(t.remoteStore,u)})),await a,await fI(t,r),(function(u){const h=ce(u);h.Au.forEach(((m,y)=>{mc(h.remoteStore,y)})),h.Ru.Jr(),h.Au=new Map,h.du=new at(ae.comparator)})(t),t.gu=!1,await z_(t.remoteStore,!1)}}async function fI(n,e,t){const r=ce(n),a=[],l=[];for(const u of e){let h;const m=r.Iu.get(u);if(m&&m.length!==0){h=await hc(r.localStore,Nn(m[0]));for(const y of m){const v=r.Tu.get(y),x=await y3(r,v);x.snapshot&&l.push(x.snapshot)}}else{const y=await aR(r.localStore,u);h=await hc(r.localStore,y),await gb(r,SR(y),u,!1,h.resumeToken)}a.push(h)}return r.Pu.H_(l),a}function SR(n){return c1(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function x3(n){return(function(t){return ce(ce(t).persistence).Ts()})(ce(n).localStore)}async function w3(n,e,t,r){const a=ce(n);if(a.gu)return void ne(Ea,"Ignoring unexpected query state notification.");const l=a.Iu.get(e);if(l&&l.length>0)switch(t){case"current":case"not-current":{const u=await oR(a.localStore,d1(l[0])),h=ih.createSynthesizedRemoteEventForCurrentChange(e,t==="current",It.EMPTY_BYTE_STRING);await ci(a,u,h);break}case"rejected":await fc(a.localStore,e,!0),pc(a,e,r);break;default:de(64155,t)}}async function T3(n,e,t){const r=_g(n);if(r.gu){for(const a of e){if(r.Iu.has(a)&&r.sharedClientState.isActiveQueryTarget(a)){ne(Ea,"Adding an already active target "+a);continue}const l=await aR(r.localStore,a),u=await hc(r.localStore,l);await gb(r,SR(l),u.targetId,!1,u.resumeToken),yg(r.remoteStore,u)}for(const a of t)r.Iu.has(a)&&await fc(r.localStore,a,!1).then((()=>{mc(r.remoteStore,a),pc(r,a)})).catch(ba)}}function _g(n){const e=ce(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=IR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=p3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=u3.bind(null,e),e.Pu.H_=Jj.bind(null,e.eventManager),e.Pu.yu=Zj.bind(null,e.eventManager),e}function vb(n){const e=ce(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=d3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=h3.bind(null,e),e}function E3(n,e,t){const r=ce(n);(async function(l,u,h){try{const m=await u.getMetadata();if(await(function(R,V){const U=ce(R),M=Pt(V.createTime);return U.persistence.runTransaction("hasNewerBundle","readonly",(W=>U.Ii.getBundleMetadata(W,V.id))).then((W=>!!W&&W.createTime.compareTo(M)>=0))})(l.localStore,m))return await u.close(),h._completeWith((function(R){return{taskState:"Success",documentsLoaded:R.totalDocuments,bytesLoaded:R.totalBytes,totalDocuments:R.totalDocuments,totalBytes:R.totalBytes}})(m)),Promise.resolve(new Set);h._updateProgress(bR(m));const y=new t3(m,u.serializer);let v=await u.bu();for(;v;){const T=await y.Ga(v);T&&h._updateProgress(T),v=await u.bu()}const x=await y.ja(l.localStore);return await ci(l,x.Ha,void 0),await(function(R,V){const U=ce(R);return U.persistence.runTransaction("Save bundle","readwrite",(M=>U.Ii.saveBundleMetadata(M,V)))})(l.localStore,m),h._completeWith(x.progress),Promise.resolve(x.Ja)}catch(m){return Es(Ea,`Loading bundle failed with ${m}`),h._failWith(m),Promise.resolve(new Set)}})(r,e,t).then((a=>{r.sharedClientState.notifyBundleLoaded(a)}))}class Ud{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=oh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return nR(this.persistence,new tR,e.initialUser,this.serializer)}Cu(e){return new eb(pg.mi,this.serializer)}Du(e){return new hR}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ud.provider={build:()=>new Ud};class I3 extends Ud{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){me(this.persistence.referenceDelegate instanceof Mm,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Y1(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?pn.withCacheSize(this.cacheSizeBytes):pn.DEFAULT;return new eb((r=>Mm.mi(r,t)),this.serializer)}}class RR extends Ud{constructor(e,t,r){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await vb(this.xu.syncEngine),await Rc(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return nR(this.persistence,new tR,e.initialUser,this.serializer)}Fu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new Y1(r,e.asyncQueue,t)}Mu(e,t){const r=new O4(t,this.persistence);return new P4(e.asyncQueue,r)}Cu(e){const t=nb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?pn.withCacheSize(this.cacheSizeBytes):pn.DEFAULT;return new tb(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,fR(),mm(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new hR}}class A3 extends RR{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof Zy&&(this.sharedClientState.syncEngine={Co:v3.bind(null,t),vo:w3.bind(null,t),Fo:T3.bind(null,t),Ts:x3.bind(null,t),Do:_3.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ji((async r=>{await b3(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Du(e){const t=fR();if(!Zy.v(t))throw new te(H.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=nb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Zy(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class zd{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>hI(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=g3.bind(null,this.syncEngine),await z_(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Xj})()}createDatastore(e){const t=oh(e.databaseInfo.databaseId),r=(function(l){return new Pj(l)})(e.databaseInfo);return(function(l,u,h,m){return new jj(l,u,h,m)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,a,l,u,h){return new Uj(r,a,l,u,h)})(this.localStore,this.datastore,e.asyncQueue,(t=>hI(this.syncEngine,t,0)),(function(){return iI.v()?new iI:new Nj})())}createSyncEngine(e,t){return(function(a,l,u,h,m,y,v){const x=new s3(a,l,u,h,m,y);return v&&(x.gu=!0),x})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(a){const l=ce(a);ne(ko,"RemoteStore shutting down."),l.Ea.add(5),await Sc(l),l.Aa.shutdown(),l.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}zd.provider={build:()=>new zd};function mI(n,e=10240){let t=0;return{async read(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Dt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S3{constructor(e,t){this.Bu=e,this.serializer=t,this.metadata=new fn,this.buffer=new Uint8Array,this.Lu=(function(){return new TextDecoder("utf-8")})(),this.ku().then((r=>{r&&r.$a()?this.metadata.resolve(r.Qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.Qa)}`))}),(r=>this.metadata.reject(r)))}close(){return this.Bu.cancel()}async getMetadata(){return this.metadata.promise}async bu(){return await this.getMetadata(),this.ku()}async ku(){const e=await this.qu();if(e===null)return null;const t=this.Lu.decode(e),r=Number(t);isNaN(r)&&this.Qu(`length string (${t}) is not valid number`);const a=await this.$u(r);return new e3(JSON.parse(a),e.length+r)}Uu(){return this.buffer.findIndex((e=>e===123))}async qu(){for(;this.Uu()<0&&!await this.Ku(););if(this.buffer.length===0)return null;const e=this.Uu();e<0&&this.Qu("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async $u(e){for(;this.buffer.length<e;)await this.Ku()&&this.Qu("Reached the end of bundle when more is expected.");const t=this.Lu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}Qu(e){throw this.Bu.cancel(),new Error(`Invalid bundle format: ${e}`)}async Ku(){const e=await this.Bu.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R3{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new te(H.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(a,l){const u=ce(a),h={documents:l.map((x=>jd(u.serializer,x)))},m=await u.Ho("BatchGetDocuments",u.serializer.databaseId,De.emptyPath(),h,l.length),y=new Map;m.forEach((x=>{const T=zM(u.serializer,x);y.set(T.key.toString(),T)}));const v=[];return l.forEach((x=>{const T=y.get(x.toString());me(!!T,55234,{key:x}),v.push(T)})),v})(this.datastore,e);return t.forEach((r=>this.recordVersion(r))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ac(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,r)=>{const a=ae.fromPath(r);this.mutations.push(new Gv(a,this.precondition(a)))})),await(async function(r,a){const l=ce(r),u={writes:a.map((h=>Ld(l.serializer,h)))};await l.Go("Commit",l.serializer.databaseId,De.emptyPath(),u)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw de(50498,{Gu:e.constructor.name});t=_e.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new te(H.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(_e.min())?_t.exists(!1):_t.updateTime(t):_t.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(_e.min()))throw new te(H.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return _t.updateTime(t)}return _t.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N3{constructor(e,t,r,a,l){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=a,this.deferred=l,this.zu=r.maxAttempts,this.M_=new ab(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new R3(this.datastore),t=this.Hu(e);t&&t.then((r=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(r)})).catch((a=>{this.Yu(a)}))))})).catch((r=>{this.Yu(r)}))}))}Hu(e){try{const t=this.updateFunction(e);return!Zd(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if((e==null?void 0:e.name)==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!E1(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pa="FirestoreClient";class k3{constructor(e,t,r,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=a,this.user=tn.UNAUTHENTICATED,this.clientId=kv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,(async u=>{ne(pa,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(r,(u=>(ne(pa,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new fn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=kc(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function t_(n,e){n.asyncQueue.verifyOperationInProgress(),ne(pa,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async a=>{r.isEqual(a)||(await rR(e.localStore,a),r=a)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function gI(n,e){n.asyncQueue.verifyOperationInProgress();const t=await bb(n);ne(pa,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>oI(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,a)=>oI(e.remoteStore,a))),n._onlineComponents=e}async function bb(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ne(pa,"Using user provided OfflineComponentProvider");try{await t_(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===H.FAILED_PRECONDITION||a.code===H.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;Es("Error using user provided cache. Falling back to memory cache: "+t),await t_(n,new Ud)}}else ne(pa,"Using default OfflineComponentProvider"),await t_(n,new I3(void 0));return n._offlineComponents}async function bg(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ne(pa,"Using user provided OnlineComponentProvider"),await gI(n,n._uninitializedComponentsProvider._online)):(ne(pa,"Using default OnlineComponentProvider"),await gI(n,new zd))),n._onlineComponents}function NR(n){return bb(n).then((e=>e.persistence))}function xb(n){return bb(n).then((e=>e.localStore))}function kR(n){return bg(n).then((e=>e.remoteStore))}function wb(n){return bg(n).then((e=>e.syncEngine))}function C3(n){return bg(n).then((e=>e.datastore))}async function yc(n){const e=await bg(n),t=e.eventManager;return t.onListen=i3.bind(null,e.syncEngine),t.onUnlisten=o3.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=a3.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=l3.bind(null,e.syncEngine),t}function D3(n){return n.asyncQueue.enqueue((async()=>{const e=await NR(n),t=await kR(n);return e.setNetworkEnabled(!0),(function(a){const l=ce(a);return l.Ea.delete(0),lh(l)})(t)}))}function P3(n){return n.asyncQueue.enqueue((async()=>{const e=await NR(n),t=await kR(n);return e.setNetworkEnabled(!1),(async function(a){const l=ce(a);l.Ea.add(0),await Sc(l),l.Ra.set("Offline")})(t)}))}function O3(n,e){const t=new fn;return n.asyncQueue.enqueueAndForget((async()=>(async function(a,l,u){try{const h=await(function(y,v){const x=ce(y);return x.persistence.runTransaction("read document","readonly",(T=>x.localDocuments.getDocument(T,v)))})(a,l);h.isFoundDocument()?u.resolve(h):h.isNoDocument()?u.resolve(null):u.reject(new te(H.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const m=kc(h,`Failed to get document '${l} from cache`);u.reject(m)}})(await xb(n),e,t))),t.promise}function CR(n,e,t={}){const r=new fn;return n.asyncQueue.enqueueAndForget((async()=>(function(l,u,h,m,y){const v=new vg({next:T=>{v.Nu(),u.enqueueAndForget((()=>hb(l,x)));const R=T.docs.has(h);!R&&T.fromCache?y.reject(new te(H.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&T.fromCache&&m&&m.source==="server"?y.reject(new te(H.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(T)},error:T=>y.reject(T)}),x=new mb(Ec(h.path),v,{includeMetadataChanges:!0,qa:!0});return db(l,x)})(await yc(n),n.asyncQueue,e,t,r))),r.promise}function V3(n,e){const t=new fn;return n.asyncQueue.enqueueAndForget((async()=>(async function(a,l,u){try{const h=await jm(a,l,!0),m=new TR(l,h.Qs),y=m.ru(h.documents),v=m.applyChanges(y,!1);u.resolve(v.snapshot)}catch(h){const m=kc(h,`Failed to execute query '${l} against cache`);u.reject(m)}})(await xb(n),e,t))),t.promise}function DR(n,e,t={}){const r=new fn;return n.asyncQueue.enqueueAndForget((async()=>(function(l,u,h,m,y){const v=new vg({next:T=>{v.Nu(),u.enqueueAndForget((()=>hb(l,x))),T.fromCache&&m.source==="server"?y.reject(new te(H.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(T)},error:T=>y.reject(T)}),x=new mb(h,v,{includeMetadataChanges:!0,qa:!0});return db(l,x)})(await yc(n),n.asyncQueue,e,t,r))),r.promise}function M3(n,e){const t=new vg(e);return n.asyncQueue.enqueueAndForget((async()=>(function(a,l){ce(a).Ca.add(l),l.next()})(await yc(n),t))),()=>{t.Nu(),n.asyncQueue.enqueueAndForget((async()=>(function(a,l){ce(a).Ca.delete(l)})(await yc(n),t)))}}function j3(n,e,t,r){const a=(function(u,h){let m;return m=typeof u=="string"?A1().encode(u):u,(function(v,x){return new S3(v,x)})((function(v,x){if(v instanceof Uint8Array)return mI(v,x);if(v instanceof ArrayBuffer)return mI(new Uint8Array(v),x);if(v instanceof ReadableStream)return v.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")})(m),h)})(t,oh(e));n.asyncQueue.enqueueAndForget((async()=>{E3(await wb(n),a,r)}))}function L3(n,e){return n.asyncQueue.enqueue((async()=>(function(r,a){const l=ce(r);return l.persistence.runTransaction("Get named query","readonly",(u=>l.Ii.getNamedQuery(u,a)))})(await xb(n),e)))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PR(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pI=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OR="firestore.googleapis.com",yI=!0;class _I{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new te(H.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=OR,this.ssl=yI}else this.host=e.host,this.ssl=e.ssl??yI;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=H1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<ij)throw new te(H.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}SS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=PR(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new te(H.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new te(H.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new te(H.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,a){return r.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ch{constructor(e,t,r,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _I({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new te(H.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new te(H.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _I(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new x4;switch(r.type){case"firstParty":return new I4(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new te(H.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=pI.get(t);r&&(ne("ComponentProvider","Removing Datastore"),pI.delete(t),r.terminate())})(this),Promise.resolve()}}function U3(n,e,t,r={}){var y;n=Be(n,ch);const a=_a(e),l=n._getSettings(),u={...l,emulatorOptions:n._getEmulatorOptions()},h=`${e}:${t}`;a&&(tv(`https://${h}`),nv("Firestore",!0)),l.host!==OR&&l.host!==h&&Es("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...l,host:h,ssl:a,emulatorOptions:r};if(!oa(m,u)&&(n._setSettings(m),r.mockUserToken)){let v,x;if(typeof r.mockUserToken=="string")v=r.mockUserToken,x=tn.MOCK_USER;else{v=eA(r.mockUserToken,(y=n._app)==null?void 0:y.options.projectId);const T=r.mockUserToken.sub||r.mockUserToken.user_id;if(!T)throw new te(H.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");x=new tn(T)}n._authCredentials=new w4(new IS(v,x))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kn=class VR{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new VR(this.firestore,e,this._query)}},it=class rd{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ia(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new rd(this.firestore,e,this._key)}toJSON(){return{type:rd._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Jd(t,rd._jsonSchema))return new rd(e,r||null,new ae(De.fromString(t.referencePath)))}};it._jsonSchemaVersion="firestore/documentReference/1.0",it._jsonSchema={type:Kt("string",it._jsonSchemaVersion),referencePath:Kt("string")};let ia=class MR extends kn{constructor(e,t,r){super(e,t,Ec(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new it(this.firestore,null,new ae(e))}withConverter(e){return new MR(this.firestore,e,this._path)}};function jR(n,e,...t){if(n=pe(n),Cv("collection","path",e),n instanceof ch){const r=De.fromString(e,...t);return aE(r),new ia(n,null,r)}{if(!(n instanceof it||n instanceof ia))throw new te(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(De.fromString(e,...t));return aE(r),new ia(n.firestore,null,r)}}function z3(n,e){if(n=Be(n,ch),Cv("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new te(H.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new kn(n,null,(function(r){return new ai(De.emptyPath(),r)})(e))}function Bm(n,e,...t){if(n=pe(n),arguments.length===1&&(e=kv.newId()),Cv("doc","path",e),n instanceof ch){const r=De.fromString(e,...t);return iE(r),new it(n,null,new ae(r))}{if(!(n instanceof it||n instanceof ia))throw new te(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(De.fromString(e,...t));return iE(r),new it(n.firestore,n instanceof ia?n.converter:null,new ae(r))}}function LR(n,e){return n=pe(n),e=pe(e),(n instanceof it||n instanceof ia)&&(e instanceof it||e instanceof ia)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function UR(n,e){return n=pe(n),e=pe(e),n instanceof kn&&e instanceof kn&&n.firestore===e.firestore&&nh(n._query,e._query)&&n.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vI="AsyncQueue";class bI{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new ab(this,"async_queue_retry"),this._c=()=>{const r=mm();r&&ne(vI,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=mm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=mm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new fn;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!xa(e))throw e;ne(vI,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Dt("INTERNAL UNHANDLED ERROR: ",xI(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=ub.createAndSchedule(this,e,t,r,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&de(47125,{Pc:xI(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function xI(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q_(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of r)if(l in a&&typeof a[l]=="function")return!0;return!1})(n,["next","error","complete"])}class B3{constructor(){this._progressObserver={},this._taskCompletionResolver=new fn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F3=-1;let Ot=class extends ch{constructor(e,t,r,a){super(e,t,r,a),this.type="firestore",this._queue=new bI,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new bI(e),this._firestoreClient=void 0,await e}}};function xn(n){if(n._terminated)throw new te(H.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||zR(n),n._firestoreClient}function zR(n){var r,a,l;const e=n._freezeSettings(),t=(function(h,m,y,v){return new cM(h,m,y,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,PR(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)})(n._databaseId,((r=n._app)==null?void 0:r.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(a=e.localCache)!=null&&a._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new k3(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(h){const m=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(m),_online:m}})(n._componentsProvider))}function q3(n,e){Es("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return BR(n,zd.provider,{build:r=>new RR(r,t.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function G3(n){Es("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings();BR(n,zd.provider,{build:t=>new A3(t,e.cacheSizeBytes)})}function BR(n,e,t){if((n=Be(n,Ot))._firestoreClient||n._terminated)throw new te(H.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new te(H.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},zR(n)}function H3(n){if(n._initialized&&!n._terminated)throw new te(H.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new fn;return n._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await(async function(r){if(!vs.v())return Promise.resolve();const a=r+eR;await vs.delete(a)})(nb(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function K3(n){return(function(t){const r=new fn;return t.asyncQueue.enqueueAndForget((async()=>f3(await wb(t),r))),r.promise})(xn(n=Be(n,Ot)))}function Q3(n){return D3(xn(n=Be(n,Ot)))}function $3(n){return P3(xn(n=Be(n,Ot)))}function Y3(n,e){const t=xn(n=Be(n,Ot)),r=new B3;return j3(t,n._databaseId,e,r),r}function W3(n,e){return L3(xn(n=Be(n,Ot)),e).then((t=>t?new kn(n,null,t.query):null))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new yn(It.fromBase64String(e))}catch(t){throw new te(H.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new yn(It.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:yn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Jd(e,yn._jsonSchema))return yn.fromBase64String(e.bytes)}}yn._jsonSchemaVersion="firestore/bytes/1.0",yn._jsonSchema={type:Kt("string",yn._jsonSchemaVersion),bytes:Kt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ya=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new te(H.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new yt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vo=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new te(H.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new te(H.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return we(this._lat,e._lat)||we(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Lr._jsonSchemaVersion}}static fromJSON(e){if(Jd(e,Lr._jsonSchema))return new Lr(e.latitude,e.longitude)}}Lr._jsonSchemaVersion="firestore/geoPoint/1.0",Lr._jsonSchema={type:Kt("string",Lr._jsonSchemaVersion),latitude:Kt("number"),longitude:Kt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,a){if(r.length!==a.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:xs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Jd(e,xs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new xs(e.vectorValues);throw new te(H.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}xs._jsonSchemaVersion="firestore/vectorValue/1.0",xs._jsonSchema={type:Kt("string",xs._jsonSchemaVersion),vectorValues:Kt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X3=/^__.*__$/;class J3{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new li(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ic(e,this.data,t,this.fieldTransforms)}}class FR{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new li(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function qR(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw de(40011,{Ac:n})}}class xg{constructor(e,t,r,a,l,u){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=a,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new xg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var a;const t=(a=this.path)==null?void 0:a.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){var a;const t=(a=this.path)==null?void 0:a.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Fm(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(qR(this.Ac)&&X3.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Z3{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||oh(e)}Cc(e,t,r,a=!1){return new xg({Ac:e,methodName:t,Dc:r,path:yt.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Mo(n){const e=n._freezeSettings(),t=oh(n._databaseId);return new Z3(n._databaseId,!!e.ignoreUndefinedProperties,t)}function wg(n,e,t,r,a,l={}){const u=n.Cc(l.merge||l.mergeFields?2:0,e,t,a);Nb("Data must be an object, but it was:",u,r);const h=KR(r,u);let m,y;if(l.merge)m=new zn(u.fieldMask),y=u.fieldTransforms;else if(l.mergeFields){const v=[];for(const x of l.mergeFields){const T=G_(e,x,t);if(!u.contains(T))throw new te(H.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);$R(v,T)||v.push(T)}m=new zn(v),y=u.fieldTransforms.filter((x=>m.covers(x.field)))}else m=null,y=u.fieldTransforms;return new J3(new hn(h),m,y)}class uh extends Vo{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof uh}}function GR(n,e,t){return new xg({Ac:3,Dc:e.settings.Dc,methodName:n._methodName,fc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Tb extends Vo{_toFieldTransform(e){return new sh(e.path,new cc)}isEqual(e){return e instanceof Tb}}class Eb extends Vo{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=GR(this,e,!0),r=this.vc.map((l=>jo(l,t))),a=new Io(r);return new sh(e.path,a)}isEqual(e){return e instanceof Eb&&oa(this.vc,e.vc)}}class Ib extends Vo{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=GR(this,e,!0),r=this.vc.map((l=>jo(l,t))),a=new Ao(r);return new sh(e.path,a)}isEqual(e){return e instanceof Ib&&oa(this.vc,e.vc)}}class Ab extends Vo{constructor(e,t){super(e),this.Fc=t}_toFieldTransform(e){const t=new uc(e.serializer,y1(e.serializer,this.Fc));return new sh(e.path,t)}isEqual(e){return e instanceof Ab&&this.Fc===e.Fc}}function Sb(n,e,t,r){const a=n.Cc(1,e,t);Nb("Data must be an object, but it was:",a,r);const l=[],u=hn.empty();wa(r,((m,y)=>{const v=kb(e,m,t);y=pe(y);const x=a.yc(v);if(y instanceof uh)l.push(v);else{const T=jo(y,x);T!=null&&(l.push(v),u.set(v,T))}}));const h=new zn(l);return new FR(u,h,a.fieldTransforms)}function Rb(n,e,t,r,a,l){const u=n.Cc(1,e,t),h=[G_(e,r,t)],m=[a];if(l.length%2!=0)throw new te(H.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<l.length;T+=2)h.push(G_(e,l[T])),m.push(l[T+1]);const y=[],v=hn.empty();for(let T=h.length-1;T>=0;--T)if(!$R(y,h[T])){const R=h[T];let V=m[T];V=pe(V);const U=u.yc(R);if(V instanceof uh)y.push(R);else{const M=jo(V,U);M!=null&&(y.push(R),v.set(R,M))}}const x=new zn(y);return new FR(v,x,u.fieldTransforms)}function HR(n,e,t,r=!1){return jo(t,n.Cc(r?4:3,e))}function jo(n,e){if(QR(n=pe(n)))return Nb("Unsupported field value:",e,n),KR(n,e);if(n instanceof Vo)return(function(r,a){if(!qR(a.Ac))throw a.Sc(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,a){const l=[];let u=0;for(const h of r){let m=jo(h,a.wc(u));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),u++}return{arrayValue:{values:l}}})(n,e)}return(function(r,a){if((r=pe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return y1(a.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=He.fromDate(r);return{timestampValue:dc(a.serializer,l)}}if(r instanceof He){const l=new He(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:dc(a.serializer,l)}}if(r instanceof Lr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof yn)return{bytesValue:N1(a.serializer,r._byteString)};if(r instanceof it){const l=a.databaseId,u=r.firestore._databaseId;if(!u.isEqual(l))throw a.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Yv(r.firestore._databaseId||a.databaseId,r._key.path)}}if(r instanceof xs)return(function(u,h){return{mapValue:{fields:{[Lv]:{stringValue:Uv},[ac]:{arrayValue:{values:u.toArray().map((y=>{if(typeof y!="number")throw h.Sc("VectorValues must only contain numeric values.");return qv(h.serializer,y)}))}}}}}})(r,a);throw a.Sc(`Unsupported field value: ${sg(r)}`)})(n,e)}function KR(n,e){const t={};return KS(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):wa(n,((r,a)=>{const l=jo(a,e.mc(r));l!=null&&(t[r]=l)})),{mapValue:{fields:t}}}function QR(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof He||n instanceof Lr||n instanceof yn||n instanceof it||n instanceof Vo||n instanceof xs)}function Nb(n,e,t){if(!QR(t)||!RS(t)){const r=sg(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function G_(n,e,t){if((e=pe(e))instanceof ya)return e._internalPath;if(typeof e=="string")return kb(n,e);throw Fm("Field path arguments must be of type string or ",n,!1,void 0,t)}const e6=new RegExp("[~\\*/\\[\\]]");function kb(n,e,t){if(e.search(e6)>=0)throw Fm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ya(...e.split("."))._internalPath}catch{throw Fm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Fm(n,e,t,r,a){const l=r&&!r.isEmpty(),u=a!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let m="";return(l||u)&&(m+=" (found",l&&(m+=` in field ${r}`),u&&(m+=` in document ${a}`),m+=")"),new te(H.INVALID_ARGUMENT,h+n+m)}function $R(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{constructor(e,t,r,a,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new it(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new t6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Tg("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class t6 extends Bd{data(){return super.data()}}function Tg(n,e){return typeof e=="string"?kb(n,e):e instanceof ya?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YR(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new te(H.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Cb{}class dh extends Cb{}function Wi(n,e,...t){let r=[];e instanceof Cb&&r.push(e),r=r.concat(t),(function(l){const u=l.filter((m=>m instanceof Db)).length,h=l.filter((m=>m instanceof Eg)).length;if(u>1||u>0&&h>0)throw new te(H.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const a of r)n=a._apply(n);return n}class Eg extends dh{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Eg(e,t,r)}_apply(e){const t=this._parse(e);return XR(e._query,t),new kn(e.firestore,e.converter,k_(e._query,t))}_parse(e){const t=Mo(e.firestore);return(function(l,u,h,m,y,v,x){let T;if(y.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new te(H.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){TI(x,v);const V=[];for(const U of x)V.push(wI(m,l,U));T={arrayValue:{values:V}}}else T=wI(m,l,x)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||TI(x,v),T=HR(h,u,x,v==="in"||v==="not-in");return Ve.create(y,v,T)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function n6(n,e,t){const r=e,a=Tg("where",n);return Eg._create(a,r,t)}class Db extends Cb{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Db(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:Ye.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,l){let u=a;const h=l.getFlattenedFilters();for(const m of h)XR(u,m),u=k_(u,m)})(e._query,t),new kn(e.firestore,e.converter,k_(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Pb extends dh{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Pb(e,t)}_apply(e){const t=(function(a,l,u){if(a.startAt!==null)throw new te(H.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new te(H.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Md(l,u)})(e._query,this._field,this._direction);return new kn(e.firestore,e.converter,(function(a,l){const u=a.explicitOrderBy.concat([l]);return new ai(a.path,a.collectionGroup,u,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,t))}}function r6(n,e="asc"){const t=e,r=Tg("orderBy",n);return Pb._create(r,t)}class Ig extends dh{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Ig(e,t,r)}_apply(e){return new kn(e.firestore,e.converter,Dm(e._query,this._limit,this._limitType))}}function s6(n){return NS("limit",n),Ig._create("limit",n,"F")}function i6(n){return NS("limitToLast",n),Ig._create("limitToLast",n,"L")}class Ag extends dh{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Ag(e,t,r)}_apply(e){const t=WR(e,this.type,this._docOrFields,this._inclusive);return new kn(e.firestore,e.converter,(function(a,l){return new ai(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,l,a.endAt)})(e._query,t))}}function a6(...n){return Ag._create("startAt",n,!0)}function o6(...n){return Ag._create("startAfter",n,!1)}class Sg extends dh{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Sg(e,t,r)}_apply(e){const t=WR(e,this.type,this._docOrFields,this._inclusive);return new kn(e.firestore,e.converter,(function(a,l){return new ai(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,a.startAt,l)})(e._query,t))}}function l6(...n){return Sg._create("endBefore",n,!1)}function c6(...n){return Sg._create("endAt",n,!0)}function WR(n,e,t,r){if(t[0]=pe(t[0]),t[0]instanceof Bd)return(function(l,u,h,m,y){if(!m)throw new te(H.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${h}().`);const v=[];for(const x of Ql(l))if(x.field.isKeyField())v.push(To(u,m.key));else{const T=m.data.field(x.field);if(cg(T))throw new te(H.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+x.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(T===null){const R=x.field.canonicalString();throw new te(H.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${R}' (used as the orderBy) does not exist.`)}v.push(T)}return new ma(v,y)})(n._query,n.firestore._databaseId,e,t[0]._document,r);{const a=Mo(n.firestore);return(function(u,h,m,y,v,x){const T=u.explicitOrderBy;if(v.length>T.length)throw new te(H.INVALID_ARGUMENT,`Too many arguments provided to ${y}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const R=[];for(let V=0;V<v.length;V++){const U=v[V];if(T[V].field.isKeyField()){if(typeof U!="string")throw new te(H.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${y}(), but got a ${typeof U}`);if(!Bv(u)&&U.indexOf("/")!==-1)throw new te(H.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${y}() must be a plain document ID, but '${U}' contains a slash.`);const M=u.path.child(De.fromString(U));if(!ae.isDocumentKey(M))throw new te(H.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${y}() must result in a valid document path, but '${M}' is not because it contains an odd number of segments.`);const W=new ae(M);R.push(To(h,W))}else{const M=HR(m,y,U);R.push(M)}}return new ma(R,x)})(n._query,n.firestore._databaseId,a,e,t,r)}}function wI(n,e,t){if(typeof(t=pe(t))=="string"){if(t==="")throw new te(H.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Bv(e)&&t.indexOf("/")!==-1)throw new te(H.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(De.fromString(t));if(!ae.isDocumentKey(r))throw new te(H.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return To(n,new ae(r))}if(t instanceof it)return To(n,t._key);throw new te(H.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${sg(t)}.`)}function TI(n,e){if(!Array.isArray(n)||n.length===0)throw new te(H.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function XR(n,e){const t=(function(a,l){for(const u of a)for(const h of u.getFlattenedFilters())if(l.indexOf(h.op)>=0)return h.op;return null})(n.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new te(H.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new te(H.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class Ob{convertValue(e,t="none"){switch(ha(e)){case 0:return null;case 1:return e.booleanValue;case 2:return gt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ni(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw de(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return wa(e,((a,l)=>{r[a]=this.convertValue(l,t)})),r}convertVectorValue(e){var r,a,l;const t=(l=(a=(r=e.fields)==null?void 0:r[ac].arrayValue)==null?void 0:a.values)==null?void 0:l.map((u=>gt(u.doubleValue)));return new xs(t)}convertGeoPoint(e){return new Lr(gt(e.latitude),gt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=ug(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Pd(e));default:return null}}convertTimestamp(e){const t=ti(e);return new He(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=De.fromString(e);me(z1(r),9688,{name:e});const a=new da(r.get(1),r.get(3)),l=new ae(r.popFirst(5));return a.isEqual(t)||Dt(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rg(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class u6 extends Ob{constructor(e){super(),this.firestore=e}convertBytes(e){return new yn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new it(this.firestore,null,t)}}class mo{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let xr=class JR extends Bd{constructor(e,t,r,a,l,u){super(e,t,r,a,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new _d(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Tg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new te(H.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=JR._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};xr._jsonSchemaVersion="firestore/documentSnapshot/1.0",xr._jsonSchema={type:Kt("string",xr._jsonSchemaVersion),bundleSource:Kt("string","DocumentSnapshot"),bundleName:Kt("string"),bundle:Kt("string")};let _d=class extends xr{data(e={}){return super.data(e)}},Ur=class ZR{constructor(e,t,r,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new mo(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new _d(this._firestore,this._userDataWriter,r.key,r,new mo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new te(H.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let u=0;return a._snapshot.docChanges.map((h=>{const m=new _d(a._firestore,a._userDataWriter,h.doc.key,h.doc,new mo(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);return h.doc,{type:"added",doc:m,oldIndex:-1,newIndex:u++}}))}{let u=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((h=>l||h.type!==3)).map((h=>{const m=new _d(a._firestore,a._userDataWriter,h.doc.key,h.doc,new mo(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);let y=-1,v=-1;return h.type!==0&&(y=u.indexOf(h.doc.key),u=u.delete(h.doc.key)),h.type!==1&&(u=u.add(h.doc),v=u.indexOf(h.doc.key)),{type:d6(h.type),doc:m,oldIndex:y,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new te(H.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ZR._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=kv.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),r.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function d6(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return de(61501,{type:n})}}function eN(n,e){return n instanceof xr&&e instanceof xr?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Ur&&e instanceof Ur&&n._firestore===e._firestore&&UR(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h6(n){n=Be(n,it);const e=Be(n.firestore,Ot);return CR(xn(e),n._key).then((t=>Vb(e,n,t)))}Ur._jsonSchemaVersion="firestore/querySnapshot/1.0",Ur._jsonSchema={type:Kt("string",Ur._jsonSchemaVersion),bundleSource:Kt("string","QuerySnapshot"),bundleName:Kt("string"),bundle:Kt("string")};class Lo extends Ob{constructor(e){super(),this.firestore=e}convertBytes(e){return new yn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new it(this.firestore,null,t)}}function f6(n){n=Be(n,it);const e=Be(n.firestore,Ot),t=xn(e),r=new Lo(e);return O3(t,n._key).then((a=>new xr(e,r,n._key,a,new mo(a!==null&&a.hasLocalMutations,!0),n.converter)))}function m6(n){n=Be(n,it);const e=Be(n.firestore,Ot);return CR(xn(e),n._key,{source:"server"}).then((t=>Vb(e,n,t)))}function g6(n){n=Be(n,kn);const e=Be(n.firestore,Ot),t=xn(e),r=new Lo(e);return YR(n._query),DR(t,n._query).then((a=>new Ur(e,r,n,a)))}function p6(n){n=Be(n,kn);const e=Be(n.firestore,Ot),t=xn(e),r=new Lo(e);return V3(t,n._query).then((a=>new Ur(e,r,n,a)))}function y6(n){n=Be(n,kn);const e=Be(n.firestore,Ot),t=xn(e),r=new Lo(e);return DR(t,n._query,{source:"server"}).then((a=>new Ur(e,r,n,a)))}function EI(n,e,t){n=Be(n,it);const r=Be(n.firestore,Ot),a=Rg(n.converter,e,t);return hh(r,[wg(Mo(r),"setDoc",n._key,a,n.converter!==null,t).toMutation(n._key,_t.none())])}function II(n,e,t,...r){n=Be(n,it);const a=Be(n.firestore,Ot),l=Mo(a);let u;return u=typeof(e=pe(e))=="string"||e instanceof ya?Rb(l,"updateDoc",n._key,e,t,r):Sb(l,"updateDoc",n._key,e),hh(a,[u.toMutation(n._key,_t.exists(!0))])}function _6(n){return hh(Be(n.firestore,Ot),[new Ac(n._key,_t.none())])}function v6(n,e){const t=Be(n.firestore,Ot),r=Bm(n),a=Rg(n.converter,e);return hh(t,[wg(Mo(n.firestore),"addDoc",r._key,a,n.converter!==null,{}).toMutation(r._key,_t.exists(!1))]).then((()=>r))}function tN(n,...e){var m,y,v;n=pe(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||q_(e[r])||(t=e[r++]);const a={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(q_(e[r])){const x=e[r];e[r]=(m=x.next)==null?void 0:m.bind(x),e[r+1]=(y=x.error)==null?void 0:y.bind(x),e[r+2]=(v=x.complete)==null?void 0:v.bind(x)}let l,u,h;if(n instanceof it)u=Be(n.firestore,Ot),h=Ec(n._key.path),l={next:x=>{e[r]&&e[r](Vb(u,n,x))},error:e[r+1],complete:e[r+2]};else{const x=Be(n,kn);u=Be(x.firestore,Ot),h=x._query;const T=new Lo(u);l={next:R=>{e[r]&&e[r](new Ur(u,T,x,R))},error:e[r+1],complete:e[r+2]},YR(n._query)}return(function(T,R,V,U){const M=new vg(U),W=new mb(R,M,V);return T.asyncQueue.enqueueAndForget((async()=>db(await yc(T),W))),()=>{M.Nu(),T.asyncQueue.enqueueAndForget((async()=>hb(await yc(T),W)))}})(xn(u),h,a,l)}function b6(n,e){return M3(xn(n=Be(n,Ot)),q_(e)?e:{next:e})}function hh(n,e){return(function(r,a){const l=new fn;return r.asyncQueue.enqueueAndForget((async()=>c3(await wb(r),a,l))),l.promise})(xn(n),e)}function Vb(n,e,t){const r=t.docs.get(e._key),a=new Lo(n);return new xr(n,a,e._key,r,new mo(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x6={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let w6=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Mo(e)}set(e,t,r){this._verifyNotCommitted();const a=ea(e,this._firestore),l=Rg(a.converter,t,r),u=wg(this._dataReader,"WriteBatch.set",a._key,l,a.converter!==null,r);return this._mutations.push(u.toMutation(a._key,_t.none())),this}update(e,t,r,...a){this._verifyNotCommitted();const l=ea(e,this._firestore);let u;return u=typeof(t=pe(t))=="string"||t instanceof ya?Rb(this._dataReader,"WriteBatch.update",l._key,t,r,a):Sb(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(u.toMutation(l._key,_t.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=ea(e,this._firestore);return this._mutations=this._mutations.concat(new Ac(t._key,_t.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new te(H.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function ea(n,e){if((n=pe(n)).firestore!==e)throw new te(H.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T6{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Mo(e)}get(e){const t=ea(e,this._firestore),r=new u6(this._firestore);return this._transaction.lookup([t._key]).then((a=>{if(!a||a.length!==1)return de(24041);const l=a[0];if(l.isFoundDocument())return new Bd(this._firestore,r,l.key,l,t.converter);if(l.isNoDocument())return new Bd(this._firestore,r,t._key,null,t.converter);throw de(18433,{doc:l})}))}set(e,t,r){const a=ea(e,this._firestore),l=Rg(a.converter,t,r),u=wg(this._dataReader,"Transaction.set",a._key,l,a.converter!==null,r);return this._transaction.set(a._key,u),this}update(e,t,r,...a){const l=ea(e,this._firestore);let u;return u=typeof(t=pe(t))=="string"||t instanceof ya?Rb(this._dataReader,"Transaction.update",l._key,t,r,a):Sb(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,u),this}delete(e){const t=ea(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let E6=class extends T6{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=ea(e,this._firestore),r=new Lo(this._firestore);return super.get(e).then((a=>new xr(this._firestore,r,t._key,a._document,new mo(!1,!1),t.converter)))}};function I6(n,e,t){n=Be(n,Ot);const r={...x6,...t};return(function(l){if(l.maxAttempts<1)throw new te(H.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r),(function(l,u,h){const m=new fn;return l.asyncQueue.enqueueAndForget((async()=>{const y=await C3(l);new N3(l.asyncQueue,y,h,u,m).ju()})),m.promise})(xn(n),(a=>e(new E6(n,a))),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A6(){return new uh("deleteField")}function S6(){return new Tb("serverTimestamp")}function R6(...n){return new Eb("arrayUnion",n)}function N6(...n){return new Ib("arrayRemove",n)}function k6(n){return new Ab("increment",n)}(function(e,t=!0){(function(a){Tc=a})(ri),Zs(new wr("firestore",((r,{instanceIdentifier:a,options:l})=>{const u=r.getProvider("app").getImmediate(),h=new Ot(new T4(r.getProvider("auth-internal")),new A4(u,r.getProvider("app-check-internal")),(function(y,v){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new te(H.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new da(y.options.projectId,v)})(u,a),u);return l={useFetchStreams:t,...l},h._setSettings(l),h}),"PUBLIC").setMultipleInstances(!0)),nr(tE,nE,e),nr(tE,nE,"esm2020")})();const C6="@firebase/firestore-compat",D6="0.4.2";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mb(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new te("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AI(){if(typeof Uint8Array>"u")throw new te("unimplemented","Uint8Arrays are not available in this environment.")}function SI(){if(!oM())throw new te("unimplemented","Blobs are unavailable in Firestore in this environment.")}let nN=class H_{constructor(e){this._delegate=e}static fromBase64String(e){return SI(),new H_(yn.fromBase64String(e))}static fromUint8Array(e){return AI(),new H_(yn.fromUint8Array(e))}toBase64(){return SI(),this._delegate.toBase64()}toUint8Array(){return AI(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K_(n){return P6(n,["next","error","complete"])}function P6(n,e){if(typeof n!="object"||n===null)return!1;const t=n;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O6{enableIndexedDbPersistence(e,t){return q3(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return G3(e._delegate)}clearIndexedDbPersistence(e){return H3(e._delegate)}}class rN{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof da||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Es("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e={...t,...e},delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){U3(this._delegate,e,t,r)}enableNetwork(){return Q3(this._delegate)}disableNetwork(){return $3(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,SS("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return K3(this._delegate)}onSnapshotsInSync(e){return b6(this._delegate,e)}get app(){if(!this._appCompat)throw new te("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new _c(this,jR(this._delegate,e))}catch(t){throw Sn(t,"collection()","Firestore.collection()")}}doc(e){try{return new vr(this,Bm(this._delegate,e))}catch(t){throw Sn(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new An(this,z3(this._delegate,e))}catch(t){throw Sn(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return I6(this._delegate,t=>e(new sN(this,t)))}batch(){return xn(this._delegate),new iN(new w6(this._delegate,e=>hh(this._delegate,e)))}loadBundle(e){return Y3(this._delegate,e)}namedQuery(e){return W3(this._delegate,e).then(t=>t?new An(this,t):null)}}class Ng extends Ob{constructor(e){super(),this.firestore=e}convertBytes(e){return new nN(new yn(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return vr.forKey(t,this.firestore,null)}}function V6(n){v4(n)}class sN{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Ng(e)}get(e){const t=go(e);return this._delegate.get(t).then(r=>new Fd(this._firestore,new xr(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const a=go(e);return r?(Mb("Transaction.set",r),this._delegate.set(a,t,r)):this._delegate.set(a,t),this}update(e,t,r,...a){const l=go(e);return arguments.length===2?this._delegate.update(l,t):this._delegate.update(l,t,r,...a),this}delete(e){const t=go(e);return this._delegate.delete(t),this}}class iN{constructor(e){this._delegate=e}set(e,t,r){const a=go(e);return r?(Mb("WriteBatch.set",r),this._delegate.set(a,t,r)):this._delegate.set(a,t),this}update(e,t,r,...a){const l=go(e);return arguments.length===2?this._delegate.update(l,t):this._delegate.update(l,t,r,...a),this}delete(e){const t=go(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Co{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new _d(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new qd(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Co.INSTANCES;let a=r.get(e);a||(a=new WeakMap,r.set(e,a));let l=a.get(t);return l||(l=new Co(e,new Ng(e),t),a.set(t,l)),l}}Co.INSTANCES=new WeakMap;class vr{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Ng(e)}static forPath(e,t,r){if(e.length%2!==0)throw new te("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new vr(t,new it(t._delegate,r,new ae(e)))}static forKey(e,t,r){return new vr(t,new it(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new _c(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new _c(this.firestore,jR(this._delegate,e))}catch(t){throw Sn(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=pe(e),e instanceof it?LR(this._delegate,e):!1}set(e,t){t=Mb("DocumentReference.set",t);try{return t?EI(this._delegate,e,t):EI(this._delegate,e)}catch(r){throw Sn(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?II(this._delegate,e):II(this._delegate,e,t,...r)}catch(a){throw Sn(a,"updateDoc()","DocumentReference.update()")}}delete(){return _6(this._delegate)}onSnapshot(...e){const t=aN(e),r=oN(e,a=>new Fd(this.firestore,new xr(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)));return tN(this._delegate,t,r)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=f6(this._delegate):(e==null?void 0:e.source)==="server"?t=m6(this._delegate):t=h6(this._delegate),t.then(r=>new Fd(this.firestore,new xr(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new vr(this.firestore,e?this._delegate.withConverter(Co.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Sn(n,e,t){return n.message=n.message.replace(e,t),n}function aN(n){for(const e of n)if(typeof e=="object"&&!K_(e))return e;return{}}function oN(n,e){var r,a;let t;return K_(n[0])?t=n[0]:K_(n[1])?t=n[1]:typeof n[0]=="function"?t={next:n[0],error:n[1],complete:n[2]}:t={next:n[1],error:n[2],complete:n[3]},{next:l=>{t.next&&t.next(e(l))},error:(r=t.error)==null?void 0:r.bind(t),complete:(a=t.complete)==null?void 0:a.bind(t)}}class Fd{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new vr(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return eN(this._delegate,e._delegate)}}class qd extends Fd{data(e){const t=this._delegate.data(e);return this._delegate._converter||b4(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}}class An{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Ng(e)}where(e,t,r){try{return new An(this.firestore,Wi(this._delegate,n6(e,t,r)))}catch(a){throw Sn(a,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new An(this.firestore,Wi(this._delegate,r6(e,t)))}catch(r){throw Sn(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new An(this.firestore,Wi(this._delegate,s6(e)))}catch(t){throw Sn(t,"limit()","Query.limit()")}}limitToLast(e){try{return new An(this.firestore,Wi(this._delegate,i6(e)))}catch(t){throw Sn(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new An(this.firestore,Wi(this._delegate,a6(...e)))}catch(t){throw Sn(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new An(this.firestore,Wi(this._delegate,o6(...e)))}catch(t){throw Sn(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new An(this.firestore,Wi(this._delegate,l6(...e)))}catch(t){throw Sn(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new An(this.firestore,Wi(this._delegate,c6(...e)))}catch(t){throw Sn(t,"endAt()","Query.endAt()")}}isEqual(e){return UR(this._delegate,e._delegate)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=p6(this._delegate):(e==null?void 0:e.source)==="server"?t=y6(this._delegate):t=g6(this._delegate),t.then(r=>new Q_(this.firestore,new Ur(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=aN(e),r=oN(e,a=>new Q_(this.firestore,new Ur(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)));return tN(this._delegate,t,r)}withConverter(e){return new An(this.firestore,e?this._delegate.withConverter(Co.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class M6{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new qd(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Q_{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new An(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new qd(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new M6(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new qd(this._firestore,r))})}isEqual(e){return eN(this._delegate,e._delegate)}}class _c extends An{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new vr(this.firestore,e):null}doc(e){try{return e===void 0?new vr(this.firestore,Bm(this._delegate)):new vr(this.firestore,Bm(this._delegate,e))}catch(t){throw Sn(t,"doc()","CollectionReference.doc()")}}add(e){return v6(this._delegate,e).then(t=>new vr(this.firestore,t))}isEqual(e){return LR(this._delegate,e._delegate)}withConverter(e){return new _c(this.firestore,e?this._delegate.withConverter(Co.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function go(n){return Be(n,it)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{constructor(...e){this._delegate=new ya(...e)}static documentId(){return new jb(yt.keyField().canonicalString())}isEqual(e){return e=pe(e),e instanceof ya?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{static serverTimestamp(){const e=S6();return e._methodName="FieldValue.serverTimestamp",new uo(e)}static delete(){const e=A6();return e._methodName="FieldValue.delete",new uo(e)}static arrayUnion(...e){const t=R6(...e);return t._methodName="FieldValue.arrayUnion",new uo(t)}static arrayRemove(...e){const t=N6(...e);return t._methodName="FieldValue.arrayRemove",new uo(t)}static increment(e){const t=k6(e);return t._methodName="FieldValue.increment",new uo(t)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j6={Firestore:rN,GeoPoint:Lr,Timestamp:He,Blob:nN,Transaction:sN,WriteBatch:iN,DocumentReference:vr,DocumentSnapshot:Fd,Query:An,QueryDocumentSnapshot:qd,QuerySnapshot:Q_,CollectionReference:_c,FieldPath:jb,FieldValue:uo,setLogLevel:V6,CACHE_SIZE_UNLIMITED:F3};function L6(n,e){n.INTERNAL.registerComponent(new wr("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),a=t.getProvider("firestore").getImmediate();return e(r,a)},"PUBLIC").setServiceProps({...j6}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U6(n){L6(n,(e,t)=>new rN(e,t,new O6)),n.registerVersion(C6,D6)}U6(rt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lN="firebasestorage.googleapis.com",cN="storageBucket",z6=120*1e3,B6=600*1e3,F6=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt extends vn{constructor(e,t,r=0){super(n_(e),`Firebase Storage: ${t} (${n_(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,xt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return n_(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ht;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ht||(ht={}));function n_(n){return"storage/"+n}function Lb(){const n="An unknown error occurred, please check the error payload for server response.";return new xt(ht.UNKNOWN,n)}function q6(n){return new xt(ht.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function G6(n){return new xt(ht.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function H6(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new xt(ht.UNAUTHENTICATED,n)}function K6(){return new xt(ht.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Q6(n){return new xt(ht.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function uN(){return new xt(ht.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function dN(){return new xt(ht.CANCELED,"User canceled the upload/download.")}function $6(n){return new xt(ht.INVALID_URL,"Invalid URL '"+n+"'.")}function Y6(n){return new xt(ht.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function W6(){return new xt(ht.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+cN+"' property when initializing the app?")}function hN(){return new xt(ht.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function X6(){return new xt(ht.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function J6(){return new xt(ht.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Z6(n){return new xt(ht.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Yl(n){return new xt(ht.INVALID_ARGUMENT,n)}function fN(){return new xt(ht.APP_DELETED,"The Firebase app was deleted.")}function mN(n){return new xt(ht.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function vd(n,e){return new xt(ht.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function $u(n){throw new xt(ht.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=_n.makeFromUrl(e,t)}catch{return new _n(e,"")}if(r.path==="")return r;throw Y6(e)}static makeFromUrl(e,t){let r=null;const a="([A-Za-z0-9.\\-_]+)";function l(oe){oe.path.charAt(oe.path.length-1)==="/"&&(oe.path_=oe.path_.slice(0,-1))}const u="(/(.*))?$",h=new RegExp("^gs://"+a+u,"i"),m={bucket:1,path:3};function y(oe){oe.path_=decodeURIComponent(oe.path)}const v="v[A-Za-z0-9_]+",x=t.replace(/[.]/g,"\\."),T="(/([^?#]*).*)?$",R=new RegExp(`^https?://${x}/${v}/b/${a}/o${T}`,"i"),V={bucket:1,path:3},U=t===lN?"(?:storage.googleapis.com|storage.cloud.google.com)":t,M="([^?#]*)",W=new RegExp(`^https?://${U}/${a}/${M}`,"i"),X=[{regex:h,indices:m,postModify:l},{regex:R,indices:V,postModify:y},{regex:W,indices:{bucket:1,path:2},postModify:y}];for(let oe=0;oe<X.length;oe++){const ye=X[oe],he=ye.regex.exec(e);if(he){const C=he[ye.indices.bucket];let A=he[ye.indices.path];A||(A=""),r=new _n(C,A),ye.postModify(r);break}}if(r==null)throw $6(e);return r}}class eL{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tL(n,e,t){let r=1,a=null,l=null,u=!1,h=0;function m(){return h===2}let y=!1;function v(...M){y||(y=!0,e.apply(null,M))}function x(M){a=setTimeout(()=>{a=null,n(R,m())},M)}function T(){l&&clearTimeout(l)}function R(M,...W){if(y){T();return}if(M){T(),v.call(null,M,...W);return}if(m()||u){T(),v.call(null,M,...W);return}r<64&&(r*=2);let X;h===1?(h=2,X=0):X=(r+Math.random())*1e3,x(X)}let V=!1;function U(M){V||(V=!0,T(),!y&&(a!==null?(M||(h=2),clearTimeout(a),x(0)):M||(h=1)))}return x(0),l=setTimeout(()=>{u=!0,U(!0)},t),U}function nL(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rL(n){return n!==void 0}function sL(n){return typeof n=="function"}function iL(n){return typeof n=="object"&&!Array.isArray(n)}function kg(n){return typeof n=="string"||n instanceof String}function RI(n){return Ub()&&n instanceof Blob}function Ub(){return typeof Blob<"u"}function $_(n,e,t,r){if(r<e)throw Yl(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Yl(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ia(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function gN(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const a=e(r)+"="+e(n[r]);t=t+a+"&"}return t=t.slice(0,-1),t}var vo;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(vo||(vo={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pN(n,e){const t=n>=500&&n<600,a=[408,429].indexOf(n)!==-1,l=e.indexOf(n)!==-1;return t||a||l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aL{constructor(e,t,r,a,l,u,h,m,y,v,x,T=!0,R=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=a,this.successCodes_=l,this.additionalRetryCodes_=u,this.callback_=h,this.errorCallback_=m,this.timeout_=y,this.progressCallback_=v,this.connectionFactory_=x,this.retry=T,this.isUsingEmulator=R,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((V,U)=>{this.resolve_=V,this.reject_=U,this.start_()})}start_(){const e=(r,a)=>{if(a){r(!1,new Xf(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const u=h=>{const m=h.loaded,y=h.lengthComputable?h.total:-1;this.progressCallback_!==null&&this.progressCallback_(m,y)};this.progressCallback_!==null&&l.addUploadProgressListener(u),l.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(u),this.pendingConnection_=null;const h=l.getErrorCode()===vo.NO_ERROR,m=l.getStatus();if(!h||pN(m,this.additionalRetryCodes_)&&this.retry){const v=l.getErrorCode()===vo.ABORT;r(!1,new Xf(!1,null,v));return}const y=this.successCodes_.indexOf(m)!==-1;r(!0,new Xf(y,l))})},t=(r,a)=>{const l=this.resolve_,u=this.reject_,h=a.connection;if(a.wasSuccessCode)try{const m=this.callback_(h,h.getResponse());rL(m)?l(m):l()}catch(m){u(m)}else if(h!==null){const m=Lb();m.serverResponse=h.getErrorText(),this.errorCallback_?u(this.errorCallback_(h,m)):u(m)}else if(a.canceled){const m=this.appDelete_?fN():dN();u(m)}else{const m=uN();u(m)}};this.canceled_?t(!1,new Xf(!1,null,!0)):this.backoffId_=tL(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&nL(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Xf{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function oL(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function lL(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function cL(n,e){e&&(n["X-Firebase-GMPID"]=e)}function uL(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function dL(n,e,t,r,a,l,u=!0,h=!1){const m=gN(n.urlParams),y=n.url+m,v=Object.assign({},n.headers);return cL(v,e),oL(v,t),lL(v,l),uL(v,r),new aL(y,n.method,v,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,a,u,h)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hL(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function fL(...n){const e=hL();if(e!==void 0){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(Ub())return new Blob(n);throw new xt(ht.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function mL(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gL(n){if(typeof atob>"u")throw Z6("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const br={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class r_{constructor(e,t){this.data=e,this.contentType=t||null}}function yN(n,e){switch(n){case br.RAW:return new r_(_N(e));case br.BASE64:case br.BASE64URL:return new r_(vN(n,e));case br.DATA_URL:return new r_(yL(e),_L(e))}throw Lb()}function _N(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const l=r,u=n.charCodeAt(++t);r=65536|(l&1023)<<10|u&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function pL(n){let e;try{e=decodeURIComponent(n)}catch{throw vd(br.DATA_URL,"Malformed data URL.")}return _N(e)}function vN(n,e){switch(n){case br.BASE64:{const a=e.indexOf("-")!==-1,l=e.indexOf("_")!==-1;if(a||l)throw vd(n,"Invalid character '"+(a?"-":"_")+"' found: is it base64url encoded?");break}case br.BASE64URL:{const a=e.indexOf("+")!==-1,l=e.indexOf("/")!==-1;if(a||l)throw vd(n,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=gL(e)}catch(a){throw a.message.includes("polyfill")?a:vd(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r}class bN{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw vd(br.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;r!=null&&(this.base64=vL(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function yL(n){const e=new bN(n);return e.base64?vN(br.BASE64,e.rest):pL(e.rest)}function _L(n){return new bN(n).contentType}function vL(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(e,t){let r=0,a="";RI(e)?(this.data_=e,r=e.size,a=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=a}size(){return this.size_}type(){return this.type_}slice(e,t){if(RI(this.data_)){const r=this.data_,a=mL(r,e,t);return a===null?null:new Qs(a)}else{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Qs(r,!0)}}static getBlob(...e){if(Ub()){const t=e.map(r=>r instanceof Qs?r.data_:r);return new Qs(fL.apply(null,t))}else{const t=e.map(u=>kg(u)?yN(br.RAW,u).data:u.data_);let r=0;t.forEach(u=>{r+=u.byteLength});const a=new Uint8Array(r);let l=0;return t.forEach(u=>{for(let h=0;h<u.length;h++)a[l++]=u[h]}),new Qs(a,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zb(n){let e;try{e=JSON.parse(n)}catch{return null}return iL(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bL(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function xL(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function xN(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wL(n,e){return e}class In{constructor(e,t,r,a){this.server=e,this.local=t||e,this.writable=!!r,this.xform=a||wL}}let Jf=null;function TL(n){return!kg(n)||n.length<2?n:xN(n)}function Cg(){if(Jf)return Jf;const n=[];n.push(new In("bucket")),n.push(new In("generation")),n.push(new In("metageneration")),n.push(new In("name","fullPath",!0));function e(l,u){return TL(u)}const t=new In("name");t.xform=e,n.push(t);function r(l,u){return u!==void 0?Number(u):u}const a=new In("size");return a.xform=r,n.push(a),n.push(new In("timeCreated")),n.push(new In("updated")),n.push(new In("md5Hash",null,!0)),n.push(new In("cacheControl",null,!0)),n.push(new In("contentDisposition",null,!0)),n.push(new In("contentEncoding",null,!0)),n.push(new In("contentLanguage",null,!0)),n.push(new In("contentType",null,!0)),n.push(new In("metadata","customMetadata",!0)),Jf=n,Jf}function EL(n,e){function t(){const r=n.bucket,a=n.fullPath,l=new _n(r,a);return e._makeStorageReference(l)}Object.defineProperty(n,"ref",{get:t})}function IL(n,e,t){const r={};r.type="file";const a=t.length;for(let l=0;l<a;l++){const u=t[l];r[u.local]=u.xform(r,e[u.server])}return EL(r,n),r}function wN(n,e,t){const r=zb(e);return r===null?null:IL(n,r,t)}function AL(n,e,t,r){const a=zb(e);if(a===null||!kg(a.downloadTokens))return null;const l=a.downloadTokens;if(l.length===0)return null;const u=encodeURIComponent;return l.split(",").map(y=>{const v=n.bucket,x=n.fullPath,T="/b/"+u(v)+"/o/"+u(x),R=Ia(T,t,r),V=gN({alt:"media",token:y});return R+V})[0]}function Bb(n,e){const t={},r=e.length;for(let a=0;a<r;a++){const l=e[a];l.writable&&(t[l.server]=n[l.local])}return JSON.stringify(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NI="prefixes",kI="items";function SL(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[NI])for(const a of t[NI]){const l=a.replace(/\/$/,""),u=n._makeStorageReference(new _n(e,l));r.prefixes.push(u)}if(t[kI])for(const a of t[kI]){const l=n._makeStorageReference(new _n(e,a.name));r.items.push(l)}return r}function RL(n,e,t){const r=zb(t);return r===null?null:SL(n,e,r)}class ui{constructor(e,t,r,a){this.url=e,this.method=t,this.handler=r,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ws(n){if(!n)throw Lb()}function Dg(n,e){function t(r,a){const l=wN(n,a,e);return ws(l!==null),l}return t}function NL(n,e){function t(r,a){const l=RL(n,e,a);return ws(l!==null),l}return t}function kL(n,e){function t(r,a){const l=wN(n,a,e);return ws(l!==null),AL(l,a,n.host,n._protocol)}return t}function Cc(n){function e(t,r){let a;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?a=K6():a=H6():t.getStatus()===402?a=G6(n.bucket):t.getStatus()===403?a=Q6(n.path):a=r,a.status=t.getStatus(),a.serverResponse=r.serverResponse,a}return e}function Pg(n){const e=Cc(n);function t(r,a){let l=e(r,a);return r.getStatus()===404&&(l=q6(n.path)),l.serverResponse=a.serverResponse,l}return t}function TN(n,e,t){const r=e.fullServerUrl(),a=Ia(r,n.host,n._protocol),l="GET",u=n.maxOperationRetryTime,h=new ui(a,l,Dg(n,t),u);return h.errorHandler=Pg(e),h}function CL(n,e,t,r,a){const l={};e.isRoot?l.prefix="":l.prefix=e.path+"/",t.length>0&&(l.delimiter=t),r&&(l.pageToken=r),a&&(l.maxResults=a);const u=e.bucketOnlyServerUrl(),h=Ia(u,n.host,n._protocol),m="GET",y=n.maxOperationRetryTime,v=new ui(h,m,NL(n,e.bucket),y);return v.urlParams=l,v.errorHandler=Cc(e),v}function DL(n,e,t){const r=e.fullServerUrl(),a=Ia(r,n.host,n._protocol),l="GET",u=n.maxOperationRetryTime,h=new ui(a,l,kL(n,t),u);return h.errorHandler=Pg(e),h}function PL(n,e,t,r){const a=e.fullServerUrl(),l=Ia(a,n.host,n._protocol),u="PATCH",h=Bb(t,r),m={"Content-Type":"application/json; charset=utf-8"},y=n.maxOperationRetryTime,v=new ui(l,u,Dg(n,r),y);return v.headers=m,v.body=h,v.errorHandler=Pg(e),v}function OL(n,e){const t=e.fullServerUrl(),r=Ia(t,n.host,n._protocol),a="DELETE",l=n.maxOperationRetryTime;function u(m,y){}const h=new ui(r,a,u,l);return h.successCodes=[200,204],h.errorHandler=Pg(e),h}function VL(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function EN(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=VL(null,e)),r}function ML(n,e,t,r,a){const l=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"};function h(){let X="";for(let oe=0;oe<2;oe++)X=X+Math.random().toString().slice(2);return X}const m=h();u["Content-Type"]="multipart/related; boundary="+m;const y=EN(e,r,a),v=Bb(y,t),x="--"+m+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+v+`\r
--`+m+`\r
Content-Type: `+y.contentType+`\r
\r
`,T=`\r
--`+m+"--",R=Qs.getBlob(x,r,T);if(R===null)throw hN();const V={name:y.fullPath},U=Ia(l,n.host,n._protocol),M="POST",W=n.maxUploadRetryTime,Y=new ui(U,M,Dg(n,t),W);return Y.urlParams=V,Y.headers=u,Y.body=R.uploadData(),Y.errorHandler=Cc(e),Y}class qm{constructor(e,t,r,a){this.current=e,this.total=t,this.finalized=!!r,this.metadata=a||null}}function Fb(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{ws(!1)}return ws(!!t&&(e||["active"]).indexOf(t)!==-1),t}function jL(n,e,t,r,a){const l=e.bucketOnlyServerUrl(),u=EN(e,r,a),h={name:u.fullPath},m=Ia(l,n.host,n._protocol),y="POST",v={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":u.contentType,"Content-Type":"application/json; charset=utf-8"},x=Bb(u,t),T=n.maxUploadRetryTime;function R(U){Fb(U);let M;try{M=U.getResponseHeader("X-Goog-Upload-URL")}catch{ws(!1)}return ws(kg(M)),M}const V=new ui(m,y,R,T);return V.urlParams=h,V.headers=v,V.body=x,V.errorHandler=Cc(e),V}function LL(n,e,t,r){const a={"X-Goog-Upload-Command":"query"};function l(y){const v=Fb(y,["active","final"]);let x=null;try{x=y.getResponseHeader("X-Goog-Upload-Size-Received")}catch{ws(!1)}x||ws(!1);const T=Number(x);return ws(!isNaN(T)),new qm(T,r.size(),v==="final")}const u="POST",h=n.maxUploadRetryTime,m=new ui(t,u,l,h);return m.headers=a,m.errorHandler=Cc(e),m}const CI=256*1024;function UL(n,e,t,r,a,l,u,h){const m=new qm(0,0);if(u?(m.current=u.current,m.total=u.total):(m.current=0,m.total=r.size()),r.size()!==m.total)throw X6();const y=m.total-m.current;let v=y;a>0&&(v=Math.min(v,a));const x=m.current,T=x+v;let R="";v===0?R="finalize":y===v?R="upload, finalize":R="upload";const V={"X-Goog-Upload-Command":R,"X-Goog-Upload-Offset":`${m.current}`},U=r.slice(x,T);if(U===null)throw hN();function M(oe,ye){const he=Fb(oe,["active","final"]),C=m.current+v,A=r.size();let S;return he==="final"?S=Dg(e,l)(oe,ye):S=null,new qm(C,A,he==="final",S)}const W="POST",Y=e.maxUploadRetryTime,X=new ui(t,W,M,Y);return X.headers=V,X.body=U.uploadData(),X.progressCallback=h||null,X.errorHandler=Cc(n),X}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zL={STATE_CHANGED:"state_changed"},Rn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function s_(n){switch(n){case"running":case"pausing":case"canceling":return Rn.RUNNING;case"paused":return Rn.PAUSED;case"success":return Rn.SUCCESS;case"canceled":return Rn.CANCELED;case"error":return Rn.ERROR;default:return Rn.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BL{constructor(e,t,r){if(sL(e)||t!=null||r!=null)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const l=e;this.next=l.next,this.error=l.error,this.complete=l.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ml(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class FL{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=vo.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=vo.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=vo.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,a,l){if(this.sent_)throw $u("cannot .send() more than once");if(_a(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),l!==void 0)for(const u in l)l.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,l[u].toString());return a!==void 0?this.xhr_.send(a):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw $u("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw $u("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw $u("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw $u("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class qL extends FL{initXhr(){this.xhr_.responseType="text"}}function gs(){return new qL}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=Cg(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=a=>{if(this._request=void 0,this._chunkMultiplier=1,a._codeEquals(ht.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const l=this.isExponentialBackoffExpired();if(pN(a.status,[]))if(l)a=uN();else{this.sleepTime=Math.max(this.sleepTime*2,F6),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=a,this._transition("error")}},this._metadataErrorHandler=a=>{this._request=void 0,a._codeEquals(ht.CANCELED)?this.completeTransitions_():(this._error=a,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((a,l)=>{this._resolve=a,this._reject=l,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,t)=>{const r=jL(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),a=this._ref.storage._makeRequest(r,gs,e,t);this._request=a,a.getPromise().then(l=>{this._request=void 0,this._uploadUrl=l,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const a=LL(this._ref.storage,this._ref._location,e,this._blob),l=this._ref.storage._makeRequest(a,gs,t,r);this._request=l,l.getPromise().then(u=>{u=u,this._request=void 0,this._updateProgress(u.current),this._needToFetchStatus=!1,u.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=CI*this._chunkMultiplier,t=new qm(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((a,l)=>{let u;try{u=UL(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(m){this._error=m,this._transition("error");return}const h=this._ref.storage._makeRequest(u,gs,a,l,!1);this._request=h,h.getPromise().then(m=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(m.current),m.finalized?(this._metadata=m.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){CI*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=TN(this._ref.storage,this._ref._location,this._mappings),a=this._ref.storage._makeRequest(r,gs,e,t);this._request=a,a.getPromise().then(l=>{this._request=void 0,this._metadata=l,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=ML(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),a=this._ref.storage._makeRequest(r,gs,e,t);this._request=a,a.getPromise().then(l=>{this._request=void 0,this._metadata=l,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t=this._state==="paused";this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=dN(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=s_(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,a){const l=new BL(t||void 0,r||void 0,a||void 0);return this._addObserver(l),()=>{this._removeObserver(l)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);t!==-1&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(s_(this._state)){case Rn.SUCCESS:Ml(this._resolve.bind(null,this.snapshot))();break;case Rn.CANCELED:case Rn.ERROR:const t=this._reject;Ml(t.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(s_(this._state)){case Rn.RUNNING:case Rn.PAUSED:e.next&&Ml(e.next.bind(e,this.snapshot))();break;case Rn.SUCCESS:e.complete&&Ml(e.complete.bind(e))();break;case Rn.CANCELED:case Rn.ERROR:e.error&&Ml(e.error.bind(e,this._error))();break;default:e.error&&Ml(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(e,t){this._service=e,t instanceof _n?this._location=t:this._location=_n.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Do(e,t)}get root(){const e=new _n(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return xN(this._location.path)}get storage(){return this._service}get parent(){const e=bL(this._location.path);if(e===null)return null;const t=new _n(this._location.bucket,e);return new Do(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw mN(e)}}function GL(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new IN(n,new Qs(e),t)}function HL(n){const e={prefixes:[],items:[]};return AN(n,e).then(()=>e)}async function AN(n,e,t){const a=await SN(n,{pageToken:t});e.prefixes.push(...a.prefixes),e.items.push(...a.items),a.nextPageToken!=null&&await AN(n,e,a.nextPageToken)}function SN(n,e){e!=null&&typeof e.maxResults=="number"&&$_("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=CL(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,gs)}function KL(n){n._throwIfRoot("getMetadata");const e=TN(n.storage,n._location,Cg());return n.storage.makeRequestWithTokens(e,gs)}function QL(n,e){n._throwIfRoot("updateMetadata");const t=PL(n.storage,n._location,e,Cg());return n.storage.makeRequestWithTokens(t,gs)}function $L(n){n._throwIfRoot("getDownloadURL");const e=DL(n.storage,n._location,Cg());return n.storage.makeRequestWithTokens(e,gs).then(t=>{if(t===null)throw J6();return t})}function YL(n){n._throwIfRoot("deleteObject");const e=OL(n.storage,n._location);return n.storage.makeRequestWithTokens(e,gs)}function RN(n,e){const t=xL(n._location.path,e),r=new _n(n._location.bucket,t);return new Do(n.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WL(n){return/^[A-Za-z]+:\/\//.test(n)}function XL(n,e){return new Do(n,e)}function NN(n,e){if(n instanceof qb){const t=n;if(t._bucket==null)throw W6();const r=new Do(t,t._bucket);return e!=null?NN(r,e):r}else return e!==void 0?RN(n,e):n}function JL(n,e){if(e&&WL(e)){if(n instanceof qb)return XL(n,e);throw Yl("To use ref(service, url), the first argument must be a Storage instance.")}else return NN(n,e)}function DI(n,e){const t=e==null?void 0:e[cN];return t==null?null:_n.makeFromBucketSpec(t,n)}function ZL(n,e,t,r={}){n.host=`${e}:${t}`;const a=_a(e);a&&(tv(`https://${n.host}/b`),nv("Storage",!0)),n._isUsingEmulator=!0,n._protocol=a?"https":"http";const{mockUserToken:l}=r;l&&(n._overrideAuthToken=typeof l=="string"?l:eA(l,n.app.options.projectId))}class qb{constructor(e,t,r,a,l,u=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=a,this._firebaseVersion=l,this._isUsingEmulator=u,this._bucket=null,this._host=lN,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=z6,this._maxUploadRetryTime=B6,this._requests=new Set,a!=null?this._bucket=_n.makeFromBucketSpec(a,this._host):this._bucket=DI(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=_n.makeFromBucketSpec(this._url,e):this._bucket=DI(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){$_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){$_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(dt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Do(this,e)}_makeRequest(e,t,r,a,l=!0){if(this._deleted)return new eL(fN());{const u=dL(e,this._appId,r,a,t,this._firebaseVersion,l,this._isUsingEmulator);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,t){const[r,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,a).getPromise()}}const PI="@firebase/storage",OI="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eU="storage";function tU(n,e,t){return n=pe(n),GL(n,e,t)}function nU(n){return n=pe(n),KL(n)}function rU(n,e){return n=pe(n),QL(n,e)}function sU(n,e){return n=pe(n),SN(n,e)}function iU(n){return n=pe(n),HL(n)}function aU(n){return n=pe(n),$L(n)}function oU(n){return n=pe(n),YL(n)}function VI(n,e){return n=pe(n),JL(n,e)}function lU(n,e){return RN(n,e)}function cU(n,e,t,r={}){ZL(n,e,t,r)}function uU(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),a=n.getProvider("app-check-internal");return new qb(t,r,a,e,ri)}function dU(){Zs(new wr(eU,uU,"PUBLIC").setMultipleInstances(!0)),nr(PI,OI,""),nr(PI,OI,"esm2020")}dU();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zf{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Zf(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new Zf(r,this,this._ref))},t)}on(e,t,r,a){let l;return t&&(typeof t=="function"?l=u=>t(new Zf(u,this,this._ref)):l={next:t.next?u=>t.next(new Zf(u,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,l,r||void 0,a||void 0)}}class jI{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Xs(e,this._service))}get items(){return this._delegate.items.map(e=>new Xs(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=lU(this._delegate,e);return new Xs(t,this.storage)}get root(){return new Xs(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return e==null?null:new Xs(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new MI(tU(this._delegate,e,t),this)}putString(e,t=br.RAW,r){this._throwIfRoot("putString");const a=yN(t,e),l={...r};return l.contentType==null&&a.contentType!=null&&(l.contentType=a.contentType),new MI(new IN(this._delegate,new Qs(a.data,!0),l),this)}listAll(){return iU(this._delegate).then(e=>new jI(e,this.storage))}list(e){return sU(this._delegate,e||void 0).then(t=>new jI(t,this.storage))}getMetadata(){return nU(this._delegate)}updateMetadata(e){return rU(this._delegate,e)}getDownloadURL(){return aU(this._delegate)}delete(){return this._throwIfRoot("delete"),oU(this._delegate)}_throwIfRoot(e){if(this._delegate._location.path==="")throw mN(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(LI(e))throw Yl("ref() expected a child path but got a URL, use refFromURL instead.");return new Xs(VI(this._delegate,e),this)}refFromURL(e){if(!LI(e))throw Yl("refFromURL() expected a full URL but got a child path, use ref() instead.");try{_n.makeFromUrl(e,this._delegate.host)}catch{throw Yl("refFromUrl() expected a valid full URL but got an invalid one.")}return new Xs(VI(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){cU(this._delegate,e,t,r)}}function LI(n){return/^[A-Za-z]+:\/\//.test(n)}const hU="@firebase/storage-compat",fU="0.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mU="storage-compat";function gU(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new kN(t,r)}function pU(n){const e={TaskState:Rn,TaskEvent:zL,StringFormat:br,Storage:kN,Reference:Xs};n.INTERNAL.registerComponent(new wr(mU,gU,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion(hU,fU)}pU(rt);const yU={apiKey:"AIzaSyAmxQ7b1JMoXLC11-dXwymSOUrfHqxK52U",authDomain:"socialmedia-295db.firebaseapp.com",projectId:"socialmedia-295db",storageBucket:"socialmedia-295db.appspot.com",messagingSenderId:"1018221337269",appId:"1:1018221337269:web:d6fe51ee3eb3af6093bcfc",measurementId:"G-C2K2F6DVN2"};rt.initializeApp(yU);const ct=rt.firestore(),Ks=rt.auth(),_U=rt.storage(),gm=async n=>{const e=ct.collection("users").doc(n.uid),r=(await e.get()).data(),a=n.photoURL||(r==null?void 0:r.photoURL)||`https://i.pravatar.cc/150?u=${n.uid}`;return n.photoURL&&(!(r!=null&&r.photoURL)||r.photoURL!==n.photoURL)&&await e.update({photoURL:n.photoURL}),{id:n.uid,name:n.displayName||(r==null?void 0:r.name)||"Anonymous",email:n.email||"",photoURL:a,bio:(r==null?void 0:r.bio)||"Building the future, one line of code at a time.",role:(r==null?void 0:r.role)||"user",goals:(r==null?void 0:r.goals)||[],following:(r==null?void 0:r.following)||[],followers:(r==null?void 0:r.followers)||[]}},UI=n=>{var t;const e=n.data();return{id:n.id,authorId:e.authorId,authorName:e.authorName,authorPhotoURL:e.authorPhotoURL,content:e.content,mediaURL:e.mediaURL,mediaType:e.mediaType,createdAt:((t=e.createdAt)==null?void 0:t.toDate())||new Date,likes:e.likes||[],likesCount:e.likesCount||0,commentsCount:e.commentsCount||0,sharesCount:e.sharesCount||0}},zI=n=>{var t;const e=n.data();return{id:n.id,postId:e.postId,authorId:e.authorId,authorName:e.authorName,authorPhotoURL:e.authorPhotoURL,text:e.text,createdAt:((t=e.createdAt)==null?void 0:t.toDate())||new Date}},pt={async signup(n,e,t){const r=await Ks.createUserWithEmailAndPassword(e,t||Math.random().toString(36).slice(-8));if(!r.user)throw new Error("User creation failed");const a=`https://i.pravatar.cc/150?u=${r.user.uid}`;await r.user.updateProfile({displayName:n,photoURL:a});const l=ct.collection("users").doc(r.user.uid),u={name:n,email:e,photoURL:a,bio:"New to Productive Bharat! Excited to connect and grow.",role:"user",goals:[],following:[],createdAt:rt.firestore.FieldValue.serverTimestamp()};return await l.set(u),gm(r.user)},async login(n,e){const t=await Ks.signInWithEmailAndPassword(n,e||"password123");if(!t.user)throw new Error("Login failed");return gm(t.user)},async loginWithGoogle(){const n=new rt.auth.GoogleAuthProvider,e=await Ks.signInWithPopup(n);if(!e.user)throw new Error("Google login failed");const t=ct.collection("users").doc(e.user.uid);if(!(await t.get()).exists){const a={name:e.user.displayName||"User",email:e.user.email||"",photoURL:e.user.photoURL||"",bio:"New to Productive Bharat! Excited to connect and grow.",role:"user",goals:[],following:[],followers:[],createdAt:rt.firestore.FieldValue.serverTimestamp()};await t.set(a)}return gm(e.user)},logout:()=>Ks.signOut(),async getPosts(){return(await ct.collection("posts").orderBy("createdAt","desc").limit(50).get()).docs.map(UI)},async createPost(n){const e=Ks.currentUser;if(!e)throw new Error("User not authenticated");const r=await(await ct.collection("posts").add({...n,authorName:e.displayName,authorPhotoURL:e.photoURL,likes:[],likesCount:0,commentsCount:0,sharesCount:0,createdAt:rt.firestore.FieldValue.serverTimestamp()})).get();return UI(r)},async deletePost(n){const e=Ks.currentUser;if(!e)throw new Error("User not authenticated");const t=await ct.collection("posts").doc(n).get();if(!t.exists)throw new Error("Post not found");const r=t.data();if((r==null?void 0:r.authorId)!==e.uid)throw new Error("You can only delete your own posts");const l=(await ct.collection("comments").where("postId","==",n).get()).docs.map(u=>u.ref.delete());await Promise.all(l),await ct.collection("posts").doc(n).delete()},async getAdmins(){return(await ct.collection("users").where("role","==","admin").get()).docs.map(t=>({id:t.id,...t.data()}))},async follow(n,e){const t=ct.batch(),r=ct.collection("users").doc(n);t.update(r,{following:rt.firestore.FieldValue.arrayUnion(e)});const a=ct.collection("users").doc(e);t.update(a,{followers:rt.firestore.FieldValue.arrayUnion(n)}),await t.commit()},async unfollow(n,e){const t=ct.batch(),r=ct.collection("users").doc(n);t.update(r,{following:rt.firestore.FieldValue.arrayRemove(e)});const a=ct.collection("users").doc(e);t.update(a,{followers:rt.firestore.FieldValue.arrayRemove(n)}),await t.commit()},async updateUserGoals(n,e){await ct.collection("users").doc(n).update({goals:e})},async updateUserProfile(n,e){const t=ct.collection("users").doc(n),r={};e.name!==void 0&&(r.name=e.name),e.bio!==void 0&&(r.bio=e.bio),e.photoURL!==void 0&&(r.photoURL=e.photoURL),await t.update(r);const a=Ks.currentUser;if(a){const l={};e.name!==void 0&&(l.displayName=e.name),e.photoURL!==void 0&&(l.photoURL=e.photoURL),Object.keys(l).length>0&&await a.updateProfile(l)}},async getChatsForUser(n){const r=(await ct.collection("chats").where("participantIds","array-contains",n).get()).docs.map(async a=>{const l=a.data(),u=l.participantIds.map(v=>ct.collection("users").doc(v).get()),m=(await Promise.all(u)).map(v=>({id:v.id,...v.data()})),y=(l.messages||[]).map((v,x)=>{var T;return{...v,id:v.id||`${a.id}-${x}`,timestamp:((T=v.timestamp)==null?void 0:T.toDate())||new Date}}).sort((v,x)=>v.timestamp.getTime()-x.timestamp.getTime());return{id:a.id,participants:m,messages:y}});return Promise.all(r)},async sendMessage(n,e){const t=ct.collection("chats").doc(n),r={...e,id:new Date().toISOString()+Math.random(),timestamp:rt.firestore.FieldValue.serverTimestamp()};return await t.update({messages:rt.firestore.FieldValue.arrayUnion(r)}),{...e,id:r.id,timestamp:new Date}},async uploadFile(n){const{STORAGE_CONFIG:e}=await _T(async()=>{const{STORAGE_CONFIG:t}=await import("./storageConfig-epG1XSSl.js");return{STORAGE_CONFIG:t}},[]);if(e.provider==="cloudinary"){const{uploadToCloudinary:t,isCloudinaryConfigured:r}=await _T(async()=>{const{uploadToCloudinary:a,isCloudinaryConfigured:l}=await Promise.resolve().then(()=>xU);return{uploadToCloudinary:a,isCloudinaryConfigured:l}},void 0);if(!r())throw new Error("Cloudinary not configured. Update CLOUDINARY_CONFIG.cloudName in services/cloudinary.ts");return t(n)}else return(await _U.ref(`uploads/${Date.now()}_${n.name}`).put(n)).ref.getDownloadURL()},async toggleLike(n,e){var l;const t=ct.collection("posts").doc(n);(((l=(await t.get()).data())==null?void 0:l.likes)||[]).includes(e)?await t.update({likes:rt.firestore.FieldValue.arrayRemove(e),likesCount:rt.firestore.FieldValue.increment(-1)}):await t.update({likes:rt.firestore.FieldValue.arrayUnion(e),likesCount:rt.firestore.FieldValue.increment(1)})},async getComments(n){return(await ct.collection("comments").where("postId","==",n).orderBy("createdAt","desc").limit(50).get()).docs.map(zI)},async addComment(n,e){const t=Ks.currentUser;if(!t)throw new Error("User not authenticated");const r={postId:n,authorId:t.uid,authorName:t.displayName||"Anonymous",authorPhotoURL:t.photoURL||`https://i.pravatar.cc/150?u=${t.uid}`,text:e,createdAt:rt.firestore.FieldValue.serverTimestamp()},a=await ct.collection("comments").add(r);await ct.collection("posts").doc(n).update({commentsCount:rt.firestore.FieldValue.increment(1)});const l=await a.get();return zI(l)},async incrementShareCount(n){await ct.collection("posts").doc(n).update({sharesCount:rt.firestore.FieldValue.increment(1)})}},bd={cloudName:"dyqz8xwva",uploadPreset:"social_media_uploads"};async function vU(n){var a;if(n.size>5242880)throw new Error("File size exceeds 5MB limit");if(!["image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(n.type))throw new Error("Invalid file type. Only images are allowed.");const r=new FormData;r.append("file",n),r.append("upload_preset",bd.uploadPreset),r.append("cloud_name",bd.cloudName),r.append("folder","social_media/posts");try{const l=await fetch(`https://api.cloudinary.com/v1_1/${bd.cloudName}/image/upload`,{method:"POST",body:r});if(!l.ok){const h=await l.json();throw new Error(((a=h.error)==null?void 0:a.message)||"Upload failed")}return(await l.json()).secure_url}catch(l){throw console.error("Cloudinary upload error:",l),new Error(l instanceof Error?l.message:"Failed to upload image")}}function CN(n,e){if(!n||!n.includes("cloudinary"))return n;const{width:t,height:r,crop:a="fill",quality:l="auto",format:u="auto"}=e||{},h=[];t&&h.push(`w_${t}`),r&&h.push(`h_${r}`),h.push(`c_${a}`),h.push(`q_${l}`),h.push(`f_${u}`);const m=h.join(",");return n.replace("/upload/",`/upload/${m}/`)}function Gd(n){return CN(n,{width:800,height:600,crop:"fit",quality:"auto"})}function bU(){return bd.cloudName.length>0}const xU=Object.freeze(Object.defineProperty({__proto__:null,CLOUDINARY_CONFIG:bd,getMediumImageUrl:Gd,getOptimizedImageUrl:CN,isCloudinaryConfigured:bU,uploadToCloudinary:vU},Symbol.toStringTag,{value:"Module"})),i_={sm:"h-8 w-8 text-sm",md:"h-10 w-10 text-base",lg:"h-16 w-16 text-2xl",xl:"h-24 w-24 text-4xl"},DN=({src:n,alt:e,size:t="md"})=>{const[r,a]=se.useState(!1),[l,u]=se.useState(!1);return!n||r?p.jsx("div",{className:`${i_[t]} rounded-full bg-primary/10 border-2 border-primary flex items-center justify-center flex-shrink-0`,children:p.jsx("span",{className:"material-symbols-outlined text-primary",children:"person"})}):p.jsxs("div",{className:"relative flex-shrink-0",children:[p.jsx("img",{className:`${i_[t]} rounded-full object-cover border-2 border-primary dark:border-gray-600 transition-opacity duration-300 ${l?"opacity-100":"opacity-0"}`,src:n,alt:e,referrerPolicy:"no-referrer",crossOrigin:"anonymous",onError:h=>{console.error("Avatar image failed to load:",n),a(!0)},onLoad:()=>{console.log("Avatar image loaded successfully:",n),u(!0)}}),!l&&!r&&p.jsx("div",{className:`${i_[t]} rounded-full bg-gray-200 dark:bg-gray-700 animate-pulse absolute top-0 left-0`})]})};DN.displayName="Avatar";const pm=Gm.memo(DN),PN=({post:n,isOpen:e,onClose:t})=>{const[r,a]=se.useState(!1);if(!e)return null;const l=`${window.location.origin}${window.location.pathname}?post=${n.id}`,u=async()=>{try{await navigator.clipboard.writeText(l),a(!0),setTimeout(()=>a(!1),2e3)}catch(m){console.error("Error copying link:",m)}},h=m=>{let y="";const v=encodeURIComponent(l),x=encodeURIComponent(n.content.substring(0,100)),T=encodeURIComponent(`Post by ${n.authorName}`);switch(m){case"whatsapp":y=`https://wa.me/?text=${T}%20${v}`;break;case"facebook":y=`https://www.facebook.com/sharer/sharer.php?u=${v}`;break;case"twitter":y=`https://twitter.com/intent/tweet?url=${v}&text=${x}`;break;case"linkedin":y=`https://www.linkedin.com/sharing/share-offsite/?url=${v}`;break;case"telegram":y=`https://t.me/share/url?url=${v}&text=${x}`;break;case"email":y=`mailto:?subject=${T}&body=${x}%20${v}`;break}y&&window.open(y,"_blank","width=600,height=400"),t()};return p.jsx("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center bg-black/50 backdrop-blur-sm animate-fadeIn",onClick:t,children:p.jsxs("div",{className:"w-full sm:w-auto sm:min-w-[400px] bg-white dark:bg-surface-dark rounded-t-3xl sm:rounded-2xl shadow-2xl overflow-hidden animate-slideInUp",onClick:m=>m.stopPropagation(),children:[p.jsxs("div",{className:"p-4 sm:p-6 border-b border-border-light dark:border-border-dark",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("h3",{className:"text-lg sm:text-xl font-bold text-text-light dark:text-text-dark",children:"Share this post"}),p.jsx("button",{onClick:t,className:"w-8 h-8 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 flex items-center justify-center transition-colors",children:p.jsx("span",{className:"material-symbols-outlined text-text-muted-light dark:text-text-muted-dark",children:"close"})})]}),p.jsxs("p",{className:"text-sm text-text-muted-light dark:text-text-muted-dark mt-2",children:[n.content.substring(0,100),"..."]})]}),p.jsxs("div",{className:"p-4 sm:p-6",children:[p.jsxs("div",{className:"mb-6",children:[p.jsx("label",{className:"block text-sm font-semibold text-text-light dark:text-text-dark mb-2",children:"Copy link"}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("input",{type:"text",value:l,readOnly:!0,className:"flex-1 bg-gray-100 dark:bg-gray-800 text-text-light dark:text-text-dark px-4 py-3 rounded-lg text-sm border border-border-light dark:border-border-dark"}),p.jsx("button",{onClick:u,className:`px-6 py-3 rounded-lg font-semibold text-sm transition-all ${r?"bg-green-500 text-white":"bg-primary hover:bg-primary/90 text-white"}`,children:p.jsxs("span",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"material-symbols-outlined text-lg",children:r?"check":"content_copy"}),r?"Copied!":"Copy"]})})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-semibold text-text-light dark:text-text-dark mb-3",children:"Share via"}),p.jsxs("div",{className:"grid grid-cols-3 sm:grid-cols-6 gap-3",children:[p.jsxs("button",{onClick:()=>h("whatsapp"),className:"flex flex-col items-center gap-2 p-3 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors group",children:[p.jsx("div",{className:"w-12 h-12 bg-green-500 rounded-full flex items-center justify-center text-white text-2xl",children:p.jsx("span",{className:"material-symbols-outlined",children:"chat"})}),p.jsx("span",{className:"text-xs text-text-muted-light dark:text-text-muted-dark group-hover:text-text-light dark:group-hover:text-text-dark",children:"WhatsApp"})]}),p.jsxs("button",{onClick:()=>h("facebook"),className:"flex flex-col items-center gap-2 p-3 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors group",children:[p.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-full flex items-center justify-center text-white text-2xl",children:p.jsx("span",{className:"material-symbols-outlined",children:"public"})}),p.jsx("span",{className:"text-xs text-text-muted-light dark:text-text-muted-dark group-hover:text-text-light dark:group-hover:text-text-dark",children:"Facebook"})]}),p.jsxs("button",{onClick:()=>h("twitter"),className:"flex flex-col items-center gap-2 p-3 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors group",children:[p.jsx("div",{className:"w-12 h-12 bg-sky-500 rounded-full flex items-center justify-center text-white text-2xl",children:p.jsx("span",{className:"material-symbols-outlined",children:"flutter_dash"})}),p.jsx("span",{className:"text-xs text-text-muted-light dark:text-text-muted-dark group-hover:text-text-light dark:group-hover:text-text-dark",children:"Twitter"})]}),p.jsxs("button",{onClick:()=>h("linkedin"),className:"flex flex-col items-center gap-2 p-3 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors group",children:[p.jsx("div",{className:"w-12 h-12 bg-blue-700 rounded-full flex items-center justify-center text-white text-2xl",children:p.jsx("span",{className:"material-symbols-outlined",children:"work"})}),p.jsx("span",{className:"text-xs text-text-muted-light dark:text-text-muted-dark group-hover:text-text-light dark:group-hover:text-text-dark",children:"LinkedIn"})]}),p.jsxs("button",{onClick:()=>h("telegram"),className:"flex flex-col items-center gap-2 p-3 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors group",children:[p.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-full flex items-center justify-center text-white text-2xl",children:p.jsx("span",{className:"material-symbols-outlined",children:"send"})}),p.jsx("span",{className:"text-xs text-text-muted-light dark:text-text-muted-dark group-hover:text-text-light dark:group-hover:text-text-dark",children:"Telegram"})]}),p.jsxs("button",{onClick:()=>h("email"),className:"flex flex-col items-center gap-2 p-3 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors group",children:[p.jsx("div",{className:"w-12 h-12 bg-gray-600 rounded-full flex items-center justify-center text-white text-2xl",children:p.jsx("span",{className:"material-symbols-outlined",children:"mail"})}),p.jsx("span",{className:"text-xs text-text-muted-light dark:text-text-muted-dark group-hover:text-text-light dark:group-hover:text-text-dark",children:"Email"})]})]})]})]}),p.jsx("div",{className:"p-4 sm:p-6 bg-gray-50 dark:bg-gray-900 border-t border-border-light dark:border-border-dark",children:p.jsx("p",{className:"text-xs text-center text-text-muted-light dark:text-text-muted-dark",children:"Share count will be updated when link is shared"})})]})})},wU=({post:n,isOpen:e,onClose:t,onUpdate:r})=>{const{user:a}=sr(),[l,u]=se.useState(a?n.likes.includes(a.id):!1),[h,m]=se.useState(n.likesCount),[y,v]=se.useState([]),[x,T]=se.useState(""),[R,V]=se.useState(!1),[U,M]=se.useState(0),[W,Y]=se.useState(!1);se.useEffect(()=>(e?(document.body.style.overflow="hidden",X()):document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[e]);const X=async()=>{V(!0);try{const k=await pt.getComments(n.id);v(k)}catch(k){console.error("Error loading comments:",k)}finally{V(!1)}},oe=async()=>{if(a)try{await pt.toggleLike(n.id,a.id),u(!l),m(l?h-1:h+1),r&&r({...n,likes:l?n.likes.filter(k=>k!==a.id):[...n.likes,a.id],likesCount:l?h-1:h+1})}catch(k){console.error("Error liking post:",k)}},ye=async k=>{if(k.preventDefault(),!(!a||!x.trim()))try{const P=await pt.addComment(n.id,x);v([...y,P]),T(""),r&&r({...n,commentsCount:n.commentsCount+1})}catch(P){console.error("Error adding comment:",P)}},he=async()=>{try{await pt.incrementShareCount(n.id),Y(!0)}catch(k){console.error("Error sharing post:",k)}};let C=null;if(n.mediaURL)try{const k=JSON.parse(n.mediaURL);k.urls&&Array.isArray(k.urls)&&(C=k)}catch{}const A=()=>{C&&M(k=>k===0?C.urls.length-1:k-1)},S=()=>{C&&M(k=>k===C.urls.length-1?0:k+1)};return e?p.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/90 backdrop-blur-sm animate-fadeIn",children:[p.jsx("button",{onClick:t,className:"absolute top-4 right-4 z-50 w-10 h-10 bg-white/10 hover:bg-white/20 rounded-full flex items-center justify-center text-white transition-colors",children:p.jsx("span",{className:"material-symbols-outlined",children:"close"})}),p.jsxs("div",{className:"w-full h-full max-w-7xl mx-auto flex flex-col md:flex-row bg-background-light dark:bg-surface-dark md:my-8 md:rounded-2xl overflow-hidden",children:[p.jsx("div",{className:"flex-1 bg-black flex items-center justify-center relative",children:C?p.jsxs("div",{className:"relative w-full h-full flex items-center justify-center",children:[p.jsx("img",{src:Gd(C.urls[U]),alt:`Slide ${U+1}`,className:"max-w-full max-h-full object-contain"}),C.urls.length>1&&p.jsxs(p.Fragment,{children:[p.jsx("button",{onClick:A,className:"absolute left-4 top-1/2 -translate-y-1/2 w-12 h-12 bg-black/50 hover:bg-black/70 text-white rounded-full flex items-center justify-center transition-all",children:p.jsx("span",{className:"material-symbols-outlined",children:"chevron_left"})}),p.jsx("button",{onClick:S,className:"absolute right-4 top-1/2 -translate-y-1/2 w-12 h-12 bg-black/50 hover:bg-black/70 text-white rounded-full flex items-center justify-center transition-all",children:p.jsx("span",{className:"material-symbols-outlined",children:"chevron_right"})}),p.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 flex gap-2",children:C.urls.map((k,P)=>p.jsx("button",{onClick:()=>M(P),className:`w-2 h-2 rounded-full transition-all ${P===U?"bg-white w-8":"bg-white/50"}`},P))})]})]}):n.mediaURL?p.jsx("img",{src:Gd(n.mediaURL),alt:"Post media",className:"max-w-full max-h-full object-contain"}):null}),p.jsxs("div",{className:"w-full md:w-[400px] flex flex-col bg-background-light dark:bg-surface-dark",children:[p.jsx("div",{className:"p-4 border-b border-border-light dark:border-border-dark",children:p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx(pm,{src:n.authorPhotoURL,alt:n.authorName,size:"md"}),p.jsxs("div",{children:[p.jsxs("div",{className:"flex items-center gap-1.5",children:[p.jsx("p",{className:"text-text-light dark:text-text-dark text-base font-bold",children:n.authorName}),p.jsx("span",{className:"material-symbols-outlined text-primary text-sm",children:"verified"})]}),p.jsx("p",{className:"text-xs text-text-muted-light dark:text-text-muted-dark",children:new Date(n.createdAt).toLocaleDateString()})]})]})}),p.jsx("div",{className:"p-4 border-b border-border-light dark:border-border-dark",children:p.jsx("p",{className:"text-text-light dark:text-text-dark text-sm leading-relaxed whitespace-pre-wrap",children:n.content})}),p.jsx("div",{className:"p-4 border-b border-border-light dark:border-border-dark",children:p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsxs("button",{onClick:oe,className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-all ${l?"bg-primary/10 text-primary":"hover:bg-gray-100 dark:hover:bg-gray-800 text-text-muted-light dark:text-text-muted-dark"}`,children:[p.jsx("span",{className:"material-symbols-outlined",children:"thumb_up"}),p.jsx("span",{className:"text-sm font-semibold",children:h})]}),p.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 text-text-muted-light dark:text-text-muted-dark transition-all",children:[p.jsx("span",{className:"material-symbols-outlined",children:"chat_bubble"}),p.jsx("span",{className:"text-sm font-semibold",children:y.length})]}),p.jsx("button",{onClick:he,className:"flex items-center gap-2 px-4 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 text-text-muted-light dark:text-text-muted-dark transition-all",children:p.jsx("span",{className:"material-symbols-outlined",children:"share"})})]})}),p.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:R?p.jsx("div",{className:"flex items-center justify-center py-8",children:p.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):y.length===0?p.jsx("p",{className:"text-center text-sm text-text-muted-light dark:text-text-muted-dark py-8",children:"No comments yet. Be the first to comment!"}):p.jsx("div",{className:"space-y-4",children:y.map(k=>p.jsxs("div",{className:"flex gap-3",children:[p.jsx(pm,{src:k.authorPhotoURL,alt:k.authorName,size:"sm"}),p.jsxs("div",{className:"flex-1",children:[p.jsxs("div",{className:"bg-gray-100 dark:bg-gray-800 rounded-2xl px-4 py-2",children:[p.jsx("p",{className:"text-sm font-bold text-text-light dark:text-text-dark",children:k.authorName}),p.jsx("p",{className:"text-sm text-text-light dark:text-text-dark mt-1",children:k.text})]}),p.jsx("p",{className:"text-xs text-text-muted-light dark:text-text-muted-dark mt-1 ml-4",children:new Date(k.createdAt).toLocaleString()})]})]},k.id))})}),a&&p.jsx("div",{className:"p-4 border-t border-border-light dark:border-border-dark",children:p.jsxs("form",{onSubmit:ye,className:"flex gap-3",children:[p.jsx(pm,{src:a.photoURL,alt:a.name,size:"sm"}),p.jsx("input",{type:"text",value:x,onChange:k=>T(k.target.value),placeholder:"Add a comment...",className:"flex-1 bg-gray-100 dark:bg-gray-800 text-text-light dark:text-text-dark rounded-full px-4 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary"}),p.jsx("button",{type:"submit",disabled:!x.trim(),className:"bg-primary hover:bg-primary/90 text-white px-4 py-2 rounded-full font-semibold text-sm disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:"Post"})]})})]})]}),p.jsx(PN,{post:n,isOpen:W,onClose:()=>Y(!1)})]}):null},TU=()=>p.jsx("span",{className:"material-symbols-outlined text-green-700 dark:text-green-500 !text-[18px]",children:"verified"}),EU=Gm.memo(({post:n,onUpdate:e,isOpenByDefault:t=!1,onModalClose:r})=>{const{user:a}=sr(),[l,u]=se.useState(a?n.likes.includes(a.id):!1),[h,m]=se.useState(n.likesCount),[y,v]=se.useState(!1),[x,T]=se.useState([]),[R,V]=se.useState(""),[U,M]=se.useState(!1),[W,Y]=se.useState(n.sharesCount),[X,oe]=se.useState(0),[ye,he]=se.useState(t),[C,A]=se.useState(!1);se.useEffect(()=>{const ue=()=>{new URLSearchParams(window.location.search).get("post")!==n.id&&ye&&he(!1)};return window.addEventListener("popstate",ue),()=>window.removeEventListener("popstate",ue)},[ye,n.id]);const S=async()=>{if(a)try{await pt.toggleLike(n.id,a.id),u(!l),m(l?h-1:h+1)}catch(ue){console.error("Error liking post:",ue)}},k=async()=>{if(y){v(!1);return}M(!0);try{const ue=await pt.getComments(n.id);T(ue),v(!0)}catch(ue){console.error("Error loading comments:",ue)}finally{M(!1)}},P=async ue=>{if(ue.preventDefault(),!(!R.trim()||!a))try{const Re=await pt.addComment(n.id,R);T([Re,...x]),V(""),e&&e()}catch(Re){console.error("Error adding comment:",Re)}},L=async()=>{try{await pt.incrementShareCount(n.id),Y(W+1),A(!0)}catch(ue){console.error("Error sharing:",ue)}},N=()=>{he(!0);const ue=new URL(window.location.href);ue.searchParams.set("post",n.id),window.history.pushState({},"",ue.toString())},tt=()=>{if(he(!1),r)r();else{const ue=new URL(window.location.href);ue.searchParams.delete("post"),window.history.replaceState({},"",ue.toString())}},wt=n.mediaURL?Gd(n.mediaURL):n.mediaURL;let K=null;try{n.mediaURL&&n.mediaURL.startsWith("{")&&(K=JSON.parse(n.mediaURL))}catch{}const le=ue=>{switch(ue){case"1:1":return"aspect-square";case"16:9":return"aspect-video";case"9:16":return"aspect-[9/16]"}},ve=()=>{K&&oe(ue=>ue===0?K.urls.length-1:ue-1)},Le=()=>{K&&oe(ue=>ue===K.urls.length-1?0:ue+1)},Ge=ue=>{const Se=Date.now()-ue,st=Math.floor(Se/(1e3*60*60)),rn=Math.floor(Se/(1e3*60*60*24));return rn>0?`${rn}d ago`:st>0?`${st}h ago`:"Just now"};return p.jsxs("div",{className:"bg-white dark:bg-surface-dark border border-border-light dark:border-border-dark rounded-lg shadow-sm hover:shadow-md transition-all @container group/card",children:[p.jsxs("div",{className:"flex flex-col items-stretch justify-start p-4 md:cursor-pointer relative",onClick:ue=>{window.innerWidth>=768&&(ue.target.closest("button, input, a, video")||N())},children:[p.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[p.jsx("img",{className:"h-10 w-10 rounded-full object-cover",src:n.authorPhotoURL||"https://via.placeholder.com/40",alt:n.authorName,loading:"lazy"}),p.jsxs("div",{className:"flex items-center gap-1.5",children:[p.jsx("p",{className:"text-text-light dark:text-text-dark text-base font-bold",children:n.authorName}),n.authorId==="admin"&&p.jsx(TU,{})]}),p.jsx("p",{className:"text-text-muted-light dark:text-text-muted-dark text-sm font-normal ml-auto",children:Ge(n.createdAt)})]}),n.mediaURL&&n.mediaType==="image"&&(K?p.jsxs("div",{className:"relative w-full mb-4 rounded-lg overflow-hidden group",children:[p.jsxs("div",{className:"relative",children:[p.jsx("img",{src:Gd(K.urls[X]),alt:`Slide ${X+1}`,className:`w-full object-cover ${le(K.aspectRatios[X])}`,loading:"lazy",onError:ue=>{ue.currentTarget.src=K.urls[X]}}),p.jsx("div",{className:"absolute inset-0 bg-black/0 hover:bg-black/10 transition-colors flex items-center justify-center",children:p.jsx("span",{className:"material-symbols-outlined text-white text-4xl opacity-0 group-hover:opacity-100 transition-opacity",children:"open_in_full"})}),K.urls.length>1&&p.jsxs(p.Fragment,{children:[p.jsx("button",{onClick:ue=>{ue.stopPropagation(),ve()},className:"absolute left-2 top-1/2 -translate-y-1/2 w-10 h-10 bg-black/50 hover:bg-black/70 text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity z-10",children:p.jsx("span",{className:"material-symbols-outlined",children:"chevron_left"})}),p.jsx("button",{onClick:ue=>{ue.stopPropagation(),Le()},className:"absolute right-2 top-1/2 -translate-y-1/2 w-10 h-10 bg-black/50 hover:bg-black/70 text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity z-10",children:p.jsx("span",{className:"material-symbols-outlined",children:"chevron_right"})})]})]}),K.urls.length>1&&p.jsx("div",{className:"absolute bottom-3 left-1/2 -translate-x-1/2 flex gap-1.5 z-10",children:K.urls.map((ue,Re)=>p.jsx("button",{onClick:Se=>{Se.stopPropagation(),oe(Re)},className:`w-2 h-2 rounded-full transition-all ${Re===X?"bg-white w-6":"bg-white/60 hover:bg-white/80"}`},Re))}),K.urls.length>1&&p.jsxs("div",{className:"absolute top-3 right-3 bg-black/60 text-white px-3 py-1 rounded-full text-sm font-semibold",children:[X+1," / ",K.urls.length]})]}):p.jsxs("div",{className:"relative w-full mb-4 rounded-lg overflow-hidden group",children:[p.jsx("img",{src:wt,alt:"Post media",className:"w-full aspect-video object-cover",loading:"lazy",onError:ue=>{ue.currentTarget.src=n.mediaURL||""}}),p.jsx("div",{className:"absolute inset-0 bg-black/0 hover:bg-black/10 transition-colors flex items-center justify-center",children:p.jsx("span",{className:"material-symbols-outlined text-white text-4xl opacity-0 group-hover:opacity-100 transition-opacity drop-shadow-lg",children:"open_in_full"})})]})),n.mediaURL&&n.mediaType==="video"&&!K&&p.jsxs("div",{className:"relative group",children:[p.jsx("video",{className:"w-full rounded-lg mb-4",controls:!0,src:n.mediaURL,onClick:ue=>ue.stopPropagation()}),p.jsxs("div",{className:"absolute top-3 right-3 bg-black/60 text-white px-3 py-1.5 rounded-lg text-xs font-semibold flex items-center gap-1",children:[p.jsx("span",{className:"material-symbols-outlined text-sm",children:"open_in_full"}),"Full View"]})]}),p.jsx("div",{className:"flex w-full min-w-72 grow flex-col items-stretch justify-center gap-2",children:p.jsx("p",{className:"text-text-light dark:text-text-dark text-base font-normal leading-relaxed whitespace-pre-wrap",children:n.content})}),p.jsxs("div",{className:"hidden md:flex absolute top-4 right-4 items-center gap-1.5 bg-black/60 text-white px-3 py-1.5 rounded-lg text-xs font-semibold opacity-0 group-hover/card:opacity-100 transition-opacity pointer-events-none",children:[p.jsx("span",{className:"material-symbols-outlined text-sm",children:"open_in_full"}),p.jsx("span",{children:"View Details"})]}),p.jsxs("div",{className:"flex items-center gap-4 px-2 py-2",children:[p.jsxs("button",{onClick:S,disabled:!a,className:`flex items-center gap-1 transition-all ${l?"text-red-500":"text-text-light dark:text-text-dark hover:text-text-muted-light"} ${a?"":"opacity-50 cursor-not-allowed"}`,children:[p.jsx("span",{className:"material-symbols-outlined text-2xl",style:{fontVariationSettings:l?"'FILL' 1":"'FILL' 0"},children:"favorite"}),h>0&&p.jsx("span",{className:"text-sm font-medium",children:h})]}),p.jsxs("button",{onClick:k,disabled:!a||U,className:"flex items-center gap-1 text-text-light dark:text-text-dark hover:text-text-muted-light transition-all disabled:opacity-50",children:[p.jsx("span",{className:"material-symbols-outlined text-2xl",children:"chat_bubble"}),n.commentsCount>0&&p.jsx("span",{className:"text-sm font-medium",children:n.commentsCount})]}),p.jsxs("button",{onClick:L,className:"flex items-center gap-1 text-text-light dark:text-text-dark hover:text-text-muted-light transition-all",children:[p.jsx("span",{className:"material-symbols-outlined text-2xl",children:"send"}),W>0&&p.jsx("span",{className:"text-sm font-medium",children:W})]})]}),y&&a&&p.jsxs("div",{className:"border-t border-border-light dark:border-border-dark mt-4 pt-4",children:[p.jsx("form",{onSubmit:P,className:"mb-4",children:p.jsxs("div",{className:"flex gap-3",children:[p.jsx("img",{className:"h-8 w-8 rounded-full object-cover",src:a.photoURL||"https://via.placeholder.com/32",alt:a.name,loading:"lazy"}),p.jsx("div",{className:"flex-1",children:p.jsx("input",{type:"text",value:R,onChange:ue=>V(ue.target.value),placeholder:"Write a comment...",className:"w-full px-4 py-2 rounded-lg bg-background-light dark:bg-background-dark border border-border-light dark:border-border-dark focus:outline-none focus:ring-2 focus:ring-primary text-sm text-text-light dark:text-text-dark"})})]})}),p.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto",children:x.length===0?p.jsx("p",{className:"text-center text-sm text-text-muted-light dark:text-text-muted-dark py-4",children:"No comments yet. Be the first to comment!"}):x.map(ue=>p.jsxs("div",{className:"flex gap-3",children:[p.jsx("img",{className:"h-8 w-8 rounded-full object-cover",src:ue.authorPhotoURL||"https://via.placeholder.com/32",alt:ue.authorName,loading:"lazy"}),p.jsxs("div",{className:"flex-1",children:[p.jsxs("div",{className:"bg-background-light dark:bg-background-dark rounded-lg px-4 py-2",children:[p.jsx("p",{className:"text-sm font-semibold text-text-light dark:text-text-dark",children:ue.authorName}),p.jsx("p",{className:"text-sm text-text-muted-light dark:text-text-muted-dark",children:ue.text})]}),p.jsx("p",{className:"text-xs text-text-muted-light dark:text-text-muted-dark mt-1 ml-2",children:Ge(ue.createdAt)})]})]},ue.id))})]})]}),p.jsx(wU,{post:n,isOpen:ye,onClose:tt,onUpdate:ue=>{e&&e(),m(ue.likesCount),u(a?ue.likes.includes(a.id):!1)}}),p.jsx(PN,{post:n,isOpen:C,onClose:()=>A(!1)})]})}),IU=async(n,e={})=>{const{maxWidth:t=1920,maxHeight:r=1920,quality:a=.85,maxSizeMB:l=1}=e;return new Promise((u,h)=>{const m=new FileReader;m.onload=y=>{var x;const v=new Image;v.onload=()=>{let T=v.width,R=v.height;if(T>t||R>r){const M=T/R;T>R?(T=t,R=T/M):(R=r,T=R*M)}const V=document.createElement("canvas");V.width=T,V.height=R;const U=V.getContext("2d");if(!U){h(new Error("Failed to get canvas context"));return}U.imageSmoothingEnabled=!0,U.imageSmoothingQuality="high",U.drawImage(v,0,0,T,R),V.toBlob(M=>{if(!M){h(new Error("Failed to compress image"));return}if(M.size/(1024*1024)>l&&a>.5)V.toBlob(Y=>{if(!Y){h(new Error("Failed to compress image"));return}const X=new File([Y],n.name,{type:"image/jpeg",lastModified:Date.now()});u(X)},"image/jpeg",a-.2);else{const Y=new File([M],n.name,{type:"image/jpeg",lastModified:Date.now()});u(Y)}},"image/jpeg",a)},v.onerror=()=>{h(new Error("Failed to load image"))},v.src=(x=y.target)==null?void 0:x.result},m.onerror=()=>{h(new Error("Failed to read file"))},m.readAsDataURL(n)})},Yu=n=>{if(n===0)return"0 Bytes";const e=1024,t=["Bytes","KB","MB","GB"],r=Math.floor(Math.log(n)/Math.log(e));return Math.round(n/Math.pow(e,r)*100)/100+" "+t[r]},BI=(n,e)=>{const t=(n-e)/n*100;return`${Math.round(t)}% smaller`},Y_=({onPostCreated:n})=>{const{user:e}=sr(),[t,r]=se.useState(!1),[a,l]=se.useState(""),[u,h]=se.useState([]),[m,y]=se.useState("1:1"),[v,x]=se.useState(!1),[T,R]=se.useState(!1),[V,U]=se.useState(""),M=se.useRef(null),W=()=>{r(!0)},Y=()=>{r(!1),l(""),h([]),U("")},X=async A=>{const S=A.target.files;if(S){R(!0),U("");try{const P=Array.from(S).filter(K=>K.type.startsWith("image/")),L=P.map(async K=>{const le=K.size,ve=await IU(K,{maxWidth:1920,maxHeight:1920,quality:.85,maxSizeMB:1});return{file:ve,preview:URL.createObjectURL(ve),aspectRatio:m,originalSize:le,compressedSize:ve.size}}),N=await Promise.all(L),tt=N.reduce((K,le)=>K+(le.originalSize||0),0),wt=N.reduce((K,le)=>K+(le.compressedSize||0),0);console.log(` Compressed ${P.length} images: ${Yu(tt)}  ${Yu(wt)} (${BI(tt,wt)})`),h(K=>[...K,...N])}catch(k){console.error("Compression error:",k),U("Failed to process images. Please try again.")}finally{R(!1)}}},oe=A=>{h(S=>(URL.revokeObjectURL(S[A].preview),S.filter((k,P)=>P!==A)))},ye=(A,S)=>{h(k=>k.map((P,L)=>L===A?{...P,aspectRatio:S}:P))},he=A=>{switch(A){case"1:1":return"aspect-square";case"16:9":return"aspect-video";case"9:16":return"aspect-[9/16]"}},C=async A=>{if(A.preventDefault(),!(!a.trim()||!e)){x(!0),U("");try{let S=[];if(u.length>0){const N=u.map(tt=>pt.uploadFile(tt.file));S=await Promise.all(N)}const k=u.length>0?JSON.stringify({urls:S,aspectRatios:u.map(N=>N.aspectRatio)}):void 0,P={authorId:e.id,content:a,mediaURL:k,mediaType:u.length>0?"image":void 0},L=await pt.createPost(P);n(L),u.forEach(N=>URL.revokeObjectURL(N.preview)),Y()}catch(S){console.error("Error creating post:",S),U("Failed to create post. Please try again.")}finally{x(!1)}}};return(e==null?void 0:e.role)!=="admin"?null:p.jsxs(p.Fragment,{children:[p.jsxs("button",{onClick:W,className:"w-full flex items-center gap-3 p-4 bg-white dark:bg-surface-dark rounded-2xl border border-border-light dark:border-border-dark hover:shadow-md transition-all",children:[e!=null&&e.photoURL?p.jsx("img",{src:e.photoURL,alt:e==null?void 0:e.name,className:"w-10 h-10 rounded-full border-2 border-primary object-cover",referrerPolicy:"no-referrer",onError:A=>{var S;A.currentTarget.style.display="none",(S=A.currentTarget.nextElementSibling)==null||S.classList.remove("hidden")}}):null,p.jsx("div",{className:`w-10 h-10 rounded-full border-2 border-primary bg-primary/10 flex items-center justify-center ${e!=null&&e.photoURL?"hidden":""}`,children:p.jsx("span",{className:"material-symbols-outlined text-primary text-xl",children:"person"})}),p.jsxs("span",{className:"flex-1 text-left text-text-muted-light dark:text-text-muted-dark",children:["What's on your mind, ",e==null?void 0:e.name,"?"]}),p.jsx("span",{className:"material-symbols-outlined text-primary",children:"add_photo_alternate"})]}),t&&p.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:Y,children:p.jsxs("div",{className:"bg-white dark:bg-surface-dark rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",onClick:A=>A.stopPropagation(),children:[p.jsxs("div",{className:"sticky top-0 bg-white dark:bg-surface-dark border-b border-border-light dark:border-border-dark px-6 py-4 flex items-center justify-between",children:[p.jsx("h2",{className:"text-2xl font-bold text-text-light dark:text-text-dark",children:"Create Post"}),p.jsx("button",{onClick:Y,className:"text-text-muted-light dark:text-text-muted-dark hover:text-text-light dark:hover:text-text-dark transition-colors",children:p.jsx("span",{className:"material-symbols-outlined text-3xl",children:"close"})})]}),p.jsxs("form",{onSubmit:C,className:"p-6 space-y-6",children:[V&&p.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg",children:V}),u.length>0&&u.some(A=>A.originalSize&&A.compressedSize)&&p.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-xl p-4",children:p.jsxs("div",{className:"flex items-start gap-3",children:[p.jsx("div",{className:"w-10 h-10 bg-green-500/10 rounded-full flex items-center justify-center flex-shrink-0",children:p.jsx("span",{className:"material-symbols-outlined text-green-600 dark:text-green-400",children:"speed"})}),p.jsxs("div",{className:"flex-1",children:[p.jsx("h4",{className:"font-semibold text-green-800 dark:text-green-300 mb-1",children:"Images Optimized! "}),p.jsxs("p",{className:"text-sm text-green-700 dark:text-green-400",children:["Your images are compressed for faster upload and better storage management. Original: ",Yu(u.reduce((A,S)=>A+(S.originalSize||0),0)),"  Compressed: ",Yu(u.reduce((A,S)=>A+(S.compressedSize||0),0))]})]})]})}),p.jsxs("div",{className:"flex items-center gap-3",children:[e!=null&&e.photoURL?p.jsx("img",{src:e.photoURL,alt:e==null?void 0:e.name,className:"w-12 h-12 rounded-full border-2 border-primary object-cover",referrerPolicy:"no-referrer",onError:A=>{var S;A.currentTarget.style.display="none",(S=A.currentTarget.nextElementSibling)==null||S.classList.remove("hidden")}}):null,p.jsx("div",{className:`w-12 h-12 rounded-full border-2 border-primary bg-primary/10 flex items-center justify-center ${e!=null&&e.photoURL?"hidden":""}`,children:p.jsx("span",{className:"material-symbols-outlined text-primary text-2xl",children:"person"})}),p.jsxs("div",{children:[p.jsx("p",{className:"font-bold text-text-light dark:text-text-dark",children:e==null?void 0:e.name}),p.jsx("p",{className:"text-sm text-text-muted-light dark:text-text-muted-dark",children:"Public"})]})]}),p.jsx("textarea",{value:a,onChange:A=>l(A.target.value),placeholder:`What's on your mind, ${e==null?void 0:e.name}?`,className:"w-full p-4 border border-border-light dark:border-border-dark rounded-xl focus:outline-none focus:ring-2 focus:ring-primary bg-white dark:bg-gray-800 text-text-light dark:text-text-dark resize-none",rows:4,required:!0}),u.length>0&&p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("h3",{className:"font-semibold text-text-light dark:text-text-dark",children:["Media (",u.length,")"]}),p.jsx("p",{className:"text-sm text-text-muted-light dark:text-text-muted-dark",children:"Swipe to view all"})]}),p.jsx("div",{className:"grid grid-cols-1 gap-4",children:u.map((A,S)=>p.jsxs("div",{className:"relative border border-border-light dark:border-border-dark rounded-xl overflow-hidden",children:[p.jsx("img",{src:A.preview,alt:`Upload ${S+1}`,className:`w-full object-cover ${he(A.aspectRatio)}`}),A.originalSize&&A.compressedSize&&p.jsxs("div",{className:"absolute bottom-3 left-3 bg-green-500/90 backdrop-blur-sm text-white px-3 py-1.5 rounded-lg text-xs font-semibold flex items-center gap-2",children:[p.jsx("span",{className:"material-symbols-outlined text-sm",children:"check_circle"}),p.jsxs("span",{children:[Yu(A.compressedSize),"  ",BI(A.originalSize,A.compressedSize)]})]}),p.jsx("div",{className:"absolute top-3 left-3 flex gap-2",children:["1:1","16:9","9:16"].map(k=>p.jsx("button",{type:"button",onClick:()=>ye(S,k),className:`px-3 py-1.5 rounded-lg text-sm font-semibold transition-all ${A.aspectRatio===k?"bg-primary text-white shadow-lg":"bg-white/90 text-gray-800 hover:bg-white"}`,children:k},k))}),p.jsx("button",{type:"button",onClick:()=>oe(S),className:"absolute top-3 right-3 w-8 h-8 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center transition-colors shadow-lg",children:p.jsx("span",{className:"material-symbols-outlined text-xl",children:"close"})})]},S))})]}),p.jsxs("div",{className:"border-2 border-dashed border-border-light dark:border-border-dark rounded-xl p-6 hover:border-primary transition-colors",children:[p.jsx("input",{ref:M,type:"file",onChange:X,accept:"image/*",multiple:!0,className:"hidden",id:"media-upload",disabled:T}),p.jsx("label",{htmlFor:"media-upload",className:`flex flex-col items-center gap-3 ${T?"cursor-wait":"cursor-pointer"}`,children:T?p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center animate-pulse",children:p.jsx("span",{className:"material-symbols-outlined text-4xl text-primary animate-spin",children:"hourglass_empty"})}),p.jsxs("div",{className:"text-center",children:[p.jsx("p",{className:"font-semibold text-primary",children:"Compressing images..."}),p.jsx("p",{className:"text-sm text-text-muted-light dark:text-text-muted-dark",children:"Optimizing for faster upload"})]})]}):p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center",children:p.jsx("span",{className:"material-symbols-outlined text-4xl text-primary",children:"add_photo_alternate"})}),p.jsxs("div",{className:"text-center",children:[p.jsx("p",{className:"font-semibold text-text-light dark:text-text-dark",children:"Add Photos"}),p.jsx("p",{className:"text-sm text-text-muted-light dark:text-text-muted-dark",children:"Auto-compressed for quality & speed "})]})]})}),p.jsxs("div",{className:"mt-4 flex items-center justify-center gap-2",children:[p.jsx("span",{className:"text-sm text-text-muted-light dark:text-text-muted-dark",children:"Default ratio:"}),["1:1","16:9","9:16"].map(A=>p.jsx("button",{type:"button",onClick:()=>y(A),className:`px-3 py-1 rounded-lg text-sm font-semibold transition-all ${m===A?"bg-primary text-white":"bg-gray-200 dark:bg-gray-700 text-text-light dark:text-text-dark hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:A},A))]})]}),p.jsx(aa,{type:"submit",disabled:v||T||!a.trim(),className:"w-full py-4 text-lg",children:v?p.jsxs(p.Fragment,{children:[p.jsx("span",{className:"material-symbols-outlined animate-spin mr-2",children:"progress_activity"}),"Uploading..."]}):p.jsxs(p.Fragment,{children:[p.jsx("span",{className:"material-symbols-outlined mr-2",children:"send"}),"Post"]})})]})]})})]})},AU=()=>p.jsxs("div",{className:"bg-white dark:bg-surface-dark rounded-2xl shadow-lg border border-border-light dark:border-border-dark p-4 sm:p-6 animate-fadeIn",children:[p.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[p.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-full skeleton flex-shrink-0"}),p.jsxs("div",{className:"flex-1",children:[p.jsx("div",{className:"h-4 w-32 skeleton rounded mb-2"}),p.jsx("div",{className:"h-3 w-24 skeleton rounded"})]})]}),p.jsxs("div",{className:"space-y-2 mb-4",children:[p.jsx("div",{className:"h-3 w-full skeleton rounded"}),p.jsx("div",{className:"h-3 w-5/6 skeleton rounded"}),p.jsx("div",{className:"h-3 w-4/6 skeleton rounded"})]}),p.jsx("div",{className:"w-full h-64 skeleton rounded-xl mb-4"}),p.jsx("div",{className:"flex items-center justify-between pt-4 border-t border-border-light dark:border-border-dark",children:p.jsxs("div",{className:"flex gap-4",children:[p.jsx("div",{className:"h-8 w-16 skeleton rounded-lg"}),p.jsx("div",{className:"h-8 w-16 skeleton rounded-lg"}),p.jsx("div",{className:"h-8 w-16 skeleton rounded-lg"})]})})]}),SU=({count:n=3})=>p.jsx("div",{className:"space-y-4 sm:space-y-6 pb-20 sm:pb-6",children:Array.from({length:n}).map((e,t)=>p.jsx("div",{style:{animationDelay:`${t*100}ms`},children:p.jsx(AU,{})},t))}),FI=()=>{var U;const{user:n}=sr(),[e,t]=se.useState([]),[r,a]=se.useState(!0),[l,u]=se.useState(!1),[h,m]=se.useState("all"),[y,v]=se.useState(null),x=async(M=!1)=>{try{M?u(!0):a(!0);const W=await pt.getPosts();t(W)}catch(W){console.error("Error fetching posts:",W)}finally{a(!1),u(!1)}};se.useEffect(()=>{x();const W=new URLSearchParams(window.location.search).get("post");W&&v(W)},[]);const T=M=>{t(W=>[M,...W])},R=M=>{t(W=>W.map(Y=>Y.id===M.id?M:Y))},V=h==="all"?e:e.filter(M=>{var W;return(W=n==null?void 0:n.following)==null?void 0:W.includes(M.authorId)});return p.jsx("div",{className:"min-h-screen bg-gradient-to-b from-background-light to-gray-50 dark:from-background-dark dark:to-gray-900",children:p.jsxs("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-6",children:[p.jsx("div",{className:"mb-4 sm:mb-6",children:p.jsx("div",{className:"bg-gradient-to-r from-primary to-orange-600 rounded-2xl p-4 sm:p-6 text-white shadow-lg",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsxs("h1",{className:"text-xl sm:text-2xl font-bold mb-1",children:["Welcome back, ",((U=n==null?void 0:n.name)==null?void 0:U.split(" ")[0])||"Friend","! "]}),p.jsx("p",{className:"text-white/90 text-sm sm:text-base",children:"What's on your mind today?"})]}),p.jsx("div",{className:"hidden sm:block w-16 h-16 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm",children:p.jsx("span",{className:"material-symbols-outlined text-4xl",children:"home"})})]})})}),(n==null?void 0:n.role)==="admin"&&p.jsx("div",{className:"mb-4 sm:mb-6",children:p.jsx(Y_,{onPostCreated:T})}),p.jsx("div",{className:"mb-4 sm:mb-6",children:p.jsxs("div",{className:"bg-white dark:bg-surface-dark rounded-xl shadow-sm border border-border-light dark:border-border-dark p-1 flex gap-1",children:[p.jsx("button",{onClick:()=>m("all"),className:`flex-1 py-2.5 sm:py-3 px-4 rounded-lg font-semibold text-sm sm:text-base transition-all ${h==="all"?"bg-primary text-white shadow-md":"text-text-muted-light dark:text-text-muted-dark hover:bg-gray-100 dark:hover:bg-gray-800"}`,children:p.jsxs("span",{className:"flex items-center justify-center gap-2",children:[p.jsx("span",{className:"material-symbols-outlined text-lg sm:text-xl",children:"public"}),p.jsx("span",{className:"hidden sm:inline",children:"All Posts"}),p.jsx("span",{className:"sm:hidden",children:"All"})]})}),p.jsx("button",{onClick:()=>m("following"),className:`flex-1 py-2.5 sm:py-3 px-4 rounded-lg font-semibold text-sm sm:text-base transition-all ${h==="following"?"bg-primary text-white shadow-md":"text-text-muted-light dark:text-text-muted-dark hover:bg-gray-100 dark:hover:bg-gray-800"}`,children:p.jsxs("span",{className:"flex items-center justify-center gap-2",children:[p.jsx("span",{className:"material-symbols-outlined text-lg sm:text-xl",children:"group"}),p.jsx("span",{className:"hidden sm:inline",children:"Following"}),p.jsx("span",{className:"sm:hidden",children:"Friends"})]})})]})}),!r&&V.length>0&&p.jsxs("div",{className:"mb-4 flex items-center justify-between px-2",children:[p.jsxs("div",{className:"flex items-center gap-2 text-text-muted-light dark:text-text-muted-dark",children:[p.jsx("span",{className:"material-symbols-outlined text-lg",children:"article"}),p.jsxs("span",{className:"text-sm font-medium",children:[V.length," ",V.length===1?"Post":"Posts"]})]}),p.jsxs("button",{onClick:()=>x(!0),disabled:l,className:"text-primary hover:text-primary/80 transition-colors flex items-center gap-1 text-sm font-medium disabled:opacity-50",children:[p.jsx("span",{className:`material-symbols-outlined text-lg ${l?"animate-spin":""}`,children:"refresh"}),p.jsx("span",{className:"hidden sm:inline",children:l?"Refreshing...":"Refresh"})]})]}),r?p.jsx(SU,{count:3}):V.length===0?p.jsxs("div",{className:"bg-white dark:bg-surface-dark rounded-2xl shadow-lg border border-border-light dark:border-border-dark p-8 sm:p-12 text-center",children:[p.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 mx-auto bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mb-4 sm:mb-6",children:p.jsx("span",{className:"material-symbols-outlined text-4xl sm:text-5xl text-text-muted-light dark:text-text-muted-dark",children:h==="following"?"group_off":"post_add"})}),p.jsx("h3",{className:"text-lg sm:text-xl font-bold text-text-light dark:text-text-dark mb-2",children:h==="following"?"No posts from friends":"No posts yet"}),p.jsx("p",{className:"text-sm sm:text-base text-text-muted-light dark:text-text-muted-dark mb-6 max-w-md mx-auto",children:h==="following"?"Follow more people to see their posts here!":"Be the first to share something with the community!"}),h==="following"&&p.jsx("button",{onClick:()=>m("all"),className:"bg-primary hover:bg-primary/90 text-white px-6 py-2.5 sm:py-3 rounded-xl font-semibold shadow-lg transition-all text-sm sm:text-base",children:"View All Posts"})]}):p.jsx("div",{className:"space-y-4 sm:space-y-6 pb-20 sm:pb-6",children:V.map((M,W)=>p.jsx("div",{className:"animate-fadeIn",style:{animationDelay:`${W*50}ms`},children:p.jsx(EU,{post:M,onUpdate:R,isOpenByDefault:y===M.id,onModalClose:()=>{v(null);const Y=new URL(window.location.href);Y.searchParams.delete("post"),window.history.replaceState({},"",Y.toString())}})},M.id))}),!r&&V.length>=10&&p.jsx("div",{className:"text-center py-8",children:p.jsx("p",{className:"text-text-muted-light dark:text-text-muted-dark text-sm",children:"You've reached the end! "})})]})})},W_=({id:n,label:e,className:t="",...r})=>p.jsxs("div",{children:[e&&p.jsx("label",{htmlFor:n,className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:e}),p.jsx("input",{id:n,className:`mt-1 appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-saffron focus:border-saffron sm:text-sm dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white ${t}`,...r})]}),RU=({initialGoals:n})=>{const{user:e}=sr(),[t,r]=se.useState(n),[a,l]=se.useState(""),[u,h]=se.useState(!1),m=async x=>{if(e){h(!0);try{await pt.updateUserGoals(e.id,x),r(x)}catch(T){console.error("Failed to update goals:",T)}finally{h(!1)}}},y=x=>{if(x.preventDefault(),a.trim()&&!t.includes(a.trim())){const T=[...t,a.trim()];m(T),l("")}},v=x=>{const T=t.filter((R,V)=>V!==x);m(T)};return p.jsxs("div",{className:"p-6 bg-white dark:bg-gray-800 rounded-lg shadow-md",children:[p.jsx("div",{className:"flex justify-between items-center mb-4",children:p.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"My Goals"})}),p.jsxs("form",{onSubmit:y,className:"flex gap-2 mb-4",children:[p.jsx(W_,{id:"new-goal",type:"text",value:a,onChange:x=>l(x.target.value),placeholder:"Add a new goal...",className:"flex-grow"}),p.jsx(aa,{type:"submit",disabled:u,children:"Add"})]}),p.jsxs("ul",{className:"space-y-3",children:[t.map((x,T)=>p.jsxs("li",{className:"flex items-center justify-between p-3 bg-gray-100 dark:bg-gray-700 rounded-md",children:[p.jsx("span",{className:"text-gray-800 dark:text-gray-200",children:x}),p.jsx("button",{onClick:()=>v(T),className:"text-red-500 hover:text-red-700 disabled:opacity-50",disabled:u,children:p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},T)),t.length===0&&p.jsx("p",{className:"text-center text-gray-500",children:"No goals set yet. Add one to get started!"})]})]})},ON=()=>p.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-saffron"}),NU=({user:n,isOpen:e,onClose:t,onSave:r})=>{const[a,l]=se.useState(n.name),[u,h]=se.useState(n.bio),[m,y]=se.useState(n.photoURL),[v,x]=se.useState(!1),[T,R]=se.useState("");if(!e)return null;const V=async M=>{M.preventDefault(),R(""),x(!0);try{await r({name:a,bio:u,photoURL:m}),t()}catch(W){R(W.message||"Failed to update profile")}finally{x(!1)}},U=M=>{M.target===M.currentTarget&&t()};return p.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:U,children:p.jsxs("div",{className:"bg-white dark:bg-surface-dark rounded-2xl shadow-2xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[p.jsxs("div",{className:"sticky top-0 bg-white dark:bg-surface-dark border-b border-border-light dark:border-border-dark px-6 py-4 flex items-center justify-between",children:[p.jsx("h2",{className:"text-2xl font-bold text-text-light dark:text-text-dark",children:"Edit Profile"}),p.jsx("button",{onClick:t,className:"text-text-muted-light dark:text-text-muted-dark hover:text-text-light dark:hover:text-text-dark transition-colors","aria-label":"Close",children:p.jsx("span",{className:"material-symbols-outlined text-3xl",children:"close"})})]}),p.jsxs("form",{onSubmit:V,className:"p-6 space-y-6",children:[T&&p.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg",children:T}),p.jsxs("div",{className:"flex flex-col items-center gap-4",children:[p.jsx("img",{src:m||n.photoURL,alt:a,className:"w-32 h-32 rounded-full object-cover border-4 border-primary shadow-lg",referrerPolicy:"no-referrer",onError:M=>{M.target.src=`https://ui-avatars.com/api/?name=${encodeURIComponent(a)}&size=128&background=ff9933&color=fff`}}),p.jsx("p",{className:"text-sm text-text-muted-light dark:text-text-muted-dark",children:"Profile Picture"})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"photoURL",className:"block text-sm font-medium text-text-light dark:text-text-dark mb-2",children:"Photo URL"}),p.jsx(W_,{id:"photoURL",type:"url",value:m,onChange:M=>y(M.target.value),placeholder:"https://example.com/photo.jpg",className:"w-full"}),p.jsx("p",{className:"mt-1 text-xs text-text-muted-light dark:text-text-muted-dark",children:"Enter a URL to your profile picture or leave it to use your Google photo"})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-text-light dark:text-text-dark mb-2",children:"Name"}),p.jsx(W_,{id:"name",type:"text",value:a,onChange:M=>l(M.target.value),placeholder:"Your name",required:!0,className:"w-full"})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"bio",className:"block text-sm font-medium text-text-light dark:text-text-dark mb-2",children:"Bio"}),p.jsx("textarea",{id:"bio",value:u,onChange:M=>h(M.target.value),placeholder:"Tell us about yourself...",rows:4,maxLength:200,className:"w-full px-4 py-3 rounded-lg border border-border-light dark:border-border-dark bg-white dark:bg-gray-800 text-text-light dark:text-text-dark focus:ring-2 focus:ring-primary focus:border-transparent transition-all resize-none"}),p.jsxs("p",{className:"mt-1 text-xs text-text-muted-light dark:text-text-muted-dark text-right",children:[u.length,"/200 characters"]})]}),p.jsxs("div",{className:"flex gap-3 pt-4",children:[p.jsx(aa,{type:"button",onClick:t,className:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800",disabled:v,children:"Cancel"}),p.jsx(aa,{type:"submit",className:"flex-1",disabled:v,children:v?p.jsxs(p.Fragment,{children:[p.jsx("span",{className:"material-symbols-outlined animate-spin mr-2",children:"progress_activity"}),"Saving..."]}):"Save Changes"})]})]})]})})},kU=()=>{const{user:n,logout:e,updateProfile:t}=sr(),[r,a]=se.useState(0),[l,u]=se.useState(0),[h,m]=se.useState(0),[y,v]=se.useState(!0),[x,T]=se.useState(!1);return se.useEffect(()=>{(async()=>{var V,U;if(n)try{v(!0);const W=(await pt.getPosts()).filter(Y=>Y.authorId===n.id);a(W.length),u(((V=n.followers)==null?void 0:V.length)||0),m(((U=n.following)==null?void 0:U.length)||0)}catch(M){console.error("Error fetching user stats:",M)}finally{v(!1)}})()},[n]),n?p.jsxs("div",{className:"max-w-4xl mx-auto space-y-8 p-4",children:[p.jsx("div",{className:"p-6 bg-white dark:bg-surface-dark rounded-lg shadow-md border border-border-light dark:border-border-dark",children:p.jsxs("div",{className:"flex flex-col sm:flex-row items-center space-y-4 sm:space-y-0 sm:space-x-6",children:[p.jsx("div",{className:"relative",children:p.jsx("img",{src:n.photoURL||"https://via.placeholder.com/120",alt:n.name,className:"w-28 h-28 rounded-full object-cover border-4 border-primary shadow-lg",referrerPolicy:"no-referrer"})}),p.jsxs("div",{className:"text-center sm:text-left flex-1",children:[p.jsx("h1",{className:"text-3xl font-bold text-text-light dark:text-text-dark",children:n.name}),p.jsx("p",{className:"text-md text-primary font-medium",children:n.email}),n.bio&&p.jsx("p",{className:"mt-2 text-text-muted-light dark:text-text-muted-dark",children:n.bio}),p.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-6 mt-4",children:[p.jsx("div",{className:"text-center",children:y?p.jsx(ON,{}):p.jsxs(p.Fragment,{children:[p.jsx("p",{className:"text-2xl font-bold text-text-light dark:text-text-dark",children:r}),p.jsx("p",{className:"text-sm text-text-muted-light dark:text-text-muted-dark",children:"Posts"})]})}),p.jsxs("div",{className:"text-center",children:[p.jsx("p",{className:"text-2xl font-bold text-text-light dark:text-text-dark",children:l}),p.jsx("p",{className:"text-sm text-text-muted-light dark:text-text-muted-dark",children:"Followers"})]}),p.jsxs("div",{className:"text-center",children:[p.jsx("p",{className:"text-2xl font-bold text-text-light dark:text-text-dark",children:h}),p.jsx("p",{className:"text-sm text-text-muted-light dark:text-text-muted-dark",children:"Following"})]})]})]}),p.jsx("div",{className:"sm:ml-auto",children:p.jsxs(aa,{onClick:()=>T(!0),children:[p.jsx("span",{className:"material-symbols-outlined mr-2",children:"edit"}),"Edit Profile"]})})]})}),p.jsx(RU,{initialGoals:n.goals}),p.jsx(NU,{user:n,isOpen:x,onClose:()=>T(!1),onSave:t})]}):p.jsx("div",{children:"Please log in to see your profile."})},CU=()=>{const{user:n}=sr(),[e,t]=se.useState([]),[r,a]=se.useState([]),[l,u]=se.useState(!0),[h,m]=se.useState(null),y=async()=>{try{u(!0);const Y=await pt.getPosts();a(Y),t(Y.filter(X=>X.authorId===(n==null?void 0:n.id)))}catch(Y){console.error("Error fetching posts:",Y)}finally{u(!1)}};se.useEffect(()=>{n&&y()},[n]);const v=Y=>{t(X=>[Y,...X]),a(X=>[Y,...X])},x=async Y=>{if(window.confirm("Are you sure you want to delete this post? This action cannot be undone, and all images will be removed from storage."))try{m(Y),await pt.deletePost(Y),t(oe=>oe.filter(ye=>ye.id!==Y)),a(oe=>oe.filter(ye=>ye.id!==Y)),alert("Post deleted successfully!")}catch(oe){console.error("Error deleting post:",oe),alert("Failed to delete post. Please try again.")}finally{m(null)}};if((n==null?void 0:n.role)!=="admin")return p.jsx("div",{className:"flex items-center justify-center min-h-screen bg-background-light dark:bg-background-dark",children:p.jsxs("div",{className:"text-center p-8 bg-white dark:bg-surface-dark rounded-2xl shadow-xl border border-border-light dark:border-border-dark max-w-md",children:[p.jsx("div",{className:"mb-4 flex justify-center",children:p.jsx("div",{className:"w-20 h-20 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center",children:p.jsx("span",{className:"material-symbols-outlined text-5xl text-red-600 dark:text-red-400",children:"block"})})}),p.jsx("h1",{className:"text-3xl font-bold text-text-light dark:text-text-dark mb-2",children:"Access Denied"}),p.jsx("p",{className:"text-text-muted-light dark:text-text-muted-dark",children:"You do not have permission to view this page."})]})});const T=r.length,R=e.length,V=e.reduce((Y,X)=>Y+(X.likesCount||0),0),U=e.reduce((Y,X)=>Y+(X.commentsCount||0),0),M=e.reduce((Y,X)=>Y+(X.sharesCount||0),0),W=R>0?Math.round((V+U+M)/R):0;return p.jsxs("div",{className:"min-h-screen bg-background-light dark:bg-background-dark p-4 md:p-6 space-y-6",children:[p.jsx("div",{className:"bg-gradient-to-r from-primary to-orange-600 rounded-2xl shadow-lg p-6 md:p-8 text-white",children:p.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[p.jsxs("div",{children:[p.jsxs("h1",{className:"text-3xl md:text-4xl font-bold mb-2 flex items-center gap-3",children:[p.jsx("span",{className:"material-symbols-outlined text-5xl",children:"admin_panel_settings"}),"Admin Dashboard"]}),p.jsxs("p",{className:"text-white/90 text-lg",children:["Welcome back, ",n==null?void 0:n.name,"!"]})]}),p.jsx("div",{children:p.jsx(Y_,{onPostCreated:v})})]})}),p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[p.jsx("div",{className:"bg-white dark:bg-surface-dark rounded-2xl shadow-md border border-border-light dark:border-border-dark p-6 hover:shadow-lg transition-shadow",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-text-muted-light dark:text-text-muted-dark text-sm font-medium",children:"Total Posts"}),p.jsx("h3",{className:"text-3xl font-bold text-text-light dark:text-text-dark mt-2",children:T}),p.jsx("p",{className:"text-xs text-primary mt-1",children:"Platform-wide"})]}),p.jsx("div",{className:"w-14 h-14 bg-blue-100 dark:bg-blue-900/30 rounded-xl flex items-center justify-center",children:p.jsx("span",{className:"material-symbols-outlined text-3xl text-blue-600 dark:text-blue-400",children:"article"})})]})}),p.jsx("div",{className:"bg-white dark:bg-surface-dark rounded-2xl shadow-md border border-border-light dark:border-border-dark p-6 hover:shadow-lg transition-shadow",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-text-muted-light dark:text-text-muted-dark text-sm font-medium",children:"My Posts"}),p.jsx("h3",{className:"text-3xl font-bold text-text-light dark:text-text-dark mt-2",children:R}),p.jsx("p",{className:"text-xs text-green-600 dark:text-green-400 mt-1",children:"Your content"})]}),p.jsx("div",{className:"w-14 h-14 bg-green-100 dark:bg-green-900/30 rounded-xl flex items-center justify-center",children:p.jsx("span",{className:"material-symbols-outlined text-3xl text-green-600 dark:text-green-400",children:"edit_note"})})]})}),p.jsx("div",{className:"bg-white dark:bg-surface-dark rounded-2xl shadow-md border border-border-light dark:border-border-dark p-6 hover:shadow-lg transition-shadow",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-text-muted-light dark:text-text-muted-dark text-sm font-medium",children:"Total Engagement"}),p.jsx("h3",{className:"text-3xl font-bold text-text-light dark:text-text-dark mt-2",children:V+U+M}),p.jsxs("p",{className:"text-xs text-purple-600 dark:text-purple-400 mt-1",children:[V," likes, ",U," comments"]})]}),p.jsx("div",{className:"w-14 h-14 bg-purple-100 dark:bg-purple-900/30 rounded-xl flex items-center justify-center",children:p.jsx("span",{className:"material-symbols-outlined text-3xl text-purple-600 dark:text-purple-400",children:"favorite"})})]})}),p.jsx("div",{className:"bg-white dark:bg-surface-dark rounded-2xl shadow-md border border-border-light dark:border-border-dark p-6 hover:shadow-lg transition-shadow",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-text-muted-light dark:text-text-muted-dark text-sm font-medium",children:"Avg per Post"}),p.jsx("h3",{className:"text-3xl font-bold text-text-light dark:text-text-dark mt-2",children:W}),p.jsx("p",{className:"text-xs text-orange-600 dark:text-orange-400 mt-1",children:"Interactions"})]}),p.jsx("div",{className:"w-14 h-14 bg-orange-100 dark:bg-orange-900/30 rounded-xl flex items-center justify-center",children:p.jsx("span",{className:"material-symbols-outlined text-3xl text-orange-600 dark:text-orange-400",children:"trending_up"})})]})})]}),p.jsxs("div",{className:"bg-white dark:bg-surface-dark rounded-2xl shadow-lg border border-border-light dark:border-border-dark overflow-hidden",children:[p.jsx("div",{className:"p-6 border-b border-border-light dark:border-border-dark bg-gradient-to-r from-primary/5 to-orange-600/5",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("span",{className:"material-symbols-outlined text-3xl text-primary",children:"history"}),p.jsx("h2",{className:"text-2xl font-bold text-text-light dark:text-text-dark",children:"My Recent Posts"})]}),p.jsxs("span",{className:"text-sm font-semibold text-primary bg-primary/10 px-3 py-1 rounded-full",children:[R," Posts"]})]})}),p.jsx("div",{className:"p-6",children:l?p.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[p.jsx("span",{className:"material-symbols-outlined text-5xl text-primary animate-spin",children:"progress_activity"}),p.jsx("p",{className:"text-text-muted-light dark:text-text-muted-dark mt-4",children:"Loading your posts..."})]}):e.length>0?p.jsx("div",{className:"space-y-4",children:e.map(Y=>p.jsx("div",{className:"border border-border-light dark:border-border-dark rounded-xl p-5 bg-background-light dark:bg-gray-800/50 hover:shadow-md transition-all group",children:p.jsxs("div",{className:"flex items-start gap-4",children:[p.jsx("img",{src:Y.authorPhotoURL,alt:Y.authorName,className:"w-12 h-12 rounded-full border-2 border-primary",referrerPolicy:"no-referrer"}),p.jsxs("div",{className:"flex-1",children:[p.jsxs("div",{className:"flex items-center justify-between mb-2",children:[p.jsxs("div",{children:[p.jsx("p",{className:"font-bold text-text-light dark:text-text-dark",children:Y.authorName}),p.jsx("p",{className:"text-xs text-text-muted-light dark:text-text-muted-dark",children:Y.createdAt.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})})]}),p.jsx("button",{onClick:()=>x(Y.id),disabled:h===Y.id,className:"opacity-0 group-hover:opacity-100 transition-opacity bg-red-500 hover:bg-red-600 disabled:bg-gray-400 text-white px-3 py-1.5 rounded-lg text-sm font-semibold flex items-center gap-1 shadow-md",title:"Delete post",children:h===Y.id?p.jsxs(p.Fragment,{children:[p.jsx("span",{className:"material-symbols-outlined text-sm animate-spin",children:"progress_activity"}),"Deleting..."]}):p.jsxs(p.Fragment,{children:[p.jsx("span",{className:"material-symbols-outlined text-sm",children:"delete"}),"Delete"]})})]}),p.jsx("p",{className:"text-text-light dark:text-text-dark mb-3 line-clamp-3",children:Y.content}),Y.mediaURL&&p.jsx("div",{className:"mb-3 rounded-xl overflow-hidden bg-gray-100 dark:bg-gray-800",children:Y.mediaType==="video"?p.jsx("video",{src:Y.mediaURL,controls:!0,className:"w-full max-h-96 object-cover"}):(()=>{try{const X=JSON.parse(Y.mediaURL);if(X.urls&&Array.isArray(X.urls)&&X.urls.length>0){const oe=X.aspectRatios||[],ye=he=>{switch(he){case"16:9":return"aspect-video";case"9:16":return"aspect-[9/16]";case"1:1":default:return"aspect-square"}};return p.jsx("div",{className:"grid grid-cols-2 gap-2",children:X.urls.slice(0,4).map((he,C)=>p.jsxs("div",{className:"relative",children:[p.jsx("img",{src:he,alt:`Media ${C+1}`,className:`w-full object-cover ${ye(oe[C]||"1:1")}`}),C===3&&X.urls.length>4&&p.jsx("div",{className:"absolute inset-0 bg-black/60 flex items-center justify-center",children:p.jsxs("span",{className:"text-white text-2xl font-bold",children:["+",X.urls.length-4]})})]},C))})}}catch{}return p.jsx("img",{src:Y.mediaURL,alt:"Post media",className:"w-full max-h-96 object-cover"})})()}),p.jsxs("div",{className:"flex items-center gap-6 text-sm",children:[p.jsxs("div",{className:"flex items-center gap-1 text-text-muted-light dark:text-text-muted-dark",children:[p.jsx("span",{className:"material-symbols-outlined text-lg text-red-500",children:"favorite"}),p.jsx("span",{className:"font-medium",children:Y.likesCount||0})]}),p.jsxs("div",{className:"flex items-center gap-1 text-text-muted-light dark:text-text-muted-dark",children:[p.jsx("span",{className:"material-symbols-outlined text-lg text-blue-500",children:"chat_bubble"}),p.jsx("span",{className:"font-medium",children:Y.commentsCount||0})]}),p.jsxs("div",{className:"flex items-center gap-1 text-text-muted-light dark:text-text-muted-dark",children:[p.jsx("span",{className:"material-symbols-outlined text-lg text-green-500",children:"send"}),p.jsx("span",{className:"font-medium",children:Y.sharesCount||0})]})]})]})]})},Y.id))}):p.jsxs("div",{className:"flex flex-col items-center justify-center py-16",children:[p.jsx("div",{className:"w-24 h-24 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mb-4",children:p.jsx("span",{className:"material-symbols-outlined text-5xl text-text-muted-light dark:text-text-muted-dark",children:"post_add"})}),p.jsx("h3",{className:"text-xl font-bold text-text-light dark:text-text-dark mb-2",children:"No posts yet"}),p.jsx("p",{className:"text-text-muted-light dark:text-text-muted-dark mb-6 text-center max-w-md",children:"You haven't created any posts yet. Start sharing your thoughts with the community!"}),p.jsx("div",{children:p.jsx(Y_,{onPostCreated:v})})]})})]})]})},DU=()=>p.jsxs("div",{className:"bg-white dark:bg-surface-dark rounded-2xl shadow-lg border border-border-light dark:border-border-dark overflow-hidden animate-fadeIn",children:[p.jsx("div",{className:"h-24 sm:h-32 skeleton"}),p.jsx("div",{className:"relative px-4 sm:px-6 -mt-10 sm:-mt-12 mb-4",children:p.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 rounded-full skeleton border-4 border-white dark:border-surface-dark mx-auto"})}),p.jsxs("div",{className:"px-4 sm:px-6 pb-4 sm:pb-6 text-center space-y-3",children:[p.jsx("div",{className:"h-5 w-32 skeleton rounded mx-auto"}),p.jsx("div",{className:"h-4 w-20 skeleton rounded mx-auto"}),p.jsx("div",{className:"h-3 w-full skeleton rounded"}),p.jsx("div",{className:"h-3 w-4/5 skeleton rounded mx-auto"}),p.jsxs("div",{className:"flex items-center justify-center gap-4 py-3 border-y border-border-light dark:border-border-dark my-4",children:[p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"h-6 w-10 skeleton rounded mx-auto mb-1"}),p.jsx("div",{className:"h-3 w-16 skeleton rounded"})]}),p.jsx("div",{className:"w-px h-8 bg-border-light dark:border-border-dark"}),p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"h-6 w-10 skeleton rounded mx-auto mb-1"}),p.jsx("div",{className:"h-3 w-16 skeleton rounded"})]})]}),p.jsx("div",{className:"h-10 w-full skeleton rounded-xl"})]})]}),PU=({count:n=6})=>p.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:Array.from({length:n}).map((e,t)=>p.jsx("div",{style:{animationDelay:`${t*50}ms`},children:p.jsx(DU,{})},t))}),OU=()=>{const{user:n,follow:e,unfollow:t}=sr(),[r,a]=se.useState([]),[l,u]=se.useState(!0),[h,m]=se.useState("all");se.useEffect(()=>{(async()=>{try{u(!0);const R=await pt.getAdmins();console.log("Fetched admins:",R),R.forEach(V=>{console.log(`Admin ${V.name} photoURL:`,V.photoURL)}),a(R.filter(V=>V.id!==(n==null?void 0:n.id)))}catch(R){console.error("Error fetching admins:",R)}finally{u(!1)}})()},[n]);const y=async(T,R)=>{try{R?await t(T):await e(T);const V=await pt.getAdmins();a(V.filter(U=>U.id!==(n==null?void 0:n.id)))}catch(V){console.error("Error toggling follow:",V)}},v=h==="all"?r:r.filter(T=>{var R;return(R=n==null?void 0:n.following)==null?void 0:R.includes(T.id)}),x=r.filter(T=>{var R;return(R=n==null?void 0:n.following)==null?void 0:R.includes(T.id)}).length;return l?p.jsx("div",{className:"min-h-screen bg-gradient-to-b from-background-light to-gray-50 dark:from-background-dark dark:to-gray-900",children:p.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-6 pb-20 sm:pb-6",children:[p.jsx("div",{className:"mb-6 sm:mb-8",children:p.jsx("div",{className:"bg-gradient-to-r from-primary to-orange-600 rounded-2xl p-6 sm:p-8 shadow-xl",children:p.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[p.jsxs("div",{className:"flex-1",children:[p.jsx("div",{className:"h-8 w-48 skeleton rounded-lg mb-2"}),p.jsx("div",{className:"h-4 w-64 skeleton rounded"})]}),p.jsxs("div",{className:"flex gap-3 sm:gap-4",children:[p.jsx("div",{className:"bg-white/20 backdrop-blur-sm rounded-xl px-4 py-3 w-20 h-20"}),p.jsx("div",{className:"bg-white/20 backdrop-blur-sm rounded-xl px-4 py-3 w-20 h-20"})]})]})})}),p.jsx("div",{className:"mb-6",children:p.jsxs("div",{className:"bg-white dark:bg-surface-dark rounded-xl shadow-sm border border-border-light dark:border-border-dark p-1 flex gap-1",children:[p.jsx("div",{className:"flex-1 h-12 skeleton rounded-lg"}),p.jsx("div",{className:"flex-1 h-12 skeleton rounded-lg"})]})}),p.jsx(PU,{count:6})]})}):p.jsx("div",{className:"min-h-screen bg-gradient-to-b from-background-light to-gray-50 dark:from-background-dark dark:to-gray-900",children:p.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-6 pb-20 sm:pb-6",children:[p.jsx("div",{className:"mb-6 sm:mb-8",children:p.jsx("div",{className:"bg-gradient-to-r from-primary to-orange-600 rounded-2xl p-6 sm:p-8 text-white shadow-xl",children:p.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[p.jsxs("div",{className:"flex-1",children:[p.jsxs("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold mb-2 flex items-center gap-3",children:[p.jsx("span",{className:"material-symbols-outlined text-4xl sm:text-5xl",children:"diversity_3"}),"Your Network"]}),p.jsx("p",{className:"text-white/90 text-sm sm:text-base",children:"Connect with leaders and grow together"})]}),p.jsxs("div",{className:"flex gap-3 sm:gap-4",children:[p.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-xl px-4 py-3 text-center",children:[p.jsx("p",{className:"text-2xl sm:text-3xl font-bold",children:r.length}),p.jsx("p",{className:"text-xs sm:text-sm text-white/80",children:"Leaders"})]}),p.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-xl px-4 py-3 text-center",children:[p.jsx("p",{className:"text-2xl sm:text-3xl font-bold",children:x}),p.jsx("p",{className:"text-xs sm:text-sm text-white/80",children:"Following"})]})]})]})})}),p.jsx("div",{className:"mb-6",children:p.jsxs("div",{className:"bg-white dark:bg-surface-dark rounded-xl shadow-sm border border-border-light dark:border-border-dark p-1 flex gap-1",children:[p.jsx("button",{onClick:()=>m("all"),className:`flex-1 py-2.5 sm:py-3 px-4 rounded-lg font-semibold text-sm sm:text-base transition-all ${h==="all"?"bg-primary text-white shadow-md":"text-text-muted-light dark:text-text-muted-dark hover:bg-gray-100 dark:hover:bg-gray-800"}`,children:p.jsxs("span",{className:"flex items-center justify-center gap-2",children:[p.jsx("span",{className:"material-symbols-outlined text-lg sm:text-xl",children:"groups"}),p.jsx("span",{children:"All Leaders"}),p.jsx("span",{className:"ml-1 text-xs bg-white/20 px-2 py-0.5 rounded-full",children:r.length})]})}),p.jsx("button",{onClick:()=>m("following"),className:`flex-1 py-2.5 sm:py-3 px-4 rounded-lg font-semibold text-sm sm:text-base transition-all ${h==="following"?"bg-primary text-white shadow-md":"text-text-muted-light dark:text-text-muted-dark hover:bg-gray-100 dark:hover:bg-gray-800"}`,children:p.jsxs("span",{className:"flex items-center justify-center gap-2",children:[p.jsx("span",{className:"material-symbols-outlined text-lg sm:text-xl",children:"check_circle"}),p.jsx("span",{children:"Following"}),p.jsx("span",{className:"ml-1 text-xs bg-white/20 px-2 py-0.5 rounded-full",children:x})]})})]})}),v.length===0?p.jsxs("div",{className:"bg-white dark:bg-surface-dark rounded-2xl shadow-lg border border-border-light dark:border-border-dark p-8 sm:p-12 text-center",children:[p.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 mx-auto bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mb-4 sm:mb-6",children:p.jsx("span",{className:"material-symbols-outlined text-4xl sm:text-5xl text-text-muted-light dark:text-text-muted-dark",children:h==="following"?"person_search":"group_off"})}),p.jsx("h3",{className:"text-lg sm:text-xl font-bold text-text-light dark:text-text-dark mb-2",children:h==="following"?"Not following anyone yet":"No leaders found"}),p.jsx("p",{className:"text-sm sm:text-base text-text-muted-light dark:text-text-muted-dark mb-6",children:h==="following"?"Start following leaders to see them here!":"Check back later for inspiring leaders to connect with."}),h==="following"&&p.jsx("button",{onClick:()=>m("all"),className:"bg-primary hover:bg-primary/90 text-white px-6 py-2.5 sm:py-3 rounded-xl font-semibold shadow-lg transition-all",children:"Discover Leaders"})]}):p.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:v.map((T,R)=>{var U,M,W;const V=((U=n==null?void 0:n.following)==null?void 0:U.includes(T.id))??!1;return p.jsxs("div",{className:"bg-white dark:bg-surface-dark rounded-2xl shadow-lg border border-border-light dark:border-border-dark overflow-hidden hover:shadow-xl transition-all group animate-fadeIn",style:{animationDelay:`${R*50}ms`},children:[p.jsx("div",{className:"relative h-24 sm:h-32 bg-gradient-to-r from-primary to-orange-600",children:p.jsx("div",{className:"absolute -bottom-10 sm:-bottom-12 left-1/2 transform -translate-x-1/2",children:p.jsxs("div",{className:"relative",children:[console.log("Rendering Avatar for:",T.name,"photoURL:",T.photoURL),p.jsx(pm,{src:T.photoURL,alt:T.name,size:"xl"}),V&&p.jsx("div",{className:"absolute -top-1 -right-1 w-6 h-6 bg-green-500 rounded-full border-2 border-white dark:border-surface-dark flex items-center justify-center",children:p.jsx("span",{className:"material-symbols-outlined text-white text-sm",children:"check"})})]})})}),p.jsxs("div",{className:"pt-12 sm:pt-14 px-4 sm:px-6 pb-4 sm:pb-6 text-center",children:[p.jsx("h2",{className:"text-lg sm:text-xl font-bold text-text-light dark:text-text-dark mb-1",children:T.name}),p.jsxs("div",{className:"flex items-center justify-center gap-1 mb-3",children:[p.jsx("span",{className:"material-symbols-outlined text-primary text-sm",children:"admin_panel_settings"}),p.jsx("p",{className:"text-xs sm:text-sm text-primary font-semibold uppercase tracking-wide",children:T.role})]}),p.jsx("p",{className:"text-sm text-text-muted-light dark:text-text-muted-dark mb-4 line-clamp-2 min-h-[2.5rem]",children:T.bio}),p.jsxs("div",{className:"flex items-center justify-center gap-4 mb-4 py-3 border-y border-border-light dark:border-border-dark",children:[p.jsxs("div",{className:"text-center",children:[p.jsx("p",{className:"text-lg font-bold text-text-light dark:text-text-dark",children:((M=T.followers)==null?void 0:M.length)||0}),p.jsx("p",{className:"text-xs text-text-muted-light dark:text-text-muted-dark",children:"Followers"})]}),p.jsx("div",{className:"w-px h-8 bg-border-light dark:border-border-dark"}),p.jsxs("div",{className:"text-center",children:[p.jsx("p",{className:"text-lg font-bold text-text-light dark:text-text-dark",children:((W=T.following)==null?void 0:W.length)||0}),p.jsx("p",{className:"text-xs text-text-muted-light dark:text-text-muted-dark",children:"Following"})]})]}),p.jsx("button",{onClick:()=>y(T.id,V),className:`w-full py-2.5 sm:py-3 rounded-xl font-bold text-sm sm:text-base transition-all shadow-md ${V?"bg-gray-100 dark:bg-gray-800 text-text-light dark:text-text-dark hover:bg-gray-200 dark:hover:bg-gray-700":"bg-primary text-white hover:bg-primary/90"}`,children:p.jsxs("span",{className:"flex items-center justify-center gap-2",children:[p.jsx("span",{className:"material-symbols-outlined text-lg",children:V?"check_circle":"person_add"}),V?"Following":"Follow"]})})]})]},T.id)})})]})})},VU=()=>{const{user:n,logout:e}=sr(),{theme:t,toggleTheme:r}=QI(),[a,l]=se.useState(!1),u=async()=>{if(window.confirm("Are you sure you want to sign out?")){l(!0);try{await e()}catch(h){console.error("Logout error:",h),l(!1)}}};return p.jsxs("div",{className:"max-w-4xl mx-auto space-y-6 p-4",children:[p.jsxs("div",{className:"bg-white dark:bg-surface-dark rounded-2xl shadow-md border border-border-light dark:border-border-dark p-6",children:[p.jsxs("h1",{className:"text-3xl font-bold text-text-light dark:text-text-dark flex items-center gap-3",children:[p.jsx("span",{className:"material-symbols-outlined text-4xl text-primary",children:"settings"}),"Settings"]}),p.jsx("p",{className:"text-text-muted-light dark:text-text-muted-dark mt-2",children:"Manage your account and preferences"})]}),p.jsxs("div",{className:"bg-white dark:bg-surface-dark rounded-2xl shadow-md border border-border-light dark:border-border-dark overflow-hidden",children:[p.jsx("div",{className:"p-6 border-b border-border-light dark:border-border-dark",children:p.jsxs("h2",{className:"text-xl font-bold text-text-light dark:text-text-dark flex items-center gap-2",children:[p.jsx("span",{className:"material-symbols-outlined text-primary",children:"account_circle"}),"Account"]})}),p.jsx("div",{className:"p-6 space-y-4",children:p.jsxs("div",{className:"flex items-center gap-4 p-4 bg-background-light dark:bg-gray-800 rounded-lg",children:[p.jsx("img",{src:n==null?void 0:n.photoURL,alt:n==null?void 0:n.name,className:"w-16 h-16 rounded-full border-2 border-primary",referrerPolicy:"no-referrer"}),p.jsxs("div",{className:"flex-1",children:[p.jsx("h3",{className:"font-bold text-lg text-text-light dark:text-text-dark",children:n==null?void 0:n.name}),p.jsx("p",{className:"text-sm text-text-muted-light dark:text-text-muted-dark",children:n==null?void 0:n.email}),p.jsx("p",{className:"text-xs text-primary mt-1 capitalize",children:n==null?void 0:n.role})]})]})})]}),p.jsxs("div",{className:"bg-white dark:bg-surface-dark rounded-2xl shadow-md border border-border-light dark:border-border-dark overflow-hidden",children:[p.jsx("div",{className:"p-6 border-b border-border-light dark:border-border-dark",children:p.jsxs("h2",{className:"text-xl font-bold text-text-light dark:text-text-dark flex items-center gap-2",children:[p.jsx("span",{className:"material-symbols-outlined text-primary",children:"palette"}),"Appearance"]})}),p.jsx("div",{className:"p-6",children:p.jsxs("div",{className:"flex items-center justify-between p-4 bg-background-light dark:bg-gray-800 rounded-lg",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("span",{className:"material-symbols-outlined text-2xl text-text-light dark:text-text-dark",children:t==="dark"?"dark_mode":"light_mode"}),p.jsxs("div",{children:[p.jsx("h3",{className:"font-semibold text-text-light dark:text-text-dark",children:"Theme"}),p.jsx("p",{className:"text-sm text-text-muted-light dark:text-text-muted-dark",children:t==="dark"?"Dark mode":"Light mode"})]})]}),p.jsx("button",{onClick:r,className:"relative inline-flex h-8 w-14 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2",style:{backgroundColor:t==="dark"?"#ff9933":"#e5e7eb"},children:p.jsx("span",{className:`inline-block h-6 w-6 transform rounded-full bg-white transition-transform ${t==="dark"?"translate-x-7":"translate-x-1"}`})})]})})]}),p.jsxs("div",{className:"bg-white dark:bg-surface-dark rounded-2xl shadow-md border border-border-light dark:border-border-dark overflow-hidden",children:[p.jsx("div",{className:"p-6 border-b border-border-light dark:border-border-dark",children:p.jsxs("h2",{className:"text-xl font-bold text-text-light dark:text-text-dark flex items-center gap-2",children:[p.jsx("span",{className:"material-symbols-outlined text-primary",children:"shield"}),"Privacy & Security"]})}),p.jsxs("div",{className:"p-6 space-y-3",children:[p.jsxs("button",{className:"w-full flex items-center justify-between p-4 bg-background-light dark:bg-gray-800 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("span",{className:"material-symbols-outlined text-xl text-text-light dark:text-text-dark",children:"lock"}),p.jsx("span",{className:"font-medium text-text-light dark:text-text-dark",children:"Change Password"})]}),p.jsx("span",{className:"material-symbols-outlined text-text-muted-light dark:text-text-muted-dark",children:"chevron_right"})]}),p.jsxs("button",{className:"w-full flex items-center justify-between p-4 bg-background-light dark:bg-gray-800 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("span",{className:"material-symbols-outlined text-xl text-text-light dark:text-text-dark",children:"privacy_tip"}),p.jsx("span",{className:"font-medium text-text-light dark:text-text-dark",children:"Privacy Settings"})]}),p.jsx("span",{className:"material-symbols-outlined text-text-muted-light dark:text-text-muted-dark",children:"chevron_right"})]}),p.jsxs("button",{className:"w-full flex items-center justify-between p-4 bg-background-light dark:bg-gray-800 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("span",{className:"material-symbols-outlined text-xl text-text-light dark:text-text-dark",children:"block"}),p.jsx("span",{className:"font-medium text-text-light dark:text-text-dark",children:"Blocked Users"})]}),p.jsx("span",{className:"material-symbols-outlined text-text-muted-light dark:text-text-muted-dark",children:"chevron_right"})]})]})]}),p.jsxs("div",{className:"bg-white dark:bg-surface-dark rounded-2xl shadow-md border border-border-light dark:border-border-dark overflow-hidden",children:[p.jsx("div",{className:"p-6 border-b border-border-light dark:border-border-dark",children:p.jsxs("h2",{className:"text-xl font-bold text-text-light dark:text-text-dark flex items-center gap-2",children:[p.jsx("span",{className:"material-symbols-outlined text-primary",children:"info"}),"About"]})}),p.jsxs("div",{className:"p-6 space-y-3",children:[p.jsxs("button",{className:"w-full flex items-center justify-between p-4 bg-background-light dark:bg-gray-800 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("span",{className:"material-symbols-outlined text-xl text-text-light dark:text-text-dark",children:"description"}),p.jsx("span",{className:"font-medium text-text-light dark:text-text-dark",children:"Terms of Service"})]}),p.jsx("span",{className:"material-symbols-outlined text-text-muted-light dark:text-text-muted-dark",children:"chevron_right"})]}),p.jsxs("button",{className:"w-full flex items-center justify-between p-4 bg-background-light dark:bg-gray-800 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("span",{className:"material-symbols-outlined text-xl text-text-light dark:text-text-dark",children:"policy"}),p.jsx("span",{className:"font-medium text-text-light dark:text-text-dark",children:"Privacy Policy"})]}),p.jsx("span",{className:"material-symbols-outlined text-text-muted-light dark:text-text-muted-dark",children:"chevron_right"})]}),p.jsx("div",{className:"p-4 bg-background-light dark:bg-gray-800 rounded-lg",children:p.jsx("p",{className:"text-sm text-text-muted-light dark:text-text-muted-dark text-center",children:"Version 1.0.0"})})]})]}),p.jsx("div",{className:"bg-white dark:bg-surface-dark rounded-2xl shadow-md border border-border-light dark:border-border-dark overflow-hidden",children:p.jsxs("div",{className:"p-6",children:[p.jsx(aa,{onClick:u,variant:"danger",className:"w-full text-lg py-4",disabled:a,children:a?p.jsxs(p.Fragment,{children:[p.jsx("span",{className:"material-symbols-outlined animate-spin mr-2",children:"progress_activity"}),"Signing Out..."]}):p.jsxs(p.Fragment,{children:[p.jsx("span",{className:"material-symbols-outlined mr-2",children:"logout"}),"Sign Out"]})}),p.jsx("p",{className:"text-xs text-text-muted-light dark:text-text-muted-dark text-center mt-3",children:"You will be logged out of your account"})]})})]})},MU=({icon:n,label:e,isActive:t,onClick:r})=>p.jsxs("button",{onClick:r,className:`flex flex-col items-center justify-center w-full pt-2 pb-1 transition-all duration-200 relative ${t?"text-saffron":"text-gray-600 dark:text-gray-400"}`,children:[p.jsx("span",{className:`transition-transform ${t?"scale-110":""}`,children:n}),p.jsx("span",{className:"text-xs font-medium mt-1",children:e}),t&&p.jsx("span",{className:"absolute top-0 w-8 h-1 bg-saffron rounded-b-full"})]}),jU=({currentPage:n,setCurrentPage:e})=>{const{user:t}=sr(),r=[{page:"feed",label:"Home",icon:p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})},{page:"users",label:"Network",icon:p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.653-.124-1.282-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.653.124-1.282.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})},{page:"profile",label:"Profile",icon:p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})},{page:"settings",label:"Settings",icon:p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}];return(t==null?void 0:t.role)==="admin"&&r.splice(3,0,{page:"admin",label:"Admin",icon:p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})})}),p.jsx("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-surface-light/95 dark:bg-surface-dark/95 border-t border-border-light dark:border-border-dark shadow-lg z-10 backdrop-blur-sm",children:p.jsx("div",{className:"flex justify-around items-center h-16",children:r.map(a=>p.jsx(MU,{label:a.label,icon:a.icon,isActive:n===a.page,onClick:()=>e(a.page)},a.page))})})},LU=({currentPage:n,setCurrentPage:e})=>{const t=()=>{switch(n){case"feed":return p.jsx(FI,{});case"profile":return p.jsx(kU,{});case"admin":return p.jsx(CU,{});case"users":return p.jsx(OU,{});case"settings":return p.jsx(VU,{});default:return p.jsx(FI,{})}};return p.jsxs("div",{className:"flex flex-col min-h-screen bg-background-light dark:bg-background-dark",children:[p.jsx(AC,{currentPage:n,setCurrentPage:e}),p.jsx("main",{className:"flex-1 overflow-y-auto",children:t()}),p.jsx(jU,{currentPage:n,setCurrentPage:e})]})};function UU(){const[n,e]=se.useState(null),[t,r]=se.useState(!0),[a,l]=se.useState("feed"),[u,h]=se.useState(Xn.getCurrentRoute());se.useEffect(()=>{const W=()=>{const Y=Xn.getCurrentRoute();switch(h(Y),Y){case"/feed":l("feed");break;case"/profile":l("profile");break;case"/users":l("users");break;case"/admin":l("admin");break;case"/settings":l("settings");break;default:n&&l("feed")}};return W(),window.addEventListener("popstate",W),()=>window.removeEventListener("popstate",W)},[n]),se.useEffect(()=>{const W=Ks.onAuthStateChanged(async Y=>{if(Y)try{const X=await gm(Y);e(X);const oe=Xn.getCurrentRoute();(oe==="/"||oe==="/login"||oe==="/signup")&&Xn.replace("/feed")}catch(X){console.error("Error fetching user profile:",X),e(null)}else{e(null);const X=Xn.getCurrentRoute();X!=="/login"&&X!=="/signup"&&X!=="/"&&Xn.replace("/login")}r(!1)});return()=>W()},[]);const m=async(W,Y)=>{const X=await pt.login(W,Y);return e(X),Xn.push("/feed"),X},y=async()=>{const W=await pt.loginWithGoogle();return e(W),Xn.push("/feed"),W},v=async(W,Y,X)=>{const oe=await pt.signup(W,Y,X);return e(oe),Xn.push("/feed"),oe},x=async()=>{await pt.logout(),e(null),l("feed"),Xn.push("/login")},T=W=>{n&&e({...n,...W})},R=se.useCallback(W=>{n&&(pt.follow(n.id,W),T({following:[...n.following,W]}))},[n]),V=se.useCallback(W=>{n&&(pt.unfollow(n.id,W),T({following:n.following.filter(Y=>Y!==W)}))},[n]),U=async W=>{n&&(await pt.updateUserProfile(n.id,W),T(W))};if(t)return p.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-br from-primary/10 to-orange-600/10 dark:from-gray-900 dark:to-gray-800",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"mb-6 animate-bounce",children:p.jsx("div",{className:"w-20 h-20 bg-gradient-to-r from-primary to-orange-600 rounded-2xl flex items-center justify-center shadow-2xl mx-auto",children:p.jsx("span",{className:"material-symbols-outlined text-white text-4xl",children:"rocket_launch"})})}),p.jsx(ON,{}),p.jsx("h2",{className:"text-2xl font-bold text-primary mt-6 mb-2",children:"Productive Bharat"}),p.jsx("p",{className:"text-text-muted-light dark:text-text-muted-dark animate-pulse",children:"Loading your experience..."})]})});const M=W=>{l(W);const Y={feed:"/feed",profile:"/profile",users:"/users",admin:"/admin",settings:"/settings",chat:"/chat"};Xn.push(Y[W])};return p.jsx(xC,{children:p.jsx(HI.Provider,{value:{user:n,login:m,loginWithGoogle:y,logout:x,signup:v,follow:R,unfollow:V,updateProfile:U},children:p.jsx("div",{className:"App",children:n?p.jsx(LU,{currentPage:a,setCurrentPage:M}):p.jsx(IC,{currentRoute:u})})})})}const VN=document.getElementById("root");if(!VN)throw new Error("Could not find root element to mount to");const zU=bC.createRoot(VN);zU.render(p.jsx(Gm.StrictMode,{children:p.jsx(UU,{})}));
